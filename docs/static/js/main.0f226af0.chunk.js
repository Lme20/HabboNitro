(this["webpackJsonpnitro-react"]=this["webpackJsonpnitro-react"]||[]).push([[0],{133:function(e,t,s){},134:function(e,t,s){"use strict";s.r(t);var n=s(38),r=s(86),c=s(1),i=s(72),a=s(2);function o(){return a.ef.instance}function l(e){o().addLinkEventTracker(e)}function d(){return o().avatar}function u(e){return d().structureData.getPalette(e)}function j(e){return d().structureData.getSetType(e)}function h(){return o().cameraManager}function b(){return o().core}function g(){return b().configuration}function m(e){e=e.startsWith("event:")?e.substring(6):e,o().createLinkEvent(e)}function O(){return o().communication}function p(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return o().getConfiguration(e,t)}function f(){return O().connection}function x(){return o().localization}function _(){return o().ticker}const I=e=>{e&&e.length&&(e.startsWith("http")?a.ce.openWebPage(e):m(e))};function E(e){o().removeLinkEventTracker(e)}function C(){return o().roomEngine}let v=!1,N=0,T=0;const S=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const s=e.clientX,n=e.clientY;let r=e.type;switch(r===a.Ve.MOUSE_CLICK&&(N&&(T=1,N>=Date.now()-300&&T++),N=Date.now(),2===T&&(v||(r=a.Ve.DOUBLE_CLICK),T=0,N=null)),r){case a.Ve.MOUSE_CLICK:case a.Ve.DOUBLE_CLICK:break;case a.Ve.MOUSE_MOVE:v=!0;break;case a.Ve.MOUSE_DOWN:v=!1;break;case a.Ve.MOUSE_UP:case a.Ve.RIGHT_CLICK:break;default:return}C().dispatchMouseEvent(t,s,n,r,e.altKey,e.ctrlKey||e.metaKey,e.shiftKey,!1)};let w=!1,R=0,y=0;const k=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],c=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=0,o=0;e.touches[0]?(i=e.touches[0].clientX,o=e.touches[0].clientY):e.changedTouches[0]&&(i=e.changedTouches[0].clientX,o=e.changedTouches[0].clientY);let l=e.type;switch(s&&(l=a.hi.TOUCH_LONG),l!==a.Ve.MOUSE_CLICK&&l!==a.hi.TOUCH_END||(l=a.Ve.MOUSE_CLICK,R&&(y=1,R>=Date.now()-300&&y++),R=Date.now(),2===y&&(w||(l=a.Ve.DOUBLE_CLICK),y=0,R=null)),l){case a.Ve.MOUSE_CLICK:case a.Ve.DOUBLE_CLICK:break;case a.hi.TOUCH_START:l=a.Ve.MOUSE_DOWN,w=!1;break;case a.hi.TOUCH_MOVE:l=a.Ve.MOUSE_MOVE,w=!0;break;case a.hi.TOUCH_END:l=a.Ve.MOUSE_UP;break;case a.hi.TOUCH_LONG:l=a.Ve.MOUSE_DOWN_LONG;break;default:return}l===a.hi.TOUCH_START&&C().dispatchMouseEvent(t,i,o,l,n,r,c,!1),C().dispatchMouseEvent(t,i,o,l,n,r,c,!1)};function A(e){if(!e||!e.model)return!1;return F().userId===e.model.getValue(a.ch.FURNITURE_OWNER_ID)}function D(e,t,s){return!!e&&(e.isRoomOwner||e.controllerLevel>=a.yg.GUEST||F().isModerator||A(C().getRoomObject(e.roomId,t,s)))}function L(){return o().roomSessionManager}function P(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;L().createSession(e,t)}function U(){const e=pe();if(!e)return a.l.POSTURE_STAND;return e.model.getValue(a.ch.FIGURE_CAN_STAND_UP)}function M(){const e=pe();if(!e)return!1;const t=e.model.getValue(a.ch.FIGURE_EFFECT);return!(29===t||30===t||185===t)}function F(){return o().sessionDataManager}function B(){return p("hc.disabled",!1)?a.Xd.VIP:F().clubLevel}class H{}H.OKAY=0,H.MISSING_OFFER=1,H.FURNI_LIMIT_REACHED=2,H.NOT_IN_ROOM=3,H.NOT_ROOM_OWNER=4,H.GUILD_ROOM=5,H.VISITORS_IN_ROOM=6;class G{constructor(e,t,s){this._depth=0,this._localization="",this._pageId=-1,this._pageName="",this._iconId=0,this._children=void 0,this._offerIds=void 0,this._parent=void 0,this._isVisible=void 0,this._isActive=void 0,this._isOpen=void 0,this._depth=t,this._parent=s,this._localization=e.localization,this._pageId=e.pageId,this._pageName=e.pageName,this._iconId=e.icon,this._children=[],this._offerIds=e.offerIds,this._isVisible=e.visible,this._isActive=!1,this._isOpen=!1}activate(){this._isActive=!0}deactivate(){this._isActive=!1}open(){this._isOpen=!0}close(){this._isOpen=!1}addChild(e){e&&this._children.push(e)}get depth(){return this._depth}get isBranch(){return this._children.length>0}get isLeaf(){return 0===this._children.length}get localization(){return this._localization}get pageId(){return this._pageId}get pageName(){return this._pageName}get iconId(){return this._iconId}get children(){return this._children}get offerIds(){return this._offerIds}get parent(){return this._parent}get isVisible(){return this._isVisible}get isActive(){return this._isActive}get isOpen(){return this._isOpen}}class W{constructor(e,t,s,n,r){let c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:-1;this._pageId=void 0,this._layoutCode=void 0,this._localization=void 0,this._offers=void 0,this._acceptSeasonCurrencyAsCredits=void 0,this._mode=void 0,this._pageId=e,this._layoutCode=t,this._localization=s,this._offers=n,this._acceptSeasonCurrencyAsCredits=r;for(const i of n)i.page=this;this._mode=-1===c?W.MODE_NORMAL:c}get pageId(){return this._pageId}get layoutCode(){return this._layoutCode}get localization(){return this._localization}get offers(){return this._offers}get acceptSeasonCurrencyAsCredits(){return this._acceptSeasonCurrencyAsCredits}get mode(){return this._mode}}W.MODE_NORMAL=0;class V{}V.DUCKET_INFO="ducket_info",V.CREDITS="credits",V.AVATAR_EFFECTS="avatar_effects",V.HC_MEMBERSHIP="hc_membership",V.CLUB_GIFTS="club_gifts",V.LIMITED_SOLD="limited_sold",V.PET_ACCESSORIES="pet_accessories",V.TRAX_SONGS="trax_songs",V.NEW_ADDITIONS="new_additions",V.QUEST_SHELL="quest_shell",V.QUEST_SNOWFLAKES="quest_snowflakes",V.VAL_QUESTS="val_quests",V.GUILD_CUSTOM_FURNI="guild_custom_furni",V.GIFT_SHOP="gift_shop",V.HORSE_STYLES="horse_styles",V.HORSE_SHOE="horse_shoe",V.SET_EASTER="set_easter",V.ECOTRON_TRANSFORM="ecotron_transform",V.LOYALTY_INFO="loyalty_info",V.ROOM_BUNDLES="room_bundles",V.ROOM_BUNDLES_MOBILE="room_bundles_mobile",V.HABBO_CLUB_DESKTOP="habbo_club_desktop",V.MOBILE_SUBSCRIPTIONS="mobile_subscriptions";class q{constructor(e,t){this.breed=e,this.palettes=t}}class z{}z.NONE=0,z.CONFIRM=1,z.PURCHASE=2,z.NO_CREDITS=3,z.NO_POINTS=4,z.SOLD_OUT=5,z.FAILED=6;class Y{}Y.NORMAL="NORMAL",Y.BUILDER="BUILDERS_CLUB";const $=(e,t)=>{const s=e.get(t),n=[];if(s&&s.length)for(const r of s)r.isVisible&&n.push(r);return n},K=(e,t,s,n)=>{if(s.isVisible&&s.pageId>0){let r=!1;const c=[s.pageName,s.localization].join(" ").toLowerCase().replace(/ /gi,"");if(c.indexOf(e)>-1&&(n.push(s),r=!0),!r)for(const e of t)if(c.indexOf(e)>=0){n.push(s);break}}for(const r of s.children)K(e,t,r,n)};class X{}X.WALL="i",X.FLOOR="s",X.EFFECT="e",X.HABBO_CLUB="h",X.BADGE="b",X.GAME_TOKEN="GAME_TOKEN",X.PET="p",X.ROBOT="r";class Q{constructor(e,t,s,n,r,c){let i=arguments.length>6&&void 0!==arguments[6]&&arguments[6],a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,o=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0;this._productType=void 0,this._productClassId=void 0,this._extraParam=void 0,this._productCount=void 0,this._productData=void 0,this._furnitureData=void 0,this._isUniqueLimitedItem=void 0,this._uniqueLimitedItemSeriesSize=void 0,this._uniqueLimitedItemsLeft=void 0,this._productType=e.toLowerCase(),this._productClassId=t,this._extraParam=s,this._productCount=n,this._productData=r,this._furnitureData=c,this._isUniqueLimitedItem=i,this._uniqueLimitedItemSeriesSize=a,this._uniqueLimitedItemsLeft=o}static stripAddonProducts(e){return 1===e.length?e:e.filter((e=>e.productType!==X.BADGE&&e.productType!==X.EFFECT&&e.productClassId!==Q.EFFECT_CLASSID_NINJA_DISAPPEAR))}getIconUrl(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;switch(this._productType){case X.FLOOR:return C().getFurnitureFloorIconUrl(this.productClassId);case X.WALL:if(e&&this._furnitureData){let t="";switch(this._furnitureData.className){case"floor":t=["th",this._furnitureData.className,e.product.extraParam].join("_");break;case"wallpaper":t=["th","wall",e.product.extraParam].join("_");break;case"landscape":t=["th",this._furnitureData.className,(e.product.extraParam||"").replace(".","_"),"001"].join("_")}if(""!==t){return`${p("catalog.asset.url")}/${t}.png`}}return C().getFurnitureWallIconUrl(this.productClassId,this._extraParam);case X.EFFECT:case X.HABBO_CLUB:return this.productClassId,"";case X.BADGE:return F().getBadgeUrl(this._extraParam);case X.ROBOT:return null}return null}get productType(){return this._productType}get productClassId(){return this._productClassId}get extraParam(){return this._extraParam}set extraParam(e){this._extraParam=e}get productCount(){return this._productCount}get productData(){return this._productData}get furnitureData(){return this._furnitureData}get isUniqueLimitedItem(){return this._isUniqueLimitedItem}get uniqueLimitedItemSeriesSize(){return this._uniqueLimitedItemSeriesSize}get uniqueLimitedItemsLeft(){return this._uniqueLimitedItemsLeft}set uniqueLimitedItemsLeft(e){this._uniqueLimitedItemsLeft=e}}Q.EFFECT_CLASSID_NINJA_DISAPPEAR=108;class J{constructor(e,t,s,n,r,c,i,a,o,l){this._pricingModel=void 0,this._priceType=void 0,this._offerId=void 0,this._localizationId=void 0,this._priceInCredits=void 0,this._priceInActivityPoints=void 0,this._activityPointType=void 0,this._giftable=void 0,this._isRentOffer=void 0,this._page=void 0,this._clubLevel=0,this._products=void 0,this._badgeCode=void 0,this._bundlePurchaseAllowed=!1,this._offerId=e,this._localizationId=t,this._isRentOffer=s,this._priceInCredits=n,this._priceInActivityPoints=r,this._activityPointType=c,this._giftable=i,this._clubLevel=a,this._products=o,this._bundlePurchaseAllowed=l,this.setPricingModelForProducts(),this.setPricingType();for(const d of o)if(d.productType===X.BADGE){this._badgeCode=d.extraParam;break}}activate(){}get clubLevel(){return this._clubLevel}get page(){return this._page}set page(e){this._page=e}get offerId(){return this._offerId}get localizationId(){return this._localizationId}get priceInCredits(){return this._priceInCredits}get priceInActivityPoints(){return this._priceInActivityPoints}get activityPointType(){return this._activityPointType}get giftable(){return this._giftable}get product(){if(!this._products||!this._products.length)return null;if(1===this._products.length)return this._products[0];const e=Q.stripAddonProducts(this._products);return e.length?e[0]:null}get pricingModel(){return this._pricingModel}get priceType(){return this._priceType}get bundlePurchaseAllowed(){return this._bundlePurchaseAllowed}get isRentOffer(){return this._isRentOffer}get badgeCode(){return this._badgeCode}get localizationName(){const e=je(this._localizationId);return e?e.name:We(this._localizationId)}get localizationDescription(){const e=je(this._localizationId);return e?e.description:We(this._localizationId)}get isLazy(){return!1}get products(){return this._products}setPricingModelForProducts(){const e=Q.stripAddonProducts(this._products);1===e.length?1===e[0].productCount?this._pricingModel=J.PRICING_MODEL_SINGLE:this._pricingModel=J.PRICING_MODEL_MULTI:e.length>1?this._pricingModel=J.PRICING_MODEL_BUNDLE:this._pricingModel=J.PRICING_MODEL_UNKNOWN}setPricingType(){this._priceInCredits>0&&this._priceInActivityPoints>0?this._priceType=J.PRICE_TYPE_CREDITS_ACTIVITYPOINTS:this._priceInCredits>0?this._priceType=J.PRICE_TYPE_CREDITS:this._priceInActivityPoints>0?this._priceType=J.PRICE_TYPE_ACTIVITYPOINTS:this._priceType=J.PRICE_TYPE_NONE}clone(){const e=[],t=je(this.localizationId);for(const n of this._products){const s=le(n.productClassId,n.productType);e.push(new Q(n.productType,n.productClassId,n.extraParam,n.productCount,t,s))}const s=new J(this.offerId,this.localizationId,this.isRentOffer,this.priceInCredits,this.priceInActivityPoints,this.activityPointType,this.giftable,this.clubLevel,e,this.bundlePurchaseAllowed);return s.page=this.page,s}}J.PRICING_MODEL_UNKNOWN="pricing_model_unknown",J.PRICING_MODEL_SINGLE="pricing_model_single",J.PRICING_MODEL_MULTI="pricing_model_multi",J.PRICING_MODEL_BUNDLE="pricing_model_bundle",J.PRICING_MODEL_FURNITURE="pricing_model_furniture",J.PRICE_TYPE_NONE="price_type_none",J.PRICE_TYPE_CREDITS="price_type_credits",J.PRICE_TYPE_ACTIVITYPOINTS="price_type_activitypoints",J.PRICE_TYPE_CREDITS_ACTIVITYPOINTS="price_type_credits_and_activitypoints";class Z{constructor(e){this._furniData=void 0,this._page=void 0,this._product=void 0,this._furniData=e,this._product=new Q(this._furniData.type,this._furniData.id,this._furniData.customParams,1,je(this._furniData.className),this._furniData)}activate(){Ee(new a.Lc(this._furniData.rentOfferId>-1?this._furniData.rentOfferId:this._furniData.purchaseOfferId))}get offerId(){return this.isRentOffer?this._furniData.rentOfferId:this._furniData.purchaseOfferId}get priceInActivityPoints(){return 0}get activityPointType(){return 0}get priceInCredits(){return 0}get page(){return this._page}set page(e){this._page=e}get priceType(){return""}get product(){return this._product}get products(){return[this._product]}get localizationId(){return"roomItem.name."+this._furniData.id}get bundlePurchaseAllowed(){return!1}get isRentOffer(){return this._furniData.rentOfferId>-1}get giftable(){return!1}get pricingModel(){return J.PRICING_MODEL_FURNITURE}get clubLevel(){return 0}get badgeCode(){return""}get localizationName(){return this._furniData.name}get localizationDescription(){return this._furniData.description}get isLazy(){return!0}}const ee=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=null;switch(e.toLocaleLowerCase()){case X.FLOOR:n=C().getFurnitureFloorIconUrl(t);break;case X.WALL:n=C().getFurnitureWallIconUrl(t,s)}return n};class te{constructor(e){this._isEnabled=!1,this._price=null,this._stuffTypes=null,this._boxTypes=null,this._ribbonTypes=null,this._defaultStuffTypes=null,this._isEnabled=e.isEnabled,this._price=e.price,this._boxTypes=e.boxTypes,this._ribbonTypes=e.ribbonTypes,this._stuffTypes=e.giftWrappers,this._defaultStuffTypes=e.giftFurnis}get isEnabled(){return this._isEnabled}get price(){return this._price}get stuffTypes(){return this._stuffTypes}get boxTypes(){return this._boxTypes}get ribbonTypes(){return this._ribbonTypes}get defaultStuffTypes(){return this._defaultStuffTypes}}class se{constructor(e,t,s,n,r,c,i,a){let o=arguments.length>8&&void 0!==arguments[8]?arguments[8]:-1;this._offerId=void 0,this._furniId=void 0,this._furniType=void 0,this._extraData=void 0,this._stuffData=void 0,this._price=void 0,this._averagePrice=void 0,this._imageCallback=void 0,this._status=void 0,this._timeLeftMinutes=-1,this._offerCount=void 0,this._image=void 0,this._offerId=e,this._furniId=t,this._furniType=s,this._extraData=n,this._stuffData=r,this._price=c,this._status=i,this._averagePrice=a,this._offerCount=o}get offerId(){return this._offerId}set offerId(e){this._offerId=e}get furniId(){return this._furniId}get furniType(){return this._furniType}get extraData(){return this._extraData}get stuffData(){return this._stuffData}get price(){return this._price}set price(e){this._price=e}get averagePrice(){return this._averagePrice}get image(){return this._image}set image(e){this._image=e}get imageCallback(){return this._imageCallback}set imageCallback(e){this._imageCallback=e}get status(){return this._status}get timeLeftMinutes(){return this._timeLeftMinutes}set timeLeftMinutes(e){this._timeLeftMinutes=e}get offerCount(){return this._offerCount}set offerCount(e){this._offerCount=e}get isUniqueLimitedItem(){return this.stuffData&&this.stuffData.uniqueSeries>0}}se.TYPE_FLOOR=1,se.TYPE_WALL=2;class ne{}ne.ONGOING=1,ne.ONGOING_OWN=1,ne.SOLD=2,ne.EXPIRED=3;class re{}re.BY_ACTIVITY=1,re.BY_VALUE=2,re.ADVANCED=3;class ce{constructor(e,t){this._images=void 0,this._texts=void 0,this._images=e,this._texts=t}getText(e){let t=this._texts[e]||"";return t&&t.length&&(t=t.replace(/\r\n|\r|\n/g,"<br />")),t}getImage(e){const t=this._images[e]||"";if(!t||!t.length)return null;let s=p("catalog.asset.image.url");return s=s.replace("%name%",t),s}}class ie{constructor(e,t,s,n,r,c,i,a){this.roomId=e,this.objectId=t,this.category=s,this.wallLocation=n,this.x=r,this.y=c,this.direction=i,this.offer=a}get offerId(){return this.offer.offerId}get productClassId(){return this.offer.product.productClassId}get productData(){return this.offer.product.productData}get furniData(){return this.offer.product.furnitureData}get extraParam(){return this.offer.product.extraParam}}class ae{constructor(){this._requestType=void 0,this._requestById=void 0,this._requestedByOfferId=void 0,this._requestByName=void 0,this._requestType=ae.REQUEST_TYPE_NONE}resetRequest(){this._requestType=ae.REQUEST_TYPE_NONE,this._requestById=-1,this._requestedByOfferId=-1,this._requestByName=null}get requestType(){return this._requestType}get requestById(){return this._requestById}set requestById(e){this._requestType=ae.REQUEST_TYPE_ID,this._requestById=e}get requestedByOfferId(){return this._requestedByOfferId}set requestedByOfferId(e){this._requestType=ae.REQUEST_TYPE_OFFER,this._requestedByOfferId=e}get requestByName(){return this._requestByName}set requestByName(e){this._requestType=ae.REQUEST_TYPE_NAME,this._requestByName=e}}ae.REQUEST_TYPE_NONE=0,ae.REQUEST_TYPE_ID=1,ae.REQUEST_TYPE_OFFER=2,ae.REQUEST_TYPE_NAME=3;class oe{constructor(e,t,s){this.searchValue=e,this.offers=t,this.filteredNodes=s}}function le(e,t){let s=null;switch(t.toLowerCase()){case X.FLOOR:s=F().getFloorItemData(e);break;case X.WALL:s=F().getWallItemData(e)}return s}function de(e,t,s){const n=C().getRoomObject(e,t,s);if(!n)return;const r=n.model.getValue(a.ch.FURNITURE_TYPE_ID);switch(s){case a.Wg.FLOOR:return F().getFloorItemData(r);case a.Wg.WALL:return F().getWallItemData(r)}return null}function ue(){const e=pe();if(!e)return a.l.POSTURE_STAND;return e.model.getValue(a.ch.FIGURE_POSTURE)}function je(e){return e?F().getProductData(e):null}function he(){return L().getSession(-1)}function be(){Ee(new a.Db)}function ge(){return F().clubLevel>=a.Xd.CLUB}function me(){return F().clubLevel>=a.Xd.VIP}const Oe=()=>{he()&&(be(),L().removeSession(-1))};function pe(){const e=F().userId,t=C().activeRoomId,s=a.Wg.UNIT,n=C().getTotalObjectsForManager(t,s);let r=0;for(;r<n;){const n=C().getRoomObjectByIndex(t,r,s);if(n){const t=he().userDataManager.getUserDataByIndex(n.id);if(t&&t.webID===e)return n}r++}return null}const fe=function(e,t,s){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const r=C().getRoomObjectBoundingRectangle(e,t,s,n);return r?(r.x=Math.round(r.x),r.y=Math.round(r.y),r):null},xe=function(e,t,s){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const r=C().getRoomObjectScreenLocation(e,t,s,n);return r?(r.x=Math.round(r.x),r.y=Math.round(r.y),r):null};function _e(e,t,s){C().processRoomObjectOperation(e,t,s)}function Ie(e){C().setActiveRoomId(e)}const Ee=e=>f().send(e),Ce=e=>{o().sendWorkerEvent(e)};class ve{static getAchievementBadgeCode(e){if(!e)return null;let t=e.badgeId;return e.finalLevel||(t=x().getPreviousLevelBadgeId(t)),t}static getAchievementCategoryImageUrl(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=p("achievements.images.url");let r=s?"achicon_":"achcategory_";return r+=e.code,null!==t&&(r+="_"+(t>0?"active":"inactive")),n.replace("%image%",r)}static getAchievementCategoryMaxProgress(e){if(!e)return 0;let t=0;for(const s of e.achievements)t+=s.levelCount;return t}static getAchievementCategoryProgress(e){if(!e)return 0;let t=0;for(const s of e.achievements)t+=s.finalLevel?s.level:s.level-1;return t}static getAchievementCategoryTotalUnseen(e){if(!e)return 0;let t=0;for(const s of e.achievements)s.unseen>0&&t++;return t}static getAchievementHasStarted(e){return!!e&&!!(e.finalLevel||e.level-1>0)}static getAchievementIsIgnored(e){if(!e)return!1;const t=p("achievements.unseen.ignored"),s=e.badgeId.replace(/[0-9]/g,"");return t.indexOf(s)>=0}static getAchievementLevel(e){return e?e.finalLevel?e.level:e.level-1:0}}class Ne{constructor(e){this._code=void 0,this._achievements=void 0,this._code=e,this._achievements=[]}getProgress(){return ve.getAchievementCategoryProgress(this)}getMaxProgress(){return ve.getAchievementCategoryMaxProgress(this)}get code(){return this._code}get achievements(){return this._achievements}set achievements(e){this._achievements=e}}class Te{}Te.ACTION_SAVE="AEA_ACTION_SAVE",Te.ACTION_CLEAR="AEA_ACTION_CLEAR",Te.ACTION_RESET="AEA_ACTION_RESET",Te.ACTION_RANDOMIZE="AEA_ACTION_RANDOMIZE";class Se{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._partColor=void 0,this._isDisabled=void 0,this._isHC=void 0,this._isSelected=void 0,this._notifier=void 0,this._partColor=e,this._isDisabled=t,this._isHC=this._partColor.clubLevel>0,this._isSelected=!1}dispose(){this._partColor=null}get partColor(){return this._partColor}get color(){return a.sb.int2rgb(this._partColor.rgb)}get isDisabled(){return this._isDisabled}get isHC(){return this._isHC}get isSelected(){return this._isSelected}set isSelected(e){this._isSelected=e,this.notify&&this.notify()}get notify(){return this._notifier}set notify(e){this._notifier=e}}class we{constructor(e,t,s){this._name=void 0,this._parts=void 0,this._palettes=void 0,this._selectedPartIndex=-1,this._paletteIndexes=void 0,this._name=e,this._parts=t,this._palettes=s,this._selectedPartIndex=-1}static defaultColorId(e,t){if(!e||!e.length)return-1;let s=0;for(;s<e.length;){const n=e[s];if(n.partColor&&n.partColor.clubLevel<=t)return n.partColor.id;s++}return-1}init(){for(const e of this._parts)e&&e.init()}dispose(){if(this._parts){for(const e of this._parts)e.dispose();this._parts=null}if(this._palettes){for(const e of this._palettes)for(const t of e)t.dispose();this._palettes=null}this._selectedPartIndex=-1,this._paletteIndexes=null}selectPartId(e){if(!this._parts)return;let t=0;for(;t<this._parts.length;){if(this._parts[t].id===e)return void this.selectPartIndex(t);t++}}selectColorIds(e){if(!e||!this._palettes)return;this._paletteIndexes=new Array(e.length);let t=0;for(;t<this._palettes.length;){const s=this.getPalette(t);if(s){let n=0;if(e.length>t)n=e[t];else{const e=s[0];e&&e.partColor&&(n=e.partColor.id)}let r=0;for(;r<s.length;){const e=s[r];e.partColor.id===n?(this._paletteIndexes[t]=r,e.isSelected=!0):e.isSelected=!1,r++}}t++}this.updatePartColors()}selectPartIndex(e){if(!this._parts)return null;if(this._selectedPartIndex>=0&&this._parts.length>this._selectedPartIndex){const e=this._parts[this._selectedPartIndex];e&&(e.isSelected=!1)}if(this._parts.length>e){const t=this._parts[e];if(t)return t.isSelected=!0,this._selectedPartIndex=e,t}return null}selectColorIndex(e,t){const s=this.getPalette(t);if(!s)return null;if(s.length<=e)return null;this.deselectColorIndex(this._paletteIndexes[t],t),this._paletteIndexes[t]=e;const n=s[e];return n?(n.isSelected=!0,this.updatePartColors(),n):null}getCurrentColorIndex(e){return this._paletteIndexes[e]}deselectColorIndex(e,t){const s=this.getPalette(t);if(!s)return;if(s.length<=e)return;const n=s[e];n&&(n.isSelected=!1)}getSelectedColorIds(){if(!this._paletteIndexes||!this._paletteIndexes.length)return null;if(!this._palettes||!this._palettes.length)return null;const e=this._palettes[0];if(!e||!e.length)return null;const t=e[0];if(!t||!t.partColor)return null;const s=t.partColor.id,n=[];let r=0;for(;r<this._paletteIndexes.length;){const e=this._palettes[r];if(e&&!(e.length<=r))if(e.length>this._paletteIndexes[r]){const t=e[this._paletteIndexes[r]];t&&t.partColor?n.push(t.partColor.id):n.push(s)}else n.push(s);r++}const c=this.getCurrentPart();return c?n.slice(0,Math.max(c.maxColorIndex,1)):null}getSelectedColors(){const e=[];let t=0;for(;t<this._paletteIndexes.length;){const s=this.getSelectedColor(t);s?e.push(s.partColor):e.push(null),t++}return e}getSelectedColor(e){const t=this.getPalette(e);return!t||t.length<=this._paletteIndexes[e]?null:t[this._paletteIndexes[e]]}getSelectedColorId(e){const t=this.getSelectedColor(e);return t&&t.partColor?t.partColor.id:0}getPalette(e){return!this._paletteIndexes||!this._palettes||this._palettes.length<=e?null:this._palettes[e]}getCurrentPart(){return this._parts[this._selectedPartIndex]}updatePartColors(){const e=this.getSelectedColors();for(const t of this._parts)t&&(t.partColors=e)}hasClubSelectionsOverLevel(e){let t=!1;const s=this.getSelectedColors();if(s){let n=0;for(;n<s.length;){const r=s[n];r&&r.clubLevel>e&&(t=!0),n++}}const n=this.getCurrentPart();if(n&&n.partSet){const s=n.partSet;s&&s.clubLevel>e&&(t=!0)}return t}hasInvalidSelectedItems(e){const t=this.getCurrentPart();if(!t)return!1;const s=t.partSet;return s&&s.isSellable?e.indexOf(s.id)>-1:void 0}stripClubItemsOverLevel(e){const t=this.getCurrentPart();if(t&&t.partSet){if(t.partSet.clubLevel>e){const e=this.selectPartIndex(0);return e&&!e.partSet&&this.selectPartIndex(1),!0}}return!1}stripClubColorsOverLevel(e){const t=[],s=this.getSelectedColors(),n=this.getPalette(0);let r=!1;const c=we.defaultColorId(n,e);if(-1===c)return!1;let i=0;for(;i<s.length;){const n=s[i];n?n.clubLevel>e?(t.push(c),r=!0):t.push(n.id):(t.push(c),r=!0),i++}return r&&this.selectColorIds(t),r}get name(){return this._name}get parts(){return this._parts}get selectedPartIndex(){return this._selectedPartIndex}}class Re{static getGender(e){switch(e){case ye.MALE:case"m":case"M":e=ye.MALE;break;case ye.FEMALE:case"f":case"F":e=ye.FEMALE;break;default:e=ye.MALE}return e}static hasFigureSetId(e){return this.FIGURE_SET_IDS.indexOf(e)>=0}static createCategory(e,t){if(!e||!t||!this.CURRENT_FIGURE)return null;const s=[],n=[];let r=0;for(;r<this.MAX_PALETTES;)n.push([]),r++;const c=j(t);if(!c)return null;const i=u(c.paletteID);if(!i)return null;let a=this.CURRENT_FIGURE.getColorIds(t);a||(a=[]);const o=new Array(a.length),l=this.clubItemsDimmed,h=B();for(const d of i.colors.getValues())if(d.isSelectable&&(l||h>=d.clubLevel)){let e=0;for(;e<this.MAX_PALETTES;){const t=h<d.clubLevel,s=new Se(d,t);n[e].push(s),e++}if(t!==ye.FACE){let e=0;for(;e<a.length;)d.id===a[e]&&(o[e]=d),e++}}let b=[];b=l?d().getMandatoryAvatarPartSetIds(this.CURRENT_FIGURE.gender,2):d().getMandatoryAvatarPartSetIds(this.CURRENT_FIGURE.gender,h);if(-1===b.indexOf(t)){const e=new ke(null,null,!1);e.isClear=!0,s.push(e)}const g=t!==ye.FACE,m=c.partSets;for(r=m.length-1;r>=0;){const e=m.getWithIndex(r);let t=!1;if((e.gender===ye.UNISEX||e.gender===this.CURRENT_FIGURE.gender)&&(t=!0),e.isSelectable&&t&&(l||h>=e.clubLevel)){const t=h<e.clubLevel;let n=!0;e.isSellable&&(n=this.hasFigureSetId(e.id)),n&&s.push(new ke(e,o,g,t))}r--}for(s.sort(this.clubItemsFirst?this.clubSorter:this.noobSorter),r=0;r<this.MAX_PALETTES;)n[r].sort(this.colorSorter),r++;return new we(t,s,n)}static clubSorter(e,t){const s=e.partSet?e.partSet.clubLevel:9999999999,n=t.partSet?t.partSet.clubLevel:9999999999,r=!!e.partSet&&e.partSet.isSellable,c=!!t.partSet&&t.partSet.isSellable;return r&&!c?1:c&&!r||s>n?-1:s<n?1:e.partSet.id>t.partSet.id?-1:e.partSet.id<t.partSet.id?1:0}static colorSorter(e,t){const s=e.partColor?e.partColor.clubLevel:-1,n=t.partColor?t.partColor.clubLevel:-1;return s<n?-1:s>n?1:e.partColor.index<t.partColor.index?-1:e.partColor.index>t.partColor.index?1:0}static noobSorter(e,t){const s=e.partSet?e.partSet.clubLevel:-1,n=t.partSet?t.partSet.clubLevel:-1,r=!!e.partSet&&e.partSet.isSellable,c=!!t.partSet&&t.partSet.isSellable;return r&&!c?1:c&&!r||s<n?-1:s>n?1:e.partSet.id<t.partSet.id?-1:e.partSet.id>t.partSet.id?1:0}static avatarSetFirstSelectableColor(e){const t=j(e);if(!t)return-1;const s=u(t.paletteID);if(!s)return-1;for(const n of s.colors.getValues())if(n.isSelectable&&!(B()<n.clubLevel))return n.id;return-1}static get clubItemsFirst(){return p("avatareditor.show.clubitems.first",!0)}static get clubItemsDimmed(){return p("avatareditor.show.clubitems.dimmed",!0)}}Re.MAX_PALETTES=2,Re.CURRENT_FIGURE=null,Re.FIGURE_SET_IDS=[],Re.BOUND_FURNITURE_NAMES=[];class ye{constructor(){this._data=void 0,this._colors=void 0,this._gender="M",this._direction=ye.DEFAULT_DIRECTION,this._avatarEffectType=-1,this._notifier=null}loadAvatarData(e,t){this._data=new Map,this._colors=new Map,this._gender=t,this.parseFigureString(e),this.updateView()}parseFigureString(e){if(!e)return;const t=e.split(".");if(t&&t.length)for(const s of t){const e=s.split("-");if(!e.length)continue;const t=e[0],n=parseInt(e[1]),r=[];let c=2;for(;c<e.length;)r.push(parseInt(e[c])),c++;r.length||r.push(0),this.savePartSetId(t,n,!1),this.savePartSetColourId(t,r,!1)}}getPartSetId(e){const t=this._data.get(e);return void 0!==t?t:-1}getColorIds(e){const t=this._colors.get(e);return void 0!==t?t:[Re.avatarSetFirstSelectableColor(e)]}getFigureString(){let e="";const t=[];for(const[n,r]of this._data.entries()){const e=this._colors.get(n);let s=n+"-"+r;if(e&&e.length){let t=0;for(;t<e.length;)s=s+"-"+e[t],t++}t.push(s)}let s=0;for(;s<t.length;)e+=t[s],s<t.length-1&&(e+="."),s++;return e}savePartData(e,t,s){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.savePartSetId(e,t,n),this.savePartSetColourId(e,s,n)}savePartSetId(e,t){let s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];switch(e){case ye.FACE:case ye.HAIR:case ye.HAT:case ye.HEAD_ACCESSORIES:case ye.EYE_ACCESSORIES:case ye.FACE_ACCESSORIES:case ye.SHIRT:case ye.JACKET:case ye.CHEST_ACCESSORIES:case ye.CHEST_PRINTS:case ye.TROUSERS:case ye.SHOES:case ye.TROUSER_ACCESSORIES:t>=0?this._data.set(e,t):this._data.delete(e)}s&&this.updateView()}savePartSetColourId(e,t){let s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];switch(e){case ye.FACE:case ye.HAIR:case ye.HAT:case ye.HEAD_ACCESSORIES:case ye.EYE_ACCESSORIES:case ye.FACE_ACCESSORIES:case ye.SHIRT:case ye.JACKET:case ye.CHEST_ACCESSORIES:case ye.CHEST_PRINTS:case ye.TROUSERS:case ye.SHOES:case ye.TROUSER_ACCESSORIES:this._colors.set(e,t)}s&&this.updateView()}getFigureStringWithFace(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],s="";const n=[ye.FACE],r=[];for(const i of n){const s=this._colors.get(i);if(!s)continue;let n=this._data.get(i);i===ye.FACE&&t&&(n=e);let c=i+"-"+n;if(n>=0){let e=0;for(;e<s.length;)c=c+"-"+s[e],e++}r.push(c)}let c=0;for(;c<r.length;)s+=r[c],c<r.length-1&&(s+="."),c++;return s}updateView(){this.notify&&this.notify()}get gender(){return this._gender}get direction(){return this._direction}set direction(e){this._direction=e,this.updateView()}set avatarEffectType(e){this._avatarEffectType=e}get avatarEffectType(){return this._avatarEffectType}get notify(){return this._notifier}set notify(e){this._notifier=e}}ye.DEFAULT_DIRECTION=4,ye.MALE="M",ye.FEMALE="F",ye.UNISEX="U",ye.SCALE="h",ye.STD="std",ye.DEFAULT_FRAME="0",ye.FACE="hd",ye.HAIR="hr",ye.HAT="ha",ye.HEAD_ACCESSORIES="he",ye.EYE_ACCESSORIES="ea",ye.FACE_ACCESSORIES="fa",ye.JACKET="cc",ye.SHIRT="ch",ye.CHEST_ACCESSORIES="ca",ye.CHEST_PRINTS="cp",ye.TROUSERS="lg",ye.SHOES="sh",ye.TROUSER_ACCESSORIES="wa",ye.SET_TYPES=[ye.FACE,ye.HAIR,ye.HAT,ye.HEAD_ACCESSORIES,ye.EYE_ACCESSORIES,ye.FACE_ACCESSORIES,ye.JACKET,ye.SHIRT,ye.CHEST_ACCESSORIES,ye.CHEST_PRINTS,ye.TROUSERS,ye.SHOES,ye.TROUSERS];class ke{constructor(e,t){let s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(this._renderManager=void 0,this._partSet=void 0,this._partColors=void 0,this._useColors=void 0,this._isDisabled=void 0,this._thumbContainer=void 0,this._imageUrl=void 0,this._maxColorIndex=void 0,this._isValidFigure=void 0,this._isHC=void 0,this._isSellable=void 0,this._isClear=void 0,this._isSelected=void 0,this._disposed=void 0,this._isInitalized=void 0,this._notifier=void 0,this._renderManager=d(),this._partSet=e,this._partColors=t,this._useColors=s,this._isDisabled=n,this._thumbContainer=null,this._imageUrl=null,this._maxColorIndex=0,this._isValidFigure=!1,this._isHC=!1,this._isSellable=!1,this._isClear=!1,this._isSelected=!1,this._disposed=!1,this._isInitalized=!1,e){const t=e.parts;for(const e of t)this._maxColorIndex=Math.max(this._maxColorIndex,e.colorLayerIndex)}}init(){this._isInitalized||(this._isInitalized=!0,this.update())}dispose(){this._disposed||(this._renderManager=null,this._partSet=null,this._partColors=null,this._imageUrl=null,this._disposed=!0,this._isInitalized=!1,this._thumbContainer&&(this._thumbContainer.destroy(),this._thumbContainer=null))}update(){this.updateThumbVisualization()}analyzeFigure(){if(!this._renderManager||!this._partSet||!this._partSet.parts||!this._partSet.parts.length)return!1;const e=this._renderManager.createFigureContainer(this.partSet.type+"-"+this.partSet.id);return this._renderManager.isFigureContainerReady(e)?(this._isValidFigure=!0,!0):(this._renderManager.downloadAvatarFigure(e,this),!1)}renderThumb(){if(!this._renderManager||!this._partSet)return null;if(!this._isValidFigure&&!this.analyzeFigure())return null;const e=this._partSet.parts.concat().sort(this.sortByDrawOrder),t=new a.if;for(const s of e){if(!s)continue;let e=null,n=0,r=!1;for(;!r&&n<ke.THUMB_DIRECTIONS.length;){const t=ye.SCALE+"_"+ye.STD+"_"+s.type+"_"+s.id+"_"+ke.THUMB_DIRECTIONS[n]+"_"+ye.DEFAULT_FRAME;e=this._renderManager.getAssetByName(t),e&&e.texture?r=!0:n++}if(!r)continue;const c=e.offsetX,i=e.offsetY;let o=null;if(this._useColors&&s.colorLayerIndex>0){const e=this._partColors[s.colorLayerIndex-1];e&&(o=e)}const l=new a.rf(e.texture);l.position.set(c,i),o&&(l.tint=o.rgb),t.addChild(l)}return t}updateThumbVisualization(){if(!this._isInitalized)return;let e=this._thumbContainer;e||(e=this.renderThumb()),e&&(this._partSet?(this._isHC=this._partSet.clubLevel>0,this._isSellable=this._partSet.isSellable):(this._isHC=!1,this._isSellable=!1),this._isDisabled&&this.setAlpha(e,.2),this._imageUrl=a.fi.generateImageUrl(e),this.notify&&this.notify())}setAlpha(e,t){return e.filters=[ke.ALPHA_FILTER],e}sortByDrawOrder(e,t){const s=ke.DRAW_ORDER.indexOf(e.type),n=ke.DRAW_ORDER.indexOf(t.type);return s<n?-1:s>n?1:e.index<t.index?-1:e.index>t.index?1:0}resetFigure(e){this.analyzeFigure()&&this.update()}get disposed(){return this._disposed}get id(){return this._partSet?this._partSet.id:-1}get partSet(){return this._partSet}set partColors(e){this._partColors=e,this.update()}get isDisabled(){return this._isDisabled}set thumbContainer(e){this._thumbContainer=e,this.update()}get imageUrl(){return this._imageUrl}get maxColorIndex(){return this._maxColorIndex}get isHC(){return this._isHC}get isSellable(){return this._isSellable}get isClear(){return this._isClear}set isClear(e){this._isClear=e}get isSelected(){return this._isSelected}set isSelected(e){this._isSelected=e,this.notify&&this.notify()}get notify(){return this._notifier}set notify(e){this._notifier=e}}ke.ALPHA_FILTER=new a.gf(.2),ke.THUMB_DIRECTIONS=[2,6,0,4,3,1],ke.DRAW_ORDER=[a.q.LEFT_HAND_ITEM,a.q.LEFT_HAND,a.q.LEFT_SLEEVE,a.q.LEFT_COAT_SLEEVE,a.q.BODY,a.q.SHOES,a.q.LEGS,a.q.CHEST,a.q.CHEST_ACCESSORY,a.q.COAT_CHEST,a.q.CHEST_PRINT,a.q.WAIST_ACCESSORY,a.q.RIGHT_HAND,a.q.RIGHT_SLEEVE,a.q.RIGHT_COAT_SLEEVE,a.q.HEAD,a.q.FACE,a.q.EYES,a.q.HAIR,a.q.HAIR_BIG,a.q.FACE_ACCESSORY,a.q.EYE_ACCESSORY,a.q.HEAD_ACCESSORY,a.q.HEAD_ACCESSORY_EXTRA,a.q.RIGHT_HAND_ITEM];class Ae{constructor(){this._categories=void 0,this._isInitalized=void 0,this._maxPaletteCount=void 0,this._disposed=void 0,this._isInitalized=!1,this._maxPaletteCount=0}dispose(){this._categories=null,this._disposed=!0}get disposed(){return this._disposed}init(){this._categories||(this._categories=new Map)}reset(){if(this._isInitalized=!1,this._categories)for(const e of this._categories.values())e&&e.dispose();this._categories=new Map}addCategory(e){let t=this._categories.get(e);t||(t=Re.createCategory(this,e),t&&(this._categories.set(e,t),this.updateSelectionsFromFigure(e)))}updateSelectionsFromFigure(e){const t=this._categories.get(e);if(!t)return;const s=Re.CURRENT_FIGURE.getPartSetId(e);let n=Re.CURRENT_FIGURE.getColorIds(e);n||(n=[]),t.selectPartId(s),t.selectColorIds(n)}hasClubSelectionsOverLevel(e){if(!this._categories)return!1;for(const t of this._categories.values())if(t&&t.hasClubSelectionsOverLevel(e))return!0;return!1}hasInvalidSelectedItems(e){if(!this._categories)return!1;for(const t of this._categories.values())if(t.hasInvalidSelectedItems(e))return!0;return!1}stripClubItemsOverLevel(e){if(!this._categories)return!1;let t=!1;for(const[s,n]of this._categories.entries()){let r=!1;if(n.stripClubItemsOverLevel(e)&&(r=!0),n.stripClubColorsOverLevel(e)&&(r=!0),r){const e=n.getCurrentPart();e&&Re.CURRENT_FIGURE&&Re.CURRENT_FIGURE.savePartData(s,e.id,n.getSelectedColorIds(),!0),t=!0}}return t}stripInvalidSellableItems(){if(!this._categories)return!1;let e=!1;for(const[t,s]of this._categories.entries()){if(!1){const n=s.getCurrentPart();n&&Re.CURRENT_FIGURE&&Re.CURRENT_FIGURE.savePartData(t,n.id,s.getSelectedColorIds(),!0),e=!0}}return e}selectPart(e,t){const s=this._categories.get(e);if(!s)return;const n=s.selectedPartIndex;s.selectPartIndex(t);const r=s.getCurrentPart();r&&(r.isDisabled?s.selectPartIndex(n):(this._maxPaletteCount=r.maxColorIndex,Re.CURRENT_FIGURE.savePartData(e,r.id,s.getSelectedColorIds(),!0)))}selectColor(e,t,s){const n=this._categories.get(e);if(!n)return;const r=n.getCurrentColorIndex(s);n.selectColorIndex(t,s);n.getSelectedColor(s).isDisabled?n.selectColorIndex(r,s):Re.CURRENT_FIGURE.savePartSetColourId(e,n.getSelectedColorIds(),!0)}getCategoryData(e){return this._isInitalized||this.init(),this._categories?this._categories.get(e):null}get categories(){return this._categories}get canSetGender(){return!1}get maxPaletteCount(){return this._maxPaletteCount||1}set maxPaletteCount(e){this._maxPaletteCount=e}get name(){return null}}class De extends Ae{constructor(){super(...arguments),this._imageCallBackHandled=!1}init(){super.init(),this.addCategory(ye.FACE),this._isInitalized=!0}selectColor(e,t,s){super.selectColor(e,t,s),this.updateSelectionsFromFigure(ye.FACE)}updateSelectionsFromFigure(e){if(!this._categories||!Re.CURRENT_FIGURE)return;const t=this._categories.get(e);if(!t)return;const s=Re.CURRENT_FIGURE.getPartSetId(e);let n=Re.CURRENT_FIGURE.getColorIds(e);n||(n=[]),t.selectPartId(s),t.selectColorIds(n);for(const r of t.parts){const e=t=>{const s=Re.CURRENT_FIGURE.getFigureStringWithFace(r.id),n=d().createAvatarImage(s,a.r.LARGE,null,{resetFigure:e,dispose:null,disposed:!1}),c=n.getImageAsSprite(a.s.HEAD);c&&(c.y=10,r.thumbContainer=c,setTimeout((()=>n.dispose()),0))};e(null)}}get canSetGender(){return!0}get name(){return a.n.GENERIC}}const Le=e=>{if(null==e||"object"!=typeof e)return e;const t=new e.constructor;for(const s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);return t};class Pe{static makeColorHex(e){return"#"+e}static makeColorNumberHex(e){let t=e.toString(16);if(t.length<6){const e=6-t.length;for(let s=0;s<e;s++)t="0"+t}return"#"+t}static convertFromHex(e){return parseInt(e.replace("#",""),16)}}const Ue=e=>{let t=Math.floor(e/86400),s=Math.floor(e%86400/3600),n=Math.floor(e%86400%3600/60),r=e%86400%3600%60;return t.toString().padStart(2,"0")+":"+s.toString().padStart(2,"0")+":"+n.toString().padStart(2,"0")+":"+r.toString().padStart(2,"0")},Me=e=>{var t;return null!==(t=JSON.parse(window.localStorage.getItem(e)))&&void 0!==t?t:null},Fe=e=>{let t=o().localization.getBadgeDesc(e);return t&&t.length||(t=`badge_desc_${e}`),t},Be=e=>{let t=o().localization.getBadgeName(e);return t&&t.length||(t=`badge_name_${e}`),t};function He(e){return!e||isNaN(e)?"0":e.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")}function Ge(e){if(!e||isNaN(e))return"0";let t=Math.abs(e);const s=Math.pow(10,1),n=e<0;let r="";const c=[{key:"Q",value:Math.pow(10,15)},{key:"T",value:Math.pow(10,12)},{key:"B",value:Math.pow(10,9)},{key:"M",value:Math.pow(10,6)},{key:"K",value:1e3}];for(const i of c){let e=t/i.value;if(e=Math.round(e*s)/s,e>=1){t=e,r=i.key;break}}return(n?"-":"")+t+r}function We(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return o().getLocalizationWithParameters(e,t,s)}class Ve{}Ve.CATALOG_PLACE_MULTIPLE_OBJECTS="catalogPlaceMultipleObjects",Ve.CATALOG_SKIP_PURCHASE_CONFIRMATION="catalogSkipPurchaseConfirmation";const qe=(e,t)=>e.dispatchEvent(t),ze=e=>qe(o().events,e),Ye=new a.Jb,$e=e=>qe(Ye,e);let Ke=!1;const Xe=e=>{Ke&&ze(new a.qf(a.qf.PLAY_SOUND,e))},Qe=[a.Ve.MOUSE_CLICK];(()=>{const e=t=>(Ke=!0)&&Qe.forEach((t=>window.removeEventListener(t,e)));Qe.forEach((t=>window.addEventListener(t,e)))})();class Je{}Je.DEFAULT=1,Je.WALL_PAPER=2,Je.FLOOR=3,Je.LANDSCAPE=4,Je.POST_IT=5,Je.POSTER=6,Je.SOUND_SET=7,Je.TRAX_SONG=8,Je.PRESENT=9,Je.ECOTRON_BOX=10,Je.TROPHY=11,Je.CREDIT_FURNI=12,Je.PET_SHAMPOO=13,Je.PET_CUSTOM_PART=14,Je.PET_CUSTOM_PART_SHAMPOO=15,Je.PET_SADDLE=16,Je.GUILD_FURNI=17,Je.GAME_FURNI=18,Je.MONSTERPLANT_SEED=19,Je.MONSTERPLANT_REVIVAL=20,Je.MONSTERPLANT_REBREED=21,Je.MONSTERPLANT_FERTILIZE=22,Je.FIGURE_PURCHASABLE_SET=23;class Ze{constructor(e){this._expirationTimeStamp=void 0,this._isWallItem=void 0,this._songId=void 0,this._locked=void 0,this._id=void 0,this._ref=void 0,this._category=void 0,this._type=void 0,this._stuffData=void 0,this._extra=void 0,this._recyclable=void 0,this._tradeable=void 0,this._groupable=void 0,this._sellable=void 0,this._secondsToExpiration=void 0,this._hasRentPeriodStarted=void 0,this._creationDay=void 0,this._creationMonth=void 0,this._creationYear=void 0,this._slotId=void 0,this._isRented=void 0,this._flatId=void 0,e&&(this._locked=!1,this._id=e.itemId,this._type=e.spriteId,this._ref=e.ref,this._category=e.category,this._groupable=e.isGroupable&&!e.rentable,this._tradeable=e.tradable,this._recyclable=e.isRecycleable,this._sellable=e.sellable,this._stuffData=e.stuffData,this._extra=e.extra,this._secondsToExpiration=e.secondsToExpiration,this._expirationTimeStamp=e.expirationTimeStamp,this._hasRentPeriodStarted=e.hasRentPeriodStarted,this._creationDay=e.creationDay,this._creationMonth=e.creationMonth,this._creationYear=e.creationYear,this._slotId=e.slotId,this._songId=e.songId,this._flatId=e.flatId,this._isRented=e.rentable,this._isWallItem=e.isWallItem)}get rentable(){return this._isRented}get id(){return this._id}get ref(){return this._ref}get category(){return this._category}get type(){return this._type}get stuffData(){return this._stuffData}set stuffData(e){this._stuffData=e}get extra(){return this._extra}get recyclable(){return this._recyclable}get isTradable(){return this._tradeable}get isGroupable(){return this._groupable}get sellable(){return this._sellable}get secondsToExpiration(){if(-1===this._secondsToExpiration)return-1;let e=-1;return this._hasRentPeriodStarted?(e=this._secondsToExpiration-(o().time-this._expirationTimeStamp)/1e3,e<0&&(e=0)):e=this._secondsToExpiration,e}get creationDay(){return this._creationDay}get creationMonth(){return this._creationMonth}get creationYear(){return this._creationYear}get slotId(){return this._slotId}get songId(){return this._songId}get locked(){return this._locked}set locked(e){this._locked=e}get flatId(){return this._flatId}get isWallItem(){return this._isWallItem}get hasRentPeriodStarted(){return this._hasRentPeriodStarted}get expirationTimeStamp(){return this._expirationTimeStamp}update(e){this._type=e.spriteId,this._ref=e.ref,this._category=e.category,this._groupable=e.isGroupable&&!e.rentable,this._tradeable=e.tradable,this._recyclable=e.isRecycleable,this._sellable=e.sellable,this._stuffData=e.stuffData,this._extra=e.extra,this._secondsToExpiration=e.secondsToExpiration,this._expirationTimeStamp=e.expirationTimeStamp,this._hasRentPeriodStarted=e.hasRentPeriodStarted,this._creationDay=e.creationDay,this._creationMonth=e.creationMonth,this._creationYear=e.creationYear,this._slotId=e.slotId,this._songId=e.songId,this._flatId=e.flatId,this._isRented=e.rentable,this._isWallItem=e.isWallItem}clone(){const e=new Ze(null);return e._expirationTimeStamp=this._expirationTimeStamp,e._isWallItem=this._isWallItem,e._songId=this._songId,e._locked=this._locked,e._id=this._id,e._ref=this._ref,e._category=this._category,e._type=this._type,e._stuffData=this._stuffData,e._extra=this._extra,e._recyclable=this._recyclable,e._tradeable=this._tradeable,e._groupable=this._groupable,e._sellable=this._sellable,e._secondsToExpiration=this._secondsToExpiration,e._hasRentPeriodStarted=this._hasRentPeriodStarted,e._creationDay=this._creationDay,e._creationMonth=this._creationMonth,e._creationYear=this._creationYear,e._slotId=this._slotId,e._isRented=this._isRented,e._flatId=this._flatId,e}}class et{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1;this._type=void 0,this._category=void 0,this._roomEngine=void 0,this._stuffData=void 0,this._extra=void 0,this._isWallItem=void 0,this._iconUrl=void 0,this._name=void 0,this._description=void 0,this._locked=void 0,this._selected=void 0,this._hasUnseenItems=void 0,this._items=void 0,this._type=e,this._category=t,this._roomEngine=s,this._stuffData=n,this._extra=r,this._isWallItem=!1,this._iconUrl=null,this._name=null,this._description=null,this._locked=!1,this._selected=!1,this._hasUnseenItems=!1,this._items=[]}clone(){const e=new et;return e._type=this._type,e._category=this._category,e._roomEngine=this._roomEngine,e._stuffData=this._stuffData,e._extra=this._extra,e._isWallItem=this._isWallItem,e._iconUrl=this._iconUrl,e._name=this._name,e._description=this._description,e._locked=this._locked,e._selected=this._selected,e._hasUnseenItems=this._hasUnseenItems,e._items=this._items,e}prepareGroup(){this.setIcon(),this.setName(),this.setDescription()}dispose(){}getItemByIndex(e){return this._items[e]}getItemById(e){for(const t of this._items)if(t.id===e)return t;return null}getTradeItems(e){const t=[],s=this.getLastItem();if(!s)return t;let n=0,r=0;for(;r<this._items.length&&!(n>=e);){const e=this.getItemByIndex(r);!e.locked&&e.isTradable&&e.type===s.type&&(t.push(e),n++),r++}return t}push(e){const t=[...this._items];let s=0;for(;s<t.length;){let n=t[s];if(n.id===e.id)return n=n.clone(),n.locked=!1,t.splice(s,1),t.push(n),void(this._items=t);s++}t.push(e),this._items=t,1===this._items.length&&this.prepareGroup()}pop(){const e=[...this._items];let t=null;if(e.length>0){const s=e.length-1;t=e[s],e.splice(s,1)}return this._items=e,t}remove(e){const t=[...this._items];let s=0;for(;s<t.length;){let n=t[s];if(n.id===e)return t.splice(s,1),this._items=t,n;s++}return null}getTotalCount(){if(this._category===Je.POST_IT){let e=0,t=0;for(;t<this._items.length;){const s=this.getItemByIndex(t);e+=parseInt(s.stuffData.getLegacyString()),t++}return e}return this._items.length}getUnlockedCount(){if(this.category===Je.POST_IT)return this.getTotalCount();let e=0,t=0;for(;t<this._items.length;){this.getItemByIndex(t).locked||e++,t++}return e}getLastItem(){if(!this._items.length)return null;return this.getItemByIndex(this._items.length-1)}unlockAllItems(){const e=[...this._items];let t=0;for(;t<e.length;){const s=e[t];if(s.locked){const n=s.clone();n.locked=!1,e[t]=n}t++}this._items=e}lockItemIds(e){const t=[...this._items];let s=0,n=!1;for(;s<t.length;){const r=t[s],c=e.indexOf(r.ref)>=0;if(r.locked!==c){n=!0;const e=r.clone();e.locked=c,t[s]=e}s++}return this._items=t,n}setName(){const e=this.getLastItem();if(!e)return void(this._name="");let t="";switch(this._category){case Je.POSTER:t="poster_"+e.stuffData.getLegacyString()+"_name";break;case Je.TRAX_SONG:return void(this._name="SONG_NAME");default:t=this.isWallItem?"wallItem.name."+e.type:"roomItem.name."+e.type}this._name=We(t)}setDescription(){this._description=""}setIcon(){if(this._iconUrl)return;let e=null;e=this.isWallItem?this._roomEngine.getFurnitureWallIconUrl(this._type,this._stuffData.getLegacyString()):this._roomEngine.getFurnitureFloorIconUrl(this._type),e&&(this._iconUrl=e)}get type(){return this._type}get category(){return this._category}get stuffData(){return this._stuffData}get extra(){return this._extra}get iconUrl(){return this._iconUrl}get name(){return this._name}get description(){return this._description}get hasUnseenItems(){return this._hasUnseenItems}set hasUnseenItems(e){this._hasUnseenItems=e}get locked(){return this._locked}set locked(e){this._locked=e}get selected(){return this._selected}set selected(e){this._selected=e}get isWallItem(){const e=this.getItemByIndex(0);return!!e&&e.isWallItem}get isGroupable(){const e=this.getItemByIndex(0);return!!e&&e.isGroupable}get isSellable(){const e=this.getItemByIndex(0);return!!e&&e.sellable}get items(){return this._items}set items(e){this._items=e}}const tt=function(e,t,s){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:NaN;return new et(e,t,C(),s,n)},st=(e,t,s)=>{t.isGroupable?((e,t,s)=>{let n=null;for(const r of e)if(r.type===t.type&&r.isWallItem===t.isWallItem&&r.isGroupable)if(t.category===Je.POSTER){if(r.stuffData.getLegacyString()===t.stuffData.getLegacyString()){n=r;break}}else{if(t.category!==Je.GUILD_FURNI){n=r;break}if(t.stuffData.compare(r.stuffData)){n=r;break}}if(n){if(n.push(t),s){n.hasUnseenItems=!0;const t=e.indexOf(n);t>=0&&e.splice(t,1),e.unshift(n)}return n}n=tt(t.type,t.category,t.stuffData,t.extra),n.push(t),s?(n.hasUnseenItems=!0,e.unshift(n)):e.push(n)})(e,t,s):((e,t,s)=>{const n=[];for(const c of e)c.type===t.type&&n.push(c);for(const c of n)if(c.getItemById(t.id))return c;const r=tt(t.type,t.category,t.stuffData,t.extra);r.push(t),s?(r.hasUnseenItems=!0,e.unshift(r)):e.push(r)})(e,t,s)};let nt=!1,rt=-1;const ct=e=>nt=e,it=()=>rt,at=e=>rt=e,ot=()=>{-1!==it()&&(C().cancelRoomObjectPlacement(),at(-1),ct(!1))},lt=function(e){const t=e.petData;if(!t)return!1;const s=L().getSession(1);return!!s&&(!(!s.isRoomOwner&&!s.allowPets)&&(m("inventory/hide"),C().processRoomObjectPlacement(a.Zg.INVENTORY,-t.id,a.Wg.UNIT,a.ah.PET,t.figureData.figuredata)&&(at(t.id),ct(!0)),!0))},dt=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e||!e.getUnlockedCount())return!1;const s=e.getLastItem();if(!s)return!1;if(s.category===Je.FLOOR||s.category===Je.WALL_PAPER||s.category===Je.LANDSCAPE)return t||Ee(new a.lc(s.id)),!1;{m("inventory/hide");let e=0,t=!1;e=s.isWallItem?a.Wg.WALL:a.Wg.FLOOR,t=s.category===Je.POSTER?C().processRoomObjectPlacement(a.Zg.INVENTORY,s.id,e,s.type,s.stuffData.getLegacyString()):C().processRoomObjectPlacement(a.Zg.INVENTORY,s.id,e,s.type,s.extra.toString(),s.stuffData),t&&(at(s.ref),ct(!0))}return!0},ut=function(e){const t=e.botData;if(!t)return!1;const s=L().getSession(1);return!(!s||!s.isRoomOwner)&&(m("inventory/hide"),C().processRoomObjectPlacement(a.Zg.INVENTORY,-t.id,a.Wg.UNIT,a.ah.RENTABLE_BOT,t.figure)&&(at(t.id),ct(!0)),!0)};class jt{}jt.FURNI=1,jt.RENTABLE=2,jt.PET=3,jt.BADGE=4,jt.BOT=5,jt.GAMES=6;const ht=function(e,t){let s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const n={petData:e};return s?t.unshift(n):t.push(n),n},bt=(e,t)=>{let s=0;for(;s<t.length;){const n=t[s];if(n&&n.petData.id===e)return it()===n.petData.id&&(ot(),m("inventory/open")),t.splice(s,1),n;s++}return null};class gt{}gt.TRADING_STATE_READY=0,gt.TRADING_STATE_RUNNING=1,gt.TRADING_STATE_COUNTDOWN=2,gt.TRADING_STATE_CONFIRMING=3,gt.TRADING_STATE_CONFIRMED=4,gt.TRADING_STATE_COMPLETED=5,gt.TRADING_STATE_CANCELLED=6;class mt{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new a.h,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,c=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=arguments.length>6&&void 0!==arguments[6]&&arguments[6];this.userId=e,this.userName=t,this.userItems=s,this.itemCount=n,this.creditsCount=r,this.accepts=c,this.canTrade=i}}class Ot{}Ot.ALERT_SCAM=0,Ot.HOTEL_TRADING_DISABLED=1,Ot.YOU_NOT_ALLOWED=2,Ot.THEY_NOT_ALLOWED=4,Ot.ROOM_DISABLED=6,Ot.YOU_OPEN=7,Ot.THEY_OPEN=8,Ot.ERROR_WHILE_COMMIT=9,Ot.THEY_CANCELLED=10;const pt=e=>{var t;return(null===(t=F().getWallItemData(e))||void 0===t?void 0:t.isExternalImage)||!1},ft=e=>{const t=new a.h;if(e.length)for(const s of e){const e=s.spriteId,n=s.category;let r=s.furniType+e;s.isGroupable&&!pt(e)||(r="itemid"+s.itemId),s.category===Je.POSTER?r=s.itemId+"poster"+s.stuffData.getLegacyString():s.category===Je.GUILD_FURNI&&(r="");let c=s.isGroupable&&!pt(s.spriteId)?t.getValue(r):null;c||(c=tt(e,n,s.stuffData),t.add(r,c)),c.push(new Ze(s))}return t};class xt{static getProductImageUrl(e,t,s){let n=null;switch(e){case a.fb.S:n=C().getFurnitureFloorIconUrl(t);break;case a.fb.I:const e=this.getProductCategory(a.fb.I,t);if(1===e)n=C().getFurnitureWallIconUrl(t,s);else switch(e){case Je.WALL_PAPER:case Je.LANDSCAPE:case Je.FLOOR:}case a.fb.E:}return n}static getProductCategory(e,t){if(e===a.fb.S)return 1;if(e===a.fb.I){if(3001===t)return Je.WALL_PAPER;if(3002===t)return Je.FLOOR;if(4057===t)return Je.LANDSCAPE}return 1}}class _t{static getRandomNumber(e){return Math.floor(Math.random()*e)}static getRandomElement(e){return e[this.getRandomNumber(e.length)]}static getRandomElements(e,t){const s=new Array(t);let n=e.length;const r=new Array(n);for(;t--;){var c=this.getRandomNumber(n);s[t]=e[c in r?r[c]:c],r[c]=--n in r?r[n]:n}return s}}var It=s(78);const Et=new Map;Et.set("r","red"),Et.set("b","blue"),Et.set("g","green"),Et.set("y","yellow"),Et.set("w","white"),Et.set("o","orange"),Et.set("c","cyan"),Et.set("br","brown"),Et.set("pr","purple"),Et.set("pk","pink"),Et.set("red","red"),Et.set("blue","blue"),Et.set("green","green"),Et.set("yellow","yellow"),Et.set("white","white"),Et.set("orange","orange"),Et.set("cyan","cyan"),Et.set("brown","brown"),Et.set("purple","purple"),Et.set("pink","pink");const Ct=(e,t)=>window.localStorage.setItem(e,JSON.stringify(t));class vt{}function Nt(e){const t=e.parts;let s=0;for(const n of t)s=Math.max(s,n.colorLayerIndex);return s}function Tt(e,t){return t=t.filter((t=>-1===e.indexOf(t))),[...e,..._t.getRandomElements(t,_t.getRandomNumber(t.length)+1)]}function St(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if(!e)return null;const r=e.partSets.getValues().filter((e=>!e.isSelectable||"U"!==e.gender&&e.gender!==t||e.clubLevel>s||e.isSellable&&-1===n.indexOf(e.id)?null:e));return r&&r.length?_t.getRandomElement(r):null}function wt(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!e)return[];const n=e.colors.getValues().filter((e=>!e.isSelectable||e.clubLevel>s?null:e));return n&&n.length?_t.getRandomElements(n,Nt(t)):null}vt.CAMERA_SHUTTER="camera_shutter",vt.CREDITS="credits",vt.DUCKETS="duckets",vt.MESSENGER_NEW_THREAD="messenger_new_thread",vt.MESSENGER_MESSAGE_RECEIVED="messenger_message_received",vt.MODTOOLS_NEW_TICKET="modtools_new_ticket";class Rt extends Ae{init(){super.init(),this.addCategory(ye.HAIR),this.addCategory(ye.HAT),this.addCategory(ye.HEAD_ACCESSORIES),this.addCategory(ye.EYE_ACCESSORIES),this.addCategory(ye.FACE_ACCESSORIES),this._isInitalized=!0}get name(){return a.n.HEAD}}class yt extends Ae{init(){super.init(),this.addCategory(ye.TROUSERS),this.addCategory(ye.SHOES),this.addCategory(ye.TROUSER_ACCESSORIES),this._isInitalized=!0}get name(){return a.n.LEGS}}class kt extends Ae{init(){super.init(),this.addCategory(ye.SHIRT),this.addCategory(ye.CHEST_PRINTS),this.addCategory(ye.JACKET),this.addCategory(ye.CHEST_ACCESSORIES),this._isInitalized=!0}get name(){return a.n.TORSO}}class At{}At.COLORMATRIX="colormatrix",At.COMPOSITE="composite";class Dt{constructor(e,t){this.texture=e,this.imageUrl=t}}class Lt{constructor(e,t){this.effectName=e,this.thumbnailUrl=t}}class Pt{constructor(e,t,s){this._productName=void 0,this._customImage=void 0,this._furnitureClassName=void 0,this._productName=e,this._customImage=t,this._furnitureClassName=s}get productName(){return this._productName}get customImage(){return this._customImage}get furnitureClassName(){return this._furnitureClassName}}class Ut{}Ut.STATE_UNLOCKED=1,Ut.STATE_LOCKED_AVAILABLE=2,Ut.STATE_LOCKED_EXPIRED=3,Ut.STATE_LOCKED_FUTURE=4;class Mt{}Mt.TYPE_CHAT=1,Mt.TYPE_ROOM_INFO=2,Mt.TYPE_IM=3;const Ft=()=>{const e=new Date;return`${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`},Bt=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const t=e?new Date(Date.now()-1e3*e):new Date;return`${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}`},Ht=e=>{if(!e||!e.length)return null;const t=e.split("/");return{username:t[0],figure:t[1],userId:parseInt(t[2])}};class Gt{constructor(){this.id=-1,this.name=null,this.gender=0,this.online=!1,this.followingAllowed=!1,this.figure=null,this.categoryId=0,this.motto=null,this.realName=null,this.lastAccess=null,this.persistedMessageUser=!1,this.vipMember=!1,this.pocketHabboUser=!1,this.relationshipStatus=-1,this.unread=0}populate(e){this.id=e.id,this.name=e.name,this.gender=e.gender,this.online=e.online,this.followingAllowed=e.followingAllowed,this.figure=e.figure,this.categoryId=e.categoryId,this.motto=e.motto,this.realName=e.realName,this.lastAccess=e.lastAccess,this.persistedMessageUser=e.persistedMessageUser,this.vipMember=e.vipMember,this.pocketHabboUser=e.pocketHabboUser,this.relationshipStatus=e.relationshipStatus}}Gt.RELATIONSHIP_NONE=0,Gt.RELATIONSHIP_HEART=1,Gt.RELATIONSHIP_SMILE=2,Gt.RELATIONSHIP_BOBBA=3;class Wt{}Wt.GROUP_CHAT=0,Wt.PRIVATE_CHAT=1;class Vt{}Vt.HIDDEN=0,Vt.SHOW=1,Vt.UNREAD=2;class qt{constructor(){this._id=void 0,this._name=void 0,this._requesterUserId=void 0,this._figureString=void 0}populate(e){return!!e&&(this._id=e.requestId,this._name=e.requesterName,this._figureString=e.figureString,this._requesterUserId=e.requesterUserId,!0)}get id(){return this._id}get name(){return this._name}get requesterUserId(){return this._requesterUserId}get figureString(){return this._figureString}}class zt{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];this.userFriendLimit=e,this.normalFriendLimit=t,this.extendedFriendLimit=s,this.categories=n}}class Yt{constructor(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;this._type=void 0,this._senderId=void 0,this._message=void 0,this._secondsSinceSent=void 0,this._extraData=void 0,this._date=void 0,this._type=r,this._senderId=e,this._message=t,this._secondsSinceSent=s,this._extraData=n,this._date=new Date}get type(){return this._type}get senderId(){return this._senderId}get message(){return this._message}get secondsSinceSent(){return this._secondsSinceSent}get extraData(){return this._extraData}get date(){return this._date}}Yt.CHAT=0,Yt.ROOM_INVITE=1,Yt.STATUS_NOTIFICATION=2,Yt.SECURITY_NOTIFICATION=3;class $t{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Wt.PRIVATE_CHAT;this._userId=void 0,this._chats=void 0,this._type=void 0,this._userId=e,this._chats=[],this._type=t}addChat(e){this._chats.push(e)}get userId(){return this._userId}get chats(){return this._chats}get type(){return this._type}set type(e){this._type=e}}class Kt{constructor(e){this._threadId=void 0,this._participant=void 0,this._groups=void 0,this._lastUpdated=void 0,this._unreadCount=void 0,this._threadId=++Kt.THREAD_ID,this._participant=e,this._groups=[],this._lastUpdated=new Date,this._unreadCount=0}addMessage(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;const c=e<0&&n,i=c?Ht(n).userId:e,a=this.getLastGroup(i);if(!a)return;c&&(a.type=Wt.GROUP_CHAT);const o=new Yt(e,t,s,n,r);return a.addChat(o),this._lastUpdated=new Date,this._unreadCount++,o}getLastGroup(e){let t=this._groups[this._groups.length-1];return t&&t.userId===e||(t=new $t(e),this._groups.push(t)),t}setRead(){this._unreadCount=0}get threadId(){return this._threadId}get participant(){return this._participant}get groups(){return this._groups}get lastUpdated(){return this._lastUpdated}get unreadCount(){return this._unreadCount}get unread(){return this._unreadCount>0}}function Xt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;m(0===e?"friends-messenger/toggle":`friends-messenger/${e}`)}Kt.MESSAGE_RECEIVED="MT_MESSAGE_RECEIVED",Kt.THREAD_ID=0;function Qt(e){Ee(new a.md(e,!0))}function Jt(e){m(`groups/manage/${e}`)}function Zt(e,t){m(t?`group-members/${e}/${t}`:`group-members/${e}`)}class es{constructor(e,t,s,n){this.type=void 0,this.key=void 0,this.color=void 0,this.position=void 0,this.type=e,this.key=t||0,this.color=s||0,this.position=n||4}get code(){return 0===this.key&&this.type!==es.BASE?null:es.getCode(this.type,this.key,this.color,this.position)}static getCode(e,t,s,n){return e+(t<10?"0":"")+t+(s<10?"0":"")+s+n}}es.BASE="b",es.SYMBOL="s";class ts{}ts.NOT_MEMBER=0,ts.MEMBER=1,ts.REQUEST_PENDING=2;class ss{}ss.REGULAR=0,ss.EXCLUSIVE=1,ss.PRIVATE=2;const ns=e=>Ee(new a.od(e));class rs{}rs.NONE="NONE",rs.ERROR="ERROR",rs.REJECTED="REJECTED",rs.USER_CREATE="USER_CREATE",rs.USER_PENDING="USER_PENDING",rs.USER_ONGOING="USER_ONGOING",rs.USER_FEEDBACK="USER_FEEDBACK",rs.USER_THANKS="USER_THANKS",rs.USER_GUIDE_DISCONNECTED="USER_GUIDE_DISCONNECTED",rs.GUIDE_TOOL_MENU="GUIDE_TOOL_MENU",rs.GUIDE_ACCEPT="GUIDE_ACCEPT",rs.GUIDE_ONGOING="GUIDE_ONGOING",rs.GUIDE_CLOSED="GUIDE_CLOSED",rs.GUARDIAN_CHAT_REVIEW_ACCEPT="GUARDIAN_CHAT_REVIEW_ACCEPT",rs.GUARDIAN_CHAT_REVIEW_WAIT_FOR_VOTERS="GUARDIAN_CHAT_REVIEW_WAIT_FOR_VOTERS",rs.GUARDIAN_CHAT_REVIEW_VOTE="GUARDIAN_CHAT_REVIEW_VOTE",rs.GUARDIAN_CHAT_REVIEW_WAIT_FOR_RESULTS="GUARDIAN_CHAT_REVIEW_WAIT_FOR_RESULTS",rs.GUARDIAN_CHAT_REVIEW_RESULTS="GUARDIAN_CHAT_REVIEW_RESULTS";class cs{constructor(e,t){this._message=void 0,this._roomId=void 0,this._message=e,this._roomId=t}get message(){return this._message}get roomId(){return this._roomId}}class is{constructor(e){this._userId=void 0,this._messages=void 0,this._userId=e,this._messages=[]}addChat(e){this._messages.push(e)}get userId(){return this._userId}get messages(){return this._messages}}class as{}as.ACTIVE="active",as.NONE="none",as.EXPIRED="expired";const os=["ACH_VipHC1","ACH_VipHC2","ACH_VipHC3","ACH_VipHC4","ACH_VipHC5","HC1","HC2","HC3","HC4","HC5"];class ls{}ls.TOO_MANY_PENDING_CALLS_CODE=1,ls.HAS_ABUSIVE_CALL_CODE=2;class ds{}ds.SELECT_USER=0,ds.SELECT_CHATS=1,ds.SELECT_TOPICS=2,ds.INPUT_REPORT_MESSAGE=3,ds.REPORT_SUMMARY=4;class us{}us.EMERGENCY=1,us.GUIDE=2,us.IM=3,us.ROOM=4,us.BULLY=6,us.THREAD=7,us.MESSAGE=8,us.PHOTO=9;const js=e=>{switch(e){case 1:case 2:return"Normal";case 3:return"Automatic";case 4:return"Automatic IM";case 5:return"Guide System";case 6:return"IM";case 7:return"Room";case 8:return"Panic";case 9:return"Guardian";case 10:return"Automatic Helper";case 11:return"Discussion";case 12:return"Selfie";case 14:return"Photo";case 15:return"Ambassador"}return"Unknown"};class hs{constructor(e,t,s,n,r){this._actionId=void 0,this._name=void 0,this._actionType=void 0,this._sanctionTypeId=void 0,this._actionLengthHours=void 0,this._actionId=e,this._name=t,this._actionType=s,this._sanctionTypeId=n,this._actionLengthHours=r}get actionId(){return this._actionId}get name(){return this._name}get actionType(){return this._actionType}get sanctionTypeId(){return this._sanctionTypeId}get actionLengthHours(){return this._actionLengthHours}}hs.ALERT=1,hs.MUTE=2,hs.BAN=3,hs.KICK=4,hs.TRADE_LOCK=5,hs.MESSAGE=6;class bs{}bs.NONE=0,bs.START_DOORBELL=1,bs.START_PASSWORD=2,bs.STATE_PENDING_SERVER=3,bs.UPDATE_STATE=4,bs.STATE_WAITING=5,bs.STATE_NO_ANSWER=6,bs.STATE_WRONG_PASSWORD=7,bs.STATE_ACCEPTED=8;class gs{}gs.LIST=0,gs.THUMBNAILS=1,gs.FORCED_THUMBNAILS=2;const ms=(()=>{const e=[];for(let t=10;t<=100;t+=10)e.push(t);return e})(),Os=[{name:"anything",query:null},{name:"room.name",query:"roomname"},{name:"owner",query:"owner"},{name:"tag",query:"tag"},{name:"group",query:"group"}];function ps(e){Ee(new a.Cc(e,!1,!0))}class fs{}fs.DEFAULT="default",fs.MOTD="motd",fs.MODERATION="moderation",fs.EVENT="event",fs.NITRO="nitro",fs.SEARCH="search",fs.ALERT="alert";class xs{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fs.DEFAULT,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;this._id=void 0,this._messages=void 0,this._alertType=void 0,this._clickUrl=void 0,this._clickUrlText=void 0,this._title=void 0,this._imageUrl=void 0,xs.ITEM_ID+=1,this._id=xs.ITEM_ID,this._messages=e,this._alertType=t,this._clickUrl=s,this._clickUrlText=n,this._title=r,this._imageUrl=c}get id(){return this._id}get messages(){return this._messages}set alertType(e){this._alertType=e}get alertType(){return this._alertType}get clickUrl(){return this._clickUrl}get clickUrlText(){return this._clickUrlText}get title(){return this._title}get imageUrl(){return this._imageUrl}}xs.ITEM_ID=-1;class _s{}_s.FRIENDOFFLINE="friendoffline",_s.FRIENDONLINE="friendonline",_s.THIRDPARTYFRIENDOFFLINE="thirdpartyfriendoffline",_s.THIRDPARTYFRIENDONLINE="thirdpartyfriendonline",_s.ACHIEVEMENT="achievement",_s.BADGE_RECEIVED="badge_received",_s.INFO="info",_s.RECYCLEROK="recyclerok",_s.RESPECT="respect",_s.CLUB="club",_s.SOUNDMACHINE="soundmachine",_s.PETLEVEL="petlevel",_s.CLUBGIFT="clubgift",_s.BUYFURNI="buyfurni",_s.VIP="vip",_s.ROOMMESSAGESPOSTED="roommessagesposted";class Is{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_s.INFO,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this._id=void 0,this._message=void 0,this._notificationType=void 0,this._iconUrl=void 0,this._linkUrl=void 0,Is.ITEM_ID+=1,this._id=Is.ITEM_ID,this._message=e,this._notificationType=t,this._iconUrl=s,this._linkUrl=n}get id(){return this._id}get message(){return this._message}get notificationType(){return this._notificationType}get iconUrl(){return this._iconUrl}get linkUrl(){return this._linkUrl}}Is.ITEM_ID=-1;class Es{constructor(e,t,s,n,r,c,i){this._id=void 0,this._confirmType=void 0,this._message=void 0,this._onConfirm=void 0,this._onCancel=void 0,this._confirmText=void 0,this._cancelText=void 0,this._title=void 0,Es.ITEM_ID+=1,this._id=Es.ITEM_ID,this._confirmType=e,this._message=t,this._onConfirm=s,this._onCancel=n,this._confirmText=r,this._cancelText=c,this._title=i}get id(){return this._id}get confirmType(){return this._confirmType}get message(){return this._message}get onConfirm(){return this._onConfirm}get onCancel(){return this._onCancel}get confirmText(){return this._confirmText}get cancelText(){return this._cancelText}get title(){return this._title}}Es.ITEM_ID=-1;class Cs{constructor(){this._credits=0,this._activityPoints=new Map,this._clubDays=0,this._clubPeriods=0,this._isVIP=!1,this._pastClubDays=0,this._pastVipDays=0,this._isExpiring=!1,this._minutesUntilExpiration=0,this._minutesSinceLastModified=0,this._lastUpdated=0}static from(e){const t=new Cs;return t._credits=e._credits,t._activityPoints=e._activityPoints,t._clubDays=e._clubDays,t._clubPeriods=e._clubPeriods,t._isVIP=e._isVIP,t._pastClubDays=e._pastClubDays,t._pastVipDays=e._pastVipDays,t._isExpiring=e._isExpiring,t._minutesUntilExpiration=e._minutesUntilExpiration,t._minutesSinceLastModified=e._minutesSinceLastModified,t._lastUpdated=e._lastUpdated,t}get credits(){return this._credits}set credits(e){this._lastUpdated=o().time,this._credits=e}get activityPoints(){return this._activityPoints}set activityPoints(e){this._lastUpdated=o().time,this._activityPoints=e}get clubDays(){return this._clubDays}set clubDays(e){this._lastUpdated=o().time,this._clubDays=e}get clubPeriods(){return this._clubPeriods}set clubPeriods(e){this._lastUpdated=o().time,this._clubPeriods=e}get _Str_13571(){return this._clubDays>0||this._clubPeriods>0}get isVip(){return this._isVIP}set isVip(e){this._isVIP=e}get pastClubDays(){return this._pastClubDays}set pastClubDays(e){this._lastUpdated=o().time,this._pastClubDays=e}get pastVipDays(){return this._pastVipDays}set pastVipDays(e){this._lastUpdated=o().time,this._pastVipDays=e}get isExpiring(){return this._isExpiring}set isExpiring(e){this._isExpiring=e}get minutesUntilExpiration(){var e=(o().time-this._lastUpdated)/6e4,t=this._minutesUntilExpiration-e;return t>0?t:0}set minutesUntilExpiration(e){this._lastUpdated=o().time,this._minutesUntilExpiration=e}get minutesSinceLastModified(){return this._minutesSinceLastModified}set minutesSinceLastModified(e){this._lastUpdated=o().time,this._minutesSinceLastModified=e}get lastUpdated(){return this._lastUpdated}get clubLevel(){return 0===this.clubDays&&0===this.clubPeriods?a.Xd.NO_CLUB:this.isVip?a.Xd.VIP:a.Xd.CLUB}}class vs extends a.jf{}class Ns extends vs{constructor(e,t){super(e),this._id=-1,this._summary=void 0,this._headline=void 0,this._numQuestions=0,this._startMessage="",this._endMessage="",this._questionArray=null,this._pollType="",this._npsPoll=!1,this._id=t}get id(){return this._id}get summary(){return this._summary}set summary(e){this._summary=e}get headline(){return this._headline}set headline(e){this._headline=e}get numQuestions(){return this._numQuestions}set numQuestions(e){this._numQuestions=e}get startMessage(){return this._startMessage}set startMessage(e){this._startMessage=e}get endMessage(){return this._endMessage}set endMessage(e){this._endMessage=e}get questionArray(){return this._questionArray}set questionArray(e){this._questionArray=e}get pollType(){return this._pollType}set pollType(e){this._pollType=e}get npsPoll(){return this._npsPoll}set npsPoll(e){this._npsPoll=e}}Ns.OFFER="RWPUW_OFFER",Ns.ERROR="RWPUW_ERROR",Ns.CONTENT="RWPUW_CONTENT";class Ts extends vs{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;super(e),this._hue=void 0,this._saturation=void 0,this._lightness=void 0,this._hue=t,this._saturation=s,this._lightness=n}get hue(){return this._hue}get saturation(){return this._saturation}get lightness(){return this._lightness}}Ts.PREVIEW="RWUBCPE_PREVIEW",Ts.CLEAR_PREVIEW="RWUBCPE_CLEAR_PREVIEW";class Ss extends vs{constructor(e,t){super(Ss.CHAT_INPUT_CONTENT),this._chatMode="",this._userName="",this._chatMode=e,this._userName=t}get chatMode(){return this._chatMode}get userName(){return this._userName}}Ss.CHAT_INPUT_CONTENT="RWUCICE_CHAT_INPUT_CONTENT",Ss.WHISPER="whisper",Ss.SHOUT="shout";class ws extends vs{constructor(e,t,s,n,r,c,i){super(ws.UPDATE_CHAT),this._objectId=void 0,this._category=void 0,this._botId=void 0,this._chat=void 0,this._automaticChat=void 0,this._chatDelay=void 0,this._mixSentences=void 0,this._objectId=e,this._category=t,this._botId=s,this._chat=n,this._automaticChat=r,this._chatDelay=c,this._mixSentences=i}get objectId(){return this._objectId}get category(){return this._category}get botId(){return this._botId}get chat(){return this._chat}get automaticChat(){return this._automaticChat}get chatDelay(){return this._chatDelay}get mixSentences(){return this._mixSentences}}ws.UPDATE_CHAT="RWURBCE_UPDATE_CHAT";class Rs extends vs{constructor(e,t,s,n){super(e),this._id=void 0,this._category=void 0,this._roomId=void 0,this._id=t,this._category=s,this._roomId=n}get id(){return this._id}get category(){return this._category}get roomId(){return this._roomId}}Rs.OBJECT_SELECTED="RWUROE_OBJECT_SELECTED",Rs.OBJECT_DESELECTED="RWUROE_OBJECT_DESELECTED",Rs.USER_REMOVED="RWUROE_USER_REMOVED",Rs.FURNI_REMOVED="RWUROE_FURNI_REMOVED",Rs.FURNI_ADDED="RWUROE_FURNI_ADDED",Rs.USER_ADDED="RWUROE_USER_ADDED",Rs.OBJECT_ROLL_OVER="RWUROE_OBJECT_ROLL_OVER",Rs.OBJECT_ROLL_OUT="RWUROE_OBJECT_ROLL_OUT",Rs.OBJECT_REQUEST_MANIPULATION="RWUROE_OBJECT_REQUEST_MANIPULATION";class ys{constructor(e){this.type=e,this.id=0,this.category=0,this.name="",this.description="",this.image=null,this.isWallItem=!1,this.isStickie=!1,this.isRoomOwner=!1,this.roomControllerLevel=0,this.isAnyRoomController=!1,this.expiration=-1,this.purchaseCatalogPageId=-1,this.purchaseOfferId=-1,this.extraParam="",this.isOwner=!1,this.stuffData=null,this.groupId=0,this.ownerId=0,this.ownerName="",this.usagePolicy=0,this.rentCatalogPageId=-1,this.rentOfferId=-1,this.purchaseCouldBeUsedForBuyout=!1,this.rentCouldBeUsedForBuyout=!1,this.availableForBuildersClub=!1,this.tileSizeX=1,this.tileSizeY=1}}ys.FURNI="IFI_FURNI";class ks{constructor(e,t,s,n,r){let c=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.roomIndex=e,this.category=t,this.id=s,this.name=n,this.userType=r,this.isFriend=c}}class As{constructor(e){this.type=e,this.level=0,this.maximumLevel=0,this.experience=0,this.levelExperienceGoal=0,this.energy=0,this.maximumEnergy=0,this.happyness=0,this.maximumHappyness=0,this.respectsPetLeft=0,this.respect=0,this.age=0,this.name="",this.id=-1,this.image=null,this.petType=0,this.petBreed=0,this.petFigure="",this.posture="std",this.isOwner=!1,this.ownerId=-1,this.ownerName="",this.canRemovePet=!1,this.roomIndex=0,this.unknownRarityLevel=0,this.saddle=!1,this.rider=!1,this.breedable=!1,this.skillTresholds=[],this.publiclyRideable=0,this.fullyGrown=!1,this.dead=!1,this.rarityLevel=0,this.maximumTimeToLive=0,this.remainingTimeToLive=0,this.remainingGrowTime=0,this.publiclyBreedable=!1}}As.PET_INFO="IPI_PET_INFO";class Ds{constructor(e){this.type=e,this.name="",this.motto="",this.webID=0,this.figure="",this.badges=[],this.carryItem=0,this.roomIndex=0,this.amIOwner=!1,this.amIAnyRoomController=!1,this.roomControllerLevel=0,this.ownerId=-1,this.ownerName="",this.botSkills=[]}}Ds.RENTABLE_BOT="IRBI_RENTABLE_BOT";class Ls{constructor(e){this.type=e,this.name="",this.motto="",this.achievementScore=0,this.webID=0,this.xp=0,this.userType=-1,this.figure="",this.badges=[],this.groupId=0,this.groupName="",this.groupBadgeId="",this.carryItem=0,this.roomIndex=0,this.isSpectatorMode=!1,this.allowNameChange=!1,this.amIOwner=!1,this.amIAnyRoomController=!1,this.roomControllerLevel=0,this.canBeKicked=!1,this.canBeBanned=!1,this.canBeMuted=!1,this.respectLeft=0,this.isIgnored=!1,this.isGuildRoom=!1,this.canTrade=!1,this.canTradeReason=0,this.targetRoomControllerLevel=0,this.isAmbassador=!1}get isOwnUser(){return this.type===Ls.OWN_USER}}Ls.OWN_USER="IUI_OWN_USER",Ls.PEER="IUI_PEER",Ls.BOT="IUI_BOT",Ls.TRADE_REASON_OK=0,Ls.TRADE_REASON_SHUTDOWN=2,Ls.TRADE_REASON_NO_TRADING=3,Ls.DEFAULT_BOT_BADGE_ID="BOT";class Ps{static getObjectName(e,t){const s=he();let n=-1,r=null,c=0;switch(t){case a.Wg.FLOOR:case a.Wg.WALL:{const c=C().getRoomObject(s.roomId,e,t);if(!c)break;if(0===c.type.indexOf("poster"))r=We("${poster_"+parseInt(c.type.replace("poster",""))+"_name}");else{let e=null;const s=c.model.getValue(a.ch.FURNITURE_TYPE_ID);if(t===a.Wg.FLOOR?e=F().getFloorItemData(s):t===a.Wg.WALL&&(e=F().getWallItemData(s)),!e)break;n=e.id,r=e.name}break}case a.Wg.UNIT:{const t=s.userDataManager.getUserDataByIndex(e);if(!t)break;n=t.webID,r=t.name,c=t.type;break}}return r&&r.length?new ks(e,t,n,r,c):null}static getFurniInfo(e,t){const s=he(),n=new ys(ys.FURNI);n.id=e,n.category=t;const r=C().getRoomObject(s.roomId,e,t);if(!r)return;const c=r.model;c.getValue(a.Mh.INFOSTAND_EXTRA_PARAM)&&(n.extraParam=c.getValue(a.Mh.INFOSTAND_EXTRA_PARAM));const i=c.getValue(a.ch.FURNITURE_DATA_FORMAT),l=a.xf.getData(i);l.initializeFromRoomObjectModel(c),n.stuffData=l;const d=r.type;if(0===d.indexOf("poster")){const e=parseInt(d.replace("poster",""));n.name=We("${poster_"+e+"_name}"),n.description=We("${poster_"+e+"_desc}")}else{const e=c.getValue(a.ch.FURNITURE_TYPE_ID);let s=null;t===a.Wg.FLOOR?s=F().getFloorItemData(e):t===a.Wg.WALL&&(s=F().getWallItemData(e)),s&&(n.name=s.name,n.description=s.description,n.purchaseOfferId=s.purchaseOfferId,n.purchaseCouldBeUsedForBuyout=s.purchaseCouldBeUsedForBuyout,n.rentOfferId=s.rentOfferId,n.rentCouldBeUsedForBuyout=s.rentCouldBeUsedForBuyout,n.availableForBuildersClub=s.availableForBuildersClub,n.tileSizeX=s.tileSizeX,n.tileSizeY=s.tileSizeY)}d.indexOf("post_it")>-1&&(n.isStickie=!0);const u=c.getValue(a.ch.FURNITURE_EXPIRY_TIME),j=c.getValue(a.ch.FURNITURE_EXPIRTY_TIMESTAMP);n.expiration=u<0?u:Math.max(0,u-(o().time-j)/1e3);let h=C().getRoomObjectImage(s.roomId,e,t,new a.kj(180),64,null);(!h.data||h.data.width>140||h.data.height>200)&&(h=C().getRoomObjectImage(s.roomId,e,t,new a.kj(180),1,null)),n.image=h.getImage(),n.isWallItem=t===a.Wg.WALL,n.isRoomOwner=s.isRoomOwner,n.roomControllerLevel=s.controllerLevel,n.isAnyRoomController=F().isModerator,n.ownerId=c.getValue(a.ch.FURNITURE_OWNER_ID),n.ownerName=c.getValue(a.ch.FURNITURE_OWNER_NAME),n.usagePolicy=c.getValue(a.ch.FURNITURE_USAGE_POLICY);const b=c.getValue(a.ch.FURNITURE_GUILD_CUSTOMIZED_GUILD_ID);return 0!==b&&(n.groupId=b),A(r)&&(n.isOwner=!0),n}static getUserInfo(e,t){const s=he();let n=Ls.OWN_USER;t.webID!==F().userId&&(n=Ls.PEER);const r=new Ls(n);r.isSpectatorMode=s.isSpectator,r.name=t.name,r.motto=t.custom,r.achievementScore=t.activityPoints,r.webID=t.webID,r.roomIndex=t.roomIndex,r.userType=a.ah.USER;const c=C().getRoomObject(s.roomId,t.roomIndex,e);if(c&&(r.carryItem=c.model.getValue(a.ch.FIGURE_CARRY_OBJECT)||0),n===Ls.OWN_USER&&(r.allowNameChange=F().canChangeName),r.amIOwner=s.isRoomOwner,r.isGuildRoom=s.isGuildRoom,r.roomControllerLevel=s.controllerLevel,r.amIAnyRoomController=F().isModerator,r.isAmbassador=F().isAmbassador,n===Ls.PEER){if(c){const e=c.model.getValue(a.ch.FIGURE_FLAT_CONTROL);null!==e&&(r.targetRoomControllerLevel=e),r.canBeMuted=this.canBeMuted(r),r.canBeKicked=this.canBeKicked(r),r.canBeBanned=this.canBeBanned(r)}r.isIgnored=F().isUserIgnored(t.name),r.respectLeft=F().respectsLeft;const e=F().isSystemShutdown,n=s.tradeMode;if(e)r.canTrade=!1;else switch(n){case a.Bh.ROOM_CONTROLLER_REQUIRED:{const e=r.roomControllerLevel!==a.yg.NONE&&r.roomControllerLevel!==a.yg.GUILD_MEMBER,t=r.targetRoomControllerLevel!==a.yg.NONE&&r.targetRoomControllerLevel!==a.yg.GUILD_MEMBER;r.canTrade=e||t;break}case a.Bh.NO_TRADING:r.canTrade=!0;break;default:r.canTrade=!1}r.canTradeReason=Ls.TRADE_REASON_OK,e&&(r.canTradeReason=Ls.TRADE_REASON_SHUTDOWN),n!==a.Bh.FREE_TRADING&&(r.canTradeReason=Ls.TRADE_REASON_NO_TRADING)}return r.groupId=t.groupId,r.groupBadgeId=F().getGroupBadge(r.groupId),r.groupName=t.groupName,r.badges=s.userDataManager.getUserBadges(t.webID),r.figure=t.figure,r}static getBotInfo(e,t){const s=he(),n=new Ls(Ls.BOT);n.name=t.name,n.motto=t.custom,n.webID=t.webID,n.roomIndex=t.roomIndex,n.userType=t.type;const r=C().getRoomObject(s.roomId,t.roomIndex,e);return r&&(n.carryItem=r.model.getValue(a.ch.FIGURE_CARRY_OBJECT)||0),n.amIOwner=s.isRoomOwner,n.isGuildRoom=s.isGuildRoom,n.roomControllerLevel=s.controllerLevel,n.amIAnyRoomController=F().isModerator,n.isAmbassador=F().isAmbassador,n.badges=[Ls.DEFAULT_BOT_BADGE_ID],n.figure=t.figure,n}static getRentableBotInfo(e,t){const s=he(),n=new Ds(Ds.RENTABLE_BOT);n.name=t.name,n.motto=t.custom,n.webID=t.webID,n.roomIndex=t.roomIndex,n.ownerId=t.ownerId,n.ownerName=t.ownerName,n.botSkills=t.botSkills;const r=C().getRoomObject(s.roomId,t.roomIndex,e);return r&&(n.carryItem=r.model.getValue(a.ch.FIGURE_CARRY_OBJECT)||0),n.amIOwner=s.isRoomOwner,n.roomControllerLevel=s.controllerLevel,n.amIAnyRoomController=F().isModerator,n.badges=[Ls.DEFAULT_BOT_BADGE_ID],n.figure=t.figure,n}static getPetInfo(e){const t=he(),s=t.userDataManager.getPetData(e.id);if(!s)return;const n=new a.Ff(s.figure);let r=null;n.typeId===a.Lf.MONSTERPLANT&&(r=e.level>=e.adultLevel?"std":"grw"+e.level);const c=e.ownerId===F().userId,i=new As(As.PET_INFO);return i.name=s.name,i.id=e.id,i.ownerId=e.ownerId,i.ownerName=e.ownerName,i.rarityLevel=e.rarityLevel,i.petType=n.typeId,i.petBreed=n.paletteId,i.petFigure=s.figure,i.posture=r,i.isOwner=c,i.roomIndex=s.roomIndex,i.level=e.level,i.maximumLevel=e.maximumLevel,i.experience=e.experience,i.levelExperienceGoal=e.levelExperienceGoal,i.energy=e.energy,i.maximumEnergy=e.maximumEnergy,i.happyness=e.happyness,i.maximumHappyness=e.maximumHappyness,i.respect=e.respect,i.respectsPetLeft=F().respectsPetLeft,i.age=e.age,i.saddle=e.saddle,i.rider=e.rider,i.breedable=e.breedable,i.fullyGrown=e.fullyGrown,i.dead=e.dead,i.rarityLevel=e.rarityLevel,i.skillTresholds=e.skillTresholds,i.canRemovePet=!1,i.publiclyRideable=e.publiclyRideable,i.maximumTimeToLive=e.maximumTimeToLive,i.remainingTimeToLive=e.remainingTimeToLive,i.remainingGrowTime=e.remainingGrowTime,i.publiclyBreedable=e.publiclyBreedable,(c||t.isRoomOwner||F().isModerator||t.controllerLevel>=a.yg.GUEST)&&(i.canRemovePet=!0),i}static checkGuildSetting(e){return e.isGuildRoom?e.roomControllerLevel>=a.yg.GUILD_ADMIN:e.roomControllerLevel>=a.yg.GUEST}static isValidSetting(e,t){const s=he();if(!s.isPrivateRoom)return!1;const n=s.moderationSettings;let r=!1;return n&&(r=t(e,n)),r&&e.targetRoomControllerLevel<a.yg.ROOM_OWNER}static canBeMuted(e){return this.isValidSetting(e,((e,t)=>t.allowMute===a.Ug.MODERATION_LEVEL_USER_WITH_RIGHTS?this.checkGuildSetting(e):e.roomControllerLevel>=a.yg.ROOM_OWNER))}static canBeKicked(e){return this.isValidSetting(e,((e,t)=>{switch(t.allowKick){case a.Ug.MODERATION_LEVEL_ALL:return!0;case a.Ug.MODERATION_LEVEL_USER_WITH_RIGHTS:return this.checkGuildSetting(e);default:return e.roomControllerLevel>=a.yg.ROOM_OWNER}}))}static canBeBanned(e){return this.isValidSetting(e,((e,t)=>t.allowBan===a.Ug.MODERATION_LEVEL_USER_WITH_RIGHTS?this.checkGuildSetting(e):e.roomControllerLevel>=a.yg.ROOM_OWNER))}}class Us{}Us.GENERIC_SKILL=0,Us.DRESS_UP=1,Us.SETUP_CHAT=2,Us.RANDOM_WALK=3,Us.DANCE=4,Us.CHANGE_BOT_NAME=5,Us.SERVE_BEVERAGE=6,Us.INCLIENT_LINK=7,Us.NUX_PROCEED=8,Us.CHANGE_BOT_MOTTO=9,Us.NUX_TAKE_TOUR=10,Us.NO_PICK_UP=12,Us.NAVIGATOR_SEARCH=14,Us.DONATE_TO_USER=24,Us.DONATE_TO_ALL=25;class Ms{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,o=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,l=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,d=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null;this.senderId=e,this.senderCategory=t,this.roomId=s,this.text=n,this.formattedText=r,this.username=c,this.location=i,this.type=a,this.styleId=o,this.imageUrl=l,this.color=d,this.id=-1,this.width=0,this.height=0,this.elementRef=null,this.visible=!1,this.skipMovement=!1,this._top=0,this._left=0,this.id=++Ms.BUBBLE_COUNTER}get top(){return this._top}set top(e){this._top=e,this.elementRef&&(this.elementRef.style.top=this._top+"px")}get left(){return this._left}set left(e){this._left=e,this.elementRef&&(this.elementRef.style.left=this._left+"px")}}Ms.BUBBLE_COUNTER=0;class Fs{}Fs.CHAT_DEFAULT=0,Fs.CHAT_WHISPER=1,Fs.CHAT_SHOUT=2;class Bs{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.id=e,this.type=t,this.color=s,this.light=n}}const Hs=function(e,t,s){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return!(e.left+n+e.width<t.left+n||e.left+n>t.left+n+t.width||e.top+e.height<t.top+s||e.top>t.top+s+t.height)};class Gs{static savePreset(e,t,s,n,r){he().updateMoodlightData(e,t,s,n,r)}static changeState(){he().toggleMoodlightState()}static previewDimmer(e,t,s){C().updateObjectRoomColor(he().roomId,e,t,s)}static scaleBrightness(e){return~~(100*(e-this.MIN_BRIGHTNESS)/(this.MAX_BRIGHTNESS-this.MIN_BRIGHTNESS)+0)}}Gs.AVAILABLE_COLORS=[7665141,21495,15161822,15353138,15923281,8581961,0],Gs.HTML_COLORS=["#74F5F5","#0053F7","#E759DE","#EA4532","#F2F851","#82F349","#000000"],Gs.MIN_BRIGHTNESS=76,Gs.MAX_BRIGHTNESS=255;class Ws{static getMergedMannequinFigureContainer(e,t){const s=d().createFigureContainer(e),n=d().createFigureContainer(t);for(const r of this.MANNEQUIN_CLOTHING_PART_TYPES)s.removePart(r);for(const r of n.getPartTypeIds())s.updatePart(r,n.getPartSetId(r),n.getPartColorIds(r));return s}static transformAsMannequinFigure(e){for(const t of e.getPartTypeIds())this.MANNEQUIN_CLOTHING_PART_TYPES.indexOf(t)>=0||e.removePart(t);e.updatePart(this.MANNEQUIN_FIGURE[0],this.MANNEQUIN_FIGURE[1],this.MANNEQUIN_FIGURE[2])}}Ws.MANNEQUIN_FIGURE=["hd",99999,[99998]],Ws.MANNEQUIN_CLOTHING_PART_TYPES=[a.q.CHEST_ACCESSORY,a.q.COAT_CHEST,a.q.CHEST,a.q.LEGS,a.q.SHOES,a.q.WAIST_ACCESSORY];class Vs{}Vs.WATER=0,Vs.LIGHT=1;class qs{}qs.POSTURE_STAND=0,qs.POSTURE_SIT=1;class zs{constructor(e,t,s){this._id=void 0,this._category=void 0,this._name=void 0,this._id=e,this._category=t,this._name=s}get id(){return this._id}get category(){return this._category}get name(){return this._name}}class Ys{constructor(e,t,s,n,r,c,i){this.id=e,this.category=t,this.name=s,this.requestRoomObjectId=n,this.targetRoomObjectId=r,this.requestInventoryStripId=c,this.replace=i}}const $s="0";class Ks{}function Xs(e){Ee(new a.Yi(e))}Ks.UNSTARTED=-1,Ks.ENDED=0,Ks.PLAYING=1,Ks.PAUSED=2,Ks.BUFFERING=3,Ks.CUED=5;const Qs=e=>{const t=Math.floor(e/2);return e%2?(t+.5).toString():t.toString()};class Js{}Js.TOGGLE_FURNI_STATE=0,Js.RESET=1,Js.SET_FURNI_STATE=3,Js.MOVE_FURNI=4,Js.GIVE_SCORE=6,Js.CHAT=7,Js.TELEPORT=8,Js.JOIN_TEAM=9,Js.LEAVE_TEAM=10,Js.CHASE=11,Js.FLEE=12,Js.MOVE_AND_ROTATE_FURNI=13,Js.GIVE_SCORE_TO_PREDEFINED_TEAM=14,Js.TOGGLE_TO_RANDOM_STATE=15,Js.MOVE_FURNI_TO=16,Js.GIVE_REWARD=17,Js.CALL_ANOTHER_STACK=18,Js.KICK_FROM_ROOM=19,Js.MUTE_USER=20,Js.BOT_TELEPORT=21,Js.BOT_MOVE=22,Js.BOT_TALK=23,Js.BOT_GIVE_HAND_ITEM=24,Js.BOT_FOLLOW_AVATAR=25,Js.BOT_CHANGE_FIGURE=26,Js.BOT_TALK_DIRECT_TO_AVTR=27;class Zs{}Zs.STATES_MATCH=0,Zs.FURNIS_HAVE_AVATARS=1,Zs.ACTOR_IS_ON_FURNI=2,Zs.TIME_ELAPSED_MORE=3,Zs.TIME_ELAPSED_LESS=4,Zs.USER_COUNT_IN=5,Zs.ACTOR_IS_IN_TEAM=6,Zs.HAS_STACKED_FURNIS=7,Zs.STUFF_TYPE_MATCHES=8,Zs.STUFFS_IN_FORMATION=9,Zs.ACTOR_IS_GROUP_MEMBER=10,Zs.ACTOR_IS_WEARING_BADGE=11,Zs.ACTOR_IS_WEARING_EFFECT=12,Zs.NOT_STATES_MATCH=13,Zs.FURNI_NOT_HAVE_HABBO=14,Zs.NOT_ACTOR_ON_FURNI=15,Zs.NOT_USER_COUNT_IN=16,Zs.NOT_ACTOR_IN_TEAM=17,Zs.NOT_HAS_STACKED_FURNIS=18,Zs.NOT_FURNI_IS_OF_TYPE=19,Zs.NOT_STUFFS_IN_FORMATION=20,Zs.NOT_ACTOR_IN_GROUP=21,Zs.NOT_ACTOR_WEARS_BADGE=22,Zs.NOT_ACTOR_WEARING_EFFECT=23,Zs.DATE_RANGE_ACTIVE=24,Zs.ACTOR_HAS_HANDITEM=25;const en=e=>`${e.getFullYear()}/${("0"+(e.getMonth()+1)).slice(-2)}/${("0"+e.getDate()).slice(-2)} ${("0"+e.getHours()).slice(-2)}:${("0"+e.getMinutes()).slice(-2)}`;class tn{}tn.STUFF_SELECTION_OPTION_NONE=0,tn.STUFF_SELECTION_OPTION_BY_ID=1,tn.STUFF_SELECTION_OPTION_BY_ID_OR_BY_TYPE=2,tn.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT=3;class sn extends a.kf{constructor(e,t){super("\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nuniform mat3 projectionMatrix;\nvarying vec2 vTextureCoord;\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec3 lineColor;\nuniform vec3 color;\nvoid main(void) {\n    vec4 currentColor = texture2D(uSampler, vTextureCoord);\n    vec3 colorLine = lineColor * currentColor.a;\n    vec3 colorOverlay = color * currentColor.a;\n\n    if(currentColor.r == 0.0 && currentColor.g == 0.0 && currentColor.b == 0.0 && currentColor.a > 0.0) {\n        gl_FragColor = vec4(colorLine.r, colorLine.g, colorLine.b, currentColor.a);\n    } else if(currentColor.a > 0.0) {\n        gl_FragColor = vec4(colorOverlay.r, colorOverlay.g, colorOverlay.b, currentColor.a);\n    }\n}"),this._lineColor=void 0,this._color=void 0,this.uniforms.lineColor=new Float32Array(3),this.uniforms.color=new Float32Array(3),this.lineColor=e,this.color=t}get lineColor(){return this._lineColor}set lineColor(e){const t=this.uniforms.lineColor;"number"===typeof e?(a.sb.hex2rgb(e,t),this._lineColor=e):(t[0]=e[0],t[1]=e[1],t[2]=e[2],this._lineColor=a.sb.rgb2hex(t))}get color(){return this._color}set color(e){const t=this.uniforms.color;"number"===typeof e?(a.sb.hex2rgb(e,t),this._color=e):(t[0]=e[0],t[1]=e[1],t[2]=e[2],this._color=a.sb.rgb2hex(t))}}class nn{static show(e){nn.applySelectionShader(nn.getRoomObject(e))}static hide(e){nn.clearSelectionShader(nn.getRoomObject(e))}static clearSelectionShaderFromFurni(e){for(const t of e)nn.clearSelectionShader(nn.getRoomObject(t))}static applySelectionShaderToFurni(e){for(const t of e)nn.applySelectionShader(nn.getRoomObject(t))}static getRoomObject(e){const t=C();return t.getRoomObject(t.activeRoomId,e,a.Wg.FLOOR)}static applySelectionShader(e){if(!e)return;const t=e.visualization;if(t)for(const s of t.sprites)1!==s.blendMode&&(s.filters=[nn._selectionShader])}static clearSelectionShader(e){if(!e)return;const t=e.visualization;if(t)for(const s of t.sprites)s.filters=[]}}nn._selectionShader=new sn([1,1,1],[.6,.6,.6]);const rn="\t";class cn{}cn.AVATAR_SAYS_SOMETHING=0,cn.AVATAR_WALKS_ON_FURNI=1,cn.AVATAR_WALKS_OFF_FURNI=2,cn.EXECUTE_ONCE=3,cn.TOGGLE_FURNI=4,cn.EXECUTE_PERIODICALLY=6,cn.AVATAR_ENTERS_ROOM=7,cn.GAME_STARTS=8,cn.GAME_ENDS=9,cn.SCORE_ACHIEVED=10,cn.COLLISION=11,cn.EXECUTE_PERIODICALLY_LONG=12,cn.BOT_REACHED_STUFF=13,cn.BOT_REACHED_AVATAR=14;var an=s(0);const on=e=>{const{ref:t=null,innerRef:s=null,display:n=null,fit:r=!1,fitV:i=!1,grow:a=!1,shrink:o=!1,fullWidth:l=!1,fullHeight:d=!1,overflow:u=null,position:j=null,float:h=null,pointer:b=!1,visible:g=null,textColor:m=null,classNames:O=[],className:p="",style:f={},children:x=null,..._}=e,I=Object(c.useMemo)((()=>{const e=[];return n&&n.length&&e.push("d-"+n),(r||l)&&e.push("w-100"),(r||d)&&e.push("h-100"),i&&e.push("vw-100","vh-100"),a&&e.push("flex-grow-1"),o&&e.push("flex-shrink-0"),u&&e.push("overflow-"+u),j&&e.push("position-"+j),h&&e.push("float-"+h),b&&e.push("cursor-pointer"),null!==g&&e.push(g?"visible":"invisible"),m&&e.push("text-"+m),O.length&&e.push(...O),e}),[n,r,i,a,o,l,d,u,j,h,b,g,m,O]),E=Object(c.useMemo)((()=>{let e=I.join(" ");return p.length&&(e+=" "+p),e.trim()}),[I,p]),C=Object(c.useMemo)((()=>{let e={};return Object.keys(f).length&&(e={...e,...f}),e}),[f]);return Object(an.jsx)("div",{ref:s,className:E,style:C,..._,children:x})},ln=Object(c.createContext)({isCssGrid:!1}),dn=e=>Object(an.jsx)(ln.Provider,{value:e.value,children:e.children}),un=e=>{const{inline:t=!1,gap:s=2,maxContent:n=!1,columnCount:r=0,center:i=!1,alignSelf:a=null,alignItems:o=null,justifyContent:l=null,fullHeight:d=!0,classNames:u=[],style:j={},...h}=e,b=Object(c.useMemo)((()=>{const e=[];return t?e.push("inline-grid"):e.push("grid"),s?e.push("gap-"+s):0===s&&e.push("gap-0"),n&&e.push("flex-basis-max-content"),a&&e.push("align-self-"+a),o&&e.push("align-items-"+o),l&&e.push("justify-content-"+l),o||l||!i||e.push("align-items-center","justify-content-center"),u.length&&e.push(...u),e}),[t,s,n,a,o,l,i,u]),g=Object(c.useMemo)((()=>{let e={};return r&&(e["--bs-columns"]=r.toString()),Object.keys(j).length&&(e={...e,...j}),e}),[r,j]);return Object(an.jsx)(dn,{value:{isCssGrid:!0},children:Object(an.jsx)(on,{fullHeight:d,classNames:b,style:g,...h})})},jn=e=>{const{columnMinWidth:t=40,columnMinHeight:s=40,columnCount:n=0,fullHeight:r=!1,maxContent:i=!0,overflow:a="auto",style:o={},...l}=e,d=Object(c.useMemo)((()=>{let e={};return e["--nitro-grid-column-min-height"]=s+"px",n>1&&(e.gridTemplateColumns=`repeat(auto-fill, minmax(${t}px, 1fr))`),Object.keys(o).length&&(e={...e,...o}),e}),[t,s,n,o]);return Object(an.jsx)(un,{columnCount:n,fullHeight:r,overflow:a,style:d,...l})},hn=e=>{const{display:t="flex",column:s,reverse:n=!1,gap:r=null,center:i=!1,alignSelf:a=null,alignItems:o=null,justifyContent:l=null,classNames:d=[],...u}=e,j=Object(c.useMemo)((()=>{const e=[];return s?n?e.push("flex-column-reverse"):e.push("flex-column"):n&&e.push("flex-row-reverse"),r&&e.push("gap-"+r),a&&e.push("align-self-"+a),o&&e.push("align-items-"+o),l&&e.push("justify-content-"+l),o||l||!i||e.push("align-items-center","justify-content-center"),d.length&&e.push(...d),e}),[s,n,r,i,a,o,l,d]);return Object(an.jsx)(on,{display:t,classNames:j,...u})},bn=e=>{const{variant:t="primary",size:s="sm",active:n=!1,disabled:r=!1,classNames:i=[],...a}=e,o=Object(c.useMemo)((()=>{const e=["btn"];return t&&e.push("btn-"+t),s&&e.push("btn-"+s),n&&e.push("active"),r&&e.push("disabled"),i.length&&e.push(...i),e}),[t,s,n,r,i]);return Object(an.jsx)(hn,{center:!0,classNames:o,...a})},gn=e=>{const{classNames:t=[],...s}=e,n=Object(c.useMemo)((()=>{const e=["btn-group"];return t.length&&e.push(...t),e}),[t]);return Object(an.jsx)(on,{classNames:n,...s})},mn=Object(c.createContext)({closers:null,setClosers:null,closeAll:null}),On=e=>Object(an.jsx)(mn.Provider,{...e}),pn=e=>{const{alignItems:t="center",gap:s=1,children:n=null,...r}=e;return Object(an.jsx)(hn,{alignItems:t,gap:s,...r,children:n})};var fn=s(7);const xn=e=>{const{headerText:t="",isExpanded:s=!1,gap:n=0,classNames:r=[],children:i=null,...a}=e,[o,l]=Object(c.useState)(!1),{setClosers:d=null,closeAll:u=null}=Object(c.useContext)(mn),j=Object(c.useCallback)((()=>l(!1)),[]),h=Object(c.useMemo)((()=>{const e=["nitro-card-accordion-set"];return o&&e.push("active"),r&&r.length&&e.push(...r),e}),[o,r]);return Object(c.useEffect)((()=>{l(s)}),[s]),Object(c.useEffect)((()=>{const e=j;return d((t=>{const s=[...t];return s.push(e),s})),()=>{d((t=>{const s=[...t],n=s.indexOf(e);return n>=0&&s.splice(n,1),s}))}}),[j,d]),Object(an.jsxs)(Fn,{classNames:h,gap:n,...a,children:[Object(an.jsxs)(hn,{pointer:!0,justifyContent:"between",className:"nitro-card-accordion-set-header px-2 py-1",onClick:()=>{u(),l((e=>!e))},children:[Object(an.jsx)(ur,{children:t}),Object(an.jsx)(fn.a,{icon:o?"caret-up":"caret-down"})]}),o&&Object(an.jsx)(Fn,{fullHeight:!0,overflow:"auto",gap:0,className:"nitro-card-accordion-set-content",children:i})]})},_n=e=>{const{...t}=e,[s,n]=Object(c.useState)([]),r=Object(c.useCallback)((()=>{for(const e of s)e()}),[s]);return Object(an.jsx)(On,{value:{closers:s,setClosers:n,closeAll:r},children:Object(an.jsx)(Fn,{gap:0,...t})})},In=e=>{const{overflow:t="auto",classNames:s=[],...n}=e,r=Object(c.useMemo)((()=>{const e=["container-fluid","content-area"];return s.length&&e.push(...s),e}),[s]);return Object(an.jsx)(Fn,{classNames:r,overflow:t,...n})},En=Object(c.createContext)({theme:null}),Cn=e=>Object(an.jsx)(En.Provider,{value:e.value,children:e.children}),vn=e=>{const{headerText:t=null,noCloseButton:s=!1,onCloseClick:n=null,justifyContent:r="center",alignItems:i="center",classNames:a=[],children:o=null,...l}=e,d=Object(c.useMemo)((()=>{const e=["drag-handler","container-fluid","nitro-card-header"];return a.length&&e.push(...a),e}),[a]),u=Object(c.useCallback)((e=>{e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()}),[]);return Object(an.jsx)(Fn,{center:!0,position:"relative",classNames:d,...l,children:Object(an.jsxs)(hn,{fullWidth:!0,center:!0,children:[Object(an.jsx)("span",{className:"nitro-card-header-text",children:t}),Object(an.jsx)(on,{position:"absolute",className:"end-2 nitro-card-header-close",onMouseDownCapture:u,onClick:n,children:Object(an.jsx)(fn.a,{icon:"times"})})]})})},Nn=e=>{const{justifyContent:t="center",classNames:s=[],...n}=e,r=Object(c.useMemo)((()=>{const e=["container-fluid","bg-muted","p-1"];return s.length&&e.push(...s),e}),[s]);return Object(an.jsx)(hn,{justifyContent:t,classNames:r,...n})};var Tn=s(21);class Sn{}Sn.CENTER="DWP_CENTER",Sn.TOP_CENTER="DWP_TOP_CENTER",Sn.TOP_LEFT="DWP_TOP_LEFT",Sn.NOTHING="DWP_NOTHING";const wn=[],Rn=e=>{const{uniqueKey:t=null,handleSelector:s=".drag-handler",windowPosition:n=Sn.CENTER,disableDrag:r=!1,dragStyle:i={},children:o=null,offsetLeft:l=0,offsetTop:d=0}=e,[u,j]=Object(c.useState)(null),[h,b]=Object(c.useState)(null),[g,m]=Object(c.useState)({x:0,y:0}),[O,p]=Object(c.useState)(!1),[f,x]=Object(c.useState)(null),_=Object(c.useRef)(),I=Object(c.useCallback)((()=>{let e=400;for(const t of wn)e+=1,t.style.zIndex=e.toString()}),[]),E=Object(c.useCallback)((()=>{const e=wn.indexOf(_.current);if(-1===e)wn.push(_.current);else{if(e===wn.length-1)return;e>=0&&(wn.splice(e,1),wn.push(_.current))}I()}),[I]),C=Object(c.useCallback)((e=>{E()}),[E]),v=Object(c.useCallback)((e=>{E()}),[E]),N=Object(c.useCallback)(((e,t)=>{m({x:e,y:t}),p(!0)}),[]),T=Object(c.useCallback)((e=>{N(e.clientX,e.clientY)}),[N]),S=Object(c.useCallback)((e=>{const t=e.touches[0];N(t.clientX,t.clientY)}),[N]),w=Object(c.useCallback)((e=>{j({x:e.clientX-g.x,y:e.clientY-g.y})}),[g]),R=Object(c.useCallback)((e=>{const t=e.touches[0];j({x:t.clientX-g.x,y:t.clientY-g.y})}),[g]),y=Object(c.useCallback)((()=>{if(!_.current||!f)return;let e=h.x+u.x,s=h.y+u.y;const n=_.current.offsetLeft+e,r=_.current.offsetTop+s;if(r<0?s=-_.current.offsetTop:r+f.offsetHeight>=document.body.offsetHeight-0&&(s=document.body.offsetHeight-_.current.offsetHeight-_.current.offsetTop),n+_.current.offsetWidth<0?e=-_.current.offsetLeft:n>=document.body.offsetWidth-0&&(e=document.body.offsetWidth-_.current.offsetWidth-_.current.offsetLeft),j({x:0,y:0}),b({x:e,y:s}),p(!1),null!==t){const n={...Me(`nitro.windows.${t}`)};n.offset={x:e,y:s},Ct(`nitro.windows.${t}`,n)}}),[f,u,h,t]),k=Object(c.useCallback)((e=>{y()}),[y]),A=Object(c.useCallback)((e=>{y()}),[y]);return Object(c.useEffect)((()=>{const e=_.current;if(!e)return;if(wn.push(e),I(),!r){const t=e.querySelector(s);t&&x(t)}switch(n){case Sn.TOP_CENTER:e.style.top=50+d+"px",e.style.left=`calc(50vw - ${e.offsetWidth/2+l}px)`;break;case Sn.CENTER:e.style.top=`calc(50vh - ${e.offsetHeight/2+d}px)`,e.style.left=`calc(50vw - ${e.offsetWidth/2+l}px)`;break;case Sn.TOP_LEFT:e.style.top=50+d+"px",e.style.left=50+l+"px"}return j({x:0,y:0}),b({x:0,y:0}),()=>{const t=wn.indexOf(e);t>=0&&wn.splice(t,1)}}),[s,n,t,r,l,d,I]),Object(c.useEffect)((()=>{if(!h&&!u)return;const e=_.current;e&&(e.style.transform=`translate(${h.x+u.x}px, ${h.y+u.y}px)`,e.style.visibility="visible")}),[h,u]),Object(c.useEffect)((()=>{if(f)return f.addEventListener(a.Ve.MOUSE_DOWN,T),f.addEventListener(a.hi.TOUCH_START,S),()=>{f.removeEventListener(a.Ve.MOUSE_DOWN,T),f.removeEventListener(a.hi.TOUCH_START,S)}}),[f,T,S]),Object(c.useEffect)((()=>{if(O)return document.addEventListener(a.Ve.MOUSE_UP,k),document.addEventListener(a.hi.TOUCH_END,A),document.addEventListener(a.Ve.MOUSE_MOVE,w),document.addEventListener(a.hi.TOUCH_MOVE,R),()=>{document.removeEventListener(a.Ve.MOUSE_UP,k),document.removeEventListener(a.hi.TOUCH_END,A),document.removeEventListener(a.Ve.MOUSE_MOVE,w),document.removeEventListener(a.hi.TOUCH_MOVE,R)}}),[O,k,w,A,R]),Object(c.useEffect)((()=>{if(!t)return;const e=Me(`nitro.windows.${t}`);e&&e.offset&&(j({x:0,y:0}),e.offset&&b(e.offset))}),[t]),Object(Tn.createPortal)(Object(an.jsx)(on,{position:"absolute",innerRef:_,className:"draggable-window",onMouseDownCapture:C,onTouchStartCapture:v,style:i,children:o}),document.getElementById("draggable-windows-container"))},yn=e=>{const{theme:t="primary",uniqueKey:s=null,handleSelector:n=".drag-handler",windowPosition:r=Sn.CENTER,disableDrag:i=!1,overflow:a="hidden",position:o="relative",gap:l=0,classNames:d=[],...u}=e,j=Object(c.useRef)(),h=Object(c.useMemo)((()=>{const e=["nitro-card","rounded","shadow"];return e.push(`theme-${t||"primary"}`),d.length&&e.push(...d),e}),[t,d]);return Object(c.useEffect)((()=>{if(!s||!j||!j.current)return;const e=Me(`nitro.windows.${s}`),t=j.current;e&&e.size&&(t.style.width=`${e.size.width}px`,t.style.height=`${e.size.height}px`);const n=new ResizeObserver((e=>{const n={...Me(`nitro.windows.${s}`)};n.size={width:t.offsetWidth,height:t.offsetHeight},Ct(`nitro.windows.${s}`,n)}));return n.observe(t),()=>{n.disconnect()}}),[s]),Object(an.jsx)(Cn,{value:{theme:t},children:Object(an.jsx)(Rn,{uniqueKey:s,handleSelector:n,windowPosition:r,disableDrag:i,children:Object(an.jsx)(Fn,{innerRef:j,overflow:a,position:o,gap:l,classNames:h,...u})})})},kn=e=>{const{figure:t="",gender:s="M",headOnly:n=!1,direction:r=0,scale:i=1,classNames:o=[],style:l={},...u}=e,[j,h]=Object(c.useState)(null),[b,g]=Object(c.useState)(-1),m=Object(c.useRef)(!1),O=Object(c.useMemo)((()=>{const e=["avatar-image"];return o.length&&e.push(...o),e}),[o]),p=Object(c.useMemo)((()=>{let e={};return j&&j.length&&(e.backgroundImage=`url('${j}')`),1!==i&&(e.transform=`scale(${i})`,i%1||(e.imageRendering="pixelated")),Object.keys(l).length&&(e={...e,...l}),e}),[j,i,l]);return Object(c.useEffect)((()=>{const e=d().createAvatarImage(t,a.r.LARGE,s,{resetFigure:e=>{m.current||g(Math.random())},dispose:()=>{},disposed:!1},null);if(!e)return;let c=a.s.FULL;n&&(c=a.s.HEAD),e.setDirection(c,r);const i=e.getCroppedImage(c);i&&h(i.src),e.dispose()}),[t,s,r,n,b]),Object(c.useEffect)((()=>(m.current=!1,()=>{m.current=!0})),[]),Object(an.jsx)(on,{classNames:O,style:p,...u})},An=e=>{const{imageUrl:t=null,fit:s=!0,style:n=null,...r}=e,i=Object(c.useMemo)((()=>{const e={...n};return t&&(e.background=`url(${t}) center no-repeat`),e}),[n,t]);return Object(an.jsx)(on,{fit:s,style:i,...r})},Dn=e=>{const{badgeCode:t=null,isGroup:s=!1,showInfo:n=!1,customTitle:r=null,isGrayscale:i=!1,scale:o=1,classNames:l=[],style:d={},children:u=null,...j}=e,[h,b]=Object(c.useState)(null),g=Object(c.useMemo)((()=>{const e=["badge-image"];return s&&e.push("group-badge"),i&&e.push("grayscale"),l.length&&e.push(...l),e}),[l,s,i]),m=Object(c.useMemo)((()=>{let e={};return h&&(e.backgroundImage=`url('${h.src}')`,e.width=h.width,e.height=h.height,1!==o&&(e.transform=`scale(${o})`,o%1||(e.imageRendering="pixelated"),e.width=h.width*o,e.height=h.height*o)),Object.keys(d).length&&(e={...e,...d}),e}),[h,o,d]);return Object(c.useEffect)((()=>{if(!t||!t.length)return;let e=!1;const n=s=>{if(s.badgeId!==t)return;const r=a.fi.generateImage(new a.rf(s.image));r.onload=()=>b(r),e=!0,F().events.removeEventListener(a.t.IMAGE_READY,n)};F().events.addEventListener(a.t.IMAGE_READY,n);const r=s?F().getGroupBadgeImage(t):F().getBadgeImage(t);if(r&&!e){const e=a.fi.generateImage(new a.rf(r));e.onload=()=>b(e)}return()=>F().events.removeEventListener(a.t.IMAGE_READY,n)}),[t,s]),Object(an.jsxs)(on,{classNames:g,style:m,...j,children:[n&&p("badge.descriptions.enabled",!0)&&Object(an.jsxs)(on,{className:"badge-information text-black py-1 px-2 small",children:[Object(an.jsx)("div",{className:"fw-bold mb-1",children:s?r:Be(t)}),Object(an.jsx)("div",{children:s?We("group.badgepopup.body"):Fe(t)})]}),u]})},Ln=e=>{const{day:t="00",hour:s="00",minutes:n="00",seconds:r="00",classNames:i=[],children:a=null,...o}=e,l=Object(c.useMemo)((()=>{const e=["nitro-counter-time"];return i.length&&e.push(...i),e}),[i]);return Object(an.jsxs)(hn,{gap:1,children:[Object(an.jsx)(on,{classNames:l,...o,children:Object(an.jsxs)("div",{children:["00"!=t?t:s,We("00"!=t?"countdown_clock_unit_days":"countdown_clock_unit_hours")]})}),Object(an.jsx)(on,{style:{marginTop:"3px"},children:":"}),Object(an.jsx)(on,{classNames:l,...o,children:Object(an.jsxs)("div",{children:[n,We("countdown_clock_unit_minutes")]})}),Object(an.jsx)(on,{style:{marginTop:"3px"},children:":"}),Object(an.jsx)(on,{classNames:l,...o,children:Object(an.jsxs)("div",{children:[r,We("countdown_clock_unit_seconds")]})}),a]})},Pn=e=>{const{type:t="",classNames:s=[],style:n={},...r}=e,i=Object(c.useMemo)((()=>{const e=["nitro-currency-icon"];return s.length&&e.push(...s),e}),[s]),a=Object(c.useMemo)((()=>{let e=p("currency.asset.icon.url","");return e=e.replace("%type%",t.toString()),`url(${e})`}),[t]),o=Object(c.useMemo)((()=>{let e={};return e.backgroundImage=a,Object.keys(n).length&&(e={...e,...n}),e}),[n,a]);return Object(an.jsx)(on,{classNames:i,style:o,...r})},Un=e=>{const{productType:t="s",productClassId:s=-1,direction:n=2,extraData:r="",scale:i=1,style:o={},...l}=e,[d,u]=Object(c.useState)(null),j=Object(c.useMemo)((()=>{var e;let t={};return null!==d&&void 0!==d&&null!==(e=d.src)&&void 0!==e&&e.length&&(t.backgroundImage=`url('${d.src}')`,t.width=d.width,t.height=d.height),1!==i&&(t.transform=`scale(${i})`,i%1||(t.imageRendering="pixelated")),Object.keys(o).length&&(t={...t,...o}),t}),[d,i,o]),h=Object(c.useCallback)((()=>{let e=null;const c={imageReady:(e,t,s)=>{!s&&t&&(s=a.fi.generateImage(t)),s.onload=()=>u(s)},imageFailed:null};switch(t.toLocaleLowerCase()){case X.FLOOR:e=C().getFurnitureFloorImage(s,new a.kj(n),64,c,0,r);break;case X.WALL:e=C().getFurnitureWallImage(s,new a.kj(n),64,c,0,r)}if(e){const t=e.getImage();t.onload=()=>u(t)}}),[t,s,n,r]);return Object(c.useEffect)((()=>{h()}),[h]),d?Object(an.jsx)(on,{classNames:["furni-image"],style:j,...l}):null},Mn=e=>{const{figure:t=null,userName:s=null,message:n=null,editable:r=!1,onChange:c=null}=e;return Object(an.jsxs)(hn,{overflow:"hidden",className:"nitro-gift-card text-black",children:[Object(an.jsxs)("div",{className:"d-flex align-items-center justify-content-center gift-face flex-shrink-0",children:[!s&&Object(an.jsx)("div",{className:"gift-incognito"}),t&&Object(an.jsx)("div",{className:"gift-avatar",children:Object(an.jsx)(kn,{figure:t,direction:2,headOnly:!0})})]}),Object(an.jsx)(hn,{overflow:"hidden",className:"w-100 pt-4 pb-4 pe-4 ps-3",children:Object(an.jsxs)(Fn,{grow:!0,overflow:"auto",justifyContent:"between",children:[!r&&Object(an.jsx)(ur,{textBreak:!0,className:"gift-message",children:n}),r&&null!==c&&Object(an.jsx)("textarea",{className:"gift-message h-100",maxLength:140,value:n,onChange:e=>c(e.target.value),placeholder:We("catalog.gift_wrapping_new.message_hint")}),s&&Object(an.jsx)(ur,{italics:!0,textEnd:!0,className:"pe-1",children:We("catalog.gift_wrapping_new.message_from",["name"],[s])})]})})]})},Fn=e=>{const{size:t=0,offset:s=0,column:n=!0,gap:r=2,classNames:i=[],...a}=e,{isCssGrid:o=!1}=Object(c.useContext)(ln),l=Object(c.useMemo)((()=>{const e=[];if(t){let s=`col-${t}`;o&&(s=`g-${s}`),e.push(s)}if(s){let t=`offset-${s}`;o&&(t=`g-start-${s}`),e.push(t)}return i.length&&e.push(...i),e}),[t,s,o,i]);return Object(an.jsx)(hn,{classNames:l,column:n,gap:r,...a})},Bn=e=>{const{count:t=0,position:s="absolute",classNames:n=[],children:r=null,...i}=e,a=Object(c.useMemo)((()=>{const e=["badge","border","border-black","bg-danger","px-1","nitro-item-count"];return n.length&&e.push(...n),e}),[n]);return Object(an.jsxs)(on,{position:"absolute",classNames:a,...i,children:[t,r]})},Hn=e=>{const{value:t=0}=e,s=t.toString().split("");return Object(an.jsx)(an.Fragment,{children:s.map(((e,t)=>Object(an.jsx)("i",{className:"limited-edition-number n-"+e},t)))})},Gn=e=>{const{uniqueNumber:t=0,uniqueSeries:s=0,classNames:n=[],children:r=null,...i}=e,a=Object(c.useMemo)((()=>{const e=["unique-compact-plate","z-index-1"];return n.length&&e.push(...n),e}),[n]);return Object(an.jsxs)(on,{classNames:a,...i,children:[Object(an.jsx)("div",{children:Object(an.jsx)(Hn,{value:t})}),Object(an.jsx)("div",{children:Object(an.jsx)(Hn,{value:s})}),r]})},Wn=e=>{const{uniqueLimitedItemsLeft:t=0,uniqueLimitedSeriesSize:s=0,classNames:n=[],...r}=e,i=Object(c.useMemo)((()=>{const e=["unique-complete-plate"];return n.length&&e.push(...n),e}),[n]);return Object(an.jsx)(on,{classNames:i,...r,children:Object(an.jsxs)(Fn,{className:"plate-container",gap:0,children:[Object(an.jsxs)(hn,{justifyContent:"between",alignItems:"center",children:[We("unique.items.left"),Object(an.jsx)("div",{children:Object(an.jsx)(Hn,{value:t})})]}),Object(an.jsxs)(hn,{justifyContent:"between",alignItems:"center",children:[We("unique.items.number.sold"),Object(an.jsx)("div",{children:Object(an.jsx)(Hn,{value:s})})]})]})})},Vn=e=>{const{itemImage:t,itemColor:s,itemActive:n=!1,itemCount:r=1,itemCountMinimum:i=1,itemUniqueSoldout:a=!1,itemUniqueNumber:o=-2,itemUnseen:l=!1,itemHighlight:d=!1,disabled:u=!1,center:j=!0,column:h=!0,style:b={},classNames:g=[],position:m="relative",overflow:O="hidden",children:p=null,...f}=e,x=Object(c.useMemo)((()=>{const e=["layout-grid-item","border","border-2","border-muted","rounded"];return n&&e.push("active"),(a||o>0)&&e.push("unique-item"),a&&e.push("sold-out"),l&&e.push("unseen"),d&&e.push("has-highlight"),u&&e.push("disabled"),null===t&&e.push("icon","loading-icon"),g.length&&e.push(...g),e}),[n,a,o,l,d,u,t,g]),_=Object(c.useMemo)((()=>{let e={...b};return t&&!(a||o>0)&&(e.backgroundImage=`url(${t})`),s&&(e.backgroundColor=s),Object.keys(b).length&&(e={...e,...b}),e}),[b,t,s,a,o]);return Object(an.jsxs)(Fn,{center:j,pointer:!0,position:m,overflow:O,column:h,classNames:x,style:_,...f,children:[r>i&&Object(an.jsx)(Bn,{count:r}),o>0&&Object(an.jsxs)(an.Fragment,{children:[Object(an.jsx)(on,{fit:!0,className:"unique-bg-override",style:{backgroundImage:`url(${t})`}}),Object(an.jsx)("div",{className:"position-absolute bottom-0 unique-item-counter",children:Object(an.jsx)(Hn,{value:o})})]}),p]})},qn=e=>{const{imageUrl:t=null,className:s="",...n}=e;return Object(an.jsx)("img",{src:t,className:"no-select "+s,alt:"",...n})},zn=e=>{const{...t}=e;return Object(an.jsxs)(on,{classNames:["spinner-container"],...t,children:[Object(an.jsx)(on,{className:"spinner"}),Object(an.jsx)(on,{className:"spinner"}),Object(an.jsx)(on,{className:"spinner"})]})},Yn=e=>{const{roomId:t=-1,textureReceiver:s=null,onClose:n=null}=e,r=Object(c.useRef)(),i=Object(c.useCallback)((()=>{if(!r||!r.current)return null;const e=r.current.getBoundingClientRect();return new a.of(Math.floor(e.x),Math.floor(e.y),Math.floor(e.width),Math.floor(e.height))}),[]),o=Object(c.useCallback)((()=>{Xe(vt.CAMERA_SHUTTER),s(C().createTextureFromRoom(t,1,i()))}),[t,i,s]);return Object(an.jsx)(Rn,{handleSelector:".nitro-room-thumbnail-camera",children:Object(an.jsxs)("div",{className:"nitro-room-thumbnail-camera px-2",children:[Object(an.jsx)("div",{ref:r,className:"camera-frame"}),Object(an.jsxs)("div",{className:"d-flex align-items-end h-100 pb-2",children:[Object(an.jsx)("button",{className:"btn btn-sm btn-danger w-100 mb-1 me-2",onClick:n,children:We("cancel")}),Object(an.jsx)("button",{className:"btn btn-sm btn-success w-100 mb-1",onClick:o,children:We("navigator.thumbeditor.save")})]})]})})},$n=e=>{const{title:t="",onClose:s=null,classNames:n=[],children:r=null,type:i=fs.DEFAULT,...a}=e,o=Object(c.useMemo)((()=>{const e=["nitro-alert"];return e.push("nitro-alert-"+i),n.length&&e.push(...n),e}),[n,i]);return Object(an.jsxs)(yn,{classNames:o,theme:"primary-slim",...a,children:[Object(an.jsx)(vn,{headerText:t,onCloseClick:s}),Object(an.jsx)(In,{grow:!0,justifyContent:"between",overflow:"hidden",className:"text-black",gap:0,children:r})]})};var Kn=s(23);class Xn{}function Qn(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300;switch(e){case Xn.BOUNCE:switch(t){default:return{};case Kn.b:return{animationName:"bounceIn",animationDuration:`${s}ms`};case Kn.c:return{animationName:"bounceOut",animationDuration:`${s}ms`}}case Xn.SLIDE_LEFT:switch(t){default:return{};case Kn.b:return{animationName:"slideInLeft",animationDuration:`${s}ms`};case Kn.c:return{animationName:"slideOutLeft",animationDuration:`${s}ms`}}case Xn.SLIDE_RIGHT:switch(t){default:return{};case Kn.b:return{animationName:"slideInRight",animationDuration:`${s}ms`};case Kn.c:return{animationName:"slideOutRight",animationDuration:`${s}ms`}}case Xn.FLIP_X:switch(t){default:return{};case Kn.b:return{animationName:"flipInX",animationDuration:`${s}ms`};case Kn.c:return{animationName:"flipOutX",animationDuration:`${s}ms`}}case Xn.FADE_UP:switch(t){default:return{};case Kn.b:return{animationName:"fadeInUp",animationDuration:`${s}ms`};case Kn.c:return{animationName:"fadeOutDown",animationDuration:`${s}ms`}}case Xn.FADE_IN:switch(t){default:return{};case Kn.b:return{animationName:"fadeIn",animationDuration:`${s}ms`};case Kn.c:return{animationName:"fadeOut",animationDuration:`${s}ms`}}case Xn.FADE_DOWN:switch(t){default:return{};case Kn.b:return{animationName:"fadeInDown",animationDuration:`${s}ms`};case Kn.c:return{animationName:"fadeOutUp",animationDuration:`${s}ms`}}case Xn.HEAD_SHAKE:return t===Kn.b?{animationName:"headShake",animationDuration:`${s}ms`}:{}}return null}Xn.BOUNCE="bounce",Xn.SLIDE_LEFT="slideLeft",Xn.SLIDE_RIGHT="slideRight",Xn.FLIP_X="flipX",Xn.FADE_IN="fadeIn",Xn.FADE_DOWN="fadeDown",Xn.FADE_UP="fadeUp",Xn.HEAD_SHAKE="headShake";const Jn=e=>{const{type:t=null,inProp:s=!1,timeout:n=300,className:r=null,children:i=null}=e,[a,o]=Object(c.useState)(!1);return Object(c.useEffect)((()=>{let e=null;return s?o(!0):e=setTimeout((()=>{o(!1),clearTimeout(n)}),n),()=>{e&&clearTimeout(e)}}),[s,n]),Object(an.jsx)(Kn.d,{in:s,timeout:n,children:e=>Object(an.jsx)("div",{className:(null!==r&&void 0!==r?r:"")+" animate__animated",style:{...Qn(t,e,n)},children:a&&i})})},Zn=e=>{const{fadesOut:t=!0,timeoutMs:s=8e3,onClose:n=null,overflow:r="hidden",classNames:i=[],...a}=e,[o,l]=Object(c.useState)(!1),d=Object(c.useMemo)((()=>{const e=["nitro-notification-bubble","rounded"];return i.length&&e.push(...i),e}),[i]);return Object(c.useEffect)((()=>(l(!0),()=>l(!1))),[]),Object(c.useEffect)((()=>{if(!t)return;const e=setTimeout((()=>{l(!1),setTimeout((()=>n()),300)}),s);return()=>clearTimeout(e)}),[t,s,n]),Object(an.jsx)(Jn,{type:Xn.FADE_IN,inProp:o,timeout:300,children:Object(an.jsx)(hn,{overflow:r,classNames:d,onClick:n,...a})})},er=e=>{const{figure:t="",typeId:s=-1,paletteId:n=-1,petColor:r=16777215,customParts:i=[],posture:o="std",headOnly:l=!1,direction:d=0,scale:u=1,style:j={},...h}=e,[b,g]=Object(c.useState)(null),[m,O]=Object(c.useState)(0),[p,f]=Object(c.useState)(0),x=Object(c.useRef)(!1),_=Object(c.useMemo)((()=>{let e={};return b&&b.length&&(e.backgroundImage=`url(${b})`),1!==u&&(e.transform=`scale(${u})`,u%1||(e.imageRendering="pixelated")),e.width=m,e.height=p,Object.keys(j).length&&(e={...e,...j}),e}),[b,u,j,m,p]);Object(c.useEffect)((()=>{let e=s,c=n,u=r,j=i,h=l;if(t&&t.length){const s=new a.Ff(t);e=s.typeId,c=s.paletteId,u=s.color,j=s.customParts}16===e&&(h=!1);const b=C().getRoomObjectPetImage(e,c,u,new a.kj(45*d),64,{imageReady:(e,t,s)=>{x.current||(s?(g(s.src),O(s.width),f(s.height)):t&&(g(a.fi.generateImageUrl(t)),O(t.width),f(t.height)))},imageFailed:e=>{}},h,0,j,o);if(b){const e=b.getImage();e&&(g(e.src),O(e.width),f(e.height))}}),[t,s,n,r,i,o,l,d]),Object(c.useEffect)((()=>(x.current=!1,()=>{x.current=!0})),[]);return Object(an.jsx)(on,{classNames:["pet-image"],style:_,...h})},tr=e=>{const{text:t="",progress:s=0,maxProgress:n=100,position:r="relative",justifyContent:i="center",classNames:a=[],children:o=null,...l}=e,d=Object(c.useMemo)((()=>{const e=["nitro-progress-bar","text-white"];return a.length&&e.push(...a),e}),[a]);return Object(an.jsxs)(Fn,{position:r,justifyContent:i,classNames:d,...l,children:[t&&t.length>0&&Object(an.jsx)(hn,{fit:!0,center:!0,position:"absolute",className:"nitro-progress-bar-text small",children:t}),Object(an.jsx)(on,{className:"nitro-progress-bar-inner",style:{width:~~(100*(s-0)/(n-0)+0)+"%"}}),o]})},sr=e=>{const{level:t=0,classNames:s=[],children:n=null,...r}=e,i=Object(c.useMemo)((()=>{const e=["nitro-rarity-level"];return s.length&&e.push(...s),e}),[s]);return Object(an.jsxs)(on,{classNames:i,...r,children:[Object(an.jsx)("div",{children:t}),n]})},nr=e=>{const{roomPreviewer:t=null,height:s=0,children:n=null}=e,[r,i]=Object(c.useState)(null),l=Object(c.useRef)(),d=Object(c.useCallback)((e=>{t&&r&&l.current&&(t.updatePreviewRoomView(),r.canvasUpdated&&(l.current.style.backgroundImage=`url(${a.fi.generateImageUrl(r.master)})`))}),[t,r,l]),u=Object(c.useCallback)((()=>{if(!l.current||!t)return;let e=document.defaultView.getComputedStyle(l.current,null).backgroundColor;e=a.sb.rgbStringToHex(e),e=e.replace("#","0x"),t.backgroundColor=parseInt(e,16);const n=l.current.parentElement.clientWidth;t.getRoomCanvas(n,s);const r=t.getRenderingCanvas();i(r),r.canvasUpdated=!0,d(-1)}),[l,s,t,d]);return Object(c.useEffect)((()=>{if(!t)return;r||u(),o().ticker.add(d);const e=new ResizeObserver((()=>{if(!t||!l.current)return;const e=l.current.parentElement.offsetWidth;t.modifyRoomCanvas(e,s),d(-1)}));return e.observe(l.current),()=>{e.disconnect(),o().ticker.remove(d)}}),[r,t,l,s,u,d]),Object(an.jsxs)("div",{className:"room-preview-container",children:[Object(an.jsx)("div",{ref:l,className:"room-preview-image",style:{height:s},onClick:e=>{t&&(e.shiftKey?t.changeRoomObjectDirection():t.changeRoomObjectState())}}),n]})},rr=e=>{const{roomId:t=-1,customUrl:s=null,shrink:n=!0,overflow:r="hidden",classNames:i=[],children:a=null,...o}=e,l=Object(c.useMemo)((()=>{const e=["room-thumbnail","rounded","border"];return i.length&&e.push(...i),e}),[i]),d=Object(c.useMemo)((()=>s&&s.length?p("image.library.url")+s:p("thumbnails.url").replace("%thumbnail%",t.toString())),[s,t]);return Object(an.jsxs)(on,{shrink:n,overflow:r,classNames:l,...o,children:[d&&Object(an.jsx)("img",{alt:"",src:d}),a]})},cr=e=>{const{color:t="",message:s="",date:n="",senderName:r="",customTitle:c=null,onCloseClick:i=null}=e;return Object(an.jsx)(Rn,{handleSelector:".drag-handler",children:Object(an.jsxs)(Fn,{gap:0,alignItems:"center",className:`nitro-layout-trophy trophy-${t}`,children:[Object(an.jsxs)(hn,{center:!0,fullWidth:!0,position:"relative",className:"trophy-header drag-handler",children:[Object(an.jsx)(on,{position:"absolute",pointer:!0,className:"trophy-close",onClick:i}),Object(an.jsx)(ur,{bold:!0,children:We("widget.furni.trophy.title")})]}),Object(an.jsxs)(Fn,{className:"trophy-content py-1",gap:1,children:[c&&Object(an.jsx)(ur,{bold:!0,children:c}),s]}),Object(an.jsxs)(hn,{alignItems:"center",justifyContent:"between",className:"trophy-footer mt-1",children:[Object(an.jsx)(ur,{bold:!0,children:n}),Object(an.jsx)(ur,{bold:!0,children:r})]})]})})},ir=e=>{const{userId:t=0,userName:s=null,classNames:n=[],pointer:r=!0,children:i=null,...a}=e,o=Object(c.useMemo)((()=>{const e=["nitro-friends-spritesheet","icon-profile-sm"];return n.length&&e.push(...n),e}),[n]);return Object(an.jsx)(on,{classNames:o,pointer:r,onClick:e=>Xs(t),...a,children:i})},ar=e=>{const{isActive:t=!1,count:s=0,overflow:n="hidden",position:r="relative",pointer:i=!0,classNames:a=[],children:o=null,...l}=e,d=Object(c.useMemo)((()=>{const e=["nav-item","rounded-top","border"];return t&&e.push("active"),a.length&&e.push(...a),e}),[t,a]);return Object(an.jsxs)(hn,{overflow:n,pointer:i,position:r,classNames:d,...l,children:[Object(an.jsx)(hn,{shrink:!0,center:!0,children:o}),s>0&&Object(an.jsx)(Bn,{count:s})]})},or=e=>{const{justifyContent:t="center",gap:s=1,classNames:n=[],children:r=null,...i}=e,a=Object(c.useMemo)((()=>{const e=["container-fluid","nitro-card-tabs","pt-1"];return n.length&&e.push(...n),e}),[n]);return Object(an.jsx)(hn,{justifyContent:t,gap:s,classNames:a,...i,children:r})},lr=e=>{const{classNames:t=[],...s}=e,n=Object(c.useMemo)((()=>{const e=["form-group"];return t.length&&e.push(...t),e}),[t]);return Object(an.jsx)(hn,{classNames:n,...s})},dr=e=>{const{variant:t="black",height:s=1,classNames:n=[],style:r={},...i}=e,a=Object(c.useMemo)((()=>{const e=[];return t&&e.push("bg-"+t),n.length&&e.push(...n),e}),[t,n]),o=Object(c.useMemo)((()=>{let e={display:"list-item"};return s>0&&(e.height=s),Object.keys(r).length&&(e={...e,...r}),e}),[s,r]);return Object(an.jsx)(on,{classNames:a,style:o,...i})},ur=e=>{const{variant:t="black",fontWeight:s=null,fontSize:n=0,align:r=null,bold:i=!1,underline:a=!1,italics:o=!1,truncate:l=!1,center:d=!1,textEnd:u=!1,small:j=!1,wrap:h=!1,noWrap:b=!1,textBreak:g=!1,...m}=e,O=Object(c.useMemo)((()=>{const e=["d-inline"];return t&&e.push("text-"+t),i&&e.push("fw-bold"),s&&e.push("fw-"+s),n&&e.push("fs-"+n),r&&e.push("text-"+r),a&&e.push("text-decoration-underline"),o&&e.push("fst-italic"),l&&e.push("text-truncate"),d&&e.push("text-center"),u&&e.push("text-end"),j&&e.push("small"),h&&e.push("text-wrap"),b&&e.push("text-nowrap"),g&&e.push("text-break"),e}),[t,s,n,r,i,a,o,l,d,u,j,h,b,g]);return Object(an.jsx)(on,{classNames:O,...m})},jr=e=>{const{isError:t=!1,message:s="",percent:n=0}=e;return Object(an.jsx)(Fn,{fullHeight:!0,position:"relative",className:"nitro-loading",children:Object(an.jsx)(on,{fullHeight:!0,className:"container h-100",children:Object(an.jsxs)(Fn,{fullHeight:!0,alignItems:"center",justifyContent:"end",children:[Object(an.jsx)(on,{className:"connecting-duck"}),Object(an.jsx)(Fn,{size:6,className:"text-center py-4",children:t&&s&&s.length?Object(an.jsx)(on,{className:"fs-4 text-shadow",children:s}):Object(an.jsxs)(an.Fragment,{children:[Object(an.jsxs)(ur,{fontSize:4,variant:"white",className:"text-shadow",children:[n.toFixed(),"%"]}),Object(an.jsx)(tr,{progress:n,className:"mt-2 large"})]})})]})})})},hr=function(e,t,s){let n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];Object(c.useEffect)((()=>{if(n)return Array.isArray(e)?e.map((e=>t.addEventListener(e,s))):t.addEventListener(e,s),()=>{Array.isArray(e)?e.map((e=>t.removeEventListener(e,s))):t.removeEventListener(e,s)}}),[e,t,n,s])},br=(e,t)=>hr(e,g().events,t),gr=(e,t)=>hr(e,o().events,t),mr=(e,t)=>hr(e,C().events,t),Or=(e,t)=>hr(e,L().events,t),pr=(e,t)=>{Object(c.useEffect)((()=>{const s=new e(t);return O().registerMessageEvent(s),()=>O().removeMessageEvent(s)}),[e,t])},fr=function(e,t){let s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return hr(e,Ye,t,s)},xr=()=>{const[e,t]=Object(c.useState)(!0),[s,n]=Object(c.useState)([]),[r,i]=Object(c.useState)(null),[o,l]=Object(c.useState)(-1),[d,u]=Object(c.useState)(0),j=Object(c.useMemo)((()=>{let e=0;return s.forEach((t=>e+=ve.getAchievementCategoryTotalUnseen(t))),e}),[s]),h=Object(c.useMemo)((()=>{let e=0;return s.forEach((t=>e+=t.getProgress())),e}),[s]),b=Object(c.useMemo)((()=>{let e=0;return s.forEach((t=>e+=t.getMaxProgress())),e}),[s]),g=Object(c.useMemo)((()=>~~(100*(h-0)/(b-0)+0)),[h,b]);return pr(a.b,(e=>{const t=e.getParser().achievement;n((e=>{const s=[...e],n=s.findIndex((e=>e.code===t.category));if(-1===n){const e=new Ne(t.category);e.achievements.push(t),s.push(e)}else{const e=Le(s[n]),r=[...e.achievements],c=r.findIndex((e=>e.achievementId===t.achievementId));let i=null;-1===c?r.push(t):(i=r[c],r[c]=t),ve.getAchievementIsIgnored(t)||(t.unseen++,i&&(t.unseen+=i.unseen)),e.achievements=r,s[n]=e}return s}))})),pr(a.d,(e=>{const t=e.getParser(),s=[];for(const n of t.achievements){const e=n.category;let t=s.find((t=>t.code===e));t||(t=new Ne(e),s.push(t)),t.achievements.push(n)}n(s)})),pr(a.e,(e=>{const t=e.getParser();u(t.score)})),Object(c.useEffect)((()=>{e&&(Ee(new a.ig),t(!1))}),[e]),{achievementCategories:s,selectedCategoryCode:r,setSelectedCategoryCode:i,selectedAchievementId:o,setSelectedAchievementId:l,achievementScore:d,getTotalUnseen:j,getProgress:h,getMaxProgress:b,scaledProgressPercent:g,setAchievementSeen:(e,t)=>{n((s=>{const n=[...s];for(const r of n)if(r.code===e)for(const e of r.achievements)e.achievementId===t&&(e.unseen=0);return n}))}}};var _r=s(13);const Ir=()=>{const[e,t]=Object(c.useState)([]),[s,n]=Object(c.useState)([]),[r,i]=Object(c.useState)(-1),[l,d]=Object(c.useState)(10),[u,j]=Object(c.useState)(null);var b,g;return b=a.tg.INITIALIZED,g=e=>{t(Array.from(h().effects.values()))},hr(b,o().cameraManager.events,g),pr(a.he,(e=>{const t=e.getParser();j({credits:t.creditPrice,duckets:t.ducketPrice,publishDucketPrice:t.publishDucketPrice})})),Object(c.useEffect)((()=>{if(!h().isLoaded)return h().init(),void Ee(new a.lg)}),[]),{availableEffects:e,cameraRoll:s,setCameraRoll:n,selectedPictureIndex:r,setSelectedPictureIndex:i,myLevel:l,price:u}},Er=()=>Object(_r.a)(Ir);class Cr extends a.jf{}Cr.SHOW_CATALOG="CE_SHOW_CATALOG",Cr.HIDE_CATALOG="CE_HIDE_CATALOG",Cr.TOGGLE_CATALOG="CE_TOGGLE_CATALOG",Cr.SOLD_OUT="CE_SOLD_OUT",Cr.APPROVE_NAME_RESULT="CE_APPROVE_NAME_RESULT",Cr.PURCHASE_APPROVED="CE_PURCHASE_APPROVED",Cr.INIT_GIFT="CE_INIT_GIFT",Cr.CATALOG_RESET="CE_RESET",Cr.CATALOG_INVISIBLE_PAGE_VISITED="CE_CATALOG_INVISIBLE_PAGE_VISITED";class vr extends Cr{constructor(e,t,s){super(Cr.INIT_GIFT),this._pageId=void 0,this._offerId=void 0,this._extraData=void 0,this._pageId=e,this._offerId=t,this._extraData=s}get pageId(){return this._pageId}get offerId(){return this._offerId}get extraData(){return this._extraData}}class Nr extends Cr{constructor(e){super(Nr.POST_MARKETPLACE),this._item=void 0,this._item=e}get item(){return this._item}}Nr.POST_MARKETPLACE="CE_POST_MARKETPLACE";class Tr extends a.jf{constructor(e){super(Tr.PURCHASE_SUCCESS),this._purchase=void 0,this._purchase=e}get purchase(){return this._purchase}}Tr.PURCHASE_SUCCESS="CPE_PURCHASE_SUCCESS";class Sr extends a.jf{constructor(e){super(Sr.PURCHASE_FAILED),this._code=void 0,this._code=e}get code(){return this._code}}Sr.PURCHASE_FAILED="CPFE_PURCHASE_FAILED";class wr extends a.jf{constructor(e){super(wr.NOT_ALLOWED),this._code=void 0,this._code=e}get code(){return this._code}}wr.NOT_ALLOWED="CPNAE_NOT_ALLOWED";class Rr extends a.jf{}Rr.WIDGETS_INITIALIZED="CWE_CWE_WIDGETS_INITIALIZED",Rr.SELECT_PRODUCT="CWE_SELECT_PRODUCT",Rr.SET_EXTRA_PARM="CWE_CWE_SET_EXTRA_PARM",Rr.PURCHASE="CWE_PURCHASE",Rr.COLOUR_ARRAY="CWE_COLOUR_ARRAY",Rr.MULTI_COLOUR_ARRAY="CWE_MULTI_COLOUR_ARRAY",Rr.COLOUR_INDEX="CWE_COLOUR_INDEX",Rr.TEXT_INPUT="CWE_TEXT_INPUT",Rr.DROPMENU_SELECT="CWE_CWE_DROPMENU_SELECT",Rr.PURCHASE_OVERRIDE="CWE_PURCHASE_OVERRIDE",Rr.SELLABLE_PET_PALETTES="CWE_SELLABLE_PET_PALETTES",Rr.UPDATE_ROOM_PREVIEW="CWE_UPDATE_ROOM_PREVIEW",Rr.GUILD_SELECTED="CWE_GUILD_SELECTED",Rr.TOTAL_PRICE_WIDGET_INITIALIZED="CWE_TOTAL_PRICE_WIDGET_INITIALIZED",Rr.PRODUCT_OFFER_UPDATED="CWE_CWE_PRODUCT_OFFER_UPDATED",Rr.SET_PREVIEWER_STUFFDATA="CWE_CWE_SET_PREVIEWER_STUFFDATA",Rr.EXTRA_PARAM_REQUIRED_FOR_BUY="CWE_CWE_EXTRA_PARAM_REQUIRED_FOR_BUY",Rr.TOGGLE="CWE_CWE_TOGGLE",Rr.BUILDER_SUBSCRIPTION_UPDATED="CWE_CWE_BUILDER_SUBSCRIPTION_UPDATED",Rr.ROOM_CHANGED="CWE_CWE_ROOM_CHANGED",Rr.SHOW_WARNING_TEXT="CWE_CWE_SHOW_WARNING_TEXT";a.jf;class yr extends a.jf{constructor(){super(yr.SOLD_OUT)}}yr.SOLD_OUT="CPSOE_SOLD_OUT";a.jf;class kr extends a.jf{constructor(e,t){super(kr.UPDATE_STUFF_DATA),this._offer=void 0,this._stuffData=void 0,this._offer=e,this._stuffData=t}get offer(){return this._offer}get stuffData(){return this._stuffData}}kr.UPDATE_STUFF_DATA="SRPSA_UPDATE_STUFF_DATA";class Ar extends a.jf{}Ar.SHOW_GUIDE_TOOL="GTE_SHOW_GUIDE_TOOL",Ar.HIDE_GUIDE_TOOL="GTE_HIDE_GUIDE_TOOL",Ar.TOGGLE_GUIDE_TOOL="GTE_TOGGLE_GUIDE_TOOL",Ar.CREATE_HELP_REQUEST="GTE_CREATE_HELP_REQUEST",Ar.CREATE_BULLY_REQUEST="GTE_CREATE_BULLY_REQUEST";class Dr extends a.jf{}Dr.INIT="HC_NAME_CHANGE_INIT";class Lr extends a.jf{constructor(e,t,s){super(Lr.FURNI_ADDED),this.id=e,this.spriteId=t,this.category=s}}Lr.FURNI_ADDED="IFAE_FURNI_ADDED";class Pr extends a.jf{}Pr.SHOW_THUMBNAIL="NE_SHOW_THUMBNAIL",Pr.HIDE_THUMBNAIL="NE_HIDE_THUMBNAIL",Pr.TOGGLE_THUMBNAIL="NE_TOGGLE_THUMBNAIL";const Ur=e=>e&&e.length?e.replace(/\\r/g,"\r"):"",Mr=e=>{const t="0"+e;return t.substr(t.length-2,t.length)};let Fr=null;const Br=()=>{const[e,t]=Object(c.useState)([]),[s,n]=Object(c.useState)([]),[r,i]=Object(c.useState)([]),[l,d]=Object(c.useState)(!1),[u,j]=Object(c.useState)(!1),h=e=>{const t=p("notification",{});return t?t[e]:null},b=(e,t,s,n)=>{if(e.has(s))return e.get(s);const r=["notification",t,s].join(".");return o().localization.hasValue(r)||n?We(r,Array.from(e.keys()),Array.from(e.values())):null},g=(e,t)=>{let s=e.get("image");return s||(s=p("image.library.notifications.url","").replace("%image%",t.replace(/\./g,"_"))),We(s)},m=Object(c.useCallback)((function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;c&&c.length||(c=We("notifications.broadcast.title")),s&&s.length||(s=fs.DEFAULT);const a=new xs([Ur(e)],s,n,r,c,i);t((e=>[a,...e]))}),[]),O=Object(c.useCallback)((()=>m(null,fs.NITRO)),[m]),f=Object(c.useCallback)((function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(l)return;const c=new Is(e,t,s,r);n((e=>[c,...e]))}),[l]),x=Object(c.useCallback)((function(e,t,s){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;n&&n.length||(n=We("generic.confirm")),r&&r.length||(r=We("generic.cancel")),c&&c.length||(c=We("notifications.broadcast.title"));const o=new Es(a,e,t,s,n,r,c);i((e=>[o,...e]))}),[]),_=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;m(e,fs.DEFAULT,t,We("mod.alert.link"),We("mod.alert.title"))},I=Object(c.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";switch(e){case Ot.ALERT_SCAM:return void m(We("inventory.trading.warning.other_not_offering"),null,null,null,We("inventory.trading.notification.title"));case Ot.HOTEL_TRADING_DISABLED:case Ot.YOU_NOT_ALLOWED:case Ot.THEY_NOT_ALLOWED:case Ot.ROOM_DISABLED:case Ot.YOU_OPEN:case Ot.THEY_OPEN:return void m(We(`inventory.trading.openfail.${e}`,["otherusername"],[t]),null,null,null,We("inventory.trading.openfail.title"));case Ot.ERROR_WHILE_COMMIT:return void m(`${We("inventory.trading.notification.caption")}, ${We("inventory.trading.notification.commiterror.info")}`,null,null,null,We("inventory.trading.notification.title"));case Ot.THEY_CANCELLED:return void m(We("inventory.trading.info.closed"),null,null,null,We("inventory.trading.notification.title"))}}),[m]),E=Object(c.useCallback)((e=>{t((t=>{const s=[...t],n=s.findIndex((t=>e===t));return n>=0&&s.splice(n,1),s}))}),[]),v=Object(c.useCallback)((e=>{n((t=>{const s=[...t],n=s.findIndex((t=>e===t));return n>=0&&s.splice(n,1),s}))}),[]),N=Object(c.useCallback)((e=>{i((t=>{const s=[...t],n=s.findIndex((t=>e===t));return n>=0&&s.splice(n,1),s}))}),[]);pr(a.pg,(e=>{const t=e.getParser();if(t.userId!==F().userId)return;const s=We("notifications.text.respect.1"),n=We("notifications.text.respect.2",["count"],[t.respectsReceived.toString()]);f(s,_s.RESPECT),f(n,_s.RESPECT)})),pr(a.Wd,(e=>{const t=e.getParser();m(t.message.replace(/\\r/g,"\r"),null,null,We("notifications.broadcast.title"))})),pr(a.c,(e=>{const t=e.getParser(),s=We("achievements.levelup.desc"),n=Be(t.data.badgeCode),r=F().getBadgeUrl(t.data.badgeCode),c="questengine/achievements/"+t.data.category;f(s+" "+n,_s.ACHIEVEMENT,r,c)})),pr(a.qb,(e=>{const t=e.getParser();t.numGifts<=0||f(t.numGifts.toString(),_s.CLUBGIFT,null,"catalog/open/"+p("catalog.links")["hc.hc_gifts"])})),pr(a.Qe,(e=>{const t=e.getParser();_(t.message,t.url,!1)})),pr(a.f,(e=>{const t=e.getParser();if(t.amountChanged<=0||5!==t.type)return;const s=p("currency.asset.icon.url","").replace("%type%",t.type.toString());f(We("notifications.text.loyalty.received",["AMOUNT"],[t.amountChanged.toString()]),_s.INFO,s)})),pr(a.Li,(e=>{const t=e.getParser();_(t.message)})),pr(a.ee,(e=>{const t=e.getParser();m(We("opening.hours."+(t.userThrowOutAtClose?"disconnected":"closed"),["h","m"],[Mr(t.openHour),Mr(t.openMinute)]),fs.DEFAULT,null,null,We("opening.hours.title"))})),pr(a.If,(e=>{const t=e.getParser(),s=We("notifications.text."+(t.boughtAsGift?"petbought":"petreceived"));let n=null;const r=C().getRoomObjectPetImage(t.pet.typeId,t.pet.paletteId,parseInt(t.pet.color,16),new a.kj(135),64,null,!0);r&&(n=r.getImage().src),f(s,_s.PETLEVEL,n)})),pr(a.ue,(e=>{const s=e.getParser().messages.map((e=>Ur(e))),n=new xs(s,fs.MOTD,null,null,We("notifications.motd.title"));t((e=>[n,...e]))})),pr(a.Hf,(e=>{const t=e.getParser();let s=null;const n=C().getRoomObjectPetImage(t.figureData.typeId,t.figureData.paletteId,parseInt(t.figureData.color,16),new a.kj(135),64,null,!0);n&&(s=n.getImage().src),f(We("notifications.text.petlevel",["pet_name","level"],[t.petName,t.level.toString()]),_s.PETLEVEL,s)})),pr(a.ge,(e=>{const t=e.getParser();d(!t.enabled)})),pr(a.rb,(e=>{const t=e.getParser();if(!t.products||!t.products.length)return;const s=t.products[0];s&&f(We("notifications.text.club_gift.selected"),_s.INFO,xt.getProductImageUrl(s.productType,s.furniClassId,s.extraParam))})),pr(a.ve,(e=>{const t=e.getParser();m(We("maintenance.shutdown",["m","d"],[t.minutesUntilMaintenance.toString(),t.duration.toString()]),fs.DEFAULT,null,null,We("opening.hours.title"))})),pr(a.Oe,(e=>{const t=e.getParser();_(t.message,t.url)})),pr(a.wf,(e=>{const t=e.getParser();!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t||(t=new Map);const s=h("notification."+e);if(s)for(const o in s)t.set(o,s[o]);const n=b(t,e,"title",!0),r=b(t,e,"message",!0).replace(/\\r/g,"\r"),c=b(t,e,"linkTitle",!1),i=b(t,e,"linkUrl",!1),a=g(t,e);"BUBBLE"===t.get("display")?f(We(r),_s.INFO,a,i):m(r,e,i,c,n,a),t.get("sound")&&Xe(t.get("sound"))}(t.type,t.parameters)})),pr(a.fe,(e=>{const t=e.getParser();m(We("opening.hours.shutdown",["m"],[t.openMinute.toString()]),fs.DEFAULT,null,null,We("opening.hours.title"))})),pr(a.de,(e=>{const t=e.getParser();m(We("opening.hours.disconnected",["h","m"],[t.openHour.toString(),t.openMinute.toString()]),fs.DEFAULT,null,null,We("opening.hours.title"))}));const T=Object(c.useCallback)((()=>{if(!u)if(a.Kg.isRunning()){if(Fr)return;Fr=setTimeout((()=>{T()}),a.Kg.totalRunningTime+5e3)}else Fr&&(clearTimeout(Fr),Fr=null),f(We("mod.chatdisclaimer"),_s.INFO),j(!0)}),[u,f]);return pr(a.Mg,T),{alerts:e,bubbleAlerts:s,confirms:r,simpleAlert:m,showNitroAlert:O,showTradeAlert:I,showConfirm:x,closeAlert:E,closeBubbleAlert:v,closeConfirm:N}},Hr=()=>Object(_r.a)(Br),Gr=(e,t)=>{const[s,n]=Object(c.useState)((()=>{if("undefined"===typeof window)return t;try{const s=Me(e);return null!==s&&void 0!==s?s:t}catch(s){return t}}));return[s,t=>{try{const r=t instanceof Function?t(s):t;n(r),"undefined"!==typeof window&&Ct(e,r)}catch(r){a.mf.error(r)}}]},Wr=()=>Gr(Ve.CATALOG_PLACE_MULTIPLE_OBJECTS,!1),Vr=()=>Object(_r.a)(Wr),qr=()=>Gr(Ve.CATALOG_SKIP_PURCHASE_CONFIRMATION,!1),zr=()=>Object(_r.a)(qr),Yr=()=>{const[e,t]=Object(c.useState)(!1),[s,n]=Object(c.useState)(!1),[r,i]=Object(c.useState)(-1),[l,d]=Object(c.useState)(-1),[u,j]=Object(c.useState)(Y.NORMAL),[h,b]=Object(c.useState)(null),[g,O]=Object(c.useState)(null),[p,f]=Object(c.useState)(null),[x,_]=Object(c.useState)(null),[I,E]=Object(c.useState)([]),[v,N]=Object(c.useState)(null),[T,S]=Object(c.useState)([]),[w,R]=Object(c.useState)(null),[y,k]=Object(c.useState)(!1),[A,D]=Object(c.useState)({quantity:1,extraData:null,extraParamRequired:!1,previewStuffData:null}),[L,P]=Object(c.useState)({}),[U,M]=Object(c.useState)(!1),[F,B]=Vr(),[V,z]=zr(),[$,K]=Object(c.useState)(null),[Z,ee]=Object(c.useState)(null),[se,ne]=Object(c.useState)(0),[re,oe]=Object(c.useState)(0),[de,ue]=Object(c.useState)(0),[be,ge]=Object(c.useState)(0),[me,Oe]=Object(c.useState)(0),[pe,fe]=Object(c.useState)(0),{simpleAlert:xe=null}=Hr(),_e=Object(c.useRef)(new ae),Ie=Object(c.useCallback)((()=>{i(-1),d(-1),b(null),O(null),f(null),_(null),E([]),N(null),S([]),t(!1)}),[]),Ce=Object(c.useCallback)((e=>{if(!e)return H.MISSING_OFFER;if(se<0||se>=re)return H.FURNI_LIMIT_REACHED;const t=he();if(!t)return H.NOT_IN_ROOM;if(!t.isRoomOwner)return H.NOT_ROOM_OWNER;if(be<=0){const e=C();let s=e.getRoomObjectCount(t.roomId,a.Wg.UNIT);for(;s>0;){const n=e.getRoomObjectByIndex(t.roomId,s,a.Wg.UNIT),r=t.userDataManager.getUserDataByIndex(n.id);if(r&&r.type===a.ah.USER&&r.roomIndex!==t.ownRoomIndex&&!r.isModerator)return H.VISITORS_IN_ROOM;s--}}return H.OKAY}),[se,re,be]),ve=Object(c.useCallback)((e=>{const t=he();return!(!(t&&e.page&&"sold_ltd_items"!==e.page.layoutCode&&u===Y.NORMAL&&(t.isRoomOwner||t.isGuildRoom&&t.controllerLevel>=a.yg.GUILD_MEMBER)||u===Y.BUILDER&&Ce(e)===H.OKAY)||e.pricingModel===J.PRICING_MODEL_BUNDLE||e.product.productType===X.EFFECT||e.product.productType===X.HABBO_CLUB)}),[u,Ce]),Ne=Object(c.useCallback)((e=>{if(!ve(e))return;const s=e.product;if(!s)return;let n=0;switch(s.productType){case X.FLOOR:n=a.Wg.FLOOR;break;case X.WALL:n=a.Wg.WALL}C().processRoomObjectPlacement(a.Zg.CATALOG,-e.offerId,n,s.productClassId,s.extraParam)&&(K(e),M(!0),t(!1))}),[ve]),Te=Object(c.useCallback)(((e,t)=>{const s=C();let n=s.getRoomInstanceVariable(s.activeRoomId,a.ch.ROOM_WALL_TYPE),r=s.getRoomInstanceVariable(s.activeRoomId,a.ch.ROOM_FLOOR_TYPE),c=s.getRoomInstanceVariable(s.activeRoomId,a.ch.ROOM_LANDSCAPE_TYPE);switch(n=n&&n.length?n:"101",r=r&&r.length?r:"101",c=c&&c.length?c:"1.1",e){case"floor":return void s.updateRoomInstancePlaneType(s.activeRoomId,t,n,c,!0);case"wallpaper":return void s.updateRoomInstancePlaneType(s.activeRoomId,r,t,c,!0);case"landscape":return void s.updateRoomInstancePlaneType(s.activeRoomId,r,n,t,!0);default:return void s.updateRoomInstancePlaneType(s.activeRoomId,r,n,c,!0)}}),[]),Se=Object(c.useCallback)((()=>{$&&(C().cancelRoomObjectInsert(),M(!1),K(null))}),[$]),we=Object(c.useCallback)((function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];M((t=>(t&&e&&m("catalog/open"),!1)))}),[]),Re=Object(c.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e||we(),ee((e=>{if(e)switch(e.category){case a.Wg.FLOOR:C().removeRoomObjectFloor(e.roomId,e.objectId);break;case a.Wg.WALL:switch(e.furniData.className){case"floor":case"wallpaper":case"landscape":Te("reset","");break;default:C().removeRoomObjectWall(e.roomId,e.objectId)}break;default:C().deleteRoomObject(e.objectId,e.category)}return null}))}),[we,Te]),ye=Object(c.useCallback)(((e,t)=>{if(t.pageId===e&&t!==h)return t;for(const s of t.children){const t=ye(e,s);if(t)return t}return null}),[h]),ke=Object(c.useCallback)(((e,t)=>{if(t.pageName===e&&t!==h)return t;for(const s of t.children){const t=ke(e,s);if(t)return t}return null}),[h]),Ae=Object(c.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!g||!g.size)return null;if(t){const t=[],s=g.get(e);if(s&&s.length)for(const e of s)e.isVisible&&t.push(e);if(t.length)return t}return g.get(e)}),[g]),De=Object(c.useCallback)(((e,t)=>{e<0||(n(!0),i(e),e>-1&&Ee(new a.uc(e,t,u)))}),[u]),Le=Object(c.useCallback)(((e,t,s,n,r,c)=>{const i=new W(e,t,s,n,c);if(f(i),d((t=>-1!==e?e:t)),k(!1),r>-1&&i.offers.length)for(const a of i.offers)if(a.offerId===r){_(a);break}}),[]),Pe=Object(c.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;if(Se(),"root"===e.parent.pageName&&e.children.length)for(const r of e.children)if(r.isVisible){e=r;break}const s=[];let n=e;for(;n&&"root"!==n.pageName;)s.push(n),n=n.parent;s.reverse(),E((t=>{const n=t.indexOf(e)>=0,r=e.isOpen;for(const e of t)e.deactivate(),-1===s.indexOf(e)&&e.close();for(const c of s)c.activate(),c.parent&&c.open(),c===e.parent&&c.children.length&&c.open();return n&&r?e.close():e.open(),s})),e.pageId>-1&&De(e.pageId,t)}),[E,De,Se]),Ue=Object(c.useCallback)((s=>{if(N(null),e){const e=ye(s,h);e&&Pe(e)}else _e.current.requestById=s,t(!0)}),[e,h,ye,Pe]),Me=Object(c.useCallback)((s=>{if(N(null),e){const e=ke(s,h);e&&Pe(e)}else _e.current.requestByName=s,t(!0)}),[e,h,ke,Pe]),Fe=Object(c.useCallback)((s=>{if(N(null),e){const e=Ae(s);if(!e||!e.length)return;Pe(e[0],s)}else _e.current.requestedByOfferId=s,t(!0)}),[e,Ae,Pe]),Be=Object(c.useCallback)((()=>{}),[]);return pr(a.gb,(e=>{const t=e.getParser(),s=new Map,n=(e,t,r)=>{const c=new G(e,t,r);for(const n of c.offerIds)s.has(n)?s.get(n).push(c):s.set(n,[c]);t++;for(const s of e.children)c.addChild(n(s,t,c));return c};b(n(t.root,0,null)),O(s)})),pr(a.eb,(e=>{const t=e.getParser();if(t.catalogType!==u)return;const s=[];for(const n of t.offers){const e=[],t=je(n.localizationId);for(const s of n.products){const n=le(s.furniClassId,s.productType);e.push(new Q(s.productType,s.furniClassId,s.extraParam,s.productCount,t,n,s.uniqueLimitedItem,s.uniqueLimitedSeriesSize,s.uniqueLimitedItemsLeft))}if(!e.length)continue;const r=new J(n.offerId,n.localizationId,n.rent,n.priceCredits,n.priceActivityPoints,n.priceActivityPointsType,n.giftable,n.clubLevel,e,n.bundlePurchaseAllowed);(u===Y.NORMAL||r.pricingModel!==J.PRICING_MODEL_BUNDLE&&r.pricingModel!==J.PRICING_MODEL_MULTI)&&s.push(r)}t.frontPageItems&&t.frontPageItems.length&&S(t.frontPageItems),n(!1),r===t.pageId&&Le(t.pageId,t.layoutCode,new ce(t.localization.images.concat(),t.localization.texts.concat()),s,t.offerId,t.acceptSeasonCurrencyAsCredits)})),pr(a.Vf,(e=>{const t=e.getParser();$e(new Tr(t.offer))})),pr(a.Rf,(e=>{const t=e.getParser();$e(new Sr(t.code))})),pr(a.Uf,(e=>{const t=e.getParser();$e(new wr(t.code))})),pr(a.qe,(e=>{e.getParser();$e(new yr)})),pr(a.Of,(e=>{const t=e.getParser().offer;if(!t||!t.products.length)return;t.products[0].uniqueLimitedItem;const s=[],n=je(t.localizationId);for(const c of t.products){const e=le(c.furniClassId,c.productType);s.push(new Q(c.productType,c.furniClassId,c.extraParam,c.productCount,n,e,c.uniqueLimitedItem,c.uniqueLimitedSeriesSize,c.uniqueLimitedItemsLeft))}const r=new J(t.offerId,t.localizationId,t.rent,t.priceCredits,t.priceActivityPoints,t.priceActivityPointsType,t.giftable,t.clubLevel,s,t.bundlePurchaseAllowed);(u===Y.NORMAL||r.pricingModel!==J.PRICING_MODEL_BUNDLE&&r.pricingModel!==J.PRICING_MODEL_MULTI)&&(r.page=p,_(r),r.product&&r.product.productType===X.WALL&&D((e=>{const t={...e};return t.extraData=r.product.extraParam||null,t})))})),pr(a.Wh,(e=>{const t=e.getParser(),s=new q(t.productCode,t.palettes.slice());P((e=>{const t=[];e.petPalettes&&t.push(...e.petPalettes);for(let n=0;n<t.length;n++){if(t[n].breed===s.breed){t.splice(n,1);break}}return t.push(s),{...e,petPalettes:t}}))})),pr(a.Yd,(e=>{const t=e.getParser();P((e=>({...e,clubOffers:t.offers})))})),pr(a.Vd,(e=>{const t=e.getParser();P((e=>({...e,groups:t.groups})))})),pr(a.Yc,(e=>{const t=e.getParser();P((e=>({...e,giftConfiguration:new te(t)})))})),pr(a.Be,(e=>{const t=e.getParser();if(!t)return;let s="";s=1===t.result?We("inventory.marketplace.result.title.success"):We("inventory.marketplace.result.title.failure");const n=We(`inventory.marketplace.result.${t.result}`);xe(n,fs.DEFAULT,null,null,s)})),pr(a.pb,(e=>{const t=e.getParser();P((e=>({...e,clubGifts:t})))})),pr(a.hb,(t=>{const s=e;Ie(),s&&xe(We("catalog.alert.published.description"),fs.ALERT,null,null,We("catalog.alert.published.title"))})),pr(a.F,(e=>{const t=e.getParser();ne(t.furniCount),Be()})),pr(a.J,(e=>{const t=e.getParser();oe(t._Str_15864),ue(t._Str_24094),ge(t._Str_3709),Oe(o().time),fe(t._Str_24379),Be()})),fr(Tr.PURCHASE_SUCCESS,(e=>Xe(vt.CREDITS))),mr(a.Gg.PLACED,(e=>{if(!U||e.type!==a.Gg.PLACED)return;if(Re(!0),!$)return void we();let t=!1;const s=$.product;if(e.category===a.Wg.WALL)switch(s.furnitureData.className){case"floor":case"wallpaper":case"landscape":t=e.placedOnFloor||e.placedOnWall;break;default:t=e.placedInRoom}else t=e.placedInRoom;if(t)switch(ee(new ie(e.roomId,e.objectId,e.category,e.wallLocation,e.x,e.y,e.direction,$)),u){case Y.NORMAL:{switch(e.category){case a.Wg.FLOOR:C().addFurnitureFloor(e.roomId,e.objectId,s.productClassId,new a.kj(e.x,e.y,e.z),new a.kj(e.direction),0,new a.oe);break;case a.Wg.WALL:switch(s.furnitureData.className){case"floor":case"wallpaper":case"landscape":Te(s.furnitureData.className,s.extraParam);break;default:C().addFurnitureWall(e.roomId,e.objectId,s.productClassId,new a.kj(e.x,e.y,e.z),new a.kj(45*e.direction),0,e.instanceData,0)}}const t=C().getRoomObject(e.roomId,e.objectId,e.category);t&&t.model.setValue(a.ch.FURNITURE_ALPHA_MULTIPLIER,.5),V?(Ee(new a.Tf(r,$.offerId,s.extraParam,1)),F&&Ne($)):F&&Ne($);break}case Y.BUILDER:{let t=$.page.pageId;switch(-12345678===t&&(t=-1),e.category){case a.Wg.FLOOR:Ee(new a.G(t,$.offerId,s.extraParam,e.x,e.y,e.direction));break;case a.Wg.WALL:Ee(new a.H(t,$.offerId,s.extraParam,e.wallLocation))}F&&Ne($);break}}else we()})),fr(Lr.FURNI_ADDED,(e=>{const t=C();if(Z&&Z.productClassId===e.spriteId&&Z.roomId===t.activeRoomId){switch(e.category){case Je.FLOOR:{const s=t.getRoomInstanceVariable(t.activeRoomId,a.ch.ROOM_FLOOR_TYPE);Z.extraParam!==s&&Ee(new a.lc(e.id));break}case Je.WALL_PAPER:{const s=t.getRoomInstanceVariable(t.activeRoomId,a.ch.ROOM_WALL_TYPE);Z.extraParam!==s&&Ee(new a.lc(e.id));break}case Je.LANDSCAPE:{const s=t.getRoomInstanceVariable(t.activeRoomId,a.ch.ROOM_LANDSCAPE_TYPE);Z.extraParam!==s&&Ee(new a.lc(e.id));break}default:Ee(new a.kc(e.id,Z.category,Z.wallLocation,Z.x,Z.y,Z.direction))}F||Re()}})),Object(c.useEffect)((()=>()=>_(null)),[p]),Object(c.useEffect)((()=>{if(e&&h&&g&&_e.current)switch(_e.current.requestType){case ae.REQUEST_TYPE_NONE:if(p)return;if(h.isBranch)for(const e of h.children)if(e&&e.isVisible)return void Pe(e);return;case ae.REQUEST_TYPE_ID:return Ue(_e.current.requestById),void _e.current.resetRequest();case ae.REQUEST_TYPE_OFFER:return Fe(_e.current.requestedByOfferId),void _e.current.resetRequest();case ae.REQUEST_TYPE_NAME:return Me(_e.current.requestByName),void _e.current.resetRequest()}}),[e,h,g,p,Pe,Ue,Fe,Me]),Object(c.useEffect)((()=>{!v&&p&&-1===p.pageId&&Ue(l)}),[v,p,l,Ue]),Object(c.useEffect)((()=>{x&&D({quantity:1,extraData:null,extraParamRequired:!1,previewStuffData:null})}),[x]),Object(c.useEffect)((()=>{e&&!h&&(Ee(new a.Bc),Ee(new a.xc),Ee(new a.tc(u)),Ee(new a.I))}),[e,h,u]),Object(c.useEffect)((()=>(R(new a.eh(C(),++a.eh.PREVIEW_COUNTER)),()=>{R((e=>(e.dispose(),null)))})),[]),{isVisible:e,setIsVisible:t,isBusy:s,pageId:r,previousPageId:l,currentType:u,rootNode:h,offersToNodes:g,currentPage:p,setCurrentPage:f,currentOffer:x,setCurrentOffer:_,activeNodes:I,searchResult:v,setSearchResult:N,frontPageItems:T,roomPreviewer:w,navigationHidden:y,setNavigationHidden:k,purchaseOptions:A,setPurchaseOptions:D,catalogOptions:L,setCatalogOptions:P,getNodeById:ye,getNodeByName:ke,activateNode:Pe,openPageById:Ue,openPageByName:Me,openPageByOfferId:Fe,requestOfferToMover:Ne}},$r=()=>Object(_r.a)(Yr);let Kr=0,Xr=0;const Qr=()=>{const[e,t]=Object(c.useState)([]),[s,n]=Object(c.useState)([]),[r,i]=Object(c.useState)([]),[o,l]=Object(c.useState)(!1),d=e=>{e.id=Kr++,t((t=>{const s=[...t];return s.push(e),s.length>1e3&&s.shift(),s}))},u=e=>{e.id=Xr++,i((t=>{const s=[...t];return s.push(e),s.length>1e3&&s.shift(),s}))};return Or(a.hh.CHAT_EVENT,(e=>{const t=he();if(!t)return;const s=t.userDataManager.getUserDataByIndex(e.objectId);s&&d({id:-1,entityId:s.webID,name:s.name,look:s.figure,entityType:s.type,message:e.message,timestamp:Ft(),type:Mt.TYPE_CHAT,roomId:t.roomId})})),Or(a.mh.STARTED,(e=>l(!0))),pr(a.Dc,(e=>{if(!o)return;const t=e.getParser();var r;s.length&&s[s.length-1].id===t.data.roomId||(d({id:-1,entityId:t.data.roomId,name:t.data.roomName,timestamp:Ft(),type:Mt.TYPE_ROOM_INFO,roomId:t.data.roomId}),r={id:t.data.roomId,name:t.data.roomName},n((e=>{const t=[...e];return t.push(r),t.length>10&&t.shift(),t})),l(!1))})),pr(a.cf,(e=>{const t=e.getParser();u({id:-1,entityId:t.senderId,name:"",message:t.messageText,roomId:-1,timestamp:Bt(t.secondsSinceSent),type:Mt.TYPE_IM})})),pr(a.Tg,(e=>{const t=e.getParser();u({id:-1,entityId:t.senderId,name:"",message:t.messageText,roomId:-1,timestamp:Bt(),type:Mt.TYPE_IM})})),{chatHistory:e,roomHistory:s,messengerHistory:r}},Jr=()=>Object(_r.a)(Qr),Zr=()=>{const[e,t]=Object(c.useState)([]),[s,n]=Object(c.useState)([]),[r,i]=Object(c.useState)([]),[o,l]=Object(c.useState)([]),[d,u]=Object(c.useState)(null),j=Object(c.useMemo)((()=>{const t=e.filter((e=>e.online));return t.sort(((e,t)=>e.name<t.name?-1:e.name>t.name?1:0)),t}),[e]),h=Object(c.useMemo)((()=>{const t=e.filter((e=>!e.online));return t.sort(((e,t)=>e.name<t.name?-1:e.name>t.name?1:0)),t}),[e]),b=t=>{for(const s of e)if(s.id===t)return s;return null},g=e=>e!==F().userId&&(!b(e)&&(!s.find((t=>t.requesterUserId===e))&&!(r.indexOf(e)>=0)));return pr(a.Ee,(e=>{const t=e.getParser();u(new zt(t.userFriendLimit,t.normalFriendLimit,t.extendedFriendLimit,t.categories)),Ee(new a.Ac)})),pr(a.Vb,(e=>{const s=e.getParser();t((e=>{const t=[...e];for(const n of s.fragment){const e=t.findIndex((e=>e.id===n.id)),s=new Gt;s.populate(n),e>-1?t[e]=s:t.push(s)}return t}))})),pr(a.Xb,(e=>{const s=e.getParser();t((e=>{const t=[...e],n=e=>{const s=t.findIndex((t=>t.id===e.id));if(-1===s){const s=new Gt;s.populate(e),t.unshift(s)}else t[s].populate(e)};for(const r of s.addedFriends)n(r);for(const r of s.updatedFriends)n(r);for(const r of s.removedFriendIds){const e=t.findIndex((e=>e.id===r));e>-1&&t.splice(e,1)}return t}))})),pr(a.Yb,(e=>{const t=e.getParser();n((e=>{const s=[...e];for(const n of t.requests){const e=s.findIndex((e=>e.requesterUserId===n.requesterUserId));if(e>0)s[e]=Le(s[e]),s[e].populate(n);else{const e=new qt;e.populate(n),s.push(e)}}return s}))})),pr(a.df,(e=>{const t=e.getParser().request;n((e=>{const s=[...e];if(-1===s.findIndex((e=>e.requesterUserId===t.requesterUserId))){const e=new qt;e.populate(t),s.push(e)}return s}))})),Object(c.useEffect)((()=>{Ee(new a.De);const e=setInterval((()=>Ee(new a.Wb)),12e4);return()=>{clearInterval(e)}}),[]),{friends:e,requests:s,sentRequests:r,dismissedRequestIds:o,setDismissedRequestIds:l,settings:d,onlineFriends:j,offlineFriends:h,getFriend:b,canRequestFriend:g,requestFriend:(e,t)=>{if(!g(e))return!1;i((t=>{const s=[...t];return s.push(e),s})),Ee(new a.mg(t))},requestResponse:(e,t)=>{-1!==e||t?n((s=>{const n=[...s],r=n.findIndex((t=>t.id===e));return-1===r?s:(Ee(t?new a.a(n[r].id):new a.Ab(!1,n[r].id)),n.splice(r,1),n)})):(Ee(new a.Ab(!0)),n([]))},followFriend:e=>Ee(new a.Tb(e.id)),updateRelationship:(e,t)=>t!==e.relationshipStatus&&Ee(new a.bi(e.id,t))}},ec=()=>Object(_r.a)(Zr),tc=()=>{const[e,t]=Object(c.useState)([]),[s,n]=Object(c.useState)(-1),[r,i]=Object(c.useState)([]),[o,l]=Object(c.useState)(Vt.HIDDEN),{getFriend:d=null}=ec(),{simpleAlert:u=null}=Hr(),j=Object(c.useMemo)((()=>e.filter((e=>-1===r.indexOf(e.threadId)))),[e,r]),h=Object(c.useMemo)((()=>s>0&&j.find((e=>e.threadId===s||null))),[s,j]),b=s=>{let n=e.find((e=>e.participant&&e.participant.id===s));if(n){const e=r.indexOf(n.threadId);e>=0&&i((t=>{const s=[...t];return s.splice(e,1),s}))}else{const e=d(s);if(!e)return null;n=new Kt(e),n.addMessage(null,We("messenger.moderationinfo"),0,null,Yt.SECURITY_NOTIFICATION),n.setRead(),t((e=>{const t=[...e];return t.push(n),t}))}return n},g=function(e,n,r){let c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Yt.CHAT;if(!e||!r||!r.length)return;const l=n===F().userId;l&&r.length<=255&&Ee(new a.Xh(e.participant.id,r)),t((t=>{const a=[...t],d=a.findIndex((t=>t.threadId===e.threadId));return-1===d?t:(e=Le(a[d]),l&&1===e.groups.length&&Xe(vt.MESSENGER_NEW_THREAD),e.addMessage(o===Yt.ROOM_INVITE?null:n,r,c,i,o),s===e.threadId&&e.setRead(),a[d]=e,!l&&e.unread&&Xe(vt.MESSENGER_MESSAGE_RECEIVED),a)}))};return pr(a.cf,(e=>{const t=e.getParser(),s=b(t.senderId);s&&g(s,t.senderId,t.messageText,t.secondsSinceSent,t.extraData)})),pr(a.Tg,(e=>{const t=e.getParser(),s=b(t.senderId);s&&g(s,t.senderId,t.messageText,0,null,Yt.ROOM_INVITE)})),pr(a.Sg,(e=>{const t=e.getParser();u(`Received room invite error: ${t.errorCode},recipients: ${t.failedRecipients}`,fs.DEFAULT,null,null,We("friendlist.alert.title"))})),Object(c.useEffect)((()=>{s<=0||t((e=>{const t=[...e],n=t.findIndex((e=>e.threadId===s));return n>=0&&(t[n]=Le(t[n]),t[n].setRead()),t}))}),[s]),Object(c.useEffect)((()=>{l((e=>{if(!j.length)return Vt.HIDDEN;let t=!1;for(const s of j)if(s.unreadCount>0){t=!0;break}return t?Vt.UNREAD:Vt.SHOW}))}),[j]),{messageThreads:e,activeThread:h,iconState:o,visibleThreads:j,getMessageThread:b,setActiveThreadId:n,closeThread:e=>{i((t=>{const s=[...t];return s.indexOf(e)>=0?t:(s.push(e),s)})),s===e&&n(-1)},sendMessage:g}},sc=()=>Object(_r.a)(tc),nc=()=>{const[e,t]=Object(c.useState)(null);return pr(a.dd,(e=>{const s=e.getParser(),n={badgeBases:[],badgeSymbols:[],badgePartColors:[],groupColorsA:[],groupColorsB:[]};s.bases.forEach(((e,t)=>n.badgeBases.push({id:t,images:e}))),s.symbols.forEach(((e,t)=>n.badgeSymbols.push({id:t,images:e}))),s.partColors.forEach(((e,t)=>n.badgePartColors.push({id:t,color:e}))),s.colorsA.forEach(((e,t)=>n.groupColorsA.push({id:t,color:e}))),s.colorsB.forEach(((e,t)=>n.groupColorsB.push({id:t,color:e})));const r=(e,t)=>e.id<t.id?-1:e.id>t.id?1:0;n.badgeBases.sort(r),n.badgeSymbols.sort(r),n.badgePartColors.sort(r),n.groupColorsA.sort(r),n.groupColorsB.sort(r),t(n)})),Object(c.useEffect)((()=>{Ee(new a.cd)}),[]),{groupCustomize:e}},rc=()=>Object(_r.a)(nc),cc=()=>{const[e,t]=Object(c.useState)(null),[s,n]=Object(c.useState)(null),{simpleAlert:r=null,showConfirm:i=null}=Hr();return pr(a.U,(e=>{const t=e.getParser();let s=t.messageText;switch(t.resultType){case ls.TOO_MANY_PENDING_CALLS_CODE:Ee(new a.Kc),r(We("help.cfh.error.pending"),fs.MODERATION,null,null,We("help.cfh.error.title"));break;case ls.HAS_ABUSIVE_CALL_CODE:r(We("help.cfh.error.abusive"),fs.MODERATION,null,null,We("help.cfh.error.title"));break;default:0===s.trim().length&&(s=We("help.cfh.sent.text")),r(s,fs.MODERATION,null,null,We("help.cfh.sent.title"))}})),pr(a.ie,(e=>{const t=e.getParser(),s=0===t.messageText.length?We("help.cfh.closed."+(1===(n=t.closeReason)?"useless":2===n?"abusive":"resolved")):t.messageText;var n;r(s,fs.MODERATION,null,null,We("mod.alert.title"))})),pr(a.S,(e=>{const t=e.getParser();t.count>0&&i(We("help.emergency.pending.title")+"\n"+t.pendingCalls[0].message,(()=>{Ee(new a.Cb)}),null,We("help.emergency.pending.button.discard"),We("help.emergency.pending.button.keep"),We("help.emergency.pending.message.subtitle"))})),pr(a.R,(e=>{r("Your pending calls were deleted",fs.MODERATION,null,null,We("mod.alert.title"))})),pr(a.T,(e=>{const t=e.getParser();r(t.message,fs.MODERATION,null,null,We("help.cfh.reply.title"))})),pr(a.L,(e=>{const t=e.getParser();r(We("help.emergency.global_mute.message"),fs.MODERATION,t.infoUrl,We("help.emergency.global_mute.link"),We("help.emergency.global_mute.subtitle"))})),pr(a.Ph,(e=>{const t=e.getParser();n(t)})),{activeReport:e,setActiveReport:t,sanctionInfo:s,setSanctionInfo:n,report:(e,s)=>{const n={reportType:e,reportedUserId:-1,reportedChats:[],cfhCategory:-1,cfhTopic:-1,roomId:-1,roomName:"",messageId:-1,threadId:-1,groupId:-1,extraData:"",roomObjectId:-1,message:"",currentStep:0};switch(e){case us.BULLY:case us.EMERGENCY:case us.IM:n.reportedUserId=s.reportedUserId,n.currentStep=ds.SELECT_CHATS;break;case us.ROOM:n.roomId=s.roomId,n.roomName=s.roomName,n.currentStep=ds.SELECT_TOPICS;break;case us.THREAD:n.groupId=s.groupId,n.threadId=s.threadId,n.currentStep=ds.SELECT_TOPICS;break;case us.MESSAGE:n.groupId=s.groupId,n.threadId=s.threadId,n.messageId=s.messageId,n.currentStep=ds.SELECT_TOPICS;case us.PHOTO:case us.GUIDE:}t(n)}}},ic=()=>Object(_r.a)(cc),ac=()=>{const[e,t]=Object(c.useState)([]);return{isVisible:Object(c.useMemo)((()=>!!e.length),[e]),activate:Object(c.useCallback)((()=>{let e=-1;return t((t=>{const s=[...t];return e=s.length?s[s.length-1]+1:0,s.push(e),s})),e}),[]),deactivate:Object(c.useCallback)((e=>{t((t=>{const s=[...t],n=s.indexOf(e);return-1===n?t:(s.splice(n,1),s)}))}),[])}},oc=()=>{const[e,t]=Object(c.useState)(new Map),s=Object(c.useCallback)((t=>{var s;return(null===(s=e.get(t))||void 0===s?void 0:s.length)||0}),[e]),n=Object(c.useMemo)((()=>{let t=0;for(const n of e.keys())t+=s(n);return t}),[e,s]),r=Object(c.useCallback)((e=>{let s=!0;return t((t=>{if(!t.has(e))return s=!1,t;const n=new Map(t);return n.delete(e),(e=>{Ee(new a.Ei(e))})(e),n})),s}),[]),i=Object(c.useCallback)(((e,s)=>{let n=!0;return t((t=>{if(!t.has(e))return n=!1,t;const r=new Map(t),c=r.get(e);if(c)for(const e of s)c.splice(c.indexOf(e),1);return((e,t)=>{Ee(new a.Fi(e,...t))})(e,s),r})),n}),[]),o=Object(c.useCallback)(((t,s)=>{if(!e.has(t))return!1;return e.get(t).indexOf(s)>=0}),[e]),l=Object(c.useCallback)(((e,s)=>{t((t=>{if(!t.has(e))return t;const n=new Map(t),r=n.get(e),c=r.indexOf(s);return c>=0&&r.splice(c,1),n}))}),[]);return pr(a.Di,(e=>{const s=e.getParser();t((e=>{const t=new Map(e);for(const n of s.categories){let e=t.get(n);e||(e=[],t.set(n,e));const r=s.getItemsByCategory(n);for(const t of r)-1===e.indexOf(t)&&e.push(t)}return t}))})),{getCount:s,getFullCount:n,resetCategory:r,resetItems:i,isUnseen:o,removeUnseen:l}},lc=()=>Object(_r.a)(oc),dc=()=>{const[e,t]=Object(c.useState)(!0),[s,n]=Object(c.useState)([]),[r,i]=Object(c.useState)([]),[o,l]=Object(c.useState)([]),[d,u]=Object(c.useState)(null),{isVisible:j=!1,activate:h=null,deactivate:b=null}=ac(),{isUnseen:g=null,resetCategory:m=null}=lc(),O=p("user.badges.max.slots",5),f=()=>o.length<O;return pr(a.w,(e=>{const t=e.getParser(),s=t.getAllBadgeCodes(),r=[];for(const n of s)r.push(t.getBadgeId(n));n(s),i(r),l(t.getActiveBadgeCodes())})),pr(a.v,(e=>{const t=e.getParser(),s=g(jt.BADGE,t.badgeId);n((e=>{const n=[...e];return s?n.unshift(t.badgeCode):n.push(t.badgeCode),n})),i((e=>{const n=[...e];return s?n.unshift(t.badgeId):n.push(t.badgeId),n}))})),Object(c.useEffect)((()=>{s&&s.length&&u((e=>{let t=e;return t&&-1===s.indexOf(t)&&(t=null),t||(t=s[0]),t}))}),[s]),Object(c.useEffect)((()=>{if(j)return()=>{m(jt.BADGE)}}),[j,m]),Object(c.useEffect)((()=>{j&&e&&(Ee(new a.jg),t(!1))}),[j,e]),{badgeCodes:s,activeBadgeCodes:o,selectedBadgeCode:d,setSelectedBadgeCode:u,isWearingBadge:e=>o.indexOf(e)>=0,canWearBadges:f,toggleBadge:e=>{l((t=>{const s=[...t],n=s.indexOf(e);if(-1===n){if(!f())return t;s.push(e)}else s.splice(n,1);const r=new a.Zh;for(let e=0;e<O;e++)r.addActivatedBadge(s[e]||null);return Ee(r),s}))},getBadgeId:e=>{const t=s.indexOf(e);return-1===t?0:r[t]||0},activate:h,deactivate:b}},uc=()=>Object(_r.a)(dc),jc=()=>{const[e,t]=Object(c.useState)(!0),[s,n]=Object(c.useState)([]),[r,i]=Object(c.useState)(null),{isVisible:o=!1,activate:l=null,deactivate:d=null}=ac(),{isUnseen:u=null,resetCategory:j=null}=lc();return pr(a.B,(e=>{const t=e.getParser();n((e=>{const s=[...e],n=s.map((e=>e.botData.id)),r=[];for(const c of t.items.values())-1===n.indexOf(c.id)&&r.push(c);for(const c of n){let e=!0;for(const s of t.items.values())if(s.id===c){e=!1;break}if(!e)continue;const n=s.findIndex((e=>e.botData.id===c)),r=s[n];-1!==n&&r&&(it()===r.botData.id&&(ot(),m("inventory/open")),s.splice(n,1))}for(const t of r){const e={botData:t};u(jt.BOT,t.id)?s.unshift(e):s.push(e)}return s}))})),pr(a.z,(e=>{const t=e.getParser();n((e=>{const s=[...e];if(s.findIndex((e=>e.botData.id===t.item.id))>=0)return e;const n={botData:t.item};return u(jt.BOT,n.botData.id)?s.unshift(n):s.push(n),s}))})),pr(a.D,(e=>{const t=e.getParser();n((e=>{const s=[...e],n=s.findIndex((e=>e.botData.id===t.itemId));return-1===n?e:(s.splice(n,1),it()===t.itemId&&(ot(),m("inventory/show")),s)}))})),Object(c.useEffect)((()=>{s&&s.length&&i((e=>{let t=e;return t&&-1===s.indexOf(t)&&(t=null),t||(t=s[0]),t}))}),[s]),Object(c.useEffect)((()=>{if(o)return()=>{j(jt.BOT)}}),[o,j]),Object(c.useEffect)((()=>{o&&e&&(Ee(new a.sc),t(!1))}),[o,e]),{botItems:s,selectedBot:r,setSelectedBot:i,activate:l,deactivate:d}},hc=()=>Object(_r.a)(jc);let bc=null;const gc=()=>{const[e,t]=Object(c.useState)(!0),[s,n]=Object(c.useState)([]),[r,i]=Object(c.useState)(null),{isVisible:o=!1,activate:l=null,deactivate:d=null}=ac(),{isUnseen:u=null,resetCategory:j=null}=lc();return pr(a.cc,(e=>{const t=e.getParser();n((e=>{const s=[...e];for(const n of t.items){let e=0,t=null;for(;e<s.length;){const r=s[e];let c=0;for(;c<r.items.length;){const e=r.items[c];if(e.id===n.itemId){e.update(n);const s=[...r.items];s[c]=e,r.items=s,t=r;break}c++}if(t)break;e++}if(t)t.hasUnseenItems=!0,s[e]=Le(t);else{const e=new Ze(n);st(s,e,u(jt.FURNI,n.itemId)),$e(new Lr(e.id,e.type,e.category))}}return s}))})),pr(a.ec,(e=>{const t=e.getParser();bc||(bc=new Array(t.totalFragments));const s=((e,t,s,n)=>{if(1===t)return e;n[s]=e;for(const c of n)if(!c)return null;const r=new Map;for(const c of n){for(const[e,t]of c)r.set(e,t);c.clear()}return n=null,r})(t.fragment,t.totalFragments,t.fragmentNumber,bc);s&&(n((e=>{const t=[...e],n=(e=>{const t=[];for(const s of e){let e=s.getTotalCount();s.category===Je.POST_IT&&(e=1);let n=0;for(;n<e;)t.push(s.getItemByIndex(n).id),n++}return t})(t);for(const r of n){if(s.get(r))continue;let e=0;for(;e<t.length;){const s=t[e],n=s.remove(r);if(n){it()===n.ref&&(ot(),dt(s)||m("inventory/show")),s.getTotalCount()<=0&&(t.splice(e,1),s.dispose());break}e++}}for(const r of s.keys()){if(n.indexOf(r)>=0)continue;const e=s.get(r);if(!e)continue;const c=new Ze(e);st(t,c,u(jt.FURNI,r)),$e(new Lr(c.id,c.type,c.category))}return t})),bc=null)})),pr(a.fc,(e=>{t(!0)})),pr(a.gc,(e=>{const t=e.getParser();n((e=>{const s=[...e];let n=0;for(;n<s.length;){const e=s[n],r=e.remove(t.itemId);if(r){it()===r.ref&&(ot(),dt(e)||m("inventory/show")),e.getTotalCount()<=0&&(s.splice(n,1),e.dispose());break}n++}return s}))})),pr(a.mc,(e=>{})),Object(c.useEffect)((()=>{s&&s.length&&i((e=>{let t=e;return t&&-1===s.indexOf(t)&&(t=null),t||(t=s[0]),t}))}),[s]),Object(c.useEffect)((()=>{if(o)return()=>{j(jt.FURNI)&&n((e=>{const t=[...e];for(const s of t)s.hasUnseenItems=!1;return t}))}}),[o,j]),Object(c.useEffect)((()=>{o&&e&&(Ee(new a.dc),t(!1))}),[o,e]),{isVisible:o,groupItems:s,setGroupItems:n,selectedItem:r,setSelectedItem:i,activate:l,deactivate:d,getWallItemById:e=>{if(s&&s.length){for(const t of s){const s=t.getItemById(e);if(s&&s.isWallItem)return t}return null}},getFloorItemById:e=>{if(s&&s.length){for(const t of s){const s=t.getItemById(e);if(s&&!s.isWallItem)return t}return null}}}},mc=()=>Object(_r.a)(gc);let Oc=null;const pc=()=>{const[e,t]=Object(c.useState)(!0),[s,n]=Object(c.useState)([]),[r,i]=Object(c.useState)(null),{isVisible:o=!1,activate:l=null,deactivate:d=null}=ac(),{isUnseen:u=null,resetCategory:j=null}=lc();return pr(a.Gf,(e=>{const t=e.getParser();Oc||(Oc=new Array(t.totalFragments));const s=((e,t,s,n)=>{if(1===t)return e;n[s]=e;for(const c of n)if(!c)return null;const r=new Map;for(const c of n){for(const[e,t]of c)r.set(e,t);c.clear()}return n=null,r})(t.fragment,t.totalFragments,t.fragmentNumber,Oc);s&&(n((e=>{const t=[...e];return((e,t,s)=>{const n=e.map((e=>e.petData.id)),r=[],c=[];for(const i of t.keys())-1===n.indexOf(i)&&r.push(i);for(const i of n)!t.get(i)&&c.push(i);n.length;for(const i of c)bt(i,e);for(const i of r){const n=t.get(i);n&&ht(n,e,s(jt.PET,n.id))}})(t,s,u),t})),Oc=null)})),pr(a.Df,(e=>{const t=e.getParser();n((e=>{const s=[...e];return ht(t.pet,s,u(jt.PET,t.pet.id)),s}))})),pr(a.Jf,(e=>{const t=e.getParser();n((e=>{const s=[...e];return bt(t.petId,s),s}))})),Object(c.useEffect)((()=>{s&&s.length&&i((e=>{let t=e;return t&&-1===s.indexOf(t)&&(t=null),t||(t=s[0]),t}))}),[s]),Object(c.useEffect)((()=>{if(o)return()=>{j(jt.PET)}}),[o,j]),Object(c.useEffect)((()=>{o&&e&&(Ee(new a.ng),t(!1))}),[o,e]),{petItems:s,selectedPet:r,setSelectedPet:i,activate:l,deactivate:d}},fc=()=>Object(_r.a)(pc),xc=()=>{const[e,t]=Object(c.useState)(null),[s,n]=Object(c.useState)(null),[r,i]=Object(c.useState)(gt.TRADING_STATE_READY),{groupItems:o=[],setGroupItems:l=null,activate:d=null,deactivate:u=null}=mc(),{simpleAlert:j=null,showTradeAlert:h=null}=Hr(),b=r>=gt.TRADING_STATE_RUNNING;return pr(a.ji,(r=>{const c=r.getParser();e&&s&&(e.userId===c.userID?t((e=>{const t=Le(e);return t.accepts=c.userAccepts,t})):s.userId===c.userID&&n((e=>{const t=Le(e);return t.accepts=c.userAccepts,t})))})),pr(a.mi,(s=>{const r=s.getParser();r.reason===a.ni.ERROR_WHILE_COMMIT?h(Ot.ERROR_WHILE_COMMIT):e&&r.userID!==e.userId&&h(Ot.THEY_CANCELLED),t(null),n(null),i(gt.TRADING_STATE_READY)})),pr(a.oi,(e=>{e.getParser();t(null),n(null),i(gt.TRADING_STATE_READY)})),pr(a.qi,(e=>{e.getParser();i(gt.TRADING_STATE_COUNTDOWN)})),pr(a.ti,(e=>{const s=e.getParser(),r=ft(s.firstUserItemArray),c=ft(s.secondUserItemArray);t((e=>{const t=Le(e);t.userId===s.firstUserID?(t.creditsCount=s.firstUserNumCredits,t.itemCount=s.firstUserNumItems,t.userItems=r):(t.creditsCount=s.secondUserNumCredits,t.itemCount=s.secondUserNumItems,t.userItems=c);const n=[];for(const s of t.userItems.getValues()){let e=0;for(;e<s.getTotalCount();){const t=s.getItemByIndex(e);t&&n.push(t.ref),e++}}return l((e=>{const t=[...e];for(const s of t)s.lockItemIds(n);return t})),t})),n((e=>{const t=Le(e);return t.userId===s.firstUserID?(t.creditsCount=s.firstUserNumCredits,t.itemCount=s.firstUserNumItems,t.userItems=r):(t.creditsCount=s.secondUserNumCredits,t.itemCount=s.secondUserNumItems,t.userItems=c),t}))})),pr(a.vi,(e=>{e.getParser()})),pr(a.xi,(e=>{const s=e.getParser(),r=new mt,c=he().userDataManager.getUserData(s.userID);r.userItems=new a.h;const o=new mt,l=he().userDataManager.getUserData(s.otherUserID);o.userItems=new a.h,c.webID===F().userId?(r.userId=c.webID,r.userName=c.name,r.canTrade=s.userCanTrade,o.userId=l.webID,o.userName=l.name,o.canTrade=s.otherUserCanTrade):l.webID===F().userId&&(r.userId=l.webID,r.userName=l.name,r.canTrade=s.otherUserCanTrade,o.userId=c.webID,o.userName=c.name,o.canTrade=s.userCanTrade),t(r),n(o),i(gt.TRADING_STATE_RUNNING)})),pr(a.yi,(e=>{const t=e.getParser();h(t.reason,t.otherUserName)})),pr(a.zi,(e=>{e.getParser();h(Ot.THEY_NOT_ALLOWED)})),pr(a.Bi,(e=>{e.getParser();h(Ot.YOU_NOT_ALLOWED)})),Object(c.useEffect)((()=>{if(r===gt.TRADING_STATE_READY)return;const e=d();return()=>u(e)}),[r,d,u]),{ownUser:e,otherUser:s,tradeState:r,setTradeState:i,isTrading:b,groupItems:o,progressTrade:()=>{switch(r){case gt.TRADING_STATE_RUNNING:return s.itemCount||e.accepts||j(We("inventory.trading.warning.other_not_offering"),null,null,null),void(e.accepts?Ee(new a.Ai):Ee(new a.ii));case gt.TRADING_STATE_CONFIRMING:return Ee(new a.pi),void i(gt.TRADING_STATE_CONFIRMED)}},removeItem:e=>{const t=e.getLastItem();t&&Ee(new a.ui(t.id))},stopTrading:()=>{b&&(r!==gt.TRADING_STATE_RUNNING?Ee(new a.ki):Ee(new a.li))}}},_c=()=>Object(_r.a)(xc),Ic=()=>{const[e,t]=Object(c.useState)(null),[s,n]=Object(c.useState)([]),[r,i]=Object(c.useState)([]),[o,l]=Object(c.useState)([]),[d,u]=Object(c.useState)([]),[j,h]=Object(c.useState)([]),[b,g]=Object(c.useState)([]),{simpleAlert:m=null}=Hr(),O=e=>{s.indexOf(e)>=0||n((t=>[...t,e]))},p=e=>{n((t=>{const s=[...t],n=s.indexOf(e);return n>=0&&s.splice(n),s}))},f=e=>{r.indexOf(e)>=0||i((t=>[...t,e]))},x=e=>{i((t=>{const s=[...t],n=s.indexOf(e);return n>=0&&s.splice(n),s}))},_=e=>{o.indexOf(e)>=0||l((t=>[...t,e]))},I=e=>{l((t=>{const s=[...t],n=s.indexOf(e);return n>=0&&s.splice(n),s}))},E=e=>{d.indexOf(e)>=0||u((t=>[...t,e]))},C=e=>{u((t=>{const s=[...t],n=s.indexOf(e);return n>=0&&s.splice(n),s}))};return pr(a.Pe,(e=>{const s=e.getParser().data;t(s),h(s.issues)})),pr(a.ke,(e=>{const t=e.getParser();h((e=>{const s=[...e],n=s.findIndex((e=>e.issueId===t.issueData.issueId));return n>=0?s[n]=t.issueData:(s.push(t.issueData),Xe(vt.MODTOOLS_NEW_TICKET)),s}))})),pr(a.Se,(e=>{e.getParser()})),pr(a.me,(e=>{e.getParser()&&m("Failed to pick issue",fs.DEFAULT,null,null,"Error")})),pr(a.je,(e=>{const t=e.getParser();h((e=>{const s=[...e],n=s.findIndex((e=>e.issueId===t.issueId));return n>=0&&s.splice(n,1),s}))})),pr(a.Ne,(e=>{e.getParser().success?m("Moderation action was successfull",fs.MODERATION,null,null,"Success"):m("There was a problem applying tht moderation action",fs.MODERATION,null,null,"Error")})),pr(a.kb,(e=>{const t=e.getParser();g(t.callForHelpCategories)})),pr(a.jb,(e=>{e.getParser()})),{settings:e,openRooms:s,openRoomChatlogs:r,openUserChatlogs:d,openUserInfos:o,cfhCategories:b,tickets:j,openRoomInfo:O,closeRoomInfo:p,toggleRoomInfo:e=>{s.indexOf(e)>=0?p(e):O(e)},openRoomChatlog:f,closeRoomChatlog:x,toggleRoomChatlog:e=>{r.indexOf(e)>=0?x(e):f(e)},openUserInfo:_,closeUserInfo:I,toggleUserInfo:e=>{o.indexOf(e)>=0?I(e):_(e)},openUserChatlog:E,closeUserChatlog:C,toggleUserChatlog:e=>{r.indexOf(e)>=0?C(e):E(e)}}},Ec=()=>Object(_r.a)(Ic),Cc=()=>{const[e,t]=Object(c.useState)(null),[s,n]=Object(c.useState)(null),[r,i]=Object(c.useState)(null),[o,l]=Object(c.useState)(null),[d,u]=Object(c.useState)({roomInfo:null,state:bs.NONE}),[j,h]=Object(c.useState)(null),[b,g]=Object(c.useState)({settingsReceived:!1,homeRoomId:0,enteredGuestRoom:null,currentRoomOwner:!1,currentRoomId:0,currentRoomIsStaffPick:!1,createdFlatId:0,avatarId:0,roomPicker:!1,eventMod:!1,currentRoomRating:0,canRate:!0}),{simpleAlert:O=null}=Hr();return pr(a.yh,(e=>{const t=e.getParser();Ee(new a.Cc(t.roomId,!1,!1))})),pr(a.ab,(e=>{const t=e.getParser();t.canCreate||O(We(`navigator.cannotcreateevent.error.${t.errorCode}`),null,null,null,We("navigator.cannotcreateevent.title"))})),pr(a.Vi,(e=>{Ee(new a.Uc),Ee(new a.Tc)})),pr(a.Xi,(e=>{const t=e.getParser();g((e=>{const s={...e};return s.eventMod=t.securityLevel>=a.Uh.MODERATOR,s.roomPicker=t.securityLevel>=a.Uh.COMMUNITY,s}))})),pr(a.Pg,(e=>{ps(e.getParser().roomId)})),pr(a.Ng,(e=>{const t=e.getParser();g((e=>{const s={...e};return s.enteredGuestRoom=null,s.currentRoomOwner=t.isOwner,s.currentRoomId=t.roomId,s})),Ee(new a.Cc(t.roomId,!0,!1)),a.pe.available&&a.pe.call("legacyTrack","navigator","private",[t.roomId])})),pr(a.Dc,(e=>{const t=e.getParser();if(t.roomEnter)u({roomInfo:null,state:bs.NONE}),g((e=>{const s={...e};s.enteredGuestRoom=t.data,s.currentRoomIsStaffPick=t.staffPick;return!(s.createdFlatId===t.data.roomId)&&t.data.displayRoomEntryAd&&p("roomenterad.habblet.enabled",!1)&&a.ce.openRoomEnterAd(),s.createdFlatId=0,s.enteredGuestRoom&&s.enteredGuestRoom.habboGroupId,s}));else if(t.roomForward){if(t.data.ownerName!==F().userName&&!t.isGroupMember)switch(t.data.doorMode){case a.zg.DOORBELL_STATE:return void u((e=>{const s={...e};return s.roomInfo=t.data,s.state=bs.START_DOORBELL,s}));case a.zg.PASSWORD_STATE:return void u((e=>{const s={...e};return s.roomInfo=t.data,s.state=bs.START_PASSWORD,s}))}if(t.data.doorMode===a.zg.NOOB_STATE&&!F().isAmbassador&&!F().isRealNoob&&!F().isModerator)return;P(t.data.roomId)}else g((e=>{const s={...e};return s.enteredGuestRoom=t.data,s.currentRoomIsStaffPick=t.staffPick,s}))})),pr(a.gh,(e=>{const t=e.getParser();g((e=>{const s={...e};return s.currentRoomRating=t.totalLikes,s.canRate=t.canLike,s}))})),pr(a.Gb,(e=>{const t=e.getParser();t.userName&&0!==t.userName.length||u((e=>{const t={...e};return t.state=bs.STATE_WAITING,t}))})),pr(a.Bg,(e=>{const t=e.getParser();t.userName&&0!==t.userName.length||u((e=>{const t={...e};return t.state=bs.STATE_ACCEPTED,t}))})),pr(a.Nb,(e=>{const t=e.getParser();t.userName&&0!==t.userName.length||u((e=>{const t={...e};return t.state=bs.STATE_NO_ANSWER,t}))})),pr(a.qc,(e=>{switch(e.getParser().errorCode){case-100002:return void u((e=>{const t={...e};return t.state=bs.STATE_WRONG_PASSWORD,t}));case 4009:return void O(We("navigator.alert.need.to.be.vip"),fs.DEFAULT,null,null,We("generic.alert.title"));case 4010:return void O(We("navigator.alert.invalid_room_name"),fs.DEFAULT,null,null,We("generic.alert.title"));case 4011:return void O(We("navigator.alert.cannot_perm_ban"),fs.DEFAULT,null,null,We("generic.alert.title"));case 4013:return void O(We("navigator.alert.room_in_maintenance"),fs.DEFAULT,null,null,We("generic.alert.title"))}})),pr(a.Ye,(e=>{const t=e.getParser();l(t.topLevelContexts),i(t.topLevelContexts.length?t.topLevelContexts[0]:null)})),pr(a.bf,(e=>{const t=e.getParser();i((e=>{let s=e;if(s||(s=o&&o.length&&o[0]||null),!s)return null;if(t.result.code!==s.code&&o&&o.length)for(const n of o)n.code===t.result.code&&(s=n);for(const n of o)n.code===t.result.code&&(s=n);return s})),h(t.result)})),pr(a.Ui,(e=>{const s=e.getParser();t(s.categories)})),pr(a.Si,(e=>{const t=e.getParser();n(t.categories)})),pr(a.Rb,(e=>{P(e.getParser().roomId)})),pr(a.We,(e=>{const t=e.getParser();let s=!1;if(g((e=>{s=e.settingsReceived;const n={...e};return n.homeRoomId=t.homeRoomId,n.settingsReceived=!0,n})),s)return;let n=-1,r=-1;void 0!==p("friend.id")&&parseInt(p("friend.id"))>0&&(n=0,Ee(new a.Tb(parseInt(p("friend.id"))))),void 0!==p("forward.type")&&void 0!==p("forward.id")&&(n=parseInt(p("forward.type")),r=parseInt(p("forward.id"))),2===n?ps(r):-1===n&&t.roomIdToEnter>0&&(m("navigator/close"),t.roomIdToEnter!==t.homeRoomId?P(t.roomIdToEnter):P(t.homeRoomId))})),pr(a.Lg,(e=>{const t=e.getParser();switch(t.reason){case a.cb.REASON_FULL:O(We("navigator.guestroomfull.text"),fs.DEFAULT,null,null,We("navigator.guestroomfull.title"));break;case a.cb.REASON_QUEUE_ERROR:O(We(`room.queue.error.${t.parameter}`),fs.DEFAULT,null,null,We("room.queue.error.title"));break;case a.cb.REASON_BANNED:O(We("navigator.banned.text"),fs.DEFAULT,null,null,We("navigator.banned.title"));break;default:O(We("room.queue.error.title"),fs.DEFAULT,null,null,We("room.queue.error.title"))}Oe()})),pr(a.Ze,(e=>m("navigator/show"))),{categories:e,doorData:d,setDoorData:u,topLevelContext:r,topLevelContexts:o,searchResult:j,navigatorData:b}},vc=()=>Object(_r.a)(Cc),Nc=()=>{const[e,t]=Object(c.useState)(new Cs),s=Object(c.useMemo)((()=>p("hc.disabled",!1)),[]),n=Object(c.useMemo)((()=>s||e.clubDays>0?as.ACTIVE:e.pastVipDays>0||e.pastVipDays>0?as.EXPIRED:as.NONE),[e,s]);return pr(a.Ni,(e=>{const s=e.getParser();t((e=>{const t=Le(e);return t.credits=parseFloat(s.credits),e.credits!==t.credits&&Xe(vt.CREDITS),t}))})),pr(a.Pi,(e=>{const s=e.getParser();t((e=>{const t=Le(e);return t.activityPoints=s.currencies,t}))})),pr(a.f,(e=>{const s=e.getParser();t((e=>{const t=Le(e);return t.activityPoints=new Map(t.activityPoints),t.activityPoints.set(s.type,s.amount),0===s.type&&Xe(vt.DUCKETS),t}))})),pr(a.hj,(e=>{const s=e.getParser(),n=s.productName;"club_habbo"!==n&&"habbo_club"!==n||t((e=>{const t=Le(e);return t.clubDays=Math.max(0,s.daysToPeriodEnd),t.clubPeriods=Math.max(0,s.periodsSubscribedAhead),t.isVip=s.isVip,t.pastClubDays=s.pastClubDays,t.pastVipDays=s.pastVipDays,t.isExpiring=s.responseType===a.ij.RESPONSE_TYPE_DISCOUNT_AVAILABLE,t.minutesUntilExpiration=s.minutesUntilExpiration,t.minutesSinceLastModified=s.minutesSinceLastModified,t}))})),Object(c.useEffect)((()=>{if(s)return;Ee(new a.gj("habbo_club"));const e=setInterval((()=>Ee(new a.gj("habbo_club"))),5e4);return()=>clearInterval(e)}),[s]),Object(c.useEffect)((()=>{Ee(new a.Oi)}),[]),{purse:e,hcDisabled:s,clubStatus:n,getCurrencyAmount:t=>{if(-1===t)return e.credits;for(const[s,n]of e.activityPoints.entries())if(s===t)return n;return 0}}},Tc=()=>Object(_r.a)(Nc),Sc=(e,t)=>{Object(c.useEffect)((()=>{if(!e)return;const s=e=>t(e);return Ye.addEventListener(Rs.FURNI_REMOVED,s),()=>{Ye.removeEventListener(Rs.FURNI_REMOVED,s)}}),[e,t])},wc=e=>{fr(Rs.OBJECT_SELECTED,e)},Rc=(e,t)=>{Object(c.useEffect)((()=>{if(!e)return;const s=e=>t(e);return Ye.addEventListener(Rs.USER_ADDED,s),()=>{Ye.removeEventListener(Rs.USER_ADDED,s)}}),[e,t])},yc=(e,t)=>{Object(c.useEffect)((()=>{if(!e)return;const s=e=>t(e);return Ye.addEventListener(Rs.USER_REMOVED,s),()=>{Ye.removeEventListener(Rs.USER_REMOVED,s)}}),[e,t])},kc=()=>{const[e,t]=Object(c.useState)(null),[s,n]=Object(c.useState)(null),[r,i]=Object(c.useState)(null),[l,d]=Object(c.useState)(0),u=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!s)return;const c=a.sb.hslToRGB(((255&e)<<16)+((255&t)<<8)+(255&n));r&&d(c),s.tint=e||t||n?c:0};return fr(Ts.PREVIEW,(e=>u(e.hue,e.saturation,e.lightness))),fr(Ts.CLEAR_PREVIEW,(e=>{s&&(s.tint=l)})),mr(a.Xg.ROOM_BACKGROUND_COLOR,(e=>{a.Rg.isRoomPreviewerId(e.roomId)||(e.enable?u(e.hue,e.saturation,e.lightness,!0):u(0,0,0,!0))})),mr(a.rg.ROOM_COLOR,(e=>{if(a.Rg.isRoomPreviewerId(e.roomId))return;let t=0,s=255;e.bgOnly||(t=e.color,s=e.brightness),(e=>{if(!r)return;const t=e>>16&255,s=e>>8&255,n=255&e;r.red=t/255,r.green=s/255,r.blue=n/255})(a.sb.hslToRGB((16776960&a.sb.rgbToHSL(t))+s))})),mr([a.Eg.INITIALIZED,a.Eg.DISPOSED],(e=>{if(a.Rg.isRoomPreviewerId(e.roomId))return;const s=he();if(s)switch(e.type){case a.Eg.INITIALIZED:return Ie(e.roomId),void t(s);case a.Eg.DISPOSED:return void t(null)}})),Or([a.mh.CREATED,a.mh.ENDED],(e=>{switch(e.type){case a.mh.CREATED:return s=e.session,void L().startSession(s);case a.mh.ENDED:return void t(null)}var s})),mr([a.Fg.SELECTED,a.Fg.DESELECTED,a.Fg.ADDED,a.Fg.REMOVED,a.Fg.PLACED,a.Fg.REQUEST_MOVE,a.Fg.REQUEST_ROTATE,a.Fg.MOUSE_ENTER,a.Fg.MOUSE_LEAVE],(t=>{if(a.Rg.isRoomPreviewerId(t.roomId))return;let s=null;switch(t.type){case a.Fg.SELECTED:(function(e){let t=!1;const s=C().getRoomObject(e.roomId,e.objectId,e.category);s&&1===s.model.getValue(a.ch.FURNITURE_SELECTION_DISABLED)&&(t=!0,F().isModerator&&(t=!1));return t})(t)||(s=new Rs(Rs.OBJECT_SELECTED,t.objectId,t.category,t.roomId));break;case a.Fg.DESELECTED:s=new Rs(Rs.OBJECT_DESELECTED,t.objectId,t.category,t.roomId);break;case a.Fg.ADDED:{let e=null;switch(t.category){case a.Wg.FLOOR:case a.Wg.WALL:e=Rs.FURNI_ADDED;break;case a.Wg.UNIT:e=Rs.USER_ADDED}e&&(s=new Rs(e,t.objectId,t.category,t.roomId));break}case a.Fg.REMOVED:{let e=null;switch(t.category){case a.Wg.FLOOR:case a.Wg.WALL:e=Rs.FURNI_REMOVED;break;case a.Wg.UNIT:e=Rs.USER_REMOVED}e&&(s=new Rs(e,t.objectId,t.category,t.roomId));break}case a.Fg.REQUEST_MOVE:D(e,t.objectId,t.category)&&_e(t.objectId,t.category,a.Yg.OBJECT_MOVE);break;case a.Fg.REQUEST_ROTATE:D(e,t.objectId,t.category)&&_e(t.objectId,t.category,a.Yg.OBJECT_ROTATE_POSITIVE);break;case a.Fg.MOUSE_ENTER:s=new Rs(Rs.OBJECT_ROLL_OVER,t.objectId,t.category,t.roomId);break;case a.Fg.MOUSE_LEAVE:s=new Rs(Rs.OBJECT_ROLL_OUT,t.objectId,t.category,t.roomId)}s&&$e(s)})),Object(c.useEffect)((()=>{if(!e)return;const t=o(),s=C(),r=e.roomId,c=Math.floor(window.innerWidth),l=Math.floor(window.innerHeight),u=t.renderer;u&&(u.view.style.width=`${c}px`,u.view.style.height=`${l}px`,u.resolution=window.devicePixelRatio,u.resize(c,l));const j=s.getRoomInstanceDisplay(r,1,c,l,a.Qg.SCALE_ZOOMED_IN),h=C().getRoomInstanceRenderingCanvas(r,1);if(!j||!h)return;const b=new a.rf(a.sf.WHITE),g=new a.ff,m=h.master;b.tint=0,b.width=c,b.height=l,m.addChildAt(b,0),m.filters=[g],n(b),i(g);const O=s.getRoomInstanceGeometry(r,1);if(O){let e=((s.getRoomInstanceVariable(r,a.Jh.ROOM_MIN_X)||0)+(s.getRoomInstanceVariable(r,a.Jh.ROOM_MAX_X)||0))/2,t=((s.getRoomInstanceVariable(r,a.Jh.ROOM_MIN_Y)||0)+(s.getRoomInstanceVariable(r,a.Jh.ROOM_MAX_Y)||0))/2;const n=20;e+=n-1,t+=n-1;const c=Math.sqrt(n*n+n*n)*Math.tan(30/180*Math.PI);O.location=new a.kj(e,t,c)}const p=t.stage;if(!p)return;p.addChild(j),Ie(e.roomId);const f=e=>{const s=Math.floor(window.innerWidth),n=Math.floor(window.innerHeight);u.view.style.width=`${s}px`,u.view.style.height=`${n}px`,u.resolution=window.devicePixelRatio,u.resize(s,n),b.width=s,b.height=n,function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const n=C(),r=n.activeRoomId;n.initializeRoomInstanceRenderingCanvas(r,s,e,t)}(s,n,1),t.render()};return window.addEventListener("resize",f),()=>{n(null),i(null),d(0),window.removeEventListener("resize",f)}}),[e]),{roomSession:e}},Ac=()=>Object(_r.a)(kc),Dc=()=>{const[e,t]=Object(c.useState)(-1),[s,n]=Object(c.useState)(-1),[r,i]=Object(c.useState)(0),[o,l]=Object(c.useState)(0),[d,u]=Object(c.useState)(0),{roomSession:j=null}=Ac(),h=()=>{$e(new Ts(Ts.CLEAR_PREVIEW)),t(-1),n(-1),i(0),l(0),u(0)};return mr(a.Ig.REQUEST_BACKGROUND_COLOR,(e=>{if(!D(j,e.objectId,e.category))return;const s=C().getRoomObject(e.roomId,e.objectId,e.category).model;t(e.objectId),n(e.category),i(parseInt(s.getValue(a.ch.FURNITURE_ROOM_BACKGROUND_COLOR_HUE))),l(parseInt(s.getValue(a.ch.FURNITURE_ROOM_BACKGROUND_COLOR_SATURATION))),u(parseInt(s.getValue(a.ch.FURNITURE_ROOM_BACKGROUND_COLOR_LIGHTNESS)))})),Sc(-1!==e&&-1!==s,(t=>{t.id===e&&t.category===s&&h()})),Object(c.useEffect)((()=>{-1!==e&&-1!==s&&$e(new Ts(Ts.PREVIEW,r,o,d))}),[e,s,r,o,d]),{objectId:e,hue:r,setHue:i,saturation:o,setSaturation:l,lightness:d,setLightness:u,applyToner:()=>Ee(new a.i(e,r,o,d)),toggleToner:()=>j.useMultistateItem(e),onClose:h}},Lc=()=>{const[e,t]=Object(c.useState)(-1),[s,n]=Object(c.useState)(-1),[r,i]=Object(c.useState)("1"),[o,l]=Object(c.useState)(""),[d,u]=Object(c.useState)(""),[j,h]=Object(c.useState)(""),[b,g]=Object(c.useState)(""),{simpleAlert:m=null}=Hr(),O=()=>{t(-1),n(-1),i("1"),l(""),u(""),h(""),g("")};return mr([a.Ig.REQUEST_BADGE_DISPLAY_ENGRAVING,a.Ig.REQUEST_ACHIEVEMENT_RESOLUTION_ENGRAVING],(e=>{const s=C().getRoomObject(e.roomId,e.objectId,e.category);if(!s)return;const r=new a.di;r.initializeFromRoomObjectModel(s.model),t(e.objectId),n(e.category),i("1"),l(Be(r.getValue(1))),u(Fe(r.getValue(1))),h(r.getValue(2)),g(r.getValue(3))})),mr(a.Ig.REQUEST_ACHIEVEMENT_RESOLUTION_FAILED,(e=>{const t=C().getRoomObject(e.roomId,e.objectId,e.category);if(!t)return;t.model.getValue(a.ch.FURNITURE_OWNER_ID)===F().userId&&m(`${We("resolution.failed.subtitle")} ${We("resolution.failed.text")}`,null,null,null,We("resolution.failed.title"))})),Sc(-1!==e&&-1!==s,(t=>{t.id===e&&t.category===s&&O()})),{objectId:e,category:s,color:r,badgeName:o,badgeDesc:d,date:j,senderName:b,onClose:O}},Pc="MONSTERPLANT_SEED_CONFIRMATION",Uc="PURCHASABLE_CLOTHING_CONFIRMATION",Mc=()=>{const[e,t]=Object(c.useState)(-1),[s,n]=Object(c.useState)(null),[r,i]=Object(c.useState)(null),[o,l]=Object(c.useState)(-1),[d,u]=Object(c.useState)(null),[j,h]=Object(c.useState)(!1),{roomSession:b=null}=Ac(),g=Object(c.useCallback)((()=>{t(-1),u(null),h(!1),n(null)}),[]);return mr([a.Ig.OPEN_FURNI_CONTEXT_MENU,a.Ig.CLOSE_FURNI_CONTEXT_MENU,a.Ig.REQUEST_MONSTERPLANT_SEED_PLANT_CONFIRMATION_DIALOG,a.Ig.REQUEST_PURCHASABLE_CLOTHING_CONFIRMATION_DIALOG,a.Ig.REQUEST_EFFECTBOX_OPEN_DIALOG],(s=>{const r=C().getRoomObject(b.roomId,s.objectId,s.category);if(r)switch(s.type){case a.Ig.REQUEST_MONSTERPLANT_SEED_PLANT_CONFIRMATION_DIALOG:if(!A(r))return;return l(r.id),i(Pc),void g();case a.Ig.REQUEST_EFFECTBOX_OPEN_DIALOG:if(!A(r))return;return l(r.id),i("EFFECTBOX_OPEN"),void g();case a.Ig.REQUEST_PURCHASABLE_CLOTHING_CONFIRMATION_DIALOG:if(!A(r))return;return l(r.id),i(Uc),void g();case a.Ig.OPEN_FURNI_CONTEXT_MENU:switch(t(r.id),s.contextMenu){case a.wb.FRIEND_FURNITURE:return void n(a.wb.FRIEND_FURNITURE);case a.wb.MONSTERPLANT_SEED:return void(A(r)&&n(a.wb.MONSTERPLANT_SEED));case a.wb.MYSTERY_BOX:return;case a.wb.RANDOM_TELEPORT:return void n(a.wb.RANDOM_TELEPORT);case a.wb.PURCHASABLE_CLOTHING:return void(A(r)&&n(a.wb.PURCHASABLE_CLOTHING))}return;case a.Ig.CLOSE_FURNI_CONTEXT_MENU:return void(r.id===e&&g())}})),pr(a.ld,(e=>{const s=e.getParser();t(s.objectId),u(s),h(s.userIsMember),n("GROUP_FURNITURE")})),{objectId:e,mode:s,confirmMode:r,confirmingObjectId:o,groupData:d,isGroupMember:j,closeConfirm:()=>{i(null),l(-1)},processAction:t=>{if(t)switch(t){case"use_friend_furni":b.useMultistateItem(e);break;case"use_monsterplant_seed":i(Pc),l(e);break;case"use_random_teleport":C().useRoomObject(e,a.Wg.FLOOR);break;case"use_purchaseable_clothing":i(Uc),l(e);break;case"join_group":return ns(d.guildId),void h(!0);case"go_to_group_homeroom":d&&ps(d.guildHomeRoomId)}g()},onClose:g}},Fc=()=>{const[e,t]=Object(c.useState)([]),[s,n]=Object(c.useState)(0),[r,i]=Object(c.useState)(0),[o,l]=Object(c.useState)(0),[d,u]=Object(c.useState)(0),[j,h]=Object(c.useState)(16777215),[b,g]=Object(c.useState)(255),[m,O]=Object(c.useState)(0),[p,f]=Object(c.useState)(0),[x,_]=Object(c.useState)(0),{roomSession:I=null}=Ac();return mr(a.Ig.REQUEST_DIMMER,(e=>{(I.isRoomOwner||I.controllerLevel>=a.yg.GUEST||F().isModerator)&&I.requestMoodlightSettings()})),Or(a.jh.ROOM_DIMMER_PRESETS,(e=>{const s=[];let r=0;for(;r<e.presetCount;){const t=e.getPreset(r);t&&s.push(new Bs(t.id,t.type,t.color,t.brightness)),r++}t(s),n(e.selectedPresetId)})),mr(a.Dg.ROOM_COLOR,(e=>{a.Rg.isRoomPreviewerId(e.roomId)||(l(r),i(e.state),n(e.presetId),u(e.effectId),O(e.effectId),h(e.color),f(e.color),g(e.brightness),_(e.brightness))})),Object(c.useEffect)((()=>{0===r&&0===o||Gs.previewDimmer(p,x,2===m)}),[r,o,p,x,m]),{presets:e,selectedPresetId:s,dimmerState:r,lastDimmerState:o,effectId:d,color:j,brightness:b,selectedEffectId:m,setSelectedEffectId:O,selectedColor:p,setSelectedColor:f,selectedBrightness:x,setSelectedBrightness:_,selectPresetId:t=>{const s=e[t-1];s&&(n(s.id),O(s.type),f(s.color),_(s.light))},applyChanges:()=>{if(0===r)return;const n=s-1;if(s<1||s>e.length)return;const c=e[n];!c||m===c.type&&p===c.color&&x===c.light||(t((e=>{const t=[...e];return t[n]=new Bs(c.id,m,p,x),t})),Gs.savePreset(c.id,m,p,x,!0))}}},Bc=()=>{const[e,t]=Object(c.useState)(-1),[s,n]=Object(c.useState)(-1),[r,i]=Object(c.useState)(0),o=Object(c.useCallback)((()=>{t(-1),n(-1),i(0)}),[]);return mr(a.Ig.REQUEST_CREDITFURNI,(e=>{const s=C().getRoomObject(e.roomId,e.objectId,e.category);s&&A(s)&&(t(e.objectId),n(e.category),i(s.model.getValue(a.ch.FURNITURE_CREDIT_VALUE)||0))})),Sc(-1!==e&&-1!==s,(t=>{t.id===e&&t.category===s&&o()})),{objectId:e,value:r,redeem:()=>{he().connection.send(new a.bc(e)),o()},onClose:o}},Hc=()=>{const[e,t]=Object(c.useState)(-1),[s,n]=Object(c.useState)(-1),[r,i]=Object(c.useState)(null),o=()=>{t(-1),n(-1),i(null)};return mr(a.Ig.REQUEST_EXTERNAL_IMAGE,(e=>{const s=C().getRoomObject(e.roomId,e.objectId,e.category);if(!s)return;const r=s.model.getValue(a.ch.FURNITURE_DATA),c=JSON.parse(r);t(e.objectId),n(e.category),i(c)})),Sc(-1!==e&&-1!==s,(t=>{t.id===e&&t.category===s&&o()})),{objectId:e,photoData:r,onClose:o}},Gc=()=>{const[e,t]=Object(c.useState)(-1),[s,n]=Object(c.useState)(-1),[r,i]=Object(c.useState)(0),[o,l]=Object(c.useState)([]),[d,u]=Object(c.useState)([]),[j,h]=Object(c.useState)(null),[b,g]=Object(c.useState)(0),m=()=>{t(-1),n(-1),i(0),l([]),u([]),h(null)};return pr(a.te,(e=>{const s=e.getParser();t(s.furniId),g(s.start?1:2)})),pr(a.re,(e=>m())),pr(a.se,(e=>m())),mr(a.Ig.REQUEST_FRIEND_FURNITURE_ENGRAVING,(e=>{const s=C().getRoomObject(e.roomId,e.objectId,e.category);if(!s)return;const r=s.model.getValue(a.ch.FURNITURE_DATA),c=s.model.getValue(a.ch.FURNITURE_FRIENDFURNI_ENGRAVING);"1"===r[0]&&6===r.length&&(t(e.objectId),n(e.category),i(c),l([r[1],r[2]]),u([r[3],r[4]]),h(r[5]),g(0))})),Sc(-1!==e&&-1!==s,(t=>{t.id===e&&t.category===s&&m()})),{objectId:e,type:r,usernames:o,figures:d,date:j,stage:b,onClose:m,respond:t=>{he().connection.send(new a.Ub(e,t)),m()}}},Wc=["perteam","mostwins","classic"],Vc=["alltime","daily","weekly","monthly"],qc=()=>{const[e,t]=Object(c.useState)(new Map),{roomSession:s=null}=Ac();return mr(a.Ig.REQUEST_HIGH_SCORE_DISPLAY,(e=>{const s=C().getRoomObject(e.roomId,e.objectId,e.category);if(!s)return;const n=s.model.getValue(a.ch.FURNITURE_DATA_FORMAT),r=a.xf.getData(n);r.initializeFromRoomObjectModel(s.model),t((e=>{const t=new Map(e);return t.set(s.id,r),t}))})),mr(a.Ig.REQUEST_HIDE_HIGH_SCORE_DISPLAY,(e=>{e.roomId===s.roomId&&t((t=>{const s=new Map(t);return s.delete(e.objectId),s}))})),{stuffDatas:e,getScoreType:e=>Wc[e],getClearType:e=>Vc[e]}},zc=()=>(mr(a.Ig.REQUEST_INTERNAL_LINK,(e=>{const t=C().getRoomObject(e.roomId,e.objectId,e.category);if(!t)return;let s=t.model.getValue(a.ch.FURNITURE_DATA).internalLink;s&&s.length||(s=t.model.getValue(a.ch.FURNITURE_INTERNAL_LINK)),s&&s.length&&m(s)})),{}),Yc=()=>{const[e,t]=Object(c.useState)(-1),[s,n]=Object(c.useState)(-1),[r,i]=Object(c.useState)(null),[o,l]=Object(c.useState)(null),[u,j]=Object(c.useState)(a.Xd.NO_CLUB),[h,b]=Object(c.useState)(null),g=()=>{t(-1),n(-1),i(null),l(null),b(null)};return mr(a.Ig.REQUEST_MANNEQUIN,(e=>{const s=C().getRoomObject(e.roomId,e.objectId,e.category);if(!s)return;const r=s.model,c=r.getValue(a.ch.FURNITURE_MANNEQUIN_FIGURE)||null,o=r.getValue(a.ch.FURNITURE_MANNEQUIN_GENDER)||null,u=d().createFigureContainer(c),h=d().getFigureClubLevel(u,o,Ws.MANNEQUIN_CLOTHING_PART_TYPES);t(e.objectId),n(e.category),i(c),l(o),j(h),b(r.getValue(a.ch.FURNITURE_MANNEQUIN_NAME)||null)})),Sc(-1!==e&&-1!==s,(t=>{t.id===e&&t.category===s&&g()})),{objectId:e,figure:r,gender:o,clubLevel:u,name:h,setName:b,saveFigure:()=>{-1!==e&&(Ee(new a.hc(e)),g())},wearFigure:()=>{-1!==e&&(Ee(new a.jc(e)),g())},saveName:()=>{-1!==e&&Ee(new a.ic(e,h))},onClose:g}},$c="floor",Kc="landscape",Xc=()=>{const[e,t]=Object(c.useState)(-1),[s,n]=Object(c.useState)(-1),[r,i]=Object(c.useState)(null),[o,l]=Object(c.useState)(null),[d,u]=Object(c.useState)(!1),[j,h]=Object(c.useState)(null),[b,g]=Object(c.useState)(null),[m,O]=Object(c.useState)(-1),[p,f]=Object(c.useState)(null),[x,_]=Object(c.useState)(!1),[I,E]=Object(c.useState)(null),{roomSession:v=null}=Ac(),N=()=>{t(-1),n(-1),i(null),l(null),u(!1),h(null),g(null),O(-1),f(null),_(!1),E(null)},T=Object(c.useMemo)((()=>({imageReady:(e,t,s)=>{!s&&t&&(s=a.fi.generateImage(t)),E(s.src)},imageFailed:null})),[]);return Or(a.rh.RSPE_PRESENT_OPENED,(e=>{let s=null;e.itemType===X.FLOOR?s=F().getFloorItemData(e.classId):e.itemType===X.WALL&&(s=F().getWallItemData(e.classId));let r=!1;if(e.placedInRoom){const t=C().getRoomObject(v.roomId,e.placedItemId,a.Wg.FLOOR);t&&(r=A(t))}switch(e.itemType){case X.WALL:if(s)switch(s.className){case $c:case Kc:case"wallpaper":let t=null,n=null;s.className===$c?(t="packagecard_icon_floor",n=We("inventory.furni.item.floor.name")):s.className===Kc?(t="packagecard_icon_landscape",n=We("inventory.furni.item.landscape.name")):(t="packagecard_icon_wallpaper",n=We("inventory.furni.item.wallpaper.name")),l(n);break;case"poster":{const t=e.productCode;let n=null;0===t.indexOf("poster")&&(n=t.replace("poster",""));const r=F().getProductData(t);let c=null;r?c=r.name:s&&(c=s.name),l(c),E(C().getFurnitureWallIconUrl(e.classId,n));break}default:l(s.name||null),E(C().getFurnitureWallIconUrl(e.classId))}break;case X.HABBO_CLUB:l(We("widget.furni.present.hc"));break;default:{if(e.placedItemType===X.PET){const t=e.petFigureString;if(t&&t.length){const e=new a.Ff(t),s=C().getRoomObjectPetImage(e.typeId,e.paletteId,e.color,new a.kj(90),64,T,!0,0,e.customParts);s&&E(s.getImage().src)}}else{const t=C().getFurnitureFloorImage(e.classId,new a.kj(90),64,T);t&&E(t.getImage().src)}const t=F().getProductData(e.productCode);l(t&&t.name||s.name);break}}t(0),n(e.classId),i(e.itemType),u(r),O(e.placedItemId),f(e.placedItemType),_(e.placedInRoom)})),mr(a.Ig.REQUEST_PRESENT,(e=>{const s=C().getRoomObject(e.roomId,e.objectId,e.category);if(!s)return null;N(),t(e.objectId),n(-1),l(s.model.getValue(a.ch.FURNITURE_DATA)||""),u(A(s)),h(s.model.getValue(a.ch.FURNITURE_PURCHASER_NAME)||null),g(s.model.getValue(a.ch.FURNITURE_PURCHASER_FIGURE)||null)})),Sc(-1!==e,(t=>{t.id===e&&N(),t.id===m&&x&&_(!1)})),{objectId:e,classId:s,itemType:r,text:o,isOwnerOfFurniture:d,senderName:j,senderFigure:b,placedItemId:m,placedItemType:p,placedInRoom:x,imageUrl:I,openPresent:()=>{-1!==e&&(v.openGift(e),C().changeObjectModelData(C().activeRoomId,e,a.Wg.FLOOR,a.ch.FURNITURE_DISABLE_PICKING_ANIMATION,1))},onClose:N}},Qc=()=>{const[e,t]=Object(c.useState)(0);return mr(a.Ig.REQUEST_ROOM_LINK,(e=>{const s=C().getRoomObject(e.roomId,e.objectId,e.category);if(!s)return;let n=s.model.getValue(a.ch.FURNITURE_DATA).internalLink;n&&n.length||(n=s.model.getValue(a.ch.FURNITURE_INTERNAL_LINK)),n&&n.length&&(n=parseInt(n,10),NaN!==n&&(t(n),Ee(new a.Cc(n,!1,!1))))})),pr(a.Dc,(s=>{if(!e)return;s.getParser().data.roomId===e&&t(0)})),{}},Jc=()=>{const[e,t]=Object(c.useState)(-1),[s,n]=Object(c.useState)(-1),[r,i]=Object(c.useState)(""),[o,l]=Object(c.useState)(""),[d,u]=Object(c.useState)("0"),[j,h]=Object(c.useState)(""),[b,g]=Object(c.useState)(!1),{getWallItemById:m=null}=mc();return pr(a.og,(e=>{const s=e.getParser();t(s.itemId),n(a.Wg.WALL);const r=m(s.itemId);let c="post_it";if(r){const e=C().getFurnitureWallName(r.type);e.match("post_it_")&&(c=e)}i(c),l(s.location),u("FFFF33"),h(""),g(!0)})),{objectId:e,color:d,setColor:u,text:j,setText:h,canModify:b,onClose:()=>{Ee(new a.g(e,o,d,j)),t(-1),n(-1),i(""),l(""),u("0"),h(""),g(!1)}}},Zc=()=>{const[e,t]=Object(c.useState)(-1),[s,n]=Object(c.useState)(-1),[r,i]=Object(c.useState)(0),[o,l]=Object(c.useState)(-1),d=()=>{t(-1),n(-1),i(0),l(-1)},u=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e||(e=0),e=Math.abs(e),t||e>40&&(e=40),i(parseFloat(e.toFixed(2))),t||l(100*e)};return pr(a.oc,(t=>{const s=t.getParser();e===s.furniId&&u(s.height,!0)})),mr(a.Ig.REQUEST_STACK_HEIGHT,(e=>{if(!D(he(),e.objectId,e.category))return;const s=C().getRoomObject(e.roomId,e.objectId,e.category);s&&(t(e.objectId),n(e.category),i(s.getLocation().z),l(-1))})),Sc(-1!==e&&-1!==s,(t=>{t.id===e&&t.category===s&&d()})),Object(c.useEffect)((()=>{if(-1===e||-1===o)return;const t=setTimeout((()=>Ee(new a.nc(e,~~o))),10);return()=>clearTimeout(t)}),[e,o]),{objectId:e,height:r,maxHeight:40,onClose:d,updateHeight:u}},ei=()=>{const[e,t]=Object(c.useState)(-1),[s,n]=Object(c.useState)(-1),[r,i]=Object(c.useState)("0"),[o,l]=Object(c.useState)(""),[d,u]=Object(c.useState)(""),[j,h]=Object(c.useState)(!1),b=()=>{t(-1),n(-1),i("0"),l(""),u(""),h(!1)};return mr(a.Ig.REQUEST_STICKIE,(e=>{const s=C().getRoomObject(e.roomId,e.objectId,e.category);if(!s)return;const r=s.model.getValue(a.ch.FURNITURE_ITEMDATA);if(r.length<6)return;let c=null,o=null;r.indexOf(" ")>0?(c=r.slice(0,r.indexOf(" ")),o=r.slice(r.indexOf(" ")+1,r.length)):c=r,t(e.objectId),n(e.category),i(c||"0"),l(o||""),u(s.type||"post_it"),h(he().isRoomOwner||F().isModerator||A(s))})),Sc(-1!==e&&-1!==s,(t=>{t.id===e&&t.category===s&&b()})),{objectId:e,color:r,text:o,type:d,canModify:j,updateColor:t=>{t!==r&&(i(t),C().modifyRoomObjectData(e,s,t,o))},updateText:t=>{l(t),C().modifyRoomObjectData(e,s,r,t)},trash:()=>C().deleteRoomObject(e,s),onClose:b}},ti=()=>{const[e,t]=Object(c.useState)(-1),[s,n]=Object(c.useState)(-1),[r,i]=Object(c.useState)("1"),[o,l]=Object(c.useState)(""),[d,u]=Object(c.useState)(""),[j,h]=Object(c.useState)(""),b=()=>{t(-1),n(-1),i("1"),l(""),u(""),h("")};return mr(a.Ig.REQUEST_TROPHY,(e=>{const s=C().getRoomObject(e.roomId,e.objectId,e.category);if(!s)return;let r=s.model.getValue(a.ch.FURNITURE_DATA),c=s.model.getValue(a.ch.FURNITURE_EXTRAS);c||(c="0"),t(e.objectId),n(e.category),i(s.model.getValue(a.ch.FURNITURE_COLOR)||"1");const o=r.substring(0,r.indexOf("\t"));r=r.substring(o.length+1,r.length);const d=r.substring(0,r.indexOf("\t")),j=r.substr(d.length+1,r.length);l(o),u(d),h(j)})),Sc(-1!==e&&-1!==s,(t=>{t.id===e&&t.category===s&&b()})),{objectId:e,color:r,senderName:o,date:d,message:j,onClose:b}},si=()=>{const[e,t]=Object(c.useState)(-1),[s,n]=Object(c.useState)(-1),[r,i]=Object(c.useState)(null),[o,l]=Object(c.useState)(null),[d,u]=Object(c.useState)(null),[j,h]=Object(c.useState)(-1),[b,g]=Object(c.useState)(null),[m,O]=Object(c.useState)(null),[p,f]=Object(c.useState)(!1),x=()=>{t(-1),n(-1),i(null),l(null),u(null),h(-1),g(null),O(null),f(!1)};return mr(a.Ig.REQUEST_YOUTUBE,(e=>{if(a.Rg.isRoomPreviewerId(e.roomId))return;const s=C().getRoomObject(e.roomId,e.objectId,e.category);s&&(t(e.objectId),n(e.category),f(F().hasSecurity(a.Uh.EMPLOYEE)||A(s)),Ee(new a.Wc(e.objectId)))})),pr(a.wj,(t=>{const s=t.getParser();-1!==e&&e===s.furniId&&(i(s.videoId),l(s.startAtSeconds),u(s.endAtSeconds),h(s.state))})),pr(a.vj,(t=>{const s=t.getParser();-1!==e&&e===s.furniId&&(O(s.playlists),g(s.selectedPlaylistId),i(null),h(-1),u(null),l(null))})),pr(a.uj,(t=>{const s=t.getParser();if(-1!==e&&e===s.furniId)switch(s.commandId){case 1:h(Ks.PLAYING);break;case 2:h(Ks.PAUSED)}})),Sc(-1!==e&&-1!==s,(t=>{t.id===e&&t.category===s&&x()})),{objectId:e,videoId:r,videoStart:o,videoEnd:d,currentVideoState:j,selectedVideo:b,playlists:m,onClose:x,previous:()=>Ee(new a.xb(e,0)),next:()=>Ee(new a.xb(e,1)),pause:()=>p&&r&&r.length&&Ee(new a.xb(e,2)),play:()=>p&&r&&r.length&&Ee(new a.xb(e,3)),selectVideo:t=>{if(b===t)return g(null),void Ee(new a.ci(e,""));g(t),Ee(new a.ci(e,t))}}},ni=()=>{const[e,t]=Object(c.useState)(null),[s,n]=Object(c.useState)([]),[r,i]=Object(c.useState)(""),[o,l]=Object(c.useState)([]),[d,u]=Object(c.useState)(0),[j,h]=Object(c.useState)(tn.STUFF_SELECTION_OPTION_NONE),{showConfirm:b=null}=Hr();return pr(a.tj,(e=>{e.getParser();t(null)})),pr(a.qj,(e=>{const s=e.getParser();t(s.definition)})),pr(a.rj,(e=>{const s=e.getParser();t(s.definition)})),pr(a.sj,(e=>{const s=e.getParser();t(s.definition)})),Object(c.useEffect)((()=>{if(e)return()=>{n([]),i(""),u(0),l((e=>(e&&e.length&&nn.clearSelectionShaderFromFurni(e),[]))),h(tn.STUFF_SELECTION_OPTION_NONE)}}),[e]),{trigger:e,setTrigger:t,intParams:s,setIntParams:n,stringParam:r,setStringParam:i,furniIds:o,setFurniIds:l,actionDelay:d,setActionDelay:u,setAllowsFurni:h,saveWired:()=>{const t=e=>{e&&(e instanceof a.pj?Ee(new a.Gi(e.id,s,r,o,d,e.stuffTypeSelectionCode)):e instanceof a.Ci?Ee(new a.Ki(e.id,s,r,o,e.stuffTypeSelectionCode)):e instanceof a.ub&&Ee(new a.Hi(e.id,s,r,o,e.stuffTypeSelectionCode)))};!function(e){const t=C().getRoomObject(he().roomId,e,a.Wg.FLOOR);return!(!t||!t.model)&&F().userId===t.model.getValue(a.ch.FURNITURE_OWNER_ID)}(e.id)?b(We("wiredfurni.nonowner.change.confirm.body"),(()=>{t(e)}),null,null,null,We("wiredfurni.nonowner.change.confirm.title")):t(e)},selectObjectForWired:(t,s)=>{e&&j&&(t<=0||l((s=>{const n=[...s],r=s.indexOf(t);return r>=0?(n.splice(r,1),nn.hide(t)):n.length<e.maximumItemSelectionCount&&(n.push(t),nn.show(t)),n})))}}},ri=()=>Object(_r.a)(ni),ci=()=>{const[e,t]=Object(c.useState)(null),[s,n]=Object(c.useState)(null),[r,i]=Object(c.useState)([]),[o,l]=Object(c.useState)([]),[d,u]=Object(c.useState)(null),[j,h]=Object(c.useState)(-1),[b,g]=Object(c.useState)(!1),{friends:m=[]}=ec(),{selectObjectForWired:O=null}=ri(),{roomSession:p=null}=Ac(),f=(e,t)=>{const s=Ps.getObjectName(e,t);s&&(n(s),t!==a.Wg.UNIT&&l([]))};var x;return Or(a.th.USER_DATA_UPDATED,(e=>{if(!e.addedUsers.length)return;let t=[];e.addedUsers.forEach((e=>{e.webID!==F().userId&&m.find((t=>t.id===e.webID))&&t.push(new ks(e.roomIndex,a.Wg.UNIT,e.webID,e.name,e.type,!0))})),t.length&&i((e=>{const s=[...e];return t.forEach((e=>{const t=s.findIndex((t=>t.id===e.id));t>-1&&s.splice(t,1),s.push(e)})),s}))})),Or(a.oh.PET_INFO,(e=>{const s=e.petInfo;if(!s)return;if(s.id!==j)return;const n=Ps.getPetInfo(s);n&&(t(n),h(-1))})),Or(a.ph.PET_STATUS_UPDATE,(e=>{})),mr(a.Jg.USE_PRODUCT_FROM_INVENTORY,(e=>{})),mr(a.Jg.USE_PRODUCT_FROM_ROOM,(e=>{const t=C().getRoomObject(p.roomId,e.objectId,a.Wg.FLOOR);if(!t||!A(t))return;const s=t.model.getValue(a.ch.FURNITURE_OWNER_ID),n=t.model.getValue(a.ch.FURNITURE_TYPE_ID),r=F().getFloorItemData(n),c=r.customParams.split(" "),i=c.length?parseInt(c[0]):-1;if(-1===i)return;const o=[],d=C().getRoomObjects(p.roomId,a.Wg.UNIT);for(const l of d){const t=p.userDataManager.getUserDataByIndex(l.id);let n=!1;if(t&&t.type===a.ah.PET){if(t.ownerId===s){t.hasSaddle&&r.specialType===Je.PET_SADDLE&&(n=!0);const s=t.figure.split(" ");if((s.length?parseInt(s[0]):-1)===i){if(r.specialType===Je.MONSTERPLANT_REVIVAL&&!t.canRevive)continue;if(r.specialType===Je.MONSTERPLANT_REBREED&&(t.petLevel<7||t.canRevive||t.canBreed))continue;if(r.specialType===Je.MONSTERPLANT_FERTILIZE&&(t.petLevel>=7||t.canRevive))continue;o.push(new Ys(t.roomIndex,a.Wg.UNIT,t.name,e.objectId,l.id,-1,n))}}}else;}u(null),o.length&&l(o)})),mr(a.Fg.REQUEST_MANIPULATION,(e=>{D(p,e.objectId,e.category)&&g(!0)})),wc((e=>{((e,s)=>{let n=null;switch(s){case a.Wg.FLOOR:case a.Wg.WALL:n=Ps.getFurniInfo(e,s),n&&O(e,s);break;case a.Wg.UNIT:{const t=p.userDataManager.getUserDataByIndex(e);if(!t)break;switch(t.type){case a.ah.PET:p.userDataManager.requestPetInfo(t.webID),h(t.webID);break;case a.ah.USER:n=Ps.getUserInfo(s,t);break;case a.ah.BOT:n=Ps.getBotInfo(s,t);break;case a.ah.RENTABLE_BOT:n=Ps.getRentableBotInfo(s,t)}}}n&&t(n)})(e.id,e.category)})),x=e=>{t(null),l([])},fr(Rs.OBJECT_DESELECTED,x),(e=>{fr(Rs.OBJECT_ROLL_OVER,e)})((t=>{e||t.category!==a.Wg.UNIT||f(t.id,t.category)})),(e=>{fr(Rs.OBJECT_ROLL_OUT,e)})((e=>{s&&e.category===a.Wg.UNIT&&s.roomIndex===e.id&&n(null)})),fr([Rs.FURNI_REMOVED,Rs.USER_REMOVED],(c=>{if(s&&s.category===c.category&&s.roomIndex===c.id&&n(null),c.category===a.Wg.UNIT){let e=r.findIndex((e=>e.roomIndex===c.id));e>-1&&i((e=>e.filter((e=>e.roomIndex===c.id)))),e=o.findIndex((e=>e.id===c.id)),e>-1&&l((e=>e.filter((e=>e.id!==c.id))))}else if(c.category===a.Wg.FLOOR){o.findIndex((e=>e.id===c.id))>-1&&l((e=>e.filter((e=>e.requestRoomObjectId!==c.id))))}e&&(e instanceof ys?e.id===c.id&&t(null):(e instanceof Ls||e instanceof Ds||e instanceof As)&&e.roomIndex===c.id&&t(null))})),Object(c.useEffect)((()=>{e&&(n(null),i([]),l([]))}),[e]),Object(c.useEffect)((()=>{s&&i([])}),[s]),Object(c.useEffect)((()=>{p.isDecorating=b}),[p,b]),{avatarInfo:e,setAvatarInfo:t,activeNameBubble:s,setActiveNameBubble:n,nameBubbles:r,productBubbles:o,confirmingProduct:d,isDecorating:b,setIsDecorating:g,removeNameBubble:e=>{i((t=>{const s=[...t];return s.splice(e,1),s}))},removeProductBubble:e=>{l((t=>{const s=[...t],n=s.splice(e,1)[0];return d===n&&u(null),s}))},updateConfirmingProduct:e=>{u(e),l([])},getObjectName:f}},ii=()=>{const[e,t]=Object(c.useState)(""),[s,n]=Object(c.useState)(!1),[r,i]=Object(c.useState)(!1),[l,d]=Object(c.useState)(!1),[u,j]=Object(c.useState)(!1),[h,b]=Object(c.useState)(0),{showNitroAlert:g=null,showConfirm:O=null}=Hr(),{roomSession:f=null}=Ac();return Or(a.hh.FLOOD_EVENT,(e=>{j(!0),b(parseFloat(e.message))})),wc((e=>{if(e.category!==a.Wg.UNIT)return;const s=f.userDataManager.getUserDataByIndex(e.id);s&&t(s.name)})),mr(a.Fg.DESELECTED,(e=>t(""))),Object(c.useEffect)((()=>{if(!u)return;let e=0;const t=setInterval((()=>{b((t=>(e=(t||0)-1,e))),e<0&&(clearInterval(t),j(!1))}),1e3);return()=>clearInterval(t)}),[u]),Object(c.useEffect)((()=>{if(!l)return;let e=null;return l&&(e=setTimeout((()=>{d(!1),n(!1)}),1e4)),()=>clearTimeout(e)}),[l]),Object(c.useEffect)((()=>{s?r||(i(!0),f.sendChatTypingMessage(s)):r&&(i(!1),f.sendChatTypingMessage(s))}),[f,s,r]),{selectedUsername:e,floodBlocked:u,floodBlockedSeconds:h,setIsTyping:n,setIsIdle:d,sendChat:function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(""===e)return null;const r=e.split(" ");if(r.length>0){const t=r[0];let s="";if(r.length>1&&(s=r[1]),":"===t.charAt(0)&&"x"===s){const t=C().selectedAvatarId;if(t>-1){const n=f.userDataManager.getUserDataByIndex(t);n&&(s=n.name,e=e.replace(" x"," "+n.name))}}switch(t.toLowerCase()){case":shake":return a.zh.init(2500,5e3),a.zh.turnVisualizationOn(),null;case":rotate":return a.fh.init(2500,5e3),a.fh.turnVisualizationOn(),null;case":d":case";d":B()===a.Xd.VIP&&f.sendExpressionMessage(a.o.LAUGH.ordinal);break;case"o/":case"_o/":return f.sendExpressionMessage(a.o.WAVE.ordinal),null;case":kiss":if(B()===a.Xd.VIP)return f.sendExpressionMessage(a.o.BLOW.ordinal),null;break;case":jump":if(B()===a.Xd.VIP)return f.sendExpressionMessage(a.o.JUMP.ordinal),null;break;case":idle":return f.sendExpressionMessage(a.o.IDLE.ordinal),null;case"_b":return f.sendExpressionMessage(a.o.RESPECT.ordinal),null;case":sign":return f.sendSignMessage(parseInt(s)),null;case":iddqd":case":flip":return C().events.dispatchEvent(new a.Oh(f.roomId,-1,!0)),null;case":zoom":return C().events.dispatchEvent(new a.Oh(f.roomId,parseFloat(s),!1)),null;case":screenshot":const e=C().createTextureFromRoom(f.roomId,1),t=new Image;t.src=a.fi.generateImageUrl(e);return window.open("").document.write(t.outerHTML),null;case":pickall":return(f.isRoomOwner||F().isModerator)&&O(We("room.confirm.pick_all"),(()=>{F().sendSpecialCommandMessage(":pickall")}),null,null,null,We("generic.alert.title")),null;case":furni":return m("furni-chooser/"),null;case":chooser":return m("user-chooser/"),null;case":floor":case":bcfloor":return f.controllerLevel>=a.yg.ROOM_OWNER&&m("floor-editor/show"),null;case":togglefps":return o().ticker.maxFPS>0?o().ticker.maxFPS=0:o().ticker.maxFPS=p("system.animation.fps"),null;case":client":case":nitro":case":billsonnn":return g(),null;case":settings":return(f.isRoomOwner||F().isModerator)&&Ee(new a.wh(f.roomId)),null}}switch(t){case Fs.CHAT_DEFAULT:f.sendChatMessage(e,n);break;case Fs.CHAT_SHOUT:f.sendShoutMessage(e,n);break;case Fs.CHAT_WHISPER:f.sendWhisperMessage(s,e,n)}}}},ai=new Map,oi=new Map,li=new Map,di=()=>{const[e,t]=Object(c.useState)([]),[s,n]=Object(c.useState)({mode:a.vg.CHAT_MODE_FREE_FLOW,weight:a.vg.CHAT_BUBBLE_WIDTH_NORMAL,speed:a.vg.CHAT_SCROLL_SPEED_NORMAL,distance:50,protection:a.vg.FLOOD_FILTER_NORMAL}),{roomSession:r=null}=Ac(),i=Object(c.useRef)(!1),o=Object(c.useMemo)((()=>{if(!s)return 6e3;switch(s.speed){case a.vg.CHAT_SCROLL_SPEED_FAST:return 3e3;case a.vg.CHAT_SCROLL_SPEED_NORMAL:return 6e3;case a.vg.CHAT_SCROLL_SPEED_SLOW:return 12e3}}),[s]),l=e=>{const t=d().createAvatarImage(e,a.r.LARGE,null,{resetFigure:e=>{i.current||l(e)},dispose:()=>{},disposed:!1});if(!t)return;const s=t.getCroppedImage(a.s.HEAD),n=t.getPartColor(a.q.CHEST);return ai.set(e,n&&n.rgb||16777215),t.dispose(),oi.set(e,s.src),s.src},u=()=>{t((e=>{if(e){const t=e.filter((e=>e.top>2*-e.height));if(t.length!==e.length)return t}return e}))};return Or(a.hh.CHAT_EVENT,(e=>{const s=C().getRoomObject(r.roomId,e.objectId,a.Wg.UNIT),n=s?xe(r.roomId,null===s||void 0===s?void 0:s.id,a.Wg.UNIT):new a.nf,c=s?r.userDataManager.getUserDataByIndex(e.objectId):new a.Hh(-1);let i="",o=0,d=null,u=e.chatType,j=e.style,h=0,b=-1,m=e.message;if(c){h=c.type;const e=c.figure;switch(h){case a.ah.PET:d=function(e,t,s){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:64,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,c=li.get(e+r);if(c)return c;const i=new a.Ff(e),o=i.typeId,l=C().getRoomObjectPetImage(o,i.paletteId,i.color,new a.kj(45*t),n,null,!1,0,i.customParts,r);return l&&(c=a.fi.generateImageUrl(l.data),li.set(e+r,c)),c}(e,2,!0,64,s.model.getValue(a.ch.FIGURE_POSTURE)),b=new a.Ff(e).typeId;break;case a.ah.USER:d=(e=>{let t=oi.get(e);return t||(t=l(e)),t})(e);break;case a.ah.RENTABLE_BOT:case a.ah.BOT:j=a.ei.BOT}o=ai.get(e),i=c.name}switch(u){case a.hh.CHAT_TYPE_RESPECT:m=We("widgets.chatbubble.respect",["username"],[i]),g().getValue("respect.options").enabled&&Xe(g().getValue("respect.options").sound);break;case a.hh.CHAT_TYPE_PETREVIVE:case a.hh.CHAT_TYPE_PET_REBREED_FERTILIZE:case a.hh.CHAT_TYPE_PET_SPEED_FERTILIZE:{let t="widget.chatbubble.petrevived";u===a.hh.CHAT_TYPE_PET_REBREED_FERTILIZE?t="widget.chatbubble.petrefertilized;":u===a.hh.CHAT_TYPE_PET_SPEED_FERTILIZE&&(t="widget.chatbubble.petspeedfertilized");let n=null;if(C().getRoomObject(r.roomId,e.extraParam,a.Wg.UNIT)){const e=r.userDataManager.getUserDataByIndex(s.id);e&&(n=e.name)}m=We(t,["petName","userName"],[i,n]);break}case a.hh.CHAT_TYPE_PETRESPECT:m=We("widget.chatbubble.petrespect",["petname"],[i]);break;case a.hh.CHAT_TYPE_PETTREAT:m=We("widget.chatbubble.pettreat",["petname"],[i]);break;case a.hh.CHAT_TYPE_HAND_ITEM_RECEIVED:m=We("widget.chatbubble.handitem",["username","handitem"],[i,We("handitem"+e.extraParam)]);break;case a.hh.CHAT_TYPE_MUTE_REMAINING:m=We("widget.chatbubble.mutetime",["hours","minutes","seconds"],[(e.extraParam>0?Math.floor(e.extraParam/3600):0).toString(),(e.extraParam>0?Math.floor(e.extraParam%3600/60):0).toString(),(e.extraParam%60).toString()]);break}const O=new Ms(c.roomIndex,a.Wg.UNIT,r.roomId,m,(e=>{let t="";if(e=e.replace(/([\u00A0-\u9999<>&])(.|$)/g,((e,t,s)=>"&"!==t||"#"!==s?(/[\u00A0-\u9999<>&]/.test(s)&&(s="&#"+s.charCodeAt(0)+";"),"&#"+t.charCodeAt(0)+";"+s):e)),(e=It.shortnameToUnicode(e)).startsWith("@")&&e.indexOf("@",1)>-1){let s=null;for(;null!==(s=/@[a-zA-Z]+@/g.exec(e));){const n=s[0].toString(),r=n.substr(1,n.length-2),c=e.replace(n,"");t=Et.has(r)?'<span style="color: '+Et.get(r)+'">'+c+"</span>":c;break}}else t=e;return t})(m),i,new a.nf(n.x,n.y),u,j,d,o&&("#"+o.toString(16).padStart(6,"0")||!1));t((e=>[...e,O]))})),mr(a.Cg.ROOM_DRAG,(t=>{if(!e.length||t.roomId!==r.roomId)return;const s=t.offsetX;e.forEach((e=>e.elementRef&&(e.left+=s)))})),pr(a.Dc,(e=>{const t=e.getParser();t.roomEnter&&n(t.chat)})),pr(a.wg,(e=>{const t=e.getParser();n(t.chat)})),Object(c.useEffect)((()=>(i.current=!1,()=>{i.current=!0})),[]),{chatMessages:e,setChatMessages:t,chatSettings:s,getScrollSpeed:o,removeHiddenChats:u,moveAllChatsUp:e=>{t((t=>(t&&t.forEach((t=>{t.skipMovement?t.skipMovement=!1:t.top-=e})),t))),u()}}},ui=()=>{const[e,t]=Object(c.useState)([]),s=s=>{e.indexOf(s)>=0||t([...e,s])},n=s=>{const n=e.indexOf(s);if(-1===n)return;const r=[...e];r.splice(n,1),t(r)};return Or(a.kh.DOORBELL,(e=>s(e.userName))),Or(a.kh.RSDE_REJECTED,(e=>n(e.userName))),Or(a.kh.RSDE_ACCEPTED,(e=>n(e.userName))),{users:e,addUser:s,removeUser:n,answer:(e,t)=>{he().sendDoorbellApprovalMessage(e,t),n(e)}}},ji=()=>{const[e,t]=Object(c.useState)([]),{requests:s=[],dismissedRequestIds:n=[],setDismissedRequestIds:r=null}=ec(),i=Object(c.useMemo)((()=>e.filter((e=>-1===n.indexOf(e.request.requesterUserId)))),[e,n]);return Rc(!0,(n=>{if(n.category!==a.Wg.UNIT)return;const r=he().userDataManager.getUserDataByIndex(n.id);if(!r||r.type!==a.bh.getTypeNumber(a.bh.USER))return;const c=s.find((e=>e.requesterUserId===r.webID));if(!c||e.find((e=>e.request.requesterUserId===r.webID)))return;const i=[...e];i.push({roomIndex:r.roomIndex,request:c}),t(i)})),yc(!0,(s=>{if(s.category!==a.Wg.UNIT)return;const n=e.findIndex((e=>e.roomIndex===s.id));if(-1===n)return;const r=[...e];r.splice(n,1),t(r)})),Object(c.useEffect)((()=>{const e=[];for(const t of s){const s=he().userDataManager.getUserData(t.requesterUserId);s&&e.push({roomIndex:s.roomIndex,request:t})}t(e)}),[s]),{displayedRequests:i,hideFriendRequest:e=>{r((t=>{if(t.indexOf(e)>=0)return t;const s=[...t];return s.push(e),s}))}}},hi=()=>{const[e,t]=Object(c.useState)(null),{roomSession:s=null}=Ac();var n,r;return n=!!e,r=e=>{if(e.id<0)return;const s=C().getRoomObject(he().roomId,e.id,e.category);if(!s)return;let n=null;switch(e.category){case a.Wg.WALL:{let e=s.type;if(e.startsWith("poster"))e=We(`poster_${e.replace("poster","")}_name`);else{const t=s.model.getValue(a.ch.FURNITURE_TYPE_ID),n=F().getWallItemData(t);n&&n.name.length&&(e=n.name)}n=new zs(s.id,a.Wg.WALL,e);break}case a.Wg.FLOOR:{let e=s.type;const t=s.model.getValue(a.ch.FURNITURE_TYPE_ID),r=F().getFloorItemData(t);r&&r.name.length&&(e=r.name),n=new zs(s.id,a.Wg.FLOOR,e)}}t((e=>[...e,n].sort(((e,t)=>e.name<t.name?-1:1))))},Object(c.useEffect)((()=>{if(!n)return;const e=e=>r(e);return Ye.addEventListener(Rs.FURNI_ADDED,e),()=>{Ye.removeEventListener(Rs.FURNI_ADDED,e)}}),[n,r]),Sc(!!e,(e=>{e.id<0||t((t=>{const s=[...t];for(let n=0;n<s.length;n++){const t=s[n];if(t.id===e.id&&t.category===e.category){s.splice(n,1);break}}return s}))})),{items:e,onClose:()=>t(null),selectItem:e=>e&&C().selectRoomObject(he().roomId,e.id,e.category),populateChooser:()=>{const e=F(),n=C().getRoomObjects(s.roomId,a.Wg.WALL),r=C().getRoomObjects(s.roomId,a.Wg.FLOOR),c=n.map((t=>{if(t.id<0)return null;let s=t.type;if(s.startsWith("poster"))s=We(`poster_${s.replace("poster","")}_name`);else{const n=t.model.getValue(a.ch.FURNITURE_TYPE_ID),r=e.getWallItemData(n);r&&r.name.length&&(s=r.name)}return new zs(t.id,a.Wg.WALL,s)})),i=r.map((t=>{if(t.id<0)return null;let s=t.type;const n=t.model.getValue(a.ch.FURNITURE_TYPE_ID),r=e.getFloorItemData(n);return r&&r.name.length&&(s=r.name),new zs(t.id,a.Wg.FLOOR,s)}));t([...c,...i].sort(((e,t)=>e.name<t.name?-1:1)))}}},bi=()=>{const{roomSession:e=null}=Ac();return Or(a.qh.OFFER,(e=>{const t=new Ns(Ns.OFFER,e.id);t.summary=e.summary,t.headline=e.headline,$e(t)})),Or(a.qh.ERROR,(e=>{const t=new Ns(Ns.ERROR,e.id);t.summary=e.summary,t.headline=e.headline,$e(t)})),Or(a.qh.CONTENT,(e=>{const t=new Ns(Ns.CONTENT,e.id);t.startMessage=e.startMessage,t.endMessage=e.endMessage,t.numQuestions=e.numQuestions,t.questionArray=e.questionArray,t.npsPoll=e.npsPoll,$e(t)})),{startPoll:t=>e.sendPollStartMessage(t),rejectPoll:t=>e.sendPollRejectMessage(t),answerPoll:(t,s,n)=>e.sendPollAnswerMessage(t,s,n)}},gi=()=>{const[e,t]=Object(c.useState)(null),{roomSession:s=null}=Ac();return Rc(!!e,(e=>{if(e.id<0)return;const s=he().userDataManager.getUserDataByIndex(e.id);s&&t((e=>{const t=[...e];return t.push(new zs(s.roomIndex,a.Wg.UNIT,s.name)),t.sort(((e,t)=>e.name<t.name?-1:1)),t}))})),yc(!!e,(e=>{e.id<0||t((t=>{const s=[...t];for(let n=0;n<s.length;n++){const t=s[n];if(t.id===e.id&&t.category===e.category){s.splice(n,1);break}}return s}))})),{items:e,onClose:()=>t(null),selectItem:e=>e&&C().selectRoomObject(he().roomId,e.id,e.category),populateChooser:()=>{const e=he(),s=C().getRoomObjects(e.roomId,a.Wg.UNIT);t(s.map((t=>{if(t.id<0)return null;const s=e.userDataManager.getUserDataByIndex(t.id);return s?new zs(s.roomIndex,a.Wg.UNIT,s.name):null})).sort(((e,t)=>e.name<t.name?-1:1)))}}},mi=()=>{const[e,t]=Object(c.useState)(-1),[s,n]=Object(c.useState)(null),[r,i]=Object(c.useState)(!1),[o,l]=Object(c.useState)(null),[d,u]=Object(c.useState)(new Map),[j,h]=Object(c.useState)(new Map),{answerPoll:b=null}=bi(),{roomSession:g=null}=Ac(),m=()=>{t(-1),n(null)},O=Object(c.useCallback)((()=>{h((e=>{const t=[];if(e.forEach(((e,s)=>{e.secondsLeft--,e.secondsLeft<=0&&t.push(s)})),0===t.length)return e;const s=new Map(e);return t.forEach((e=>s.delete(e))),s}))}),[]);return Or(a.vh.ANSWERED,(e=>{const t=g.userDataManager.getUserData(e.userId);t&&(u(e.answerCounts),h((s=>{if(!s.has(t.roomIndex)){const s=new Map(j);return s.set(t.roomIndex,{value:e.value,secondsLeft:3}),s}return s})),"0"===e.value?C().updateRoomObjectUserGesture(g.roomId,t.roomIndex,a.l.getGestureId(a.l.GESTURE_SAD)):C().updateRoomObjectUserGesture(g.roomId,t.roomIndex,a.l.getGestureId(a.l.GESTURE_SMILE)))})),Or(a.vh.FINISHED,(e=>{s&&s.id===e.questionId&&(u(e.answerCounts),i(!0),l((e=>(e&&clearTimeout(e),setTimeout((()=>m()),4e3))))),h(new Map)})),Or(a.vh.QUESTION,(e=>{t(e.id),n(e.question),i(!1),u(new Map),h(new Map),l((t=>{if(t&&clearTimeout(t),e.duration>0){const t=e.duration<1e3?4e3:e.duration;return setTimeout((()=>m()),t)}return null}))})),Object(c.useEffect)((()=>{const e=setInterval((()=>O()),1e3);return()=>clearInterval(e)}),[O]),Object(c.useEffect)((()=>()=>{l((e=>(e&&clearTimeout(e),null)))}),[]),{question:s,answerSent:r,answerCounts:d,userAnswers:j,vote:t=>{!r&&s&&(b(e,s.id,[t]),i(!0))}}},Oi=()=>{const[e,t]=Object(c.useState)(null),[s,n]=Object(c.useState)(null),[r,i]=Object(c.useState)(0),[o,l]=Object(c.useState)(0),[d,u]=Object(c.useState)(0),[j,h]=Gr("nitro.screensize",{width:window.innerWidth,height:window.innerHeight});return pr(a.Vi,(e=>{const s=e.getParser();t(s.userInfo),n(s.userInfo.figure),l(s.userInfo.respectsRemaining),u(s.userInfo.respectsPetRemaining)})),pr(a.Lb,(e=>{const t=e.getParser();n(t.figure)})),pr(a.cj,(e=>{const t=e.getParser();i(t.chatType)})),Object(c.useEffect)((()=>{const e=Me("nitro.screensize");if(e&&(e.width!==window.innerWidth||e.height!==window.innerHeight)){let e=window.localStorage.length;for(;e>0;){const t=window.localStorage.key(e);t&&t.startsWith("nitro.window")&&window.localStorage.removeItem(t),e--}}const t=e=>h({width:window.innerWidth,height:window.innerHeight});return window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}}),[h]),{userInfo:e,userFigure:s,chatStyleId:r,userRespectRemaining:o,petRespectRemaining:d,respectUser:e=>{F().giveRespect(e),l(F().respectsLeft)},respectPet:e=>{F().givePetRespect(e),u(F().respectsPetLeft)},updateChatStyleId:e=>{i(e),Ee(new a.Dh(e))}}},pi=()=>Object(_r.a)(Oi),fi=e=>{return t=()=>e(),Object(c.useEffect)(t,[]);var t},xi=e=>{const{achievement:t=null,scale:s=1,...n}=e;return t?Object(an.jsx)(Dn,{badgeCode:ve.getAchievementBadgeCode(t),isGrayscale:!ve.getAchievementHasStarted(t),scale:s,...n}):null},_i=e=>{const{achievement:t=null,selectedAchievementId:s=-1,setSelectedAchievementId:n=null,children:r=null,...c}=e;return t?Object(an.jsxs)(Vn,{itemActive:s===t.achievementId,itemUnseen:t.unseen>0,onClick:e=>n(t.achievementId),...c,children:[Object(an.jsx)(xi,{achievement:t}),r]}):null},Ii=e=>{const{achievements:t=null,selectedAchievementId:s=-1,setSelectedAchievementId:n=null,children:r=null,...c}=e;return Object(an.jsxs)(jn,{columnCount:6,columnMinWidth:50,columnMinHeight:50,...c,children:[t&&t.length>0&&t.map(((e,t)=>Object(an.jsx)(_i,{achievement:e,selectedAchievementId:s,setSelectedAchievementId:n},t))),r]})},Ei=e=>{const{achievement:t=null,children:s=null,...n}=e;return t?Object(an.jsxs)(hn,{shrink:!0,className:"bg-muted rounded p-2 text-black",gap:2,overflow:"hidden",...n,children:[Object(an.jsxs)(Fn,{center:!0,gap:1,children:[Object(an.jsx)(xi,{className:"nitro-achievements-badge-image",achievement:t,scale:2}),Object(an.jsx)(ur,{fontWeight:"bold",children:We("achievements.details.level",["level","limit"],[ve.getAchievementLevel(t).toString(),t.levelCount.toString()])})]}),Object(an.jsxs)(Fn,{fullWidth:!0,justifyContent:"center",overflow:"hidden",children:[Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{fontWeight:"bold",truncate:!0,children:Be(ve.getAchievementBadgeCode(t))}),Object(an.jsx)(ur,{textBreak:!0,children:Fe(ve.getAchievementBadgeCode(t))})]}),(t.levelRewardPoints>0||t.scoreLimit>0)&&Object(an.jsxs)(Fn,{gap:1,children:[t.levelRewardPoints>0&&Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)(ur,{truncate:!0,className:"small",children:We("achievements.details.reward")}),Object(an.jsxs)(hn,{center:!0,className:"fw-bold small",gap:1,children:[t.levelRewardPoints,Object(an.jsx)(Pn,{type:t.levelRewardPointType})]})]}),t.scoreLimit>0&&Object(an.jsx)(tr,{text:We("achievements.details.progress",["progress","limit"],[(t.currentPoints+t.scoreAtStartOfLevel).toString(),(t.scoreLimit+t.scoreAtStartOfLevel).toString()]),progress:t.currentPoints+t.scoreAtStartOfLevel,maxProgress:t.scoreLimit+t.scoreAtStartOfLevel})]})]}),s]}):null},Ci=e=>{const{category:t=null,selectedAchievementId:s=-1,setSelectedAchievementId:n=null,setAchievementSeen:r=null}=e,i=Object(c.useMemo)((()=>-1===s?null:t.achievements.find((e=>e.achievementId===s))),[t,s]);return Object(c.useEffect)((()=>{i||t.achievements.length&&n(t.achievements[0].achievementId)}),[i,t,n]),Object(c.useEffect)((()=>{i&&r(t.code,i.achievementId)}),[i,t,r]),t?Object(an.jsxs)(Fn,{fullHeight:!0,justifyContent:"between",children:[Object(an.jsx)(Ii,{achievements:t.achievements,selectedAchievementId:s,setSelectedAchievementId:n}),!!i&&Object(an.jsx)(Ei,{achievement:i})]}):null},vi=e=>{const{category:t=null,selectedCategoryCode:s=null,setSelectedCategoryCode:n=null,children:r=null,...c}=e;if(!t)return null;const i=ve.getAchievementCategoryProgress(t),a=ve.getAchievementCategoryMaxProgress(t),o=ve.getAchievementCategoryImageUrl(t,i),l=ve.getAchievementCategoryTotalUnseen(t);return Object(an.jsxs)(Vn,{itemActive:s===t.code,itemCount:l,itemCountMinimum:0,gap:1,onClick:e=>n(t.code),...c,children:[Object(an.jsx)(ur,{fullWidth:!0,center:!0,small:!0,className:"pt-1",children:We(`quests.${t.code}.name`)}),Object(an.jsx)(An,{position:"relative",imageUrl:o,children:Object(an.jsxs)(ur,{fullWidth:!0,center:!0,position:"absolute",variant:"white",style:{fontSize:12,bottom:9},children:[i," / ",a]})}),r]})},Ni=e=>{const{categories:t=null,selectedCategoryCode:s=null,setSelectedCategoryCode:n=null,children:r=null,...c}=e;return Object(an.jsxs)(jn,{columnCount:3,columnMinWidth:90,columnMinHeight:100,...c,children:[t&&t.length>0&&t.map(((e,t)=>Object(an.jsx)(vi,{category:e,selectedCategoryCode:s,setSelectedCategoryCode:n},t))),r]})},Ti=e=>{const[t,s]=Object(c.useState)(!1),{achievementCategories:n=[],selectedCategoryCode:r=null,setSelectedCategoryCode:i=null,selectedAchievementId:a=-1,setSelectedAchievementId:o=null,achievementScore:d=0,getProgress:u=0,getMaxProgress:j=0,setAchievementSeen:h=null}=xr(),b=Object(c.useMemo)((()=>null===r?null:n.find((e=>e.code===r))),[n,r]);return Object(c.useEffect)((()=>{const e={linkReceived:e=>{const t=e.split("/");if(!(t.length<2))switch(t[1]){case"show":return void s(!0);case"hide":return void s(!1);case"toggle":return void s((e=>!e))}},eventUrlPrefix:"achievements/"};return l(e),()=>E(e)}),[]),t?Object(an.jsxs)(yn,{uniqueKey:"achievements",className:"nitro-achievements",theme:"primary-slim",children:[Object(an.jsx)(vn,{headerText:We("inventory.achievements"),onCloseClick:e=>s(!1)}),b&&Object(an.jsxs)(Nn,{position:"relative",className:"justify-content-center align-items-center cursor-pointer",gap:3,children:[Object(an.jsx)(on,{onClick:e=>i(null),className:"nitro-achievements-back-arrow"}),Object(an.jsxs)(Fn,{grow:!0,gap:0,children:[Object(an.jsx)(ur,{fontSize:4,fontWeight:"bold",className:"text-small",children:We(`quests.${b.code}.name`)}),Object(an.jsx)(ur,{children:We("achievements.details.categoryprogress",["progress","limit"],[b.getProgress().toString(),b.getMaxProgress().toString()])})]}),Object(an.jsx)(qn,{imageUrl:ve.getAchievementCategoryImageUrl(b,null,!0)})]}),Object(an.jsxs)(In,{gap:1,children:[!b&&Object(an.jsxs)(an.Fragment,{children:[Object(an.jsx)(Ni,{categories:n,selectedCategoryCode:r,setSelectedCategoryCode:i}),Object(an.jsxs)(Fn,{grow:!0,justifyContent:"end",gap:1,children:[Object(an.jsx)(ur,{small:!0,center:!0,children:We("achievements.categories.score",["score"],[d.toString()])}),Object(an.jsx)(tr,{text:We("achievements.categories.totalprogress",["progress","limit"],[u.toString(),j.toString()]),progress:u,maxProgress:j})]})]}),b&&Object(an.jsx)(Ci,{category:b,selectedAchievementId:a,setSelectedAchievementId:o,setAchievementSeen:h})]})]}):null},Si=e=>{const{icon:t=null,selected:s=!1,classNames:n=[],children:r=null,...i}=e,a=Object(c.useMemo)((()=>{const e=["nitro-avatar-editor-spritesheet"];return t&&t.length&&e.push(t+"-icon"),s&&e.push("selected"),n.length&&e.push(...n),e}),[t,s,n]);return Object(an.jsx)(on,{classNames:a,...i})},wi=e=>{const{figureData:t=null}=e,[s,n]=Object(c.useState)(-1),r=Object(c.useCallback)((()=>{n((e=>e+1))}),[]),i=Object(c.useCallback)((e=>{e<a.m.MIN_DIRECTION&&(e=a.m.MAX_DIRECTION+(e+1)),e>a.m.MAX_DIRECTION&&(e-=a.m.MAX_DIRECTION+1),t.direction=e}),[t]);return Object(c.useEffect)((()=>{if(t)return t.notify=r,()=>{t.notify=null}}),[t,r]),Object(an.jsxs)(Fn,{className:"figure-preview-container",overflow:"hidden",position:"relative",children:[Object(an.jsx)(kn,{figure:t.getFigureString(),direction:t.direction,scale:2}),Object(an.jsx)(Si,{className:"avatar-spotlight",icon:"spotlight"}),Object(an.jsx)(on,{className:"avatar-shadow"}),Object(an.jsxs)(on,{className:"arrow-container",children:[Object(an.jsx)(Si,{pointer:!0,icon:"arrow-left",onClick:e=>i(t.direction+1)}),Object(an.jsx)(Si,{pointer:!0,icon:"arrow-right",onClick:e=>i(t.direction-1)})]})]})},Ri=e=>{const{partItem:t=null,children:s=null,...n}=e,[r,i]=Object(c.useState)(-1),a=p("hc.disabled",!1);return Object(c.useEffect)((()=>(t.notify=()=>i((e=>e+1)),()=>t.notify=null)),[t]),Object(an.jsxs)(Vn,{itemImage:t.isClear?void 0:t.imageUrl,itemActive:t.isSelected,...n,children:[!a&&t.isHC&&Object(an.jsx)(Pn,{className:"position-absolute end-1 bottom-1",type:"hc"}),t.isClear&&Object(an.jsx)(Si,{icon:"clear"}),t.isSellable&&Object(an.jsx)(Si,{icon:"sellable",position:"absolute",className:"end-1 bottom-1"}),s]})},yi=e=>{const{model:t=null,category:s=null,setMaxPaletteCount:n=null}=e,r=Object(c.useRef)(null),i=Object(c.useCallback)((e=>{const r=s.parts.indexOf(e);if(-1===r)return;t.selectPart(s.name,r);const c=s.getCurrentPart();n(c.maxColorIndex||1)}),[t,s,n]);return Object(c.useEffect)((()=>{t&&s&&r&&r.current&&(r.current.scrollTop=0)}),[t,s]),Object(an.jsx)(jn,{innerRef:r,columnCount:3,columnMinHeight:50,children:s.parts.length>0&&s.parts.map(((e,t)=>Object(an.jsx)(Ri,{partItem:e,onClick:t=>i(e)},t)))})},ki=e=>{const{colorItem:t=null,children:s=null,...n}=e,[r,i]=Object(c.useState)(-1),a=p("hc.disabled",!1);return Object(c.useEffect)((()=>(t.notify=()=>i((e=>e+1)),()=>t.notify=null)),[t]),Object(an.jsxs)(Vn,{itemHighlight:!0,itemColor:t.color,itemActive:t.isSelected,className:"clear-bg",...n,children:[!a&&t.isHC&&Object(an.jsx)(Pn,{className:"position-absolute end-1 bottom-1",type:"hc"}),s]})},Ai=e=>{const{model:t=null,category:s=null,paletteSet:n=[],paletteIndex:r=-1}=e,i=Object(c.useRef)(null),a=Object(c.useCallback)((e=>{const c=n.indexOf(e);-1!==c&&t.selectColor(s.name,c,r)}),[t,s,n,r]);return Object(c.useEffect)((()=>{t&&s&&i&&i.current&&(i.current.scrollTop=0)}),[t,s]),Object(an.jsx)(jn,{innerRef:i,gap:1,columnCount:5,columnMinWidth:30,children:n.length>0&&n.map(((e,t)=>Object(an.jsx)(ki,{colorItem:e,onClick:t=>a(e)},t)))})},Di=e=>{const{model:t=null,gender:s=null,setGender:n=null}=e,[r,i]=Object(c.useState)(null),[a,o]=Object(c.useState)(1),l=Object(c.useCallback)((e=>{const s=t.categories.get(e);if(s){s.init(),i(s);for(const e of s.parts)if(e&&e.isSelected){o(e.maxColorIndex||1);break}}}),[t]);return Object(c.useEffect)((()=>{t.init();for(const e of t.categories.keys()){l(e);break}}),[t,l]),t&&r?Object(an.jsxs)(un,{children:[Object(an.jsxs)(Fn,{size:2,children:[t.canSetGender&&Object(an.jsxs)(an.Fragment,{children:[Object(an.jsx)(hn,{center:!0,pointer:!0,className:"category-item",onClick:e=>n(ye.MALE),children:Object(an.jsx)(Si,{icon:"male",selected:s===ye.MALE})}),Object(an.jsx)(hn,{center:!0,pointer:!0,className:"category-item",onClick:e=>n(ye.FEMALE),children:Object(an.jsx)(Si,{icon:"female",selected:s===ye.FEMALE})})]}),!t.canSetGender&&t.categories&&t.categories.size>0&&Array.from(t.categories.keys()).map((e=>{const s=t.categories.get(e);return Object(an.jsx)(hn,{center:!0,pointer:!0,className:"category-item",onClick:t=>l(e),children:Object(an.jsx)(Si,{icon:s.name,selected:r===s})},e)}))]}),Object(an.jsx)(Fn,{size:5,overflow:"hidden",children:Object(an.jsx)(yi,{model:t,category:r,setMaxPaletteCount:o})}),Object(an.jsxs)(Fn,{size:5,overflow:"hidden",children:[a>=1&&Object(an.jsx)(Ai,{model:t,category:r,paletteSet:r.getPalette(0),paletteIndex:0}),2===a&&Object(an.jsx)(Ai,{model:t,category:r,paletteSet:r.getPalette(1),paletteIndex:1})]})]}):null},Li=e=>{const{figureData:t=null,savedFigures:s=[],setSavedFigures:n=null,loadAvatarInEditor:r=null}=e,i=p("hc.disabled",!1),o=Object(c.useCallback)((e=>{if(e>=s.length||e<0)return;const[t,n]=s[e];r(t.getFigureString(),n)}),[s,r]),l=Object(c.useCallback)((e=>{if(!t||e>=s.length||e<0)return;const r=[...s],c=t.getFigureString(),i=t.gender;r[e]=[d().createFigureContainer(c),i],n(r),Ee(new a.Rh(e+1,c,i))}),[t,s,n]),u=Object(c.useMemo)((()=>{if(!s||!s.length)return[];const e=[];return s.forEach(((t,s)=>{let[n,r]=t,c=0;n&&(c=d().getFigureClubLevel(n,r)),e.push(Object(an.jsxs)(Vn,{position:"relative",overflow:"hidden",className:"nitro-avatar-editor-wardrobe-figure-preview",children:[n&&Object(an.jsx)(kn,{figure:n.getFigureString(),gender:r,direction:2}),Object(an.jsx)(on,{className:"avatar-shadow"}),!i&&c>0&&Object(an.jsx)(Pn,{className:"position-absolute top-1 start-1",type:"hc"}),Object(an.jsxs)(hn,{gap:1,className:"button-container",children:[Object(an.jsx)(bn,{variant:"link",fullWidth:!0,onClick:e=>l(s),children:We("avatareditor.wardrobe.save")}),n&&Object(an.jsx)(bn,{variant:"link",fullWidth:!0,onClick:e=>o(s),disabled:c>B(),children:We("generic_usable.button.use")})]})]},s))})),e}),[s,i,l,o]);return Object(an.jsx)(jn,{columnCount:5,columnMinWidth:80,columnMinHeight:140,children:u})},Pi=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)(null),[i,o]=Object(c.useState)(null),[u,j]=Object(c.useState)(null),[h,b]=Object(c.useState)(null),[g,m]=Object(c.useState)([]),[O,f]=Object(c.useState)([]),[x,_]=Object(c.useState)([]),[I,C]=Object(c.useState)(!1),[v,N]=Object(c.useState)(null),[T,S]=Object(c.useState)(null),[w,R]=Object(c.useState)(!0),[y,k]=Object(c.useState)(!1),A=Object(c.useMemo)((()=>p("avatar.wardrobe.max.slots",10)),[]);pr(a.Kb,(e=>{const t=e.getParser();m(t.figureSetIds),f(t.boundsFurnitureNames)})),pr(a.jj,(e=>{const t=e.getParser(),s=[];let n=0;for(;n<A;)s.push([null,null]),n++;for(let[r,[c,i]]of t.looks.entries()){const e=d().createFigureContainer(c);s[r-1]=[e,i]}_(s)}));const D=Object(c.useCallback)((e=>{u&&b(u.get(e))}),[u]),L=Object(c.useCallback)((()=>{const e=new Map;e.set(a.n.GENERIC,new De),e.set(a.n.HEAD,new Rt),e.set(a.n.TORSO,new kt),e.set(a.n.LEGS,new yt),j(e)}),[]),P=Object(c.useCallback)((()=>{const e=new Map,t=new ye,s=new ye;t.loadAvatarData("hr-100.hd-180-7.ch-215-66.lg-270-79.sh-305-62.ha-1002-70.wa-2007",ye.MALE),s.loadAvatarData("hr-515-33.hd-600-1.ch-635-70.lg-716-66-62.sh-735-68",ye.FEMALE),e.set(ye.MALE,t),e.set(ye.FEMALE,s),r(e),o(e.get(ye.MALE))}),[]),U=Object(c.useCallback)((function(e,t){let s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];t=Re.getGender(t);let r=i;t!==r.gender&&(r=n.get(t)),e!==r.getFigureString()&&r.loadAvatarData(e,t),r!==i&&o(r),s&&(N(i.getFigureString()),S(i.gender))}),[n,i]),M=Object(c.useCallback)((e=>{switch(e){case Te.ACTION_CLEAR:return U(i.getFigureStringWithFace(0,!1),i.gender,!1),void L();case Te.ACTION_RESET:return U(v,T),void L();case Te.ACTION_RANDOMIZE:const e=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];const c=d().structure,i=new a.p(""),o=Tt(c.getMandatorySetTypeIds(t,s),ye.SET_TYPES);for(const a of r){const t=e.getPartSetId(a),s=e.getColorIds(a);i.updatePart(a,t,s)}for(const a of o){if(i.hasPartType(a))continue;const e=c.figureData.getSetType(a),r=St(e,t,s,n);if(!r)continue;let o=[];r.isColorable&&(o=wt(c.figureData.getPalette(e.paletteID),r,s).map((e=>e.id))),i.updatePart(e.type,r.id,o)}return i.getFigureString()}(i,i.gender,B(),g,[ye.FACE]);return U(e,i.gender,!1),void L();case Te.ACTION_SAVE:return Ee(new a.Ti(i.gender,i.getFigureString())),void s(!1)}}),[i,v,T,g,U,L]),H=Object(c.useCallback)((e=>{e=Re.getGender(e),o(n.get(e))}),[n]);return Object(c.useEffect)((()=>{const e={linkReceived:e=>{const t=e.split("/");if(!(t.length<2))switch(t[1]){case"show":return void s(!0);case"hide":return void s(!1);case"toggle":return void s((e=>!e))}},eventUrlPrefix:"avatar-editor/"};return l(e),()=>E(e)}),[]),Object(c.useEffect)((()=>{_(new Array(A))}),[A]),Object(c.useEffect)((()=>{I&&(b(null),Ee(new a.Vc))}),[I]),Object(c.useEffect)((()=>{h&&C(!1)}),[h]),Object(c.useEffect)((()=>{u&&D(a.n.GENERIC)}),[u,D]),Object(c.useEffect)((()=>{if(i)return Re.CURRENT_FIGURE=i,L(),()=>Re.CURRENT_FIGURE=null}),[i,L]),Object(c.useEffect)((()=>(Re.FIGURE_SET_IDS=g,Re.BOUND_FURNITURE_NAMES=O,L(),()=>{Re.FIGURE_SET_IDS=null,Re.BOUND_FURNITURE_NAMES=null})),[g,O,L]),Object(c.useEffect)((()=>{if(t)return n?void 0:(P(),void k(!0))}),[t,n,P]),Object(c.useEffect)((()=>{t&&y&&w&&(U(F().figure,F().gender),R(!1))}),[t,y,w,U]),Object(c.useEffect)((()=>{if(!t)return()=>{R(!0)}}),[t]),t&&i?Object(an.jsxs)(yn,{uniqueKey:"avatar-editor",className:"nitro-avatar-editor",children:[Object(an.jsx)(vn,{headerText:We("avatareditor.title"),onCloseClick:e=>s(!1)}),Object(an.jsxs)(or,{children:[u&&u.size>0&&Array.from(u.keys()).map((e=>{const t=h&&h.name===e;return Object(an.jsx)(ar,{isActive:t,onClick:t=>D(e),children:We(`avatareditor.category.${e}`)},e)})),Object(an.jsx)(ar,{isActive:I,onClick:e=>C(!0),children:We("avatareditor.category.wardrobe")})]}),Object(an.jsx)(In,{children:Object(an.jsxs)(un,{children:[Object(an.jsxs)(Fn,{size:9,overflow:"hidden",children:[h&&!I&&Object(an.jsx)(Di,{model:h,gender:i.gender,setGender:H}),I&&Object(an.jsx)(Li,{figureData:i,savedFigures:x,setSavedFigures:_,loadAvatarInEditor:U})]}),Object(an.jsxs)(Fn,{size:3,overflow:"hidden",children:[Object(an.jsx)(wi,{figureData:i}),Object(an.jsxs)(Fn,{grow:!0,gap:1,children:[Object(an.jsxs)(gn,{children:[Object(an.jsx)(bn,{variant:"secondary",onClick:e=>M(Te.ACTION_RESET),children:Object(an.jsx)(fn.a,{icon:"undo"})}),Object(an.jsx)(bn,{variant:"secondary",onClick:e=>M(Te.ACTION_CLEAR),children:Object(an.jsx)(fn.a,{icon:"trash"})}),Object(an.jsx)(bn,{variant:"secondary",onClick:e=>M(Te.ACTION_RANDOMIZE),children:Object(an.jsx)(fn.a,{icon:"dice"})})]}),Object(an.jsx)(bn,{className:"w-100",variant:"success",onClick:e=>M(Te.ACTION_SAVE),children:We("avatareditor.save")})]})]})]})})]}):null},Ui=e=>{const{onClose:t=null,onEdit:s=null,onDelete:n=null}=e,{cameraRoll:r=null,setCameraRoll:i=null,selectedPictureIndex:o=-1,setSelectedPictureIndex:l=null}=Er(),{simpleAlert:d=null}=Hr(),u=Object(c.useRef)(),j=o>-1?r[o]:null,h=Object(c.useCallback)((()=>{if(!u||!u.current)return null;const e=u.current.getBoundingClientRect();return new a.of(Math.floor(e.x),Math.floor(e.y),Math.floor(e.width),Math.floor(e.height))}),[]),b=Object(c.useCallback)((()=>{if(o>-1)return void l(-1);const e=C().createTextureFromRoom(he().roomId,1,h()),t=[...r];t.length>=5&&(d(We("camera.full.body")),t.pop()),Xe(vt.CAMERA_SHUTTER),t.push(new Dt(e,a.fi.generateImageUrl(e))),i(t)}),[r,o,h,i,l,d]);return Object(an.jsx)(Rn,{uniqueKey:"nitro-camera-capture",children:Object(an.jsxs)(Fn,{center:!0,className:"nitro-camera-capture",gap:0,children:[j&&Object(an.jsx)("img",{alt:"",className:"camera-area",src:j.imageUrl}),Object(an.jsxs)("div",{className:"camera-canvas drag-handler",children:[Object(an.jsx)("div",{className:"position-absolute header-close",onClick:t,children:Object(an.jsx)(fn.a,{icon:"times"})}),!j&&Object(an.jsx)("div",{ref:u,className:"camera-area camera-view-finder"}),j&&Object(an.jsx)("div",{className:"camera-area camera-frame",children:Object(an.jsxs)("div",{className:"camera-frame-preview-actions w-100 position-absolute bottom-0 py-2 text-center",children:[Object(an.jsx)("button",{className:"btn btn-success me-3",title:We("camera.editor.button.tooltip"),onClick:s,children:We("camera.editor.button.text")}),Object(an.jsx)("button",{className:"btn btn-danger",onClick:n,children:We("camera.delete.button.text")})]})}),Object(an.jsx)("div",{className:"d-flex justify-content-center",children:Object(an.jsx)("div",{className:"camera-button",title:We("camera.take.photo.button.tooltip"),onClick:b})})]}),r.length>0&&Object(an.jsx)(hn,{gap:2,justifyContent:"center",className:"camera-roll d-flex justify-content-center py-2",children:r.map(((e,t)=>Object(an.jsx)("img",{alt:"",src:e.imageUrl,onClick:e=>l(t)},t)))})]})})},Mi=e=>{const{base64Url:t=null,onCloseClick:s=null,onCancelClick:n=null,price:r=null}=e,[i,o]=Object(c.useState)(null),[l,d]=Object(c.useState)(null),[u,j]=Object(c.useState)(0),[h,b]=Object(c.useState)(!1),[g,O]=Object(c.useState)(!1),[f,x]=Object(c.useState)(0),_=Object(c.useMemo)((()=>p("camera.publish.disabled",!1)),[]);pr(a.W,(e=>{j((e=>e+1)),O(!1)})),pr(a.V,(e=>{const t=e.getParser();d(t.extraDataId),x(t.secondsToWait),b(t.ok),O(!1)})),pr(a.X,(e=>{const t=e.getParser();o(p("camera.url")+"/"+t.url)}));const I=function(e){switch(e){case"close":return void s();case"buy":if(g)return;return O(!0),void Ee(new a.Wf(""));case"publish":if(g)return;return O(!0),void Ee(new a.Qf);case"cancel":return void n()}};return Object(c.useEffect)((()=>{t&&C().saveBase64AsScreenshot(t)}),[t]),r?Object(an.jsxs)(yn,{className:"nitro-camera-checkout",theme:"primary-slim",children:[Object(an.jsx)(vn,{headerText:We("camera.confirm_phase.title"),onCloseClick:e=>I("close")}),Object(an.jsxs)(In,{children:[Object(an.jsxs)(hn,{center:!0,children:[i&&i.length&&Object(an.jsx)(qn,{className:"picture-preview border",imageUrl:i}),(!i||!i.length)&&Object(an.jsx)(hn,{center:!0,className:"picture-preview border",children:Object(an.jsx)(ur,{bold:!0,children:We("camera.loading")})})]}),Object(an.jsxs)(hn,{justifyContent:"between",alignItems:"center",className:"bg-muted rounded p-2",children:[Object(an.jsxs)(Fn,{size:_?10:6,gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:We("camera.purchase.header")}),(r.credits>0||r.duckets>0)&&Object(an.jsxs)(hn,{gap:1,children:[Object(an.jsx)(ur,{children:We("catalog.purchase.confirmation.dialog.cost")}),r.credits>0&&Object(an.jsxs)(hn,{gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:r.credits}),Object(an.jsx)(Pn,{type:-1})]}),r.duckets>0&&Object(an.jsxs)(hn,{gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:r.duckets}),Object(an.jsx)(Pn,{type:5})]})]}),u>0&&Object(an.jsxs)(ur,{children:[Object(an.jsx)(ur,{bold:!0,children:We("camera.purchase.count.info")})," ",u,Object(an.jsx)("u",{className:"ms-1 cursor-pointer",onClick:()=>m("inventory/toggle"),children:We("camera.open.inventory")})]})]}),Object(an.jsx)(hn,{alignItems:"center",children:Object(an.jsx)(bn,{variant:"success",disabled:g,onClick:e=>I("buy"),children:We(u?"camera.buy.another.button.text":"buy")})})]}),!_&&Object(an.jsxs)(hn,{justifyContent:"between",alignItems:"center",className:"bg-muted rounded p-2",children:[Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:We(h?"camera.publish.successful":"camera.publish.explanation")}),Object(an.jsx)(ur,{children:We(h?"camera.publish.success.short.info":"camera.publish.detailed.explanation")}),h&&Object(an.jsx)("a",{href:l,rel:"noreferrer",target:"_blank",children:We("camera.link.to.published")}),!h&&r.publishDucketPrice>0&&Object(an.jsxs)(hn,{gap:1,children:[Object(an.jsx)(ur,{children:We("catalog.purchase.confirmation.dialog.cost")}),Object(an.jsxs)(hn,{gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:r.publishDucketPrice}),Object(an.jsx)(Pn,{type:5})]})]}),f>0&&Object(an.jsx)("div",{className:"mt-1 text-center fw-bold",children:We("camera.publish.wait",["minutes"],[Math.ceil(f/60).toString()])})]}),!h&&Object(an.jsx)(hn,{className:"d-flex align-items-end",children:Object(an.jsx)(bn,{variant:"success",disabled:g||f>0,onClick:e=>I("publish"),children:We("camera.publish.button.text")})})]}),Object(an.jsx)(ur,{center:!0,children:We("camera.warning.disclaimer")}),Object(an.jsx)(hn,{justifyContent:"end",children:Object(an.jsx)(bn,{onClick:e=>I("cancel"),children:We("generic.cancel")})})]})]}):null};var Fi=s(16);const Bi=e=>{const{effect:t=null,thumbnailUrl:s=null,isActive:n=!1,isLocked:r=!1,selectEffect:c=null,removeEffect:i=null}=e;return Object(an.jsxs)(Vn,{title:We(r?`camera.effect.required.level ${t.minLevel}`:`camera.effect.name.${t.name}`),itemActive:n,onClick:e=>!n&&c(),children:[n&&Object(an.jsx)(bn,{variant:"danger",className:"rounded-circle remove-effect",onClick:i,children:Object(an.jsx)(fn.a,{icon:"times"})}),!r&&s&&s.length>0&&Object(an.jsx)("div",{className:"effect-thumbnail-image border",children:Object(an.jsx)("img",{alt:"",src:s})}),r&&Object(an.jsxs)(ur,{center:!0,bold:!0,children:[Object(an.jsx)("div",{children:Object(an.jsx)(fn.a,{icon:"lock"})}),t.minLevel]})]})},Hi=e=>{const{myLevel:t=0,selectedEffects:s=[],effects:n=[],thumbnails:r=[],processAction:c=null}=e;return Object(an.jsx)(un,{columnCount:3,overflow:"auto",children:n&&n.length>0&&n.map(((e,n)=>{const i=r.find((t=>t.effectName===e.name)),a=s.findIndex((t=>t.effect.name===e.name))>-1;return Object(an.jsx)(Bi,{effect:e,thumbnailUrl:i&&i.thumbnailUrl||null,isActive:a,isLocked:e.minLevel>t,selectEffect:()=>c("select_effect",e.name),removeEffect:()=>c("remove_effect",e.name)},n)}))})},Gi=[At.COLORMATRIX,At.COMPOSITE],Wi=e=>{const{picture:t=null,availableEffects:s=null,myLevel:n=1,onClose:r=null,onCancel:i=null,onCheckout:o=null}=e,[l,d]=Object(c.useState)(Gi[0]),[u,j]=Object(c.useState)(null),[b,g]=Object(c.useState)([]),[m,O]=Object(c.useState)([]),[p,f]=Object(c.useState)(!1),x=Object(c.useMemo)((()=>s.filter((e=>e.colorMatrix))),[s]),_=Object(c.useMemo)((()=>s.filter((e=>e.texture))),[s]),I=Object(c.useCallback)((()=>l===At.COLORMATRIX?x:_),[l,x,_]),E=Object(c.useCallback)((e=>e&&e.length&&b&&b.length?b.findIndex((t=>t.effect.name===e)):-1),[b]),C=Object(c.useMemo)((()=>E(u)),[u,E]),v=Object(c.useMemo)((()=>u&&b[C]||null),[u,C,b]),N=Object(c.useCallback)((e=>{const t=C;-1!==t&&g((s=>{const n=[...s],r=n[t];return n[C]=new a.ug(r.effect,e),n}))}),[C,g]),T=Object(c.useMemo)((()=>h().applyEffects(t.texture,b,p).src),[t,b,p]),S=Object(c.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;switch(e){case"close":return void r();case"cancel":return void i();case"checkout":return void o(T);case"change_tab":return void d(String(t));case"select_effect":{if(E(t)>=0)return;const e=s.find((e=>e.name===t));if(!e)return;return g((t=>[...t,new a.ug(e,1)])),void j(e.name)}case"remove_effect":{let e=E(t);if(-1===e)return;return g((t=>{const s=[...t];return s.splice(e,1),s})),void(u===t&&j(null))}case"clear_effects":return j(null),void g([]);case"download":{const e=new Image;e.src=T;return void window.open("").document.write(e.outerHTML)}case"zoom":return void f(!p)}}),[p,s,u,T,E,i,o,r,f,g]);return Object(c.useEffect)((()=>{const e=[];for(const n of s)e.push(new Lt(n.name,h().applyEffects(t.texture,[new a.ug(n,1)],!1).src));O(e)}),[t,s]),Object(an.jsxs)(yn,{className:"nitro-camera-editor",children:[Object(an.jsx)(vn,{headerText:We("camera.editor.button.text"),onCloseClick:e=>S("close")}),Object(an.jsx)(or,{children:Gi.map((e=>Object(an.jsx)(ar,{isActive:l===e,onClick:t=>S("change_tab",e),children:Object(an.jsx)("i",{className:"icon icon-camera-"+e})},e)))}),Object(an.jsx)(In,{children:Object(an.jsxs)(un,{children:[Object(an.jsx)(Fn,{size:5,overflow:"hidden",children:Object(an.jsx)(Hi,{myLevel:n,selectedEffects:b,effects:I(),thumbnails:m,processAction:S})}),Object(an.jsxs)(Fn,{size:7,justifyContent:"between",overflow:"hidden",children:[Object(an.jsxs)(Fn,{center:!0,children:[Object(an.jsx)(qn,{imageUrl:T,className:"picture-preview"}),u&&Object(an.jsxs)(Fn,{center:!0,fullWidth:!0,gap:1,children:[Object(an.jsx)(ur,{children:We("camera.effect.name."+u)}),Object(an.jsx)(Fi.a,{className:"nitro-slider",min:0,max:1,step:.01,value:v.alpha,onChange:e=>N(e),renderThumb:(e,t)=>Object(an.jsx)("div",{...e,children:t.valueNow})})]})]}),Object(an.jsxs)(hn,{justifyContent:"between",children:[Object(an.jsxs)(gn,{children:[Object(an.jsx)(bn,{onClick:e=>S("clear_effects"),children:Object(an.jsx)(fn.a,{icon:"trash"})}),Object(an.jsx)(bn,{onClick:e=>S("download"),children:Object(an.jsx)(fn.a,{icon:"save"})}),Object(an.jsx)(bn,{onClick:e=>S("zoom"),children:Object(an.jsx)(fn.a,{icon:p?"search-minus":"search-plus"})})]}),Object(an.jsxs)(hn,{gap:1,children:[Object(an.jsx)(bn,{onClick:e=>S("cancel"),children:We("generic.cancel")}),Object(an.jsx)(bn,{onClick:e=>S("checkout"),children:We("camera.preview.button.text")})]})]})]})]})})]})},Vi=e=>{const[t,s]=Object(c.useState)(0),[n,r]=Object(c.useState)(null),{availableEffects:i=[],selectedPictureIndex:o=-1,cameraRoll:d=[],setCameraRoll:u=null,myLevel:j=0,price:h={credits:0,duckets:0,publishDucketPrice:0}}=Er(),b=e=>{switch(e){case"close":return void s(0);case"edit":return void s(2);case"delete":return void u((e=>{const t=[...e];return t.splice(o,1),t}));case"editor_cancel":return void s(1)}},g=Object(c.useCallback)((e=>{r(e),s(3)}),[]);return Or(a.mh.ENDED,(e=>s(0))),Object(c.useEffect)((()=>{const e={linkReceived:e=>{const t=e.split("/");if(!(t.length<2))switch(t[1]){case"show":return void s(1);case"hide":return void s(0);case"toggle":return void s((e=>e?0:1))}},eventUrlPrefix:"camera/"};return l(e),()=>E(e)}),[]),0===t?null:Object(an.jsxs)(an.Fragment,{children:[1===t&&Object(an.jsx)(Ui,{onClose:()=>b("close"),onEdit:()=>b("edit"),onDelete:()=>b("delete")}),2===t&&Object(an.jsx)(Wi,{picture:d[o],myLevel:j,onClose:()=>b("close"),onCancel:()=>b("editor_cancel"),onCheckout:g,availableEffects:i}),3===t&&Object(an.jsx)(Mi,{base64Url:n,onCloseClick:()=>b("close"),onCancelClick:()=>b("editor_cancel"),price:h})]})},qi=e=>{const{itemId:t=-1,state:s=null,product:n=null,active:r=!1,onClick:c=null}=e;return Object(an.jsxs)(Fn,{fit:!0,center:!0,pointer:!0,className:"campaign-spritesheet campaign-day-generic-bg rounded calendar-item "+(r?"active":""),onClick:()=>c(t),children:[s===Ut.STATE_UNLOCKED&&Object(an.jsx)(hn,{center:!0,className:"campaign-spritesheet unlocked-bg",children:Object(an.jsx)(hn,{center:!0,className:"campaign-spritesheet campaign-opened",children:n&&Object(an.jsx)(qn,{imageUrl:n.customImage?p("image.library.url")+n.customImage:(e=>{let t=F().getFloorItemDataByName(e),s=null;return t?s=C().getFurnitureFloorIconUrl(t.id):(t=F().getWallItemDataByName(e),t&&(s=C().getFurnitureWallIconUrl(t.id))),s})(n.productName)})})}),s!==Ut.STATE_UNLOCKED&&Object(an.jsxs)(hn,{center:!0,className:"campaign-spritesheet locked-bg",children:[s===Ut.STATE_LOCKED_AVAILABLE&&Object(an.jsx)(on,{className:"campaign-spritesheet available"}),(s===Ut.STATE_LOCKED_EXPIRED||s===Ut.STATE_LOCKED_FUTURE)&&Object(an.jsx)(on,{className:"campaign-spritesheet unavailable"})]})]})},zi=e=>{const{onClose:t=null,campaignName:s=null,currentDay:n=null,numDays:r=null,missedDays:i=null,openedDays:a=null,openPackage:o=null,receivedProducts:l=null}=e,[d,u]=Object(c.useState)(n),[j,h]=Object(c.useState)(Math.max(0,d-1)),b=e=>a.includes(e)?Ut.STATE_UNLOCKED:e>n?Ut.STATE_LOCKED_FUTURE:i.includes(e)?Ut.STATE_LOCKED_EXPIRED:Ut.STATE_LOCKED_AVAILABLE,g=e=>{if(d!==e)u(e);else{b(e)===Ut.STATE_LOCKED_AVAILABLE&&o(e,!1)}};return Object(an.jsxs)(yn,{className:"nitro-campaign-calendar",theme:"primary-slim",children:[Object(an.jsx)(vn,{headerText:We(`campaign.calendar.${s}.title`),onCloseClick:t}),Object(an.jsxs)(In,{children:[Object(an.jsxs)(un,{fullHeight:!1,justifyContent:"between",alignItems:"center",children:[Object(an.jsx)(Fn,{size:1}),Object(an.jsx)(Fn,{size:10,children:Object(an.jsxs)(hn,{justifyContent:"between",alignItems:"center",gap:1,children:[Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{fontSize:3,children:We("campaign.calendar.heading.day",["number"],[(d+1).toString()])}),Object(an.jsx)(ur,{children:(e=>{switch(b(e)){case Ut.STATE_UNLOCKED:return We("campaign.calendar.info.unlocked");case Ut.STATE_LOCKED_FUTURE:return We("campaign.calendar.info.future");case Ut.STATE_LOCKED_EXPIRED:return We("campaign.calendar.info.expired");default:return We("campaign.calendar.info.available.desktop")}})(d)})]}),Object(an.jsx)("div",{children:F().isModerator&&Object(an.jsx)(bn,{variant:"danger",onClick:()=>{const e=d;b(e)!==Ut.STATE_UNLOCKED&&o(e,!0)},children:"Force open"})})]})}),Object(an.jsx)(Fn,{size:1})]}),Object(an.jsxs)(hn,{fullHeight:!0,gap:2,children:[Object(an.jsx)(hn,{center:!0,children:Object(an.jsx)(on,{pointer:!0,className:"campaign-spritesheet prev",onClick:()=>{const e=d-1;e<0||(u(e),j>e&&h(j-1))}})}),Object(an.jsx)(Fn,{center:!0,fullWidth:!0,children:Object(an.jsx)(un,{fit:!0,columnCount:5,gap:1,children:[...Array(5)].map(((e,t)=>{const s=j+t;return Object(an.jsx)(Fn,{overflow:"hidden",children:Object(an.jsx)(qi,{itemId:s,state:b(s),active:d===s,product:l.has(s)?l.get(s):null,onClick:g})},t)}))})}),Object(an.jsx)(hn,{center:!0,children:Object(an.jsx)(on,{pointer:!0,className:"campaign-spritesheet next",onClick:()=>{const e=d+1;e!==r&&(u(e),j+5<e+1&&h(j+1))}})})]})]})]})},Yi=e=>{const[t,s]=Object(c.useState)(null),[n,r]=Object(c.useState)(-1),[i,o]=Object(c.useState)(new Map),[d,u]=Object(c.useState)(!1);pr(a.Y,(e=>{const t=e.getParser();t&&s(t.calendarData)})),pr(a.Z,(e=>{const t=e.getParser();if(!t)return;const c=n;t.doorOpened&&(s((e=>{const t=e.clone();return t.openedDays.push(n),t})),o((e=>{const s=new Map(e);return s.set(c,new Pt(t.productName,t.customImage,t.furnitureClassName)),s}))),r(-1)}));const j=Object(c.useCallback)((function(e){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t&&(r(e),Ee(s?new a.yf(t.campaignName,e):new a.zf(t.campaignName,e)))}),[t]),h=Object(c.useCallback)((()=>{u(!1)}),[]);return Object(c.useEffect)((()=>{const e={linkReceived:e=>{const t=e.split("/");if(!(t.length<2)&&"calendar"===t[1])u(!0)},eventUrlPrefix:"openView/"};return l(e),()=>E(e)}),[]),Object(an.jsx)(an.Fragment,{children:t&&d&&Object(an.jsx)(zi,{onClose:h,campaignName:t.campaignName,currentDay:t.currentDay,numDays:t.campaignDays,openedDays:t.openedDays,missedDays:t.missedDays,openPackage:j,receivedProducts:i})})},$i=e=>{const{icon:t=0}=e,s=Object(c.useMemo)((()=>p("catalog.asset.icon.url").replace("%name%",t.toString())),[t]);return Object(an.jsx)(qn,{imageUrl:s,style:{width:20,height:20}})};var Ki=s(22),Xi=s.n(Ki);const Qi=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)(0),[i,o]=Object(c.useState)(0),[l,d]=Object(c.useState)(""),[u,j]=Object(c.useState)(""),[h,b]=Object(c.useState)(!0),[g,m]=Object(c.useState)(""),[O,p]=Object(c.useState)([]),[f,x]=Object(c.useState)(0),[_,I]=Object(c.useState)(0),[E,C]=Object(c.useState)(0),[v,N]=Object(c.useState)(0),[T,S]=Object(c.useState)(0),[w,R]=Object(c.useState)(!1),{catalogOptions:y=null}=$r(),{giftConfiguration:k=null}=y,A=Object(c.useCallback)((()=>{s(!1),r(0),o(0),d(""),j(""),b(!0),m(""),x(0),I(0),O.length&&C(O[0].id)}),[O]),D=Object(c.useCallback)((e=>{switch(e.type){case Tr.PURCHASE_SUCCESS:return void A();case Cr.INIT_GIFT:const t=e;return A(),r(t.pageId),o(t.offerId),d(t.extraData),void s(!0)}}),[A]);fr(Tr.PURCHASE_SUCCESS,D),fr(Cr.INIT_GIFT,D);const L=Object(c.useMemo)((()=>!k||k.defaultStuffTypes.findIndex((e=>e===k.boxTypes[f]))>-1),[k,f]),P=Object(c.useMemo)((()=>k?(1e3*k.boxTypes[f]+k.ribbonTypes[_]).toString():""),[k,f,_]),U=Object(c.useMemo)((()=>{if(!k)return!1;const e=k.boxTypes[f];return!(8===e||e>=3&&e<=6)}),[k,f]),M=Object(c.useCallback)((e=>{switch(e){case"prev_box":return void x((e=>0===e?v:e-1));case"next_box":return void x((e=>e===v?0:e+1));case"prev_ribbon":return void I((e=>0===e?T:e-1));case"next_ribbon":return void I((e=>e===T?0:e+1));case"buy":return u&&0!==u.length?void Ee(new a.Sf(n,i,l,u,g,E,f,_,h)):void R(!0)}}),[l,v,T,g,i,n,u,f,E,_,h]);if(pr(a.Xc,(e=>R(!0))),Object(c.useEffect)((()=>{R(!1)}),[u]),Object(c.useEffect)((()=>{if(!k)return;const e=[];for(const t of k.stuffTypes){const s=F().getFloorItemData(t);s&&(s.colors&&s.colors.length>0&&e.push({id:t,color:`#${s.colors[0].toString(16)}`}))}N(k.boxTypes.length-1),S(k.ribbonTypes.length-1),e.length&&(C(e[0].id),p(e))}),[k]),!k||!k.isEnabled||!t)return null;const B="catalog.gift_wrapping_new.box."+(L?"default":f),H=`catalog.gift_wrapping_new.ribbon.${_}`,G="catalog.gift_wrapping_new."+(L?"freeprice":"price");return Object(an.jsxs)(yn,{uniqueKey:"catalog-gift",className:"nitro-catalog-gift",theme:"primary-slim",children:[Object(an.jsx)(vn,{headerText:We("catalog.gift_wrapping.title"),onCloseClick:A}),Object(an.jsxs)(In,{className:"text-black",children:[Object(an.jsxs)(lr,{column:!0,children:[Object(an.jsx)(ur,{children:We("catalog.gift_wrapping.receiver")}),Object(an.jsx)("input",{type:"text",className:"form-control form-control-sm"+Xi()({" is-invalid":w}),value:u,onChange:e=>j(e.target.value)}),w&&Object(an.jsx)(on,{className:"invalid-feedback",children:We("catalog.gift_wrapping.receiver_not_found.title")})]}),Object(an.jsx)(Mn,{figure:F().figure,userName:F().userName,message:g,editable:!0,onChange:e=>m(e)}),Object(an.jsxs)(on,{className:"form-check",children:[Object(an.jsx)("input",{className:"form-check-input",type:"checkbox",name:"showMyFace",checked:h,onChange:e=>b((e=>!e))}),Object(an.jsx)("label",{className:"form-check-label",children:We("catalog.gift_wrapping.show_face.title")})]}),Object(an.jsxs)(hn,{alignItems:"center",gap:2,children:[E&&Object(an.jsx)(on,{className:"gift-preview",children:Object(an.jsx)(Un,{productType:X.FLOOR,productClassId:E,extraData:P})}),Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsxs)(hn,{gap:2,children:[Object(an.jsxs)(gn,{children:[Object(an.jsx)(bn,{variant:"primary",onClick:()=>M("prev_box"),children:Object(an.jsx)(fn.a,{icon:"chevron-left"})}),Object(an.jsx)(bn,{variant:"primary",onClick:()=>M("next_box"),children:Object(an.jsx)(fn.a,{icon:"chevron-right"})})]}),Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{fontWeight:"bold",children:We(B)}),Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[We(G,["price"],[k.price.toString()]),Object(an.jsx)(Pn,{type:-1})]})]})]}),Object(an.jsxs)(hn,{alignItems:"center",gap:2,children:[Object(an.jsxs)(gn,{children:[Object(an.jsx)(bn,{variant:"primary",onClick:()=>M("prev_ribbon"),children:Object(an.jsx)(fn.a,{icon:"chevron-left"})}),Object(an.jsx)(bn,{variant:"primary",onClick:()=>M("next_ribbon"),children:Object(an.jsx)(fn.a,{icon:"chevron-right"})})]}),Object(an.jsx)(ur,{fontWeight:"bold",children:We(H)})]})]})]}),Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{fontWeight:"bold",children:We("catalog.gift_wrapping.pick_color")}),Object(an.jsx)(gn,{fullWidth:!0,children:O.map((e=>Object(an.jsx)(bn,{variant:"dark",active:e.id===E,disabled:!U,style:{backgroundColor:e.color},onClick:()=>C(e.id)},e.id)))})]}),Object(an.jsxs)(hn,{justifyContent:"between",alignItems:"center",children:[Object(an.jsx)(bn,{variant:"link",onClick:A,className:"text-black",children:We("cancel")}),Object(an.jsx)(bn,{variant:"success",onClick:()=>M("buy"),children:We("catalog.gift_wrapping.give_gift")})]})]})]})},Ji=e=>{const[t,s]=Object(c.useState)(""),[n,r]=Object(c.useState)(!1),{currentType:i=null,rootNode:a=null,offersToNodes:o=null,searchResult:l=null,setSearchResult:d=null,setCurrentPage:u=null}=$r(),j=e=>{e&&e.length?(s(e),r(!0)):(s(""),l&&d(null))},h=Object(c.useCallback)((e=>{if(r(!1),!(e=e.toLocaleLowerCase().replace(" ",""))||!e.length)return;const t=F().getAllFurnitureData({loadFurnitureData:null});if(!t||!t.length)return;const s=[],n=[];for(const r of t){if(i===Y.BUILDER&&!r.availableForBuildersClub)continue;if(i===Y.NORMAL&&r.excludeDynamic)continue;const t=[r.className,r.name,r.description].join(" ").replace(/ /gi,"").toLowerCase();if(i===Y.BUILDER&&-1===r.purchaseOfferId&&-1===r.rentOfferId)""!==r.furniLine&&n.indexOf(r.furniLine)<0&&t.indexOf(e)>=0&&n.push(r.furniLine);else{if([...$(o,r.purchaseOfferId),...$(o,r.rentOfferId)].length&&(t.indexOf(e)>=0&&s.push(r),250===s.length))break}}const c=[];for(const r of s)c.push(new Z(r));let l=[];K(e,n,a,l),u(new W(-1,"default_3x3",new ce([],[]),c,!1,1)),d(new oe(e,c,l.filter((e=>e.isVisible))))}),[o,i,a,u,d]);return Object(c.useEffect)((()=>{if(!n)return;const e=setTimeout((()=>h(t)),300);return()=>clearTimeout(e)}),[t,n,h]),Object(an.jsxs)(hn,{gap:1,children:[Object(an.jsx)(hn,{fullWidth:!0,alignItems:"center",position:"relative",children:Object(an.jsx)("input",{type:"text",className:"form-control form-control-sm",placeholder:We("generic.search"),value:t,onChange:e=>j(e.target.value),onKeyDown:e=>("Enter"===e.code||"NumpadEnter"===e.code)&&h(t)})}),(!t||!t.length)&&Object(an.jsx)(bn,{variant:"primary",className:"catalog-search-button",children:Object(an.jsx)(fn.a,{icon:"search"})}),t&&!!t.length&&Object(an.jsx)(bn,{variant:"primary",className:"catalog-search-button",onClick:e=>j(""),children:Object(an.jsx)(fn.a,{icon:"times"})})]})},Zi=e=>{const{node:t=null,child:s=!1}=e;return Object(an.jsx)(an.Fragment,{children:t&&t.children.length>0&&t.children.map(((e,t)=>e.isVisible?Object(an.jsx)(ea,{node:e,child:s},t):null))})},ea=e=>{const{node:t=null,child:s=!1}=e,{activateNode:n=null}=$r();return Object(an.jsxs)(on,{className:"nitro-catalog-navigation-section",children:[Object(an.jsxs)(Vn,{gap:1,column:!1,itemActive:t.isActive,onClick:e=>n(t),className:s?"inset":"",children:[Object(an.jsx)($i,{icon:t.iconId}),Object(an.jsx)(ur,{grow:!0,truncate:!0,children:t.localization}),t.isBranch&&Object(an.jsx)(fn.a,{icon:t.isOpen?"caret-up":"caret-down"})]}),t.isOpen&&t.isBranch&&Object(an.jsx)(Zi,{node:t,child:!0})]})},ta=e=>{const{node:t=null}=e,{searchResult:s=null}=$r();return Object(an.jsxs)(an.Fragment,{children:[Object(an.jsx)(Ji,{}),Object(an.jsx)(Fn,{fullHeight:!0,className:"nitro-catalog-navigation-grid-container rounded p-1",overflow:"hidden",children:Object(an.jsxs)(jn,{id:"nitro-catalog-main-navigation",gap:1,columnCount:1,children:[s&&s.filteredNodes.length>0&&s.filteredNodes.map(((e,t)=>Object(an.jsx)(ea,{node:e},t))),!s&&Object(an.jsx)(Zi,{node:t})]})})]})},sa=e=>{const{columnCount:t=5,...s}=e,[n,r]=Object(c.useState)(!1),[i,o]=Object(c.useState)(null),{currentOffer:l=null,setPurchaseOptions:d=null}=$r(),{badgeCodes:u=[],activate:j=null,deactivate:h=null}=uc(),b=Object(c.useMemo)((()=>{if(!i)return null;const e=new a.di;return e.setValue(["0",i,"",""]),e}),[i]);return Object(c.useEffect)((()=>{l&&d((e=>{const t={...e};return t.extraParamRequired=!0,t.extraData=b&&b.getValue(1)||null,t.previewStuffData=b,t}))}),[l,b,d]),Object(c.useEffect)((()=>{if(!n)return;const e=j();return()=>h(e)}),[n,j,h]),Object(c.useEffect)((()=>(r(!0),()=>r(!1))),[]),Object(an.jsx)(jn,{columnCount:t,...s,children:u&&u.length>0&&u.map(((e,t)=>Object(an.jsx)(Vn,{itemActive:i===e,onClick:t=>o(e),children:Object(an.jsx)(Dn,{badgeCode:e})},t)))})},na=e=>{const{currentPage:t=null,setCurrentOffer:s=null}=$r();return Object(c.useEffect)((()=>{t&&t.offers.length&&s(t.offers[0])}),[t,s]),null},ra=e=>{const{offer:t=null,selectOffer:s=null,itemActive:n=!1,...r}=e,[i,o]=Object(c.useState)(!1),{requestOfferToMover:l=null}=$r(),{isVisible:d=!1}=mc(),u=Object(c.useMemo)((()=>t.pricingModel===J.PRICING_MODEL_BUNDLE?null:t.product.getIconUrl(t)),[t]),j=e=>{switch(e.type){case a.Ve.MOUSE_DOWN:return s(t),void o(!0);case a.Ve.MOUSE_UP:return void o(!1);case a.Ve.ROLL_OUT:if(!i||!n||!d)return;return void l(t)}},h=t.product;return h?Object(an.jsx)(Vn,{itemImage:u,itemCount:t.pricingModel===J.PRICING_MODEL_MULTI?h.productCount:1,itemUniqueSoldout:h.uniqueLimitedItemSeriesSize&&!h.uniqueLimitedItemsLeft,itemUniqueNumber:h.uniqueLimitedItemSeriesSize,itemActive:n,onMouseDown:j,onMouseUp:j,onMouseOut:j,...r,children:t.product.productType===X.ROBOT&&Object(an.jsx)(kn,{figure:t.product.extraParam,headOnly:!0,direction:3})}):null},ca=e=>{const{columnCount:t=5,children:s=null,...n}=e,{currentOffer:r=null,setCurrentOffer:i=null,currentPage:a=null,setPurchaseOptions:o=null}=$r(),l=Object(c.useRef)();if(Object(c.useEffect)((()=>{l&&l.current&&(l.current.scrollTop=0)}),[a]),!a)return null;const d=e=>{e.activate(),e.isLazy||(i(e),e.product&&e.product.productType===X.WALL&&o((t=>{const s={...t};return s.extraData=e.product.extraParam||null,s})))};return Object(an.jsxs)(jn,{innerRef:l,columnCount:t,...n,children:[a.offers&&a.offers.length>0&&a.offers.map(((e,t)=>Object(an.jsx)(ra,{itemActive:r&&r.offerId===e.offerId,offer:e,selectOffer:d},t))),s]})},ia=e=>{const{children:t=null,...s}=e,{currentOffer:n=null}=$r();return n&&n.pricingModel===J.PRICING_MODEL_SINGLE&&n.product.isUniqueLimitedItem?Object(an.jsxs)(on,{...s,children:[Object(an.jsx)(Wn,{className:"mx-auto",uniqueLimitedItemsLeft:n.product.uniqueLimitedItemsLeft,uniqueLimitedSeriesSize:n.product.uniqueLimitedItemSeriesSize}),t]}):null},aa=e=>{const{noGiftOption:t=!1,purchaseCallback:s=null}=e,[n,r]=Object(c.useState)(!1),[i,o]=Object(c.useState)(z.NONE),[l,d]=Gr(Ve.CATALOG_SKIP_PURCHASE_CONFIRMATION,!1),{currentOffer:u=null,currentPage:j=null,purchaseOptions:h=null,setPurchaseOptions:b=null}=$r(),{getCurrencyAmount:g=null}=Tc(),O=Object(c.useCallback)((e=>{switch(e.type){case Tr.PURCHASE_SUCCESS:return void o(z.NONE);case Sr.PURCHASE_FAILED:case wr.NOT_ALLOWED:return void o(z.FAILED);case yr.SOLD_OUT:return void o(z.SOLD_OUT)}}),[]);fr(Tr.PURCHASE_SUCCESS,O),fr(Sr.PURCHASE_FAILED,O),fr(wr.NOT_ALLOWED,O),fr(yr.SOLD_OUT,O);const p=Object(c.useMemo)((()=>{if(!u)return!1;if(h.extraParamRequired&&(!h.extraData||!h.extraData.length))return!1;if(u.pricingModel===J.PRICING_MODEL_SINGLE){const e=u.product;if(e&&e.isUniqueLimitedItem)return!e.uniqueLimitedItemsLeft}return!1}),[u,h]),f=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!u)return;if(B()<u.clubLevel)return void m("habboUI/open/hccenter");if(e)return void $e(new vr(u.page.pageId,u.offerId,h.extraData));if(o(z.PURCHASE),s)return void s();let t=u.page.pageId;Ee(new a.Tf(t,u.offerId,h.extraData,h.quantity))};if(Object(c.useEffect)((()=>{u&&o(z.NONE)}),[u,b]),Object(c.useEffect)((()=>{let e=null;return i!==z.CONFIRM&&i!==z.FAILED||(e=setTimeout((()=>o(z.NONE)),3e3)),()=>{e&&clearTimeout(e)}}),[i]),!u)return null;const x=()=>{const e=u.priceInCredits*h.quantity,t=u.priceInActivityPoints*h.quantity;if(B()<u.clubLevel)return Object(an.jsx)(bn,{variant:"danger",disabled:!0,children:We("catalog.alert.hc.required")});if(p)return Object(an.jsx)(bn,{variant:"danger",disabled:!0,children:We("catalog.alert.limited_edition_sold_out.title")});if(e>g(-1))return Object(an.jsx)(bn,{variant:"danger",disabled:!0,children:We("catalog.alert.notenough.title")});if(t>g(u.activityPointType))return Object(an.jsx)(bn,{variant:"danger",disabled:!0,children:We("catalog.alert.notenough.activitypoints.title."+u.activityPointType)});switch(i){case z.CONFIRM:return Object(an.jsx)(bn,{variant:"warning",onClick:e=>f(),children:We("catalog.marketplace.confirm_title")});case z.PURCHASE:return Object(an.jsx)(bn,{disabled:!0,children:Object(an.jsx)(zn,{})});case z.FAILED:return Object(an.jsx)(bn,{variant:"danger",children:We("generic.failed")});case z.SOLD_OUT:return Object(an.jsx)(bn,{variant:"danger",children:We("generic.failed")+" - "+We("catalog.alert.limited_edition_sold_out.title")});case z.NONE:default:return Object(an.jsx)(bn,{disabled:h.extraParamRequired&&(!h.extraData||!h.extraData.length),onClick:e=>o(z.CONFIRM),children:We("catalog.purchase_confirmation."+(u.isRentOffer?"rent":"buy"))})}};return Object(an.jsxs)(an.Fragment,{children:[Object(an.jsx)(x,{}),!t&&!u.isRentOffer&&Object(an.jsx)(bn,{disabled:h.quantity>1||!u.giftable||p||h.extraParamRequired&&(!h.extraData||!h.extraData.length),onClick:e=>f(!0),children:We("catalog.purchase_confirmation.gift")})]})},oa=e=>{const{offer:t=null,separator:s=!1}=e,{purchaseOptions:n=null}=$r(),{quantity:r=1}=n;return t?Object(an.jsxs)(an.Fragment,{children:[t.priceInCredits>0&&Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:t.priceInCredits*r}),Object(an.jsx)(Pn,{type:-1})]}),s&&t.priceInCredits>0&&t.priceInActivityPoints>0&&Object(an.jsx)(fn.a,{size:"xs",color:"black",icon:"plus"}),t.priceInActivityPoints>0&&Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:t.priceInActivityPoints*r}),Object(an.jsx)(Pn,{type:t.activityPointType})]})]}):null},la=e=>{const{gap:t=1,...s}=e,{currentOffer:n=null}=$r();return Object(an.jsx)(Fn,{gap:t,...s,children:Object(an.jsx)(oa,{offer:n})})},da=e=>{const{currentOffer:t=null,roomPreviewer:s=null,purchaseOptions:n=null}=$r(),{previewStuffData:r=null}=n;return Object(c.useEffect)((()=>{if(!t||t.pricingModel===J.PRICING_MODEL_BUNDLE||!s)return;const e=t.product;if(e)switch(s.reset(!1),e.productType){case X.FLOOR:if(!e.furnitureData)return;if(e.furnitureData.specialType===Je.FIGURE_PURCHASABLE_SET){const t=F().getFloorItemData(e.furnitureData.id).customParams.split(",").map((e=>parseInt(e))),n=[];for(const e of t)d().isValidFigureSetForGender(e,F().gender)&&n.push(e);const r=d().getFigureStringWithFigureIds(F().figure,F().gender,n);s.addAvatarIntoRoom(r,e.productClassId)}else s.addFurnitureIntoRoom(e.productClassId,new a.kj(90),r,e.extraParam);return;case X.WALL:if(!e.furnitureData)return;switch(e.furnitureData.specialType){case Je.FLOOR:return void s.updateObjectRoom(e.extraParam);case Je.WALL_PAPER:return void s.updateObjectRoom(null,e.extraParam);case Je.LANDSCAPE:{s.updateObjectRoom(null,null,e.extraParam);const t=F().getWallItemDataByName("ads_twi_windw");return void(t&&s.addWallItemIntoRoom(t.id,new a.kj(90),t.customParams))}default:return s.updateObjectRoom("default","default","default"),void s.addWallItemIntoRoom(e.productClassId,new a.kj(90),e.extraParam)}case X.ROBOT:return void s.addAvatarIntoRoom(e.extraParam,0);case X.EFFECT:return void s.addAvatarIntoRoom(F().figure,e.productClassId)}}),[t,r,s]),t?t.pricingModel===J.PRICING_MODEL_BUNDLE?Object(an.jsx)(Fn,{fit:!0,overflow:"hidden",className:"bg-muted p-2 rounded",children:Object(an.jsx)(jn,{fullWidth:!0,columnCount:4,className:"nitro-catalog-layout-bundle-grid",children:t.products.length>0&&t.products.map(((e,s)=>Object(an.jsx)(Vn,{itemImage:e.getIconUrl(t),itemCount:e.productCount},s)))})}):Object(an.jsx)(nr,{roomPreviewer:s,height:140}):null},ua=e=>{const{page:t=null}=e,{currentOffer:s=null}=$r();return Object(an.jsxs)(an.Fragment,{children:[Object(an.jsx)(na,{}),Object(an.jsxs)(un,{children:[Object(an.jsxs)(Fn,{size:7,overflow:"hidden",children:[Object(an.jsx)(ca,{shrink:!0}),Object(an.jsxs)(Fn,{gap:1,overflow:"hidden",children:[Object(an.jsx)(ur,{truncate:!0,shrink:!0,fontWeight:"bold",children:We("catalog_selectbadge")}),Object(an.jsx)(sa,{})]})]}),Object(an.jsxs)(Fn,{center:!s,size:5,overflow:"hidden",children:[!s&&Object(an.jsxs)(an.Fragment,{children:[!!t.localization.getImage(1)&&Object(an.jsx)("img",{alt:"",src:t.localization.getImage(1)}),Object(an.jsx)(ur,{center:!0,dangerouslySetInnerHTML:{__html:t.localization.getText(0)}})]}),s&&Object(an.jsxs)(an.Fragment,{children:[Object(an.jsxs)(on,{position:"relative",overflow:"hidden",children:[Object(an.jsx)(da,{}),Object(an.jsx)(ia,{fullWidth:!0,position:"absolute",className:"top-1"})]}),Object(an.jsxs)(Fn,{grow:!0,gap:1,children:[Object(an.jsx)(ur,{grow:!0,truncate:!0,children:s.localizationName}),Object(an.jsx)(hn,{justifyContent:"end",children:Object(an.jsx)(la,{alignItems:"end"})}),Object(an.jsx)(aa,{})]})]})]})]})]})},ja=e=>{const{...t}=e,{currentOffer:s=null}=$r();return s&&s.badgeCode&&s.badgeCode.length?Object(an.jsx)(Dn,{badgeCode:s.badgeCode,...t}):null},ha=e=>{const{currentOffer:t=null,purchaseOptions:s=null,setPurchaseOptions:n=null}=$r(),{quantity:r=1}=s,c=e=>{isNaN(e)&&(e=1),e=Math.max(e,1),(e=Math.min(e,100))!==r&&n((t=>{const s={...t};return s.quantity=e,s}))};return t&&t.bundlePurchaseAllowed?Object(an.jsxs)(an.Fragment,{children:[Object(an.jsx)(ur,{children:We("catalog.bundlewidget.spinner.select.amount")}),Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)(fn.a,{icon:"caret-left",className:"text-black cursor-pointer",onClick:e=>c(r-1)}),Object(an.jsx)("input",{type:"number",className:"form-control form-control-sm quantity-input",value:r,onChange:e=>c(e.target.valueAsNumber)}),Object(an.jsx)(fn.a,{icon:"caret-right",className:"text-black cursor-pointer",onClick:e=>c(r+1)})]})]}):null},ba=e=>{const{page:t=null}=e,[s,n]=Object(c.useState)(new Map),{currentOffer:r=null,setCurrentOffer:i=null}=$r(),[o,l]=Object(c.useState)(!1),d=(e,t)=>e.product.furnitureData.colorIndex&&t.product.furnitureData.colorIndex?e.product.furnitureData.colorIndex>t.product.furnitureData.colorIndex?1:e==t?0:-1:1,u=(e,t)=>e.product.furnitureData.className>t.product.furnitureData.className?1:e==t?0:-1,j=e=>{e.activate(),i(e)},h=Object(c.useMemo)((()=>{const e=[],s=new Map,r=new Map;t.offers.sort(d);let c=0;return t.offers.forEach((t=>{if(!t.product)return;const n=t.product.furnitureData;if(n&&n.hasIndexedColor){const i=n.className,a=n.colorIndex;if(r.has(i)||r.set(i,[]),n.colors){for(let e of n.colors)16777215!==e&&(c=e);-1===r.get(i).indexOf(c)&&(r.get(i)[a]=c)}s.has(i)||(e.push(t),s.set(i,!0))}else e.push(t)})),e.sort(u),n(r),e}),[t.offers]);return Object(an.jsxs)(un,{children:[Object(an.jsx)(Fn,{size:7,overflow:"hidden",children:Object(an.jsxs)(jn,{columnCount:5,children:[(!o||!r||!s.has(r.product.furnitureData.className))&&h.map(((e,t)=>Object(an.jsx)(ra,{itemActive:r&&(r.product.furnitureData.hasIndexedColor?r.product.furnitureData.className===e.product.furnitureData.className:r.offerId===e.offerId),offer:e,selectOffer:j},t))),o&&r&&s.has(r.product.furnitureData.className)&&s.get(r.product.furnitureData.className).map(((e,s)=>Object(an.jsx)(Vn,{itemHighlight:!0,itemActive:r.product.furnitureData.colorIndex===s,itemColor:a.sb.int2rgb(e),className:"clear-bg",onClick:e=>((e,s)=>{const n=`${s}*${e}`,r=t.offers.findIndex((e=>e.product.furnitureData.fullName===n));r>-1&&j(t.offers[r])})(s,r.product.furnitureData.className)},s)))]})}),Object(an.jsxs)(Fn,{center:!r,size:5,overflow:"hidden",children:[!r&&Object(an.jsxs)(an.Fragment,{children:[!!t.localization.getImage(1)&&Object(an.jsx)("img",{alt:"",src:t.localization.getImage(1)}),Object(an.jsx)(ur,{center:!0,dangerouslySetInnerHTML:{__html:t.localization.getText(0)}})]}),r&&Object(an.jsxs)(an.Fragment,{children:[Object(an.jsxs)(on,{position:"relative",overflow:"hidden",children:[Object(an.jsx)(da,{}),Object(an.jsx)(ia,{fullWidth:!0,position:"absolute",className:"top-1"}),Object(an.jsx)(ja,{position:"absolute",className:"bg-muted rounded bottom-1 end-1"}),r.product.furnitureData.hasIndexedColor&&Object(an.jsx)(bn,{position:"absolute",className:"bottom-1 start-1",onClick:e=>l((e=>!e)),children:Object(an.jsx)(fn.a,{icon:"fill-drip"})})]}),Object(an.jsxs)(Fn,{grow:!0,gap:1,children:[Object(an.jsx)(ur,{grow:!0,truncate:!0,children:r.localizationName}),Object(an.jsxs)(hn,{justifyContent:"between",children:[Object(an.jsx)(Fn,{gap:1,children:Object(an.jsx)(ha,{})}),Object(an.jsx)(la,{justifyContent:"end",alignItems:"end"})]}),Object(an.jsx)(aa,{})]})]})]})]})},ga=e=>{const{imageUrl:t=null}=e,[s,n]=Object(c.useState)("");return Object(c.useEffect)((()=>{n(null!==t&&void 0!==t?t:p("catalog.asset.image.url").replace("%name%","catalog_header_roombuilder"))}),[t]),Object(an.jsx)(hn,{center:!0,fullWidth:!0,className:"nitro-catalog-header",children:Object(an.jsx)("img",{src:s,onError:e=>{let{currentTarget:t}=e;t.src=p("catalog.asset.image.url").replace("%name%","catalog_header_roombuilder")}})})},ma=e=>{const{page:t=null}=e,{currentOffer:s=null,currentPage:n=null}=$r();return Object(an.jsx)(an.Fragment,{children:Object(an.jsxs)(un,{children:[Object(an.jsxs)(Fn,{size:7,overflow:"hidden",children:[p("catalog.headers")&&Object(an.jsx)(ga,{imageUrl:n.localization.getImage(0)}),Object(an.jsx)(ca,{})]}),Object(an.jsxs)(Fn,{center:!s,size:5,overflow:"hidden",children:[!s&&Object(an.jsxs)(an.Fragment,{children:[!!t.localization.getImage(1)&&Object(an.jsx)(qn,{imageUrl:t.localization.getImage(1)}),Object(an.jsx)(ur,{center:!0,dangerouslySetInnerHTML:{__html:t.localization.getText(0)}})]}),s&&Object(an.jsxs)(an.Fragment,{children:[Object(an.jsxs)(hn,{center:!0,overflow:"hidden",style:{height:140},children:[s.product.productType!==X.BADGE&&Object(an.jsxs)(an.Fragment,{children:[Object(an.jsx)(da,{}),Object(an.jsx)(ia,{fullWidth:!0,position:"absolute",className:"top-1"}),Object(an.jsx)(ja,{className:"bg-muted rounded bottom-1 end-1"})]}),s.product.productType===X.BADGE&&Object(an.jsx)(ja,{className:"scale-2"})]}),Object(an.jsxs)(Fn,{grow:!0,gap:1,children:[Object(an.jsx)(ur,{grow:!0,truncate:!0,children:s.localizationName}),Object(an.jsxs)(hn,{justifyContent:"between",children:[Object(an.jsx)(Fn,{gap:1,children:Object(an.jsx)(ha,{})}),Object(an.jsx)(la,{justifyContent:"end",alignItems:"end"})]}),Object(an.jsx)(aa,{})]})]})]})]})})},Oa=e=>{const{...t}=e,{currentOffer:s=null,purchaseOptions:n=null}=$r(),{previewStuffData:r=null}=n,i=Object(c.useMemo)((()=>{if(!s||!r)return null;const e=r.getValue(2);return e&&e.length?e:null}),[s,r]);return i?Object(an.jsx)(Dn,{badgeCode:i,isGroup:!0,...t}):null},pa=e=>{const[t,s]=Object(c.useState)(0),{currentOffer:n=null,catalogOptions:r=null,setPurchaseOptions:i=null}=$r(),{groups:o=null}=r,l=Object(c.useMemo)((()=>{if(!o||!o.length)return null;const e=o[t];if(!e)return null;const s=new a.di;return s.setValue(["0",e.groupId.toString(),e.badgeCode,e.colorA,e.colorB]),s}),[t,o]);if(Object(c.useEffect)((()=>{n&&i((e=>{const t={...e};return t.extraParamRequired=!0,t.extraData=l&&l.getValue(1)||null,t.previewStuffData=l,t}))}),[n,l,i]),Object(c.useEffect)((()=>{Ee(new a.db)}),[]),!o||!o.length)return Object(an.jsxs)(on,{className:"bg-muted rounded p-1 text-black text-center",children:[We("catalog.guild_selector.members_only"),Object(an.jsx)(bn,{className:"mt-1",children:We("catalog.guild_selector.find_groups")})]});const d=o[t];return Object(an.jsxs)(hn,{gap:1,children:[!!d&&Object(an.jsxs)(hn,{overflow:"hidden",className:"rounded border",children:[Object(an.jsx)(on,{fullHeight:!0,style:{width:"20px",backgroundColor:"#"+d.colorA}}),Object(an.jsx)(on,{fullHeight:!0,style:{width:"20px",backgroundColor:"#"+d.colorB}})]}),Object(an.jsx)("select",{className:"form-select form-select-sm",value:t,onChange:e=>s(parseInt(e.target.value)),children:o.map(((e,t)=>Object(an.jsx)("option",{value:t,children:e.groupName},t)))})]})},fa=e=>{const{page:t=null}=e,{currentOffer:s=null}=$r();return Object(an.jsxs)(un,{children:[Object(an.jsx)(Fn,{size:7,overflow:"hidden",children:Object(an.jsx)(ca,{})}),Object(an.jsxs)(Fn,{center:!s,size:5,overflow:"hidden",children:[!s&&Object(an.jsxs)(an.Fragment,{children:[!!t.localization.getImage(1)&&Object(an.jsx)("img",{alt:"",src:t.localization.getImage(1)}),Object(an.jsx)(ur,{center:!0,dangerouslySetInnerHTML:{__html:t.localization.getText(0)}})]}),s&&Object(an.jsxs)(an.Fragment,{children:[Object(an.jsxs)(on,{position:"relative",overflow:"hidden",children:[Object(an.jsx)(da,{}),Object(an.jsx)(Oa,{position:"absolute",className:"bottom-1 end-1"})]}),Object(an.jsxs)(Fn,{grow:!0,gap:1,children:[Object(an.jsx)(ur,{truncate:!0,children:s.localizationName}),Object(an.jsx)(on,{grow:!0,children:Object(an.jsx)(pa,{})}),Object(an.jsx)(hn,{justifyContent:"end",children:Object(an.jsx)(la,{alignItems:"end"})}),Object(an.jsx)(aa,{})]})]})]})]})},xa=e=>{const{page:t=null}=e,[s,n]=Object(c.useState)(0),{currentOffer:r=null,setCurrentOffer:i=null,catalogOptions:o=null}=$r(),{groups:l=null}=o;return Object(c.useEffect)((()=>{Ee(new a.db)}),[t]),Object(an.jsxs)(an.Fragment,{children:[Object(an.jsx)(na,{}),Object(an.jsxs)(un,{children:[Object(an.jsx)(Fn,{className:"bg-muted rounded p-2 text-black",size:7,overflow:"hidden",children:Object(an.jsx)(on,{className:"overflow-auto",dangerouslySetInnerHTML:{__html:t.localization.getText(1)}})}),Object(an.jsx)(Fn,{size:5,overflow:"hidden",gap:1,children:!!r&&Object(an.jsx)(an.Fragment,{children:Object(an.jsxs)(Fn,{grow:!0,gap:1,children:[Object(an.jsx)(ur,{truncate:!0,children:r.localizationName}),Object(an.jsx)(on,{grow:!0,children:Object(an.jsx)(pa,{})}),Object(an.jsx)(hn,{justifyContent:"end",children:Object(an.jsx)(la,{alignItems:"end"})}),Object(an.jsx)(aa,{noGiftOption:!0})]})})})]})]})},_a=e=>{const{page:t=null}=e;return Object(an.jsxs)(un,{children:[Object(an.jsxs)(Fn,{size:7,overflow:"hidden",className:"bg-muted rounded p-2 text-black",children:[Object(an.jsx)(on,{dangerouslySetInnerHTML:{__html:t.localization.getText(2)}}),Object(an.jsx)(on,{overflow:"auto",dangerouslySetInnerHTML:{__html:t.localization.getText(0)}}),Object(an.jsx)(on,{dangerouslySetInnerHTML:{__html:t.localization.getText(1)}})]}),Object(an.jsxs)(Fn,{center:!0,size:5,overflow:"hidden",children:[Object(an.jsx)(qn,{imageUrl:t.localization.getImage(1)}),Object(an.jsx)(bn,{onClick:()=>m("groups/create"),children:We("catalog.start.guild.purchase.button")})]})]})},Ia=e=>{const{page:t=null}=e;return Object(an.jsx)("div",{className:"h-100 nitro-catalog-layout-info-loyalty text-black d-flex flex-row",children:Object(an.jsx)("div",{className:"overflow-auto h-100 d-flex flex-column info-loyalty-content",children:Object(an.jsx)("div",{dangerouslySetInnerHTML:{__html:t.localization.getText(0)}})})})},Ea=e=>{const{page:t=null}=e,s=t.localization.getImage(1);return Object(an.jsxs)(Fn,{grow:!0,className:"bg-muted rounded text-black p-2",overflow:"hidden",children:[Object(an.jsxs)(hn,{alignItems:"center",gap:2,children:[s&&Object(an.jsx)("img",{alt:"",src:s}),Object(an.jsx)(on,{className:"fs-5",dangerouslySetInnerHTML:{__html:t.localization.getText(1)}})]}),Object(an.jsx)(Fn,{grow:!0,alignItems:"center",overflow:"auto",children:Object(an.jsx)(on,{dangerouslySetInnerHTML:{__html:t.localization.getText(2)}})}),Object(an.jsx)(hn,{alignItems:"center",children:Object(an.jsx)(on,{className:"fw-bold",dangerouslySetInnerHTML:{__html:t.localization.getText(3)}})})]})},Ca=e=>Object(an.jsx)(Ea,{...e}),va=e=>{const{page:t=null}=e,[s,n]=Object(c.useState)(""),[r,i]=Object(c.useState)(""),[o,l]=Object(c.useState)(-1),[d,u]=Object(c.useState)([]),[j,h]=Object(c.useState)(!1),[b,g]=Object(c.useState)(1),[m,O]=Object(c.useState)(null);pr(a.qg,(e=>{const t=e.getParser();t&&u(t.rooms)}));const p=Object(c.useCallback)((()=>{const e=t.pageId,n=t.offers.length>=1?t.offers[0].offerId:-1,c=o,i=s,l=r,d=b;Ee(new a.Xf(e,n,c,i,j,l,d))}),[b,r,s,j,t.offers,t.pageId,o]);return pr(a.Si,(e=>{const t=e.getParser();O(t.categories)})),Object(c.useEffect)((()=>{Ee(new a.Nc),Ee(new a.Tc)}),[]),Object(an.jsxs)(an.Fragment,{children:[Object(an.jsx)(ur,{bold:!0,center:!0,children:We("roomad.catalog_header")}),Object(an.jsxs)(Fn,{size:12,overflow:"hidden",className:"text-black",children:[Object(an.jsx)(on,{children:We("roomad.catalog_text")}),Object(an.jsxs)(on,{className:"bg-muted rounded p-1",children:[Object(an.jsx)(Fn,{gap:2,children:Object(an.jsx)("select",{className:"form-select form-select-sm",value:b,onChange:e=>g(parseInt(e.target.value)),children:m&&m.map(((e,t)=>Object(an.jsx)("option",{value:e.id,children:e.name},t)))})}),Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:We("roomad.catalog_name")}),Object(an.jsx)("input",{type:"text",className:"form-control form-control-sm",maxLength:64,value:s,onChange:e=>n(e.target.value)})]}),Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:We("roomad.catalog_description")}),Object(an.jsx)("textarea",{className:"form-control form-control-sm",maxLength:64,value:r,onChange:e=>i(e.target.value)})]}),Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:We("roomad.catalog_roomname")}),Object(an.jsxs)("select",{className:"form-select form-select-sm",value:o,onChange:e=>l(parseInt(e.target.value)),children:[Object(an.jsx)("option",{value:-1,disabled:!0,children:We("roomad.catalog_roomname")}),d&&d.map(((e,t)=>Object(an.jsx)("option",{value:e.roomId,children:e.roomName},t)))]})]}),Object(an.jsx)(Fn,{gap:1,children:Object(an.jsx)(bn,{onClick:p,children:We("buy")})})]})]})]})},Na=e=>{const{columnCount:t=5,children:s=null,...n}=e,{currentOffer:r=null}=$r(),i=Object(c.useRef)();return Object(c.useEffect)((()=>{i&&i.current&&(i.current.scrollTop=0)}),[r]),r?Object(an.jsxs)(jn,{innerRef:i,columnCount:5,...n,children:[r.products&&r.products.length>0&&r.products.map(((e,t)=>Object(an.jsx)(Vn,{itemImage:e.getIconUrl(),itemCount:e.productCount},t))),s]}):null},Ta=e=>{const{gap:t=1,...s}=e,{currentOffer:n=null}=$r();return Object(an.jsx)(hn,{gap:t,alignItems:"center",classNames:["bg-muted","p-1","rounded"],...s,children:Object(an.jsx)(oa,{separator:!0,offer:n})})},Sa=e=>{const{page:t=null}=e;return Object(an.jsxs)(an.Fragment,{children:[Object(an.jsx)(na,{}),Object(an.jsxs)(un,{children:[Object(an.jsxs)(Fn,{size:7,overflow:"hidden",children:[!!t.localization.getText(2)&&Object(an.jsx)(ur,{dangerouslySetInnerHTML:{__html:t.localization.getText(2)}}),Object(an.jsx)(Fn,{grow:!0,overflow:"hidden",className:"bg-muted p-2 rounded",children:Object(an.jsx)(Na,{fullWidth:!0,className:"nitro-catalog-layout-bundle-grid"})})]}),Object(an.jsxs)(Fn,{size:5,overflow:"hidden",gap:1,children:[!!t.localization.getText(1)&&Object(an.jsx)(ur,{center:!0,small:!0,overflow:"auto",children:t.localization.getText(1)}),Object(an.jsxs)(Fn,{grow:!0,position:"relative",overflow:"hidden",gap:0,children:[!!t.localization.getImage(1)&&Object(an.jsx)("img",{alt:"",className:"flex-grow-1",src:t.localization.getImage(1)}),Object(an.jsx)(ja,{position:"absolute",className:"bg-muted rounded bottom-0 start-0"}),Object(an.jsx)(Ta,{position:"absolute",className:"bottom-0 end-0"})]}),Object(an.jsx)(Fn,{gap:1,children:Object(an.jsx)(aa,{})})]})]})]})},wa=e=>{const{page:t=null}=e;return Object(an.jsxs)(an.Fragment,{children:[Object(an.jsx)(na,{}),Object(an.jsxs)(un,{children:[Object(an.jsxs)(Fn,{size:7,overflow:"hidden",children:[!!t.localization.getText(2)&&Object(an.jsx)(ur,{dangerouslySetInnerHTML:{__html:t.localization.getText(2)}}),Object(an.jsx)(Fn,{grow:!0,overflow:"hidden",className:"bg-muted p-2 rounded",children:Object(an.jsx)(Na,{fullWidth:!0,className:"nitro-catalog-layout-bundle-grid"})})]}),Object(an.jsxs)(Fn,{size:5,overflow:"hidden",gap:1,children:[!!t.localization.getText(1)&&Object(an.jsx)(ur,{center:!0,small:!0,overflow:"auto",children:t.localization.getText(1)}),Object(an.jsxs)(Fn,{grow:!0,position:"relative",overflow:"hidden",gap:0,children:[!!t.localization.getImage(1)&&Object(an.jsx)("img",{alt:"",className:"flex-grow-1",src:t.localization.getImage(1)}),Object(an.jsx)(ja,{position:"absolute",className:"bg-muted rounded bottom-0 start-0"}),Object(an.jsx)(Ta,{position:"absolute",className:"bottom-0 end-0"})]}),Object(an.jsx)(Fn,{gap:1,children:Object(an.jsx)(aa,{})})]})]})]})},Ra=["floors","walls","views"],ya=e=>{const{columnCount:t=5,children:s=null,...n}=e,[r,i]=Object(c.useState)(null),[a,o]=Object(c.useState)(-1),[l,d]=Object(c.useState)(null),{currentPage:u=null,currentOffer:j=null,setCurrentOffer:h=null,setPurchaseOptions:b=null}=$r(),g=Object(c.useRef)();if(Object(c.useEffect)((()=>{if(!u)return;const e=[[],[],[]];for(const t of u.offers){if(t.pricingModel!==J.PRICING_MODEL_SINGLE&&t.pricingModel!==J.PRICING_MODEL_MULTI)continue;const s=t.product;if(!s||s.productType!==X.WALL&&s.productType!==X.FLOOR||!s.furnitureData)continue;switch(s.furnitureData.className){case"floor":e[0].push(t);break;case"wallpaper":e[1].push(t);break;case"landscape":e[2].push(t)}}i(e),o(0),d([e[0][0],e[1][0],e[2][0]])}),[u]),Object(c.useEffect)((()=>{-1!==a&&l&&h(l[a])}),[a,l,h]),Object(c.useEffect)((()=>{-1!==a&&l&&j&&b((e=>{const t={...e};return t.extraData=l[a].product.extraParam,t.extraParamRequired=!0,t}))}),[j,a,l,b]),Object(c.useEffect)((()=>{g&&g.current&&(g.current.scrollTop=0)}),[a]),!r||-1===a)return null;const m=r[a];return Object(an.jsxs)(an.Fragment,{children:[Object(an.jsx)(gn,{children:Ra.map(((e,t)=>Object(an.jsx)(bn,{active:a===t,onClick:e=>o(t),children:We(`catalog.spaces.tab.${e}`)},t)))}),Object(an.jsxs)(jn,{innerRef:g,columnCount:t,...n,children:[m&&m.length>0&&m.map(((e,t)=>Object(an.jsx)(ra,{itemActive:j&&j===e,offer:e,selectOffer:e=>(e=>{e&&d((t=>{const s=[...t];return s[a]=e,s}))})(e)},t))),s]})]})},ka=e=>{const{page:t=null}=e,{currentOffer:s=null,roomPreviewer:n=null}=$r();return Object(c.useEffect)((()=>{n.updatePreviewObjectBoundingRectangle(new a.nf)}),[n]),Object(an.jsxs)(un,{children:[Object(an.jsx)(Fn,{size:7,overflow:"hidden",children:Object(an.jsx)(ya,{})}),Object(an.jsxs)(Fn,{center:!s,size:5,overflow:"hidden",children:[!s&&Object(an.jsxs)(an.Fragment,{children:[!!t.localization.getImage(1)&&Object(an.jsx)("img",{alt:"",src:t.localization.getImage(1)}),Object(an.jsx)(ur,{center:!0,dangerouslySetInnerHTML:{__html:t.localization.getText(0)}})]}),s&&Object(an.jsxs)(an.Fragment,{children:[Object(an.jsx)(on,{position:"relative",overflow:"hidden",children:Object(an.jsx)(da,{})}),Object(an.jsxs)(Fn,{grow:!0,gap:1,children:[Object(an.jsx)(ur,{grow:!0,truncate:!0,children:s.localizationName}),Object(an.jsx)(hn,{justifyContent:"end",children:Object(an.jsx)(la,{alignItems:"end"})}),Object(an.jsx)(aa,{})]})]})]})]})},Aa=e=>{const{page:t=null}=e,[s,n]=Object(c.useState)(""),{currentOffer:r=null,setPurchaseOptions:i=null}=$r();return Object(c.useEffect)((()=>{r&&i((e=>{const t={...e};return t.extraData=s,t}))}),[r,s,i]),Object(an.jsxs)(un,{children:[Object(an.jsxs)(Fn,{size:7,overflow:"hidden",children:[Object(an.jsx)(ca,{}),Object(an.jsx)("textarea",{className:"flex-grow-1 form-control w-100",defaultValue:s||"",onChange:e=>n(e.target.value)})]}),Object(an.jsxs)(Fn,{center:!r,size:5,overflow:"hidden",children:[!r&&Object(an.jsxs)(an.Fragment,{children:[!!t.localization.getImage(1)&&Object(an.jsx)("img",{alt:"",src:t.localization.getImage(1)}),Object(an.jsx)(ur,{center:!0,dangerouslySetInnerHTML:{__html:t.localization.getText(0)}})]}),r&&Object(an.jsxs)(an.Fragment,{children:[Object(an.jsx)(da,{}),Object(an.jsxs)(Fn,{grow:!0,gap:1,children:[Object(an.jsx)(ur,{grow:!0,truncate:!0,children:r.localizationName}),Object(an.jsx)(hn,{justifyContent:"end",children:Object(an.jsx)(la,{alignItems:"end"})}),Object(an.jsx)(aa,{})]})]})]})]})},Da=e=>{const[t,s]=Object(c.useState)(null),[n,r]=Object(c.useState)(z.NONE),{currentPage:i=null,catalogOptions:o=null}=$r(),{purse:l=null,getCurrencyAmount:d=null}=Tc(),{clubOffers:u=null}=o,j=Object(c.useCallback)((e=>{switch(e.type){case Tr.PURCHASE_SUCCESS:return void r(z.NONE);case Sr.PURCHASE_FAILED:return void r(z.FAILED)}}),[]);fr(Tr.PURCHASE_SUCCESS,j),fr(Sr.PURCHASE_FAILED,j);const h=Object(c.useCallback)((e=>{let t="";return e.months>0&&(t=We("catalog.vip.item.header.months",["num_months"],[e.months.toString()])),e.extraDays>0&&(""!==t&&(t+=" "),t+=" "+We("catalog.vip.item.header.days",["num_days"],[e.extraDays.toString()])),t}),[]),b=Object(c.useCallback)((()=>{if(!l)return"";const e=l.clubDays>0||l.clubPeriods>0?"extension.":"subscription.",s=0===t.months?"days":"months",n=0===t.months?t.extraDays:t.months;return We("catalog.vip.buy.confirm."+e+s).replace("%NUM_"+s.toUpperCase()+"%",n.toString())}),[t,l]),g=Object(c.useCallback)((()=>{let e=We("catalog.vip.buy.confirm.end_date");return e=e.replace("%month%",t.month.toString()),e=e.replace("%day%",t.day.toString()),e=e.replace("%year%",t.year.toString()),e}),[t]),m=Object(c.useMemo)((()=>{const e=l.clubDays;return We("catalog.vip.extend.info",["days"],[(31*l.clubPeriods+e).toString()])}),[l]),O=Object(c.useCallback)((()=>{t&&(r(z.PURCHASE),Ee(new a.Tf(i.pageId,t.offerId,null,1)))}),[t,i]),p=Object(c.useCallback)((e=>{r(z.NONE),s(e)}),[]),f=Object(c.useCallback)((()=>{if(!t)return null;if(t.priceCredits>d(-1))return Object(an.jsx)(bn,{fullWidth:!0,variant:"danger",children:We("catalog.alert.notenough.title")});if(t.priceActivityPoints>d(t.priceActivityPointsType))return Object(an.jsx)(bn,{fullWidth:!0,variant:"danger",children:We("catalog.alert.notenough.activitypoints.title."+t.priceActivityPointsType)});switch(n){case z.CONFIRM:return Object(an.jsx)(bn,{fullWidth:!0,variant:"warning",onClick:O,children:We("catalog.marketplace.confirm_title")});case z.PURCHASE:return Object(an.jsx)(bn,{fullWidth:!0,variant:"primary",disabled:!0,children:Object(an.jsx)(zn,{})});case z.FAILED:return Object(an.jsx)(bn,{fullWidth:!0,variant:"danger",disabled:!0,children:We("generic.failed")});case z.NONE:default:return Object(an.jsx)(bn,{fullWidth:!0,variant:"success",onClick:()=>r(z.CONFIRM),children:We("buy")})}}),[t,n,O,d]);return Object(c.useEffect)((()=>{u||Ee(new a.yc(1))}),[u]),Object(an.jsxs)(un,{children:[Object(an.jsxs)(Fn,{fullHeight:!0,size:7,overflow:"hidden",justifyContent:"between",children:[Object(an.jsx)(jn,{columnCount:1,className:"nitro-catalog-layout-vip-buy-grid",children:u&&u.length>0&&u.map(((e,s)=>Object(an.jsxs)(Vn,{column:!1,center:!1,alignItems:"center",justifyContent:"between",itemActive:t===e,className:"p-1",onClick:()=>p(e),children:[Object(an.jsx)("i",{className:"icon-hc-banner"}),Object(an.jsxs)(Fn,{justifyContent:"end",gap:0,children:[Object(an.jsx)(ur,{textEnd:!0,children:h(e)}),Object(an.jsxs)(hn,{justifyContent:"end",gap:1,children:[e.priceCredits>0&&Object(an.jsxs)(hn,{alignItems:"center",justifyContent:"end",gap:1,children:[Object(an.jsx)(ur,{children:e.priceCredits}),Object(an.jsx)(Pn,{type:-1})]}),e.priceActivityPoints>0&&Object(an.jsxs)(hn,{alignItems:"center",justifyContent:"end",gap:1,children:[Object(an.jsx)(ur,{children:e.priceActivityPoints}),Object(an.jsx)(Pn,{type:e.priceActivityPointsType})]})]})]})]},s)))}),Object(an.jsx)(ur,{center:!0,dangerouslySetInnerHTML:{__html:We("catalog.vip.buy.hccenter")}})]}),Object(an.jsxs)(Fn,{size:5,overflow:"hidden",children:[Object(an.jsxs)(Fn,{fullHeight:!0,center:!0,overflow:"hidden",children:[i.localization.getImage(1)&&Object(an.jsx)("img",{alt:"",src:i.localization.getImage(1)}),Object(an.jsx)(ur,{center:!0,overflow:"auto",dangerouslySetInnerHTML:{__html:m}})]}),t&&Object(an.jsxs)(Fn,{fullWidth:!0,grow:!0,justifyContent:"end",children:[Object(an.jsxs)(hn,{alignItems:"end",children:[Object(an.jsxs)(Fn,{grow:!0,gap:0,children:[Object(an.jsx)(ur,{fontWeight:"bold",children:b()}),Object(an.jsx)(ur,{children:g()})]}),Object(an.jsxs)(Fn,{gap:1,children:[t.priceCredits>0&&Object(an.jsxs)(hn,{alignItems:"center",justifyContent:"end",gap:1,children:[Object(an.jsx)(ur,{children:t.priceCredits}),Object(an.jsx)(Pn,{type:-1})]}),t.priceActivityPoints>0&&Object(an.jsxs)(hn,{alignItems:"center",justifyContent:"end",gap:1,children:[Object(an.jsx)(ur,{children:t.priceActivityPoints}),Object(an.jsx)(Pn,{type:t.priceActivityPointsType})]})]})]}),f()]})]})]})},La=e=>{const{text:t=null}=e,[s,n]=Object(c.useState)(""),[r,i]=Object(c.useState)(!1),{simpleAlert:o=null}=Hr();return pr(a.mj,(e=>{const t=e.getParser();let s=We("catalog.alert.voucherredeem.ok.description");t.productName&&(s=We("catalog.alert.voucherredeem.ok.description.furni",["productName","productDescription"],[t.productName,t.productDescription])),o(s,null,null,null,We("catalog.alert.voucherredeem.ok.title")),i(!1),n("")})),pr(a.lj,(e=>{const t=e.getParser();o(We(`catalog.alert.voucherredeem.error.description.${t.errorCode}`),null,null,null,We("catalog.alert.voucherredeem.error.title")),i(!1)})),Object(an.jsxs)(hn,{gap:1,children:[Object(an.jsx)("input",{type:"text",className:"form-control form-control-sm",placeholder:t,value:s,onChange:e=>n(e.target.value)}),Object(an.jsx)(bn,{variant:"primary",onClick:()=>{s&&s.length&&!r&&(Ee(new a.cg(s)),i(!0))},disabled:r,children:Object(an.jsx)(fn.a,{icon:"tag"})})]})},Pa=e=>{const{item:t=null,position:s="relative",pointer:n=!0,overflow:r="hidden",fullHeight:i=!0,classNames:a=[],children:o=null,...l}=e,d=Object(c.useMemo)((()=>{const e=["rounded","nitro-front-page-item"];return a.length&&e.push(...a),e}),[a]);if(!t)return null;const u=p("image.library.url")+t.itemPromoImage;return Object(an.jsxs)(An,{imageUrl:u,classNames:d,position:s,fullHeight:i,pointer:n,overflow:r,...l,children:[Object(an.jsx)(ur,{position:"absolute",variant:"white",className:"bg-dark rounded p-2 m-2 bottom-0",children:t.itemName}),o]})},Ua=e=>{const{page:t=null,hideNavigation:s=null}=e,{frontPageItems:n=[]}=$r(),r=Object(c.useCallback)((e=>{switch(e.type){case a.ac.ITEM_CATALOGUE_PAGE:return void m(`catalog/open/${e.catalogPageLocation}`);case a.ac.ITEM_PRODUCT_OFFER:return void m(`catalog/open/${e.productOfferId}`)}}),[]);return Object(c.useEffect)((()=>{s()}),[t,s]),Object(an.jsxs)(un,{children:[Object(an.jsx)(Fn,{size:4,children:n[0]&&Object(an.jsx)(Pa,{item:n[0],onClick:e=>r(n[0])})}),Object(an.jsxs)(Fn,{size:8,children:[n[1]&&Object(an.jsx)(Pa,{item:n[1],onClick:e=>r(n[1])}),n[2]&&Object(an.jsx)(Pa,{item:n[2],onClick:e=>r(n[2])}),n[3]&&Object(an.jsx)(Pa,{item:n[3],onClick:e=>r(n[3])}),Object(an.jsx)(La,{text:t.localization.getText(1)})]})]})},Ma=2,Fa=e=>{const{offerData:t=null,type:s=Ma,onClick:n=null}=e,r=Object(c.useMemo)((()=>t?We((2===t.furniType?"wallItem":"roomItem")+`.name.${t.furniId}`):""),[t]),i=Object(c.useCallback)((()=>{if(!t)return"";if(t.status===ne.SOLD)return We("catalog.marketplace.offer.sold");if(t.timeLeftMinutes<=0)return We("catalog.marketplace.offer.expired");const e=Math.max(1,t.timeLeftMinutes),s=Math.floor(e/60);let n=e-60*s+" "+We("catalog.marketplace.offer.minutes");return s>0&&(n=s+" "+We("catalog.marketplace.offer.hours")+" "+n),We("catalog.marketplace.offer.time_left",["time"],[n])}),[t]);return Object(an.jsxs)(Vn,{shrink:!0,center:!1,column:!1,alignItems:"center",className:"p-1",children:[Object(an.jsx)(Fn,{style:{width:40,height:40},children:Object(an.jsx)(Vn,{column:!1,itemImage:ee(t.furniType===se.TYPE_FLOOR?X.FLOOR:X.WALL,t.furniId,t.extraData),itemUniqueNumber:t.isUniqueLimitedItem?t.stuffData.uniqueNumber:0})}),Object(an.jsxs)(Fn,{grow:!0,gap:0,children:[Object(an.jsx)(ur,{fontWeight:"bold",children:r}),1===s&&Object(an.jsxs)(an.Fragment,{children:[Object(an.jsx)(ur,{children:We("catalog.marketplace.offer.price_own_item",["price"],[t.price.toString()])}),Object(an.jsx)(ur,{children:i()})]}),s===Ma&&Object(an.jsxs)(an.Fragment,{children:[Object(an.jsx)(ur,{children:We("catalog.marketplace.offer.price_public_item",["price","average"],[t.price.toString(),t.averagePrice>0?t.averagePrice.toString():"-"])}),Object(an.jsx)(ur,{children:We("catalog.marketplace.offer_count",["count"],[t.offerCount.toString()])})]})]}),Object(an.jsxs)(Fn,{gap:1,children:[1===s&&t.status!==ne.SOLD&&Object(an.jsx)(bn,{variant:"secondary",onClick:()=>n(t),children:We("catalog.marketplace.offer.pick")}),s===Ma&&Object(an.jsxs)(an.Fragment,{children:[Object(an.jsx)(bn,{variant:"secondary",onClick:()=>n(t),children:We("buy")}),Object(an.jsx)(bn,{variant:"secondary",disabled:!0,children:We("catalog.marketplace.view_more")})]})]})]})},Ba=e=>{const[t,s]=Object(c.useState)(0),[n,r]=Object(c.useState)([]),{simpleAlert:i=null}=Hr();pr(a.Ce,(e=>{const t=e.getParser();if(!t)return;const n=t.offers.map((e=>{const t=new se(e.offerId,e.furniId,e.furniType,e.extraData,e.stuffData,e.price,e.status,e.averagePrice,e.offerCount);return t.timeLeftMinutes=e.timeLeftMinutes,t}));s(t.creditsWaiting),r(n)})),pr(a.ze,(e=>{const t=e.getParser();t&&(t.success?r((e=>e.filter((e=>e.offerId!==t.offerId)))):i(We("catalog.marketplace.cancel_failed"),fs.DEFAULT,null,null,We("catalog.marketplace.operation_failed.topic")))}));const o=Object(c.useMemo)((()=>n.filter((e=>e.status===ne.SOLD))),[n]),l=Object(c.useCallback)((()=>{r((e=>{const t=o.map((e=>e.offerId));return e.filter((e=>-1===t.indexOf(e.offerId)))})),Ee(new a.bg)}),[o]),d=e=>{Ee(new a.bb(e.offerId))};return Object(c.useEffect)((()=>{Ee(new a.Gc)}),[]),Object(an.jsxs)(Fn,{overflow:"hidden",children:[t<=0&&Object(an.jsx)(ur,{center:!0,className:"bg-muted rounded p-1",children:We("catalog.marketplace.redeem.no_sold_items")}),t>0&&Object(an.jsxs)(Fn,{center:!0,gap:1,className:"bg-muted rounded p-2",children:[Object(an.jsx)(ur,{children:We("catalog.marketplace.redeem.get_credits",["count","credits"],[o.length.toString(),t.toString()])}),Object(an.jsx)(bn,{className:"mt-1",onClick:l,children:We("catalog.marketplace.offer.redeem")})]}),Object(an.jsxs)(Fn,{gap:1,overflow:"hidden",children:[Object(an.jsx)(ur,{truncate:!0,shrink:!0,fontWeight:"bold",children:We("catalog.marketplace.items_found",["count"],[n.length.toString()])}),Object(an.jsx)(Fn,{overflow:"auto",className:"nitro-catalog-layout-marketplace-grid",children:n.length>0&&n.map((e=>Object(an.jsx)(Fa,{offerData:e,type:1,onClick:d},e.offerId)))})]})]})},Ha=e=>{const{searchType:t=null,sortTypes:s=null,onSearch:n=null}=e,[r,i]=Object(c.useState)(s?s[0]:3),[a,o]=Object(c.useState)(""),[l,d]=Object(c.useState)(0),[u,j]=Object(c.useState)(0),h=Object(c.useCallback)((e=>{i(e),t!==re.BY_ACTIVITY&&t!==re.BY_VALUE||n({minPrice:-1,maxPrice:-1,query:"",type:e})}),[n,t]),b=Object(c.useCallback)((()=>{n({minPrice:l>0?l:-1,maxPrice:u>0?u:-1,type:r,query:a})}),[u,l,n,a,r]);return Object(c.useEffect)((()=>{if(!s||!s.length)return;const e=s[0];i(e),t!==re.BY_ACTIVITY&&re.BY_VALUE!==t||n({minPrice:-1,maxPrice:-1,query:"",type:e})}),[n,t,s]),Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)(ur,{className:"col-3",children:We("catalog.marketplace.sort_order")}),Object(an.jsx)("select",{className:"form-select form-select-sm",value:r,onChange:e=>h(parseInt(e.target.value)),children:s.map((e=>Object(an.jsx)("option",{value:e,children:We(`catalog.marketplace.sort.${e}`)},e)))})]}),t===re.ADVANCED&&Object(an.jsxs)(an.Fragment,{children:[Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)(ur,{className:"col-3",children:We("catalog.marketplace.search_name")}),Object(an.jsx)("input",{className:"form-control form-control-sm",type:"text",value:a,onChange:e=>o(e.target.value)})]}),Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)(ur,{className:"col-3",children:We("catalog.marketplace.search_price")}),Object(an.jsxs)(hn,{fullWidth:!0,gap:1,children:[Object(an.jsx)("input",{className:"form-control form-control-sm",type:"number",min:0,value:l,onChange:e=>d(e.target.valueAsNumber)}),Object(an.jsx)("input",{className:"form-control form-control-sm",type:"number",min:0,value:u,onChange:e=>j(e.target.valueAsNumber)})]})]}),Object(an.jsx)(bn,{variant:"secondary",className:"mx-auto",onClick:b,children:We("generic.search")})]})]})},Ga=[1,2],Wa=[3,4,5,6],Va=[1,2,3,4,5,6],qa=e=>{const[t,s]=Object(c.useState)(re.BY_ACTIVITY),[n,r]=Object(c.useState)(0),[i,o]=Object(c.useState)(new Map),[l,d]=Object(c.useState)({minPrice:-1,maxPrice:-1,query:"",type:3}),{getCurrencyAmount:u=null}=Tc(),{simpleAlert:j=null,showConfirm:h=null}=Hr(),b=Object(c.useCallback)((e=>{d(e),Ee(new a.Fc(e.minPrice,e.maxPrice,e.query,e.type))}),[]),g=Object(c.useMemo)((()=>{switch(t){case re.BY_ACTIVITY:return Wa;case re.BY_VALUE:return Ga;case re.ADVANCED:return Va}return[]}),[t]),m=Object(c.useCallback)((e=>{if(e.price>u(-1))return void j(We("catalog.alert.notenough.credits.description"),fs.DEFAULT,null,null,We("catalog.alert.notenough.title"));const t=e.offerId;h(We("catalog.marketplace.confirm_header"),(()=>{Ee(new a.K(t))}),null,null,null,We("catalog.marketplace.confirm_title"))}),[u,j,h]);return pr(a.xe,(e=>{const t=e.getParser();if(!t)return;const s=new Map;t.offers.forEach((e=>{const t=new se(e.offerId,e.furniId,e.furniType,e.extraData,e.stuffData,e.price,e.status,e.averagePrice,e.offerCount);t.timeLeftMinutes=e.timeLeftMinutes,s.set(e.offerId,t)})),r(t.totalItemsFound),o(s)})),pr(a.ye,(e=>{const t=e.getParser();if(t)switch(t.result){case 1:b(l);break;case 2:o((e=>{const s=new Map(e);return s.delete(t.requestedOfferId),s})),j(We("catalog.marketplace.not_available_header"),fs.DEFAULT,null,null,We("catalog.marketplace.not_available_title"));break;case 3:o((e=>{const s=new Map(e),n=s.get(t.requestedOfferId);return n&&(n.offerId=t.offerId,n.price=t.newPrice,n.offerCount--,s.set(n.offerId,n)),s.delete(t.requestedOfferId),s})),h(We("catalog.marketplace.confirm_higher_header")+"\n"+We("catalog.marketplace.confirm_price",["price"],[t.newPrice.toString()]),(()=>{Ee(new a.K(t.offerId))}),null,null,null,We("catalog.marketplace.confirm_higher_title"));break;case 4:j(We("catalog.alert.notenough.credits.description"),fs.DEFAULT,null,null,We("catalog.alert.notenough.title"))}})),Object(an.jsxs)(an.Fragment,{children:[Object(an.jsxs)(gn,{children:[Object(an.jsx)(bn,{active:t===re.BY_ACTIVITY,onClick:()=>s(re.BY_ACTIVITY),children:We("catalog.marketplace.search_by_activity")}),Object(an.jsx)(bn,{active:t===re.BY_VALUE,onClick:()=>s(re.BY_VALUE),children:We("catalog.marketplace.search_by_value")}),Object(an.jsx)(bn,{active:t===re.ADVANCED,onClick:()=>s(re.ADVANCED),children:We("catalog.marketplace.search_advanced")})]}),Object(an.jsx)(Ha,{sortTypes:g,searchType:t,onSearch:b}),Object(an.jsxs)(Fn,{gap:1,overflow:"hidden",children:[Object(an.jsx)(ur,{truncate:!0,shrink:!0,fontWeight:"bold",children:We("catalog.marketplace.items_found",["count"],[i.size.toString()])}),Object(an.jsx)(Fn,{className:"nitro-catalog-layout-marketplace-grid",overflow:"auto",children:Array.from(i.values()).map(((e,t)=>Object(an.jsx)(Fa,{offerData:e,type:Ma,onClick:m},t)))})]})]})},za=e=>{const{page:t=null}=e,[s,n]=Object(c.useState)(-1),[r,i]=Object(c.useState)([]),[o,l]=Object(c.useState)(-1),[d,u]=Object(c.useState)([]),[j,h]=Object(c.useState)(-1),[b,g]=Object(c.useState)(!1),[m,O]=Object(c.useState)(""),[p,f]=Object(c.useState)(!0),[x,_]=Object(c.useState)(-1),{currentOffer:I=null,setCurrentOffer:E=null,setPurchaseOptions:v=null,catalogOptions:N=null,roomPreviewer:T=null}=$r(),{petPalettes:S=null}=N,w=Object(c.useMemo)((()=>d.length&&-1!==j?d[j][0]:16777215),[d,j]),R=Object(c.useMemo)((()=>-1!==s&&r.length&&-1!==o?We(`pet.breed.${s}.${r[o].breedId}`):""),[s,r,o]),y=Object(c.useMemo)((()=>{if(!r.length||-1===o)return"";const e=r[o].paletteId;let t=16777215;if(s<=7){if(-1===j)return"";t=d[j][0]}let n=t.toString(16).toUpperCase();for(;n.length<6;)n="0"+n;return`${e}\n${n}`}),[r,o,s,d,j]),k=Object(c.useMemo)((()=>{let e="";switch(x){case 1:e="catalog.alert.petname.long";break;case 2:e="catalog.alert.petname.short";break;case 3:e="catalog.alert.petname.chars";break;case 4:e="catalog.alert.petname.bobba"}return e&&e.length?We(e):""}),[x]),A=Object(c.useCallback)((()=>{-1!==x?0!==x||Ee(new a.Tf(t.pageId,I.offerId,`${m}\n${y}`,1)):Ee(new a.j(m,1))}),[t,I,m,y,x]);return pr(a.k,(e=>{const t=e.getParser();_(t.result),0===t.result?A():$e(new Sr(-1))})),Object(c.useEffect)((()=>{if(!t||!t.offers.length)return;const e=t.offers[0];E(e),n(function(e){if(!e.length)return 0;let t=e.length-1;for(;t>=0&&!isNaN(parseInt(e.charAt(t)));)t--;return t>0?parseInt(e.substring(t+1)):-1}(e.localizationId)),g(!1)}),[t,E]),Object(c.useEffect)((()=>{if(!I)return;const e=I.product.productData;if(e){if(S)for(const t of S){if(t.breed!==e.type)continue;const s=[];for(const e of t.palettes)e.sellable&&s.push(e);return l(s.length?0:-1),void i(s)}l(-1),i([]),Ee(new a.Rc(e.type))}}),[I,S]),Object(c.useEffect)((()=>{if(-1===s)return;const e=function(e,t){switch(e){case 0:case 1:return[[16743226],[16750435],[16764339],[16094464],[16498012],[16704690],[15586304],[16115545],[16513201],[8694111],[11585939],[14413767],[6664599],[9553845],[12971486],[8358322],[10002885],[13292268],[10780600],[12623573],[14403561],[12418717],[14327229],[15517403],[14515069],[15764368],[16366271],[11250603],[13948116],[16777215],[14256481],[14656129],[15848130],[14005087],[14337152],[15918540],[15118118],[15531929],[9764857],[11258085]];case 2:return[[16579283],[15378351],[8830016],[15257125],[9340985],[8949607],[6198292],[8703620],[9889626],[8972045],[12161285],[13162269],[8620113],[12616503],[8628101],[13827840],[9764857]];case 3:case 5:return[[16777215],[15658734],[14540253]];case 4:return[[16777215],[16053490],[15464440],[16248792],[15396319],[15007487]];case 6:return[[16777215],[15658734],[14540253],[16767177],[16770205],[16751331]];case 7:return[[13421772],[11447982],[16751331],[10149119],[16763290],[16743786]];default:{const s=[];for(const n of t){const t=C().getPetColorResult(e,n.paletteId);t&&(t.primaryColor===t.secondaryColor?s.push([t.primaryColor]):s.push([t.primaryColor,t.secondaryColor]))}return s}}}(s,r);h(e.length?0:-1),u(e)}),[s,r]),Object(c.useEffect)((()=>{if(!T)return;if(T.reset(!1),-1===s||!r.length||-1===o)return;let e=`${s} ${r[o].paletteId}`;s<=7&&(e+=` ${w.toString(16)}`),T.addPetIntoRoom(e)}),[T,s,r,o,w]),Object(c.useEffect)((()=>{_(-1)}),[m]),I?Object(an.jsxs)(un,{children:[Object(an.jsx)(Fn,{size:7,overflow:"hidden",children:Object(an.jsxs)(jn,{columnCount:5,children:[!b&&r.length>0&&r.map(((e,t)=>Object(an.jsx)(Vn,{itemActive:o===t,onClick:e=>l(t),children:Object(an.jsx)(er,{typeId:s,paletteId:e.paletteId,direction:2,headOnly:!0})},t))),b&&d.length>0&&d.map(((e,t)=>Object(an.jsx)(Vn,{itemHighlight:!0,itemActive:j===t,itemColor:a.sb.int2rgb(e[0]),className:"clear-bg",onClick:e=>h(t)},t)))]})}),Object(an.jsxs)(Fn,{center:!I,size:5,overflow:"hidden",children:[!I&&Object(an.jsxs)(an.Fragment,{children:[!!t.localization.getImage(1)&&Object(an.jsx)("img",{alt:"",src:t.localization.getImage(1)}),Object(an.jsx)(ur,{center:!0,dangerouslySetInnerHTML:{__html:t.localization.getText(0)}})]}),I&&Object(an.jsxs)(an.Fragment,{children:[Object(an.jsxs)(on,{position:"relative",overflow:"hidden",children:[Object(an.jsx)(da,{}),Object(an.jsx)(ja,{position:"absolute",className:"bg-muted rounded bottom-1 end-1"}),s>-1&&s<=7&&Object(an.jsx)(bn,{position:"absolute",className:"bottom-1 start-1",onClick:e=>g(!b),children:Object(an.jsx)(fn.a,{icon:"fill-drip"})})]}),Object(an.jsxs)(Fn,{grow:!0,gap:1,children:[Object(an.jsx)(ur,{truncate:!0,children:R}),Object(an.jsxs)(Fn,{grow:!0,gap:1,children:[Object(an.jsx)("input",{type:"text",className:"form-control form-control-sm w-100",placeholder:We("widgets.petpackage.name.title"),value:m,onChange:e=>O(e.target.value)}),x>0&&Object(an.jsx)(on,{className:"invalid-feedback d-block m-0",children:k})]}),Object(an.jsx)(hn,{justifyContent:"end",children:Object(an.jsx)(la,{justifyContent:"end",alignItems:"end"})}),Object(an.jsx)(aa,{purchaseCallback:A})]})]})]})]}):null},Ya=e=>{const{offer:t=null,isAvailable:s=!1,onSelect:n=null}=e,r=Object(c.useCallback)((()=>{if(!t||!t.products.length)return"";const e=t.products[0];return xt.getProductImageUrl(e.productType,e.furniClassId,e.extraParam)}),[t]),i=Object(c.useCallback)((()=>{if(!t||!t.products.length)return"";const e=t.products[0];return We(2===xt.getProductCategory(e.productType,e.furniClassId)?"wallItem.name."+e.furniClassId:"roomItem.name."+e.furniClassId)}),[t]);Object(c.useCallback)((()=>{if(!t||!t.products.length)return"";const e=t.products[0];return We(2===xt.getProductCategory(e.productType,e.furniClassId)?"wallItem.desc."+e.furniClassId:"roomItem.desc."+e.furniClassId)}),[t]);return Object(an.jsxs)(Vn,{center:!1,column:!1,alignItems:"center",className:"p-1",children:[Object(an.jsx)(qn,{imageUrl:r()}),Object(an.jsx)(ur,{grow:!0,fontWeight:"bold",children:i()}),Object(an.jsx)(bn,{variant:"secondary",onClick:()=>n(t.localizationId),disabled:!s,children:We("catalog.club_gift.select")})]})},$a=e=>{const{purse:t=null}=Tc(),{catalogOptions:s=null,setCatalogOptions:n=null}=$r(),{clubGifts:r=null}=s,{showConfirm:i=null}=Hr(),o=Object(c.useCallback)((()=>r?r.giftsAvailable>0?We("catalog.club_gift.available",["amount"],[r.giftsAvailable.toString()]):r.daysUntilNextGift>0?We("catalog.club_gift.days_until_next",["days"],[r.daysUntilNextGift.toString()]):t.isVip?We("catalog.club_gift.not_available"):We("catalog.club_gift.no_club"):""),[r,t]),l=Object(c.useCallback)((e=>{i(We("catalog.club_gift.confirm"),(()=>{Ee(new a.Vh(e)),n((e=>(e.clubGifts.giftsAvailable--,{...e})))}),null)}),[n,i]);return Object(an.jsxs)(an.Fragment,{children:[Object(an.jsx)(ur,{truncate:!0,shrink:!0,fontWeight:"bold",children:o()}),Object(an.jsx)(jn,{columnCount:1,className:"nitro-catalog-layout-vip-gifts-grid",children:r.offers.length>0&&r.offers.map((e=>Object(an.jsx)(Ya,{offer:e,isAvailable:r.getOfferExtraData(e.offerId).isSelectable&&r.giftsAvailable>0,onSelect:l},e.offerId)))})]})},Ka=(e,t)=>{if(!e)return null;const s={page:e,hideNavigation:t};switch(e.layoutCode){case"frontpage_featured":return null;case"frontpage4":return Object(an.jsx)(Ua,{...s});case"pets":return Object(an.jsx)(za,{...s});case"pets2":return Object(an.jsx)(Ca,{...s});case"pets3":return Object(an.jsx)(Ea,{...s});case"vip_buy":return Object(an.jsx)(Da,{...s});case"guild_frontpage":return Object(an.jsx)(_a,{...s});case"guild_forum":return Object(an.jsx)(xa,{...s});case"guild_custom_furni":return Object(an.jsx)(fa,{...s});case"club_gifts":return Object(an.jsx)($a,{...s});case"marketplace_own_items":return Object(an.jsx)(Ba,{...s});case"marketplace":return Object(an.jsx)(qa,{...s});case"single_bundle":return Object(an.jsx)(wa,{...s});case"room_bundle":return Object(an.jsx)(Sa,{...s});case"spaces_new":return Object(an.jsx)(ka,{...s});case"trophies":return Object(an.jsx)(Aa,{...s});case"info_loyalty":return Object(an.jsx)(Ia,{...s});case"badge_display":return Object(an.jsx)(ua,{...s});case"roomads":return Object(an.jsx)(va,{...s});case"default_3x3_color_grouping":return Object(an.jsx)(ba,{...s});default:return Object(an.jsx)(ma,{...s})}},Xa=e=>{const[t,s]=Object(c.useState)(null),[n,r]=Object(c.useState)(0),[i,o]=Object(c.useState)("0"),{catalogOptions:l=null,setCatalogOptions:d=null}=$r(),{marketplaceConfiguration:u=null}=l,{showConfirm:j=null}=Hr();if(pr(a.Ae,(e=>{const t=e.getParser();d((e=>{const s={...e};return s.marketplaceConfiguration=t,s}))})),fr(Nr.POST_MARKETPLACE,(e=>s(e.item))),Object(c.useEffect)((()=>{t&&!u&&Ee(new a.Ec)}),[t,u]),Object(c.useEffect)((()=>{if(t)return()=>r(0)}),[t]),!u||!t)return null;const h=t?We(t.isWallItem?"wallItem.name."+t.type:"roomItem.name."+t.type):"",b=t?We(t.isWallItem?"wallItem.desc."+t.type:"roomItem.desc."+t.type):"",g=()=>Math.max(Math.ceil(.01*u.commission*n),1);return Object(an.jsxs)(yn,{className:"nitro-catalog-layout-marketplace-post-offer",theme:"primary-slim",children:[Object(an.jsx)(vn,{headerText:We("inventory.marketplace.make_offer.title"),onCloseClick:e=>s(null)}),Object(an.jsx)(In,{overflow:"hidden",children:Object(an.jsxs)(un,{fullHeight:!0,children:[Object(an.jsx)(Fn,{center:!0,className:"bg-muted rounded p-2",size:4,overflow:"hidden",children:Object(an.jsx)(Un,{productType:t.isWallItem?X.WALL:X.FLOOR,productClassId:t.type,extraData:t.extra.toString()})}),Object(an.jsxs)(Fn,{size:8,justifyContent:"between",overflow:"hidden",children:[Object(an.jsxs)(Fn,{grow:!0,gap:1,children:[Object(an.jsx)(ur,{fontWeight:"bold",children:h}),Object(an.jsx)(ur,{truncate:!0,shrink:!0,children:b})]}),Object(an.jsxs)(Fn,{overflow:"auto",children:[Object(an.jsx)(ur,{italics:!0,children:We("inventory.marketplace.make_offer.expiration_info",["time"],[u.offerTime.toString()])}),Object(an.jsxs)("div",{className:"input-group has-validation",children:[Object(an.jsx)("input",{className:"form-control form-control-sm",type:"number",min:0,value:i,onChange:e=>(e=>{o(e);const t=parseInt(e);isNaN(t)||t===n||r(parseInt(e))})(e.target.value),placeholder:We("inventory.marketplace.make_offer.price_request")}),(n<u.minimumPrice||isNaN(n))&&Object(an.jsx)(on,{className:"invalid-feedback d-block",children:We("inventory.marketplace.make_offer.min_price",["minprice"],[u.minimumPrice.toString()])}),n>u.maximumPrice&&!isNaN(n)&&Object(an.jsx)(on,{className:"invalid-feedback d-block",children:We("inventory.marketplace.make_offer.max_price",["maxprice"],[u.maximumPrice.toString()])}),!(n<u.minimumPrice||n>u.maximumPrice||isNaN(n))&&Object(an.jsx)(on,{className:"invalid-feedback d-block",children:We("inventory.marketplace.make_offer.final_price",["commission","finalprice"],[g().toString(),(n+g()).toString()])})]}),Object(an.jsx)(bn,{disabled:n<u.minimumPrice||n>u.maximumPrice||isNaN(n),onClick:()=>{!t||n<u.minimumPrice||j(We("inventory.marketplace.confirm_offer.info",["furniname","price"],[h,n.toString()]),(()=>{Ee(new a.we(n,t.isWallItem?2:1,t.id)),s(null)}),(()=>{s(null)}),null,null,We("inventory.marketplace.confirm_offer.title"))},children:We("inventory.marketplace.make_offer.post")})]})]})]})})]})},Qa=e=>{const{isVisible:t=!1,setIsVisible:s=null,rootNode:n=null,currentPage:r=null,navigationHidden:i=!1,setNavigationHidden:a=null,activeNodes:o=[],searchResult:d=null,setSearchResult:u=null,openPageByName:j=null,openPageByOfferId:h=null,activateNode:b=null,getNodeById:g}=$r();return Object(c.useEffect)((()=>{const e={linkReceived:e=>{const t=e.split("/");if(!(t.length<2))switch(t[1]){case"show":return void s(!0);case"hide":return void s(!1);case"toggle":return void s((e=>!e));case"open":if(t.length>2)if(4===t.length){if("offerId"===t[2])return void h(parseInt(t[3]))}else j(t[2]);else s(!0);return}},eventUrlPrefix:"catalog/"};return l(e),()=>E(e)}),[s,h,j]),Object(an.jsxs)(an.Fragment,{children:[t&&Object(an.jsxs)(yn,{uniqueKey:"catalog",className:"nitro-catalog",style:{width:p("catalog.headers")?"710px":""},children:[Object(an.jsx)(vn,{headerText:We("catalog.title"),onCloseClick:e=>s(!1)}),Object(an.jsx)(or,{children:n&&n.children.length>0&&n.children.map((e=>e.isVisible?Object(an.jsx)(ar,{isActive:e.isActive,onClick:t=>{d&&u(null),b(e)},children:Object(an.jsxs)(hn,{gap:p("catalog.tab.icons")?1:0,alignItems:"center",children:[p("catalog.tab.icons")&&Object(an.jsx)($i,{icon:e.iconId}),e.localization]})},e.pageId):null))}),Object(an.jsx)(In,{children:Object(an.jsxs)(un,{children:[!i&&Object(an.jsx)(Fn,{size:3,overflow:"hidden",children:o&&o.length>0&&Object(an.jsx)(ta,{node:o[0]})}),Object(an.jsx)(Fn,{size:i?12:9,overflow:"hidden",children:Ka(r,(()=>a(!0)))})]})})]}),Object(an.jsx)(Qi,{}),Object(an.jsx)(Xa,{})]})};var Ja=s(27);const Za=e=>{const[t,s]=Object(c.useState)(!1),{chatHistory:n=[]}=Jr(),r=Object(c.useRef)(null),i=Object(c.useMemo)((()=>new Ja.c({defaultHeight:25,fixedWidth:!0})),[]),a=e=>{const t=n[e.index];e.index;return Object(an.jsx)(Ja.b,{cache:i,columnIndex:0,parent:e.parent,rowIndex:e.index,children:Object(an.jsxs)(hn,{style:e.style,className:"p-1",gap:1,children:[Object(an.jsx)(ur,{variant:"muted",children:t.timestamp}),t.type===Mt.TYPE_CHAT&&Object(an.jsxs)(an.Fragment,{children:[Object(an.jsx)(ur,{pointer:!0,noWrap:!0,dangerouslySetInnerHTML:{__html:t.name+":"}}),Object(an.jsx)(ur,{textBreak:!0,wrap:!0,grow:!0,children:t.message})]}),t.type===Mt.TYPE_ROOM_INFO&&Object(an.jsxs)(an.Fragment,{children:[Object(an.jsx)("i",{className:"icon icon-small-room"}),Object(an.jsx)(ur,{textBreak:!0,wrap:!0,grow:!0,children:t.name})]})]},e.key)},e.key)};return Object(c.useEffect)((()=>{const e={linkReceived:e=>{const t=e.split("/");if(!(t.length<2))switch(t[1]){case"show":return void s(!0);case"hide":return void s(!1);case"toggle":return void s((e=>!e))}},eventUrlPrefix:"chat-history/"};return l(e),()=>E(e)}),[]),Object(c.useEffect)((()=>{r&&r.current&&t&&r.current.scrollToRow(-1)}),[t]),t?Object(an.jsxs)(yn,{uniqueKey:"chat-history",className:"nitro-chat-history",theme:"primary-slim",children:[Object(an.jsx)(vn,{headerText:We("room.chathistory.button.text"),onCloseClick:e=>s(!1)}),Object(an.jsx)(In,{children:Object(an.jsx)(Ja.a,{defaultWidth:300,defaultHeight:200,onResize:e=>i.clearAll(),children:e=>{let{height:t,width:s}=e;return Object(an.jsx)(Ja.d,{ref:r,width:s,height:t,rowCount:n.length,rowHeight:i.rowHeight,className:"chat-history-list",rowRenderer:a,deferredMeasurementCache:i})}})})]}):null},eo=32,to=64,so="x0123456789abcdefghijklmnopq";class no{}no.DOOR=0,no.UP=1,no.DOWN=2,no.SET=3,no.UNSET=4;const ro={x:"101010",0:"0065ff",1:"0091ff",2:"00bcff",3:"00e8ff",4:"00ffea",5:"00ffbf",6:"00ff93",7:"00ff68",8:"00ff3d",9:"19ff00",a:"44ff00",b:"70ff00",c:"9bff00",d:"f2ff00",e:"ffe000",f:"ffb500",g:"ff8900",h:"ff5e00",i:"ff3200",j:"ff0700",k:"ff0023",l:"ff007a",m:"ff00a5",n:"ff00d1",o:"ff00fc",p:"d600ff",q:"aa00ff"};class co{constructor(){this._currentAction=void 0,this._currentHeight=void 0,this._currentAction=no.SET,this._currentHeight=so[1]}get currentAction(){return this._currentAction}set currentAction(e){this._currentAction=e}get currentHeight(){return this._currentHeight}set currentHeight(e){this._currentHeight=e}clear(){this._currentAction=no.SET,this._currentHeight=so[1]}}class io{constructor(e,t){this._height=void 0,this._isBlocked=void 0,this._height=e,this._isBlocked=t}get height(){return this._height}set height(e){this._height=e}get isBlocked(){return this._isBlocked}set isBlocked(e){this._isBlocked=e}}const ao=(e,t)=>{let s=e*eo/2-t*eo/2;return s+=1024,[s,e*eo/4+t*eo/4]},oo=(e,t)=>{const s=e-1024;return[(s/16+t/8)/2,(t/8-s/16)/2]},lo=e=>{switch(e=parseInt(e.toString())){case 0:return-2;case 1:return-1;case 3:return 1;default:return 0}},uo=e=>{switch(e){case.25:return 0;case.5:return 1;case 2:return 3;default:return 2}};class jo extends a.Nf{constructor(){super({width:2068,height:1124,backgroundColor:0,antialias:!0,autoDensity:!0,resolution:1,sharedLoader:!0,sharedTicker:!0}),this._tilemap=void 0,this._width=void 0,this._height=void 0,this._isHolding=void 0,this._doorLocation=void 0,this._lastUsedTile=void 0,this._tilemapRenderer=void 0,this._actionSettings=void 0,this._isInitialized=void 0,this._assetCollection=void 0,this._tilemap=[],this._doorLocation=new a.nf(0,0),this._width=0,this._height=0,this._isHolding=!1,this._lastUsedTile=new a.nf(-1,-1),this._actionSettings=new co}initialize(){if(this._isInitialized)return;const e=b().asset.getCollection("floor_editor");e&&(this._assetCollection=e,this._tilemapRenderer=new a.tf(e.baseTexture),this.registerEventListeners(),this.stage.addChild(this._tilemapRenderer),this._isInitialized=!0)}registerEventListeners(){const e=new a.nf;this._tilemapRenderer.containsPoint=t=>(this._tilemapRenderer.worldTransform.applyInverse(t,e),this.tileHitDetection(e,!1)),this._tilemapRenderer.on("pointerup",(()=>{this._isHolding=!1})),this._tilemapRenderer.on("pointerout",(()=>{this._isHolding=!1})),this._tilemapRenderer.on("pointerdown",(e=>{if(!(e.data.originalEvent instanceof PointerEvent)&&!(e.data.originalEvent instanceof TouchEvent))return;const t=e.data.originalEvent;if(t instanceof MouseEvent&&2===t.button)return;const s=e.data.global;this.tileHitDetection(s,!0)})),this._tilemapRenderer.on("click",(e=>{if(!(e.data.originalEvent instanceof PointerEvent))return;if(2===e.data.originalEvent.button)return;const t=e.data.global;this.tileHitDetection(t,!0,!0)}))}tileHitDetection(e,t){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=this._tilemapRenderer.pointsBuf,r=a.Af,c=n.length;t&&(this._isHolding=!0);for(let i=0;i<c;i+=r){const t=i+r,c=n.slice(i,t),a=eo,o=16,l=Math.floor(e.x),d=Math.floor(e.y),u=c[2],j=c[3],h=u+a/2,b=j+o/2;if(Math.abs(l-h)/(.5*a)+Math.abs(d-b)/(.5*o)<=1){if(this._isHolding){const[e,t]=oo(u,j);s?this.onClick(e,t):this._lastUsedTile.x===e&&this._lastUsedTile.y===t||(this._lastUsedTile.x=e,this._lastUsedTile.y=t,this.onClick(e,t))}return!0}}return!1}onClick(e,t){const s=this._tilemap[t][e],n=so.indexOf(s.height);let r=0;switch(this._actionSettings.currentAction){case no.DOOR:return void("x"!==s.height&&(this._doorLocation.x=e,this._doorLocation.y=t,this.renderTiles()));case no.UP:if("x"===s.height)return;r=n+1;break;case no.DOWN:if("x"===s.height||n<=1)return;r=n-1;break;case no.SET:r=so.indexOf(this._actionSettings.currentHeight);break;case no.UNSET:r=0}if(-1===r)return;if(n===r)return;r>0&&(e+1>this._width&&(this._width=e+1),t+1>this._height&&(this._height=t+1));const c=so[r];c&&(s.isBlocked||(this._tilemap[t][e].height=c,this.renderTiles()))}renderTiles(){this.tilemapRenderer.clear();for(let e=0;e<this._tilemap.length;e++)for(let t=0;t<this.tilemap[e].length;t++){const s=this.tilemap[e][t];let n=s.height;this._doorLocation.x===t&&this._doorLocation.y===e&&(n=jo.TILE_DOOR),s.isBlocked&&(n=jo.TILE_BLOCKED);const[r,c]=ao(t,e);this._tilemapRenderer.tile(this._assetCollection.getTexture(`floor_editor_${n}`),r,c)}}setTilemap(e,t){this._tilemap=[];const s=e.split("\r");let n=0,r=s.length;for(let c=0;c<r;c++){const e=s[c];0!==e.length?e.length>n&&(n=e.length):(s.splice(c,1),r=s.length,c--)}for(let c=0;c<r;c++){this._tilemap[c]=[];const e=s[c];for(let s=0;s<n;s++){const n=t[c]&&t[c][s]||!1,r=e[s];this._tilemap[c][s]=new io("x"!==r&&"X"!==r&&r?r:"x",n)}for(let t=n;t<to;t++)this.tilemap[c][t]=new io("x",!1)}for(let c=r;c<to;c++){this.tilemap[c]||(this.tilemap[c]=[]);for(let e=0;e<to;e++)this.tilemap[c][e]=new io("x",!1)}this._width=n,this._height=r}getCurrentTilemapString(){if("x"===this._tilemap[this._height-1][this._width-1].height){this._width=-1,this._height=-1;for(let e=63;e>=0;e--)if(this._tilemap[e])for(let t=63;t>=0;t--){if(!this._tilemap[e][t])continue;"x"!==this._tilemap[e][t].height&&(t+1>this._width&&(this._width=t+1),e+1>this._height&&(this._height=e+1))}}const e=[];for(let t=0;t<this._height;t++){const s=[];for(let e=0;e<this._width;e++){const n=this._tilemap[t][e];s[e]=n.height}e[t]=s.join("")}return e.join("\r")}clear(){this._tilemapRenderer.interactive=!1,this._tilemap=[],this._doorLocation.set(-1,-1),this._width=0,this._height=0,this._isHolding=!1,this._lastUsedTile.set(-1,-1),this._actionSettings.clear(),this._tilemapRenderer.clear()}get tilemapRenderer(){return this._tilemapRenderer}get tilemap(){return this._tilemap}get doorLocation(){return this._doorLocation}set doorLocation(e){this._doorLocation=e}get actionSettings(){return this._actionSettings}static get instance(){return jo._INSTANCE||(jo._INSTANCE=new jo),jo._INSTANCE}}jo._INSTANCE=null,jo.TILE_BLOCKED="r_blocked",jo.TILE_DOOR="r_door";const ho=Object(c.createContext)({originalFloorplanSettings:null,setOriginalFloorplanSettings:null,visualizationSettings:null,setVisualizationSettings:null}),bo=e=>Object(an.jsx)(ho.Provider,{...e}),go=()=>Object(c.useContext)(ho),mo=e=>{const{gap:t=1,children:s=null,...n}=e,[r,i]=Object(c.useState)(!1),[o,l]=Object(c.useState)(!1),{originalFloorplanSettings:d=null,setOriginalFloorplanSettings:u=null,setVisualizationSettings:j=null}=go(),h=Object(c.useRef)(null);pr(a.dh,(e=>{const t=e.getParser();u((e=>{const s={...e};return s.reservedTiles=t.blockedTilesMap,jo.instance.setTilemap(s.tilemap,s.reservedTiles),s})),i(!0),h.current.scrollTo(jo.instance.view.width/3,0)})),pr(a.Og,(e=>{const t=e.getParser();u((e=>{const s={...e};return s.entryPoint=[t.x,t.y],s.entryPointDir=t.direction,s})),j((e=>{const s={...e};return s.entryPointDir=t.direction,s})),jo.instance.doorLocation=new a.nf(t.x,t.y),l(!0)}));const b=e=>{const t=h.current;if(t)switch(e){case"up":t.scrollBy({top:-10});break;case"down":t.scrollBy({top:10});break;case"left":t.scrollBy({left:-10});break;case"right":t.scrollBy({left:10})}};return Object(c.useEffect)((()=>()=>{jo.instance.clear(),j((e=>({wallHeight:d.wallHeight,thicknessWall:d.thicknessWall,thicknessFloor:d.thicknessFloor,entryPointDir:e.entryPointDir})))}),[d.thicknessFloor,d.thicknessWall,d.wallHeight,j]),Object(c.useEffect)((()=>{o&&r&&jo.instance.renderTiles()}),[o,r]),Object(c.useEffect)((()=>{Ee(new a.Pc),Ee(new a.Jc),jo.instance.tilemapRenderer.interactive=!0,h.current&&h.current.appendChild(jo.instance.renderer.view)}),[]),Object(an.jsxs)(Fn,{gap:t,...n,children:[Object(an.jsxs)(un,{overflow:"hidden",gap:1,children:[Object(an.jsx)(Fn,{center:!0,size:1,children:Object(an.jsx)(bn,{className:"d-md-none",onClick:e=>b("left"),children:Object(an.jsx)(fn.a,{icon:"arrow-left"})})}),Object(an.jsxs)(Fn,{overflow:"hidden",size:10,gap:1,children:[Object(an.jsx)(hn,{justifyContent:"center",className:"d-md-none",children:Object(an.jsx)(bn,{shrink:!0,onClick:e=>b("up"),children:Object(an.jsx)(fn.a,{icon:"arrow-up"})})}),Object(an.jsx)(on,{overflow:"auto",innerRef:h}),Object(an.jsx)(hn,{justifyContent:"center",className:"d-md-none",children:Object(an.jsx)(bn,{shrink:!0,onClick:e=>b("down"),children:Object(an.jsx)(fn.a,{icon:"arrow-down"})})})]}),Object(an.jsx)(Fn,{center:!0,size:1,children:Object(an.jsx)(bn,{className:"d-md-none",onClick:e=>b("right"),children:Object(an.jsx)(fn.a,{icon:"arrow-right"})})})]}),s]})},Oo=e=>e.replace(/\r\n|\r|\n/g,"\n").toLowerCase(),po=e=>{const{onCloseClick:t=null}=e,[s,n]=Object(c.useState)(""),{originalFloorplanSettings:r=null}=go();return fi((()=>{n(Oo(r.tilemap))})),Object(an.jsxs)(yn,{theme:"primary-slim",className:"floorplan-import-export",children:[Object(an.jsx)(vn,{headerText:We("floor.plan.editor.import.export"),onCloseClick:t}),Object(an.jsxs)(In,{children:[Object(an.jsx)("textarea",{className:"h-100",value:s,onChange:e=>n(e.target.value)}),Object(an.jsxs)(hn,{justifyContent:"between",children:[Object(an.jsx)(bn,{onClick:e=>n(Oo(r.tilemap)),children:We("floor.plan.editor.revert.to.last.received.map")}),Object(an.jsx)(bn,{onClick:()=>{Ee(new a.Ii(s.split("\n").join("\r"),r.entryPoint[0],r.entryPoint[1],r.entryPointDir,lo(r.thicknessWall),lo(r.thicknessFloor),r.wallHeight-1))},children:We("floor.plan.editor.save")})]})]})]})},fo=e=>{const{visualizationSettings:t=null,setVisualizationSettings:s=null}=go(),[n,r]=Object(c.useState)(no.SET),[i,a]=Object(c.useState)(0),o=e=>{r(e),jo.instance.actionSettings.currentAction=e},l=e=>{(isNaN(e)||e<=0)&&(e=0),e>16&&(e=16),s((t=>{const s={...t};return s.wallHeight=e,s}))};return Object(an.jsxs)(Fn,{children:[Object(an.jsxs)(hn,{gap:1,children:[Object(an.jsxs)(Fn,{size:5,gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:We("floor.plan.editor.draw.mode")}),Object(an.jsxs)(hn,{gap:3,children:[Object(an.jsxs)(hn,{gap:1,children:[Object(an.jsx)(Vn,{itemActive:n===no.SET,onClick:e=>o(no.SET),children:Object(an.jsx)("i",{className:"icon icon-set-tile"})}),Object(an.jsx)(Vn,{itemActive:n===no.UNSET,onClick:e=>o(no.UNSET),children:Object(an.jsx)("i",{className:"icon icon-unset-tile"})})]}),Object(an.jsxs)(hn,{gap:1,children:[Object(an.jsx)(Vn,{itemActive:n===no.UP,onClick:e=>o(no.UP),children:Object(an.jsx)("i",{className:"icon icon-increase-height"})}),Object(an.jsx)(Vn,{itemActive:n===no.DOWN,onClick:e=>o(no.DOWN),children:Object(an.jsx)("i",{className:"icon icon-decrease-height"})})]}),Object(an.jsx)(Vn,{itemActive:n===no.DOOR,onClick:e=>o(no.DOOR),children:Object(an.jsx)("i",{className:"icon icon-set-door"})})]})]}),Object(an.jsxs)(Fn,{alignItems:"center",size:4,children:[Object(an.jsx)(ur,{bold:!0,children:We("floor.plan.editor.enter.direction")}),Object(an.jsx)("i",{className:`icon icon-door-direction-${t.entryPointDir} cursor-pointer`,onClick:()=>{s((e=>{const t={...e};return t.entryPointDir<7?++t.entryPointDir:t.entryPointDir=0,t}))}})]}),Object(an.jsxs)(Fn,{size:3,children:[Object(an.jsx)(ur,{bold:!0,children:We("floor.editor.wall.height")}),Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)(fn.a,{icon:"caret-left",className:"cursor-pointer",onClick:()=>{let e=t.wallHeight-1;e<=0&&(e=0),l(e)}}),Object(an.jsx)("input",{type:"number",className:"form-control form-control-sm quantity-input",value:t.wallHeight,onChange:e=>l(e.target.valueAsNumber)}),Object(an.jsx)(fn.a,{icon:"caret-right",className:"cursor-pointer",onClick:()=>{let e=t.wallHeight+1;e>16&&(e=16),l(e)}})]})]})]}),Object(an.jsxs)(hn,{gap:1,children:[Object(an.jsxs)(Fn,{size:6,children:[Object(an.jsxs)(ur,{bold:!0,children:[We("floor.plan.editor.tile.height"),": ",i]}),Object(an.jsx)(Fi.a,{className:"nitro-slider",min:0,max:26,step:1,value:i,onChange:e=>{return t=e,(isNaN(t)||t<=0)&&(t=0),t>26&&(t=26),a(t),void(jo.instance.actionSettings.currentHeight=t.toString(36));var t},renderThumb:(e,t)=>{let{style:s,...n}=e;return Object(an.jsx)("div",{style:{backgroundColor:`#${ro[t.valueNow.toString(33)]}`,...s},...n,children:t.valueNow})}})]}),Object(an.jsxs)(Fn,{size:6,children:[Object(an.jsx)(ur,{bold:!0,children:We("floor.plan.editor.room.options")}),Object(an.jsxs)(hn,{className:"align-items-center",children:[Object(an.jsxs)("select",{className:"form-control form-control-sm",value:t.thicknessWall,onChange:e=>{return t=parseInt(e.target.value),void s((e=>{const s={...e};return s.thicknessWall=t,s}));var t},children:[Object(an.jsx)("option",{value:0,children:We("navigator.roomsettings.wall_thickness.thinnest")}),Object(an.jsx)("option",{value:1,children:We("navigator.roomsettings.wall_thickness.thin")}),Object(an.jsx)("option",{value:2,children:We("navigator.roomsettings.wall_thickness.normal")}),Object(an.jsx)("option",{value:3,children:We("navigator.roomsettings.wall_thickness.thick")})]}),Object(an.jsxs)("select",{className:"form-control form-control-sm",value:t.thicknessFloor,onChange:e=>{return t=parseInt(e.target.value),void s((e=>{const s={...e};return s.thicknessFloor=t,s}));var t},children:[Object(an.jsx)("option",{value:0,children:We("navigator.roomsettings.floor_thickness.thinnest")}),Object(an.jsx)("option",{value:1,children:We("navigator.roomsettings.floor_thickness.thin")}),Object(an.jsx)("option",{value:2,children:We("navigator.roomsettings.floor_thickness.normal")}),Object(an.jsx)("option",{value:3,children:We("navigator.roomsettings.floor_thickness.thick")})]})]})]})]})]})},xo=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)(!1),[i,o]=Object(c.useState)({tilemap:"",reservedTiles:[],entryPoint:[0,0],entryPointDir:2,wallHeight:-1,thicknessWall:1,thicknessFloor:1}),[d,u]=Object(c.useState)({entryPointDir:2,wallHeight:-1,thicknessWall:1,thicknessFloor:1});return mr(a.Eg.DISPOSED,(e=>s(!1))),pr(a.Sb,(e=>{const t=e.getParser();o((e=>{const s={...e};return s.tilemap=t.model,s.wallHeight=t.wallHeight+1,s})),u((e=>{const s={...e};return s.wallHeight=t.wallHeight+1,s}))})),pr(a.Lh,(e=>{const t=e.getParser();o((e=>{const s={...e};return s.thicknessFloor=uo(t.thicknessFloor),s.thicknessWall=uo(t.thicknessWall),s})),u((e=>{const s={...e};return s.thicknessFloor=uo(t.thicknessFloor),s.thicknessWall=uo(t.thicknessWall),s}))})),Object(c.useEffect)((()=>{const e={linkReceived:e=>{const t=e.split("/");if(!(t.length<2))switch(t[1]){case"show":return void s(!0);case"hide":return void s(!1);case"toggle":return void s((e=>!e))}},eventUrlPrefix:"floor-editor/"};return l(e),()=>E(e)}),[]),Object(c.useEffect)((()=>{jo.instance.initialize()}),[]),Object(an.jsxs)(bo,{value:{originalFloorplanSettings:i,setOriginalFloorplanSettings:o,visualizationSettings:d,setVisualizationSettings:u},children:[t&&Object(an.jsxs)(yn,{uniqueKey:"floorpan-editor",className:"nitro-floorplan-editor",theme:"primary-slim",children:[Object(an.jsx)(vn,{headerText:We("floor.plan.editor.title"),onCloseClick:()=>s(!1)}),Object(an.jsxs)(In,{overflow:"hidden",children:[Object(an.jsx)(fo,{}),Object(an.jsx)(mo,{overflow:"hidden"}),Object(an.jsxs)(hn,{justifyContent:"between",children:[Object(an.jsx)(bn,{onClick:()=>{u({wallHeight:i.wallHeight,thicknessWall:i.thicknessWall,thicknessFloor:i.thicknessFloor,entryPointDir:i.entryPointDir}),jo.instance.doorLocation=new a.nf(i.entryPoint[0],i.entryPoint[1]),jo.instance.setTilemap(i.tilemap,i.reservedTiles),jo.instance.renderTiles()},children:We("floor.plan.editor.reload")}),Object(an.jsxs)(gn,{children:[Object(an.jsx)(bn,{disabled:!0,children:We("floor.plan.editor.preview")}),Object(an.jsx)(bn,{onClick:e=>r(!0),children:We("floor.plan.editor.import.export")}),Object(an.jsx)(bn,{onClick:()=>{Ee(new a.Ii(jo.instance.getCurrentTilemapString(),jo.instance.doorLocation.x,jo.instance.doorLocation.y,d.entryPointDir,lo(d.thicknessWall),lo(d.thicknessFloor),d.wallHeight-1))},children:We("floor.plan.editor.save")})]})]})]})]}),n&&Object(an.jsx)(po,{onCloseClick:()=>r(!1)})]})},_o=e=>{const{friend:t=null}=e,[s,n]=Object(c.useState)(!1),{followFriend:r=null}=ec(),i=Object(c.useRef)();return Object(c.useEffect)((()=>{const e=e=>{const t=i.current;t&&(e.target===t||t.contains(e.target)||n(!1))};return document.addEventListener(a.Ve.MOUSE_CLICK,e),()=>document.removeEventListener(a.Ve.MOUSE_CLICK,e)}),[]),t?Object(an.jsxs)("div",{ref:i,className:"btn btn-success friend-bar-item "+(s?"friend-bar-item-active":""),onClick:e=>n((e=>!e)),children:[Object(an.jsxs)("div",{className:"friend-bar-item-head position-absolute "+(t.id>0?"avatar":"group"),children:[t.id>0&&Object(an.jsx)(kn,{headOnly:!0,figure:t.figure,direction:2}),t.id<=0&&Object(an.jsx)(Dn,{isGroup:!0,badgeCode:t.figure})]}),Object(an.jsx)("div",{className:"text-truncate",children:t.name}),s&&Object(an.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(an.jsx)(on,{className:"nitro-friends-spritesheet icon-friendbar-chat cursor-pointer",onClick:e=>Xt(t.id)}),t.followingAllowed&&Object(an.jsx)(on,{className:"nitro-friends-spritesheet icon-friendbar-visit cursor-pointer",onClick:e=>r(t)}),Object(an.jsx)(on,{className:"nitro-friends-spritesheet icon-profile cursor-pointer",onClick:e=>Xs(t.id)})]})]}):Object(an.jsxs)("div",{ref:i,className:"btn btn-primary friend-bar-item friend-bar-search",children:[Object(an.jsx)("div",{className:"friend-bar-item-head position-absolute"}),Object(an.jsx)("div",{className:"text-truncate",children:We("friend.bar.find.title")})]})},Io=e=>{const{onlineFriends:t=null}=e,[s,n]=Object(c.useState)(0),r=Object(c.useRef)();return Object(an.jsxs)(hn,{innerRef:r,alignItems:"center",className:"friend-bar",children:[Object(an.jsx)(bn,{variant:"black",className:"friend-bar-button",disabled:s<=0,onClick:e=>n(s-1),children:Object(an.jsx)(fn.a,{icon:"chevron-left"})}),Array.from(Array(3),((e,n)=>Object(an.jsx)(_o,{friend:t[s+n]||null},n))),Object(an.jsx)(bn,{variant:"black",className:"friend-bar-button",disabled:!(t.length>3&&s+3<=t.length-1),onClick:e=>n(s+1),children:Object(an.jsx)(fn.a,{icon:"chevron-right"})})]})},Eo=e=>{const{friend:t=null,selected:s=!1,selectFriend:n=null}=e,[r,i]=Object(c.useState)(!1),{followFriend:a=null,updateRelationship:o=null}=ec(),l=(e,s)=>{e.stopPropagation(),o(t,s),i(!1)};return t?Object(an.jsxs)(pn,{justifyContent:"between",className:`px-2 py-1 ${s&&"bg-primary text-white"}`,onClick:e=>n(t.id),children:[Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)(on,{onClick:e=>e.stopPropagation(),children:Object(an.jsx)(ir,{userId:t.id})}),Object(an.jsx)("div",{children:t.name})]}),Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[!r&&Object(an.jsxs)(an.Fragment,{children:[t.followingAllowed&&Object(an.jsx)(on,{pointer:!0,onClick:e=>{e.stopPropagation(),a(t)},className:"nitro-friends-spritesheet icon-follow",title:We("friendlist.tip.follow")}),t.online&&Object(an.jsx)(on,{pointer:!0,className:"nitro-friends-spritesheet icon-chat",onClick:e=>{e.stopPropagation(),Xt(t.id)},title:We("friendlist.tip.im")}),t.id>0&&Object(an.jsx)(on,{className:`nitro-friends-spritesheet icon-${(()=>{if(!t)return"none";switch(t.relationshipStatus){case Gt.RELATIONSHIP_HEART:return"heart";case Gt.RELATIONSHIP_SMILE:return"smile";case Gt.RELATIONSHIP_BOBBA:return"bobba";default:return"none"}})()} cursor-pointer`,onClick:e=>{e.stopPropagation(),i(!0)},title:We("infostand.link.relationship")})]}),r&&Object(an.jsxs)(an.Fragment,{children:[Object(an.jsx)(on,{pointer:!0,className:"nitro-friends-spritesheet icon-heart",onClick:e=>l(e,Gt.RELATIONSHIP_HEART)}),Object(an.jsx)(on,{pointer:!0,className:"nitro-friends-spritesheet icon-smile",onClick:e=>l(e,Gt.RELATIONSHIP_SMILE)}),Object(an.jsx)(on,{pointer:!0,className:"nitro-friends-spritesheet icon-bobba",onClick:e=>l(e,Gt.RELATIONSHIP_BOBBA)}),Object(an.jsx)(on,{pointer:!0,className:"nitro-friends-spritesheet icon-none",onClick:e=>l(e,Gt.RELATIONSHIP_NONE)})]})]})]}):null},Co=e=>{const{list:t=null,selectedFriendsIds:s=null,selectFriend:n=null}=e;return t&&t.length?Object(an.jsx)(an.Fragment,{children:t.map(((e,t)=>Object(an.jsx)(Eo,{friend:e,selected:s&&s.indexOf(e.id)>=0,selectFriend:n},t)))}):null},vo=e=>{const{request:t=null}=e,{requestResponse:s=null}=ec();return t?Object(an.jsxs)(pn,{justifyContent:"between",className:"px-2 py-1",children:[Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)(ir,{userId:t.id}),Object(an.jsx)("div",{children:t.name})]}),Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)(on,{className:"nitro-friends-spritesheet icon-accept cursor-pointer",onClick:e=>s(t.id,!0)}),Object(an.jsx)(on,{className:"nitro-friends-spritesheet icon-deny cursor-pointer",onClick:e=>s(t.id,!1)})]})]}):null},No=e=>{const{children:t=null,...s}=e,{requests:n=[],requestResponse:r=null}=ec();return n.length?Object(an.jsxs)(xn,{...s,children:[Object(an.jsxs)(Fn,{fullHeight:!0,justifyContent:"between",gap:1,children:[Object(an.jsx)(Fn,{gap:0,children:n.map(((e,t)=>Object(an.jsx)(vo,{request:e},t)))}),Object(an.jsx)(hn,{justifyContent:"center",className:"px-2 py-1",children:Object(an.jsx)(bn,{onClick:e=>r(-1,!1),children:We("friendlist.requests.dismissall")})})]}),t]}):null},To=e=>{const{selectedFriendsIds:t=null,removeFriendsText:s=null,removeSelectedFriends:n=null,onCloseClick:r=null}=e;return Object(an.jsxs)(yn,{className:"nitro-friends-remove-confirmation",theme:"primary-slim",children:[Object(an.jsx)(vn,{headerText:We("friendlist.removefriendconfirm.title"),onCloseClick:r}),Object(an.jsxs)(In,{className:"text-black",children:[Object(an.jsx)("div",{children:s}),Object(an.jsxs)(hn,{gap:1,children:[Object(an.jsx)(bn,{fullWidth:!0,variant:"danger",disabled:0===t.length,onClick:n,children:We("generic.ok")}),Object(an.jsx)(bn,{fullWidth:!0,onClick:r,children:We("generic.cancel")})]})]})]})},So=e=>{const{selectedFriendsIds:t=null,onCloseClick:s=null,sendRoomInvite:n=null}=e,[r,i]=Object(c.useState)("");return Object(an.jsxs)(yn,{className:"nitro-friends-room-invite",uniqueKey:"nitro-friends-room-invite",theme:"primary-slim",children:[Object(an.jsx)(vn,{headerText:We("friendlist.invite.title"),onCloseClick:s}),Object(an.jsxs)(In,{className:"text-black",children:[We("friendlist.invite.summary",["count"],[t.length.toString()]),Object(an.jsx)("textarea",{className:"form-control",value:r,maxLength:255,onChange:e=>i(e.target.value)}),Object(an.jsx)(ur,{center:!0,className:"bg-muted rounded p-1",children:We("friendlist.invite.note")}),Object(an.jsxs)(hn,{gap:1,children:[Object(an.jsx)(bn,{fullWidth:!0,variant:"success",disabled:0===r.length||0===t.length,onClick:()=>n(r),children:We("friendlist.invite.send")}),Object(an.jsx)(bn,{fullWidth:!0,onClick:s,children:We("generic.cancel")})]})]})]})},wo=e=>{const{...t}=e,[s,n]=Object(c.useState)(""),[r,i]=Object(c.useState)(null),[o,l]=Object(c.useState)(null),{canRequestFriend:d=null,requestFriend:u=null}=ec();return pr(a.be,(e=>{const t=e.getParser();i(t.friends),l(t.others)})),Object(c.useEffect)((()=>{if(!s||!s.length)return;const e=setTimeout((()=>{s&&s.length&&Ee(new a.ae(s))}),500);return()=>clearTimeout(e)}),[s]),Object(an.jsxs)(xn,{...t,children:[Object(an.jsx)("input",{type:"text",className:"search-input form-control form-control-sm w-100 rounded-0",placeholder:We("generic.search"),value:s,maxLength:50,onChange:e=>n(e.target.value)}),Object(an.jsxs)(Fn,{children:[r&&Object(an.jsxs)(an.Fragment,{children:[0===r.length&&Object(an.jsx)(ur,{bold:!0,small:!0,className:"px-2 py-1",children:We("friendlist.search.nofriendsfound")}),r.length>0&&Object(an.jsxs)(Fn,{gap:0,children:[Object(an.jsx)(ur,{bold:!0,small:!0,className:"px-2 py-1",children:We("friendlist.search.friendscaption",["cnt"],[r.length.toString()])}),Object(an.jsx)("hr",{className:"mx-2 mt-0 mb-1 text-black"}),Object(an.jsx)(Fn,{gap:0,children:r.map((e=>Object(an.jsxs)(pn,{justifyContent:"between",className:"px-2 py-1",children:[Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)(ir,{userId:e.avatarId}),Object(an.jsx)("div",{children:e.avatarName})]}),Object(an.jsx)(hn,{alignItems:"center",gap:1,children:e.isAvatarOnline&&Object(an.jsx)(on,{className:"nitro-friends-spritesheet icon-chat cursor-pointer",onClick:t=>Xt(e.avatarId),title:We("friendlist.tip.im")})})]},e.avatarId)))})]})]}),o&&Object(an.jsxs)(an.Fragment,{children:[0===o.length&&Object(an.jsx)(ur,{bold:!0,small:!0,className:"px-2 py-1",children:We("friendlist.search.noothersfound")}),o.length>0&&Object(an.jsxs)(Fn,{gap:0,children:[Object(an.jsx)(ur,{bold:!0,small:!0,className:"px-2 py-1",children:We("friendlist.search.otherscaption",["cnt"],[o.length.toString()])}),Object(an.jsx)("hr",{className:"mx-2 mt-0 mb-1 text-black"}),Object(an.jsx)(Fn,{gap:0,children:o.map((e=>Object(an.jsxs)(pn,{justifyContent:"between",className:"px-2 py-1",children:[Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)(ir,{userId:e.avatarId}),Object(an.jsx)("div",{children:e.avatarName})]}),Object(an.jsx)(hn,{alignItems:"center",gap:1,children:d(e.avatarId)&&Object(an.jsx)(on,{className:"nitro-friends-spritesheet icon-add cursor-pointer",onClick:t=>u(e.avatarId,e.avatarName),title:We("friendlist.tip.addfriend")})})]},e.avatarId)))})]})]})]})]})},Ro=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)([]),[i,o]=Object(c.useState)(!1),[d,u]=Object(c.useState)(!1),{onlineFriends:j=[],offlineFriends:h=[],requests:b=[],requestFriend:g=null}=ec(),m=Object(c.useMemo)((()=>{if(!n||!n.length)return"";const e=[];for(const t of n){let s=j.find((e=>e.id===t));s||(s=h.find((e=>e.id===t))),s&&e.push(s.name)}return We("friendlist.removefriendconfirm.userlist",["user_names"],[e.join(", ")])}),[h,j,n]),O=Object(c.useCallback)((e=>{e<0||r((t=>{const s=[...t],n=s.indexOf(e);return n>-1?s.splice(n,1):s.push(e),s}))}),[r]);return Object(c.useEffect)((()=>{const e={linkReceived:e=>{const t=e.split("/");if(!(t.length<2))switch(t[1]){case"show":return void s(!0);case"hide":return void s(!1);case"toggle":return void s((e=>!e));case"request":if(t.length<4)return;g(parseInt(t[2]),t[3])}},eventUrlPrefix:"friends/"};return l(e),()=>E(e)}),[g]),t?Object(an.jsxs)(an.Fragment,{children:[Object(an.jsxs)(yn,{className:"nitro-friends",uniqueKey:"nitro-friends",theme:"primary-slim",children:[Object(an.jsx)(vn,{headerText:We("friendlist.friends"),onCloseClick:e=>s(!1)}),Object(an.jsxs)(In,{overflow:"hidden",gap:1,className:"text-black p-0",children:[Object(an.jsxs)(_n,{fullHeight:!0,overflow:"hidden",children:[Object(an.jsx)(xn,{headerText:We("friendlist.friends")+` (${j.length})`,isExpanded:!0,children:Object(an.jsx)(Co,{list:j,selectedFriendsIds:n,selectFriend:O})}),Object(an.jsx)(xn,{headerText:We("friendlist.friends.offlinecaption")+` (${h.length})`,children:Object(an.jsx)(Co,{list:h,selectedFriendsIds:n,selectFriend:O})}),Object(an.jsx)(No,{headerText:We("friendlist.tab.friendrequests")+` (${b.length})`,isExpanded:!0}),Object(an.jsx)(wo,{headerText:We("people.search.title")})]}),n&&n.length>0&&Object(an.jsxs)(hn,{gap:1,className:"p-1",children:[Object(an.jsx)(bn,{fullWidth:!0,onClick:()=>o(!0),children:We("friendlist.tip.invite")}),Object(an.jsx)(bn,{fullWidth:!0,variant:"danger",onClick:e=>u(!0),children:We("generic.delete")})]})]})]}),i&&Object(an.jsx)(So,{selectedFriendsIds:n,onCloseClick:()=>o(!1),sendRoomInvite:e=>{n.length&&e&&e.length&&!(e.length>255)&&(Ee(new a.Yh(e,n)),o(!1))}}),d&&Object(an.jsx)(To,{selectedFriendsIds:n,removeFriendsText:m,onCloseClick:()=>u(!1),removeSelectedFriends:()=>{0!==n.length&&(r((e=>(Ee(new a.hg(...e)),[]))),u(!1))}})]}):null},yo=e=>{const{thread:t=null,group:s=null}=e,n=Object(c.useMemo)((()=>s.type===Wt.GROUP_CHAT&&Ht(s.chats[0].extraData)),[s]),r=Object(c.useMemo)((()=>!(!t||!s)&&(s.type===Wt.PRIVATE_CHAT&&s.userId===F().userId||!(!n||!s.chats.length||n.userId!==F().userId))),[t,s,n]);return t&&s?s.userId?Object(an.jsxs)(hn,{fullWidth:!0,justifyContent:r?"end":"start",gap:2,children:[Object(an.jsxs)(on,{shrink:!0,className:"message-avatar",children:[s.type===Wt.PRIVATE_CHAT&&!r&&Object(an.jsx)(kn,{figure:t.participant.figure,direction:2}),n&&!r&&Object(an.jsx)(kn,{figure:n.figure,direction:2})]}),Object(an.jsxs)(on,{className:"bg-light text-black border-radius mb-2 rounded py-1 px-2 messages-group-"+(r?"right":"left"),children:[Object(an.jsxs)(on,{className:"fw-bold",children:[r&&F().userName,!r&&(n?n.username:t.participant.name)]}),s.chats.map(((e,t)=>Object(an.jsx)(on,{className:"text-break",children:e.message},t)))]}),r&&Object(an.jsx)(on,{shrink:!0,className:"message-avatar",children:Object(an.jsx)(kn,{figure:F().figure,direction:4})})]}):Object(an.jsx)(an.Fragment,{children:s.chats.map(((e,t)=>Object(an.jsx)(hn,{fullWidth:!0,gap:2,justifyContent:"start",children:Object(an.jsxs)(on,{className:"w-100 text-break",children:[e.type===Yt.SECURITY_NOTIFICATION&&Object(an.jsxs)(hn,{gap:2,alignItems:"center",className:"bg-light rounded mb-2 px-2 py-1 small text-muted",children:[Object(an.jsx)(on,{className:"nitro-friends-spritesheet icon-warning flex-shrink-0"}),Object(an.jsx)(on,{children:e.message})]}),e.type===Yt.ROOM_INVITE&&Object(an.jsxs)(hn,{gap:2,alignItems:"center",className:"bg-light rounded mb-2 px-2 py-1 small text-black",children:[Object(an.jsx)(on,{className:"messenger-notification-icon flex-shrink-0"}),Object(an.jsxs)(on,{children:[We("messenger.invitation")+" ",e.message]})]})]})},t)))}):null},ko=e=>{const{thread:t=null}=e;return t.setRead(),Object(an.jsx)(an.Fragment,{children:t.groups.length>0&&t.groups.map(((e,s)=>Object(an.jsx)(yo,{thread:t,group:e},s)))})},Ao=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)(-1),[i,o]=Object(c.useState)(""),{visibleThreads:d=[],activeThread:u=null,getMessageThread:j=null,sendMessage:h=null,setActiveThreadId:b=null,closeThread:g=null}=sc(),{report:m=null}=ic(),O=Object(c.useRef)(),p=()=>{u&&i.length&&(h(u,F().userId,i),o(""))};return Object(c.useEffect)((()=>{const e={linkReceived:e=>{const t=e.split("/");if(2===t.length){if("open"===t[1])return void s(!0);if("toggle"===t[1])return void s((e=>!e));const e=j(parseInt(t[1]));if(!e)return;b(e.threadId),s(!0)}},eventUrlPrefix:"friends-messenger/"};return l(e),()=>E(e)}),[j,b]),Object(c.useEffect)((()=>{t&&u&&(O.current.scrollTop=O.current.scrollHeight)}),[t,u]),Object(c.useEffect)((()=>{!t||u?!t&&u&&(r(u.threadId),b(-1)):n>0?b(n):d.length>0&&b(d[0].threadId)}),[t,u,n,d,b]),t?Object(an.jsxs)(yn,{className:"nitro-friends-messenger",uniqueKey:"nitro-friends-messenger",theme:"primary-slim",children:[Object(an.jsx)(vn,{headerText:We("messenger.window.title",["OPEN_CHAT_COUNT"],[d.length.toString()]),onCloseClick:e=>s(!1)}),Object(an.jsx)(In,{children:Object(an.jsxs)(un,{overflow:"hidden",children:[Object(an.jsxs)(Fn,{size:4,children:[Object(an.jsx)(ur,{bold:!0,children:We("toolbar.icon.label.messenger")}),Object(an.jsx)(Fn,{fullHeight:!0,overflow:"auto",children:d&&d.length>0&&d.map((e=>Object(an.jsxs)(Vn,{itemActive:u===e,onClick:t=>b(e.threadId),children:[e.unread&&Object(an.jsx)(Bn,{count:e.unreadCount}),Object(an.jsxs)(hn,{fullWidth:!0,alignItems:"center",gap:1,children:[Object(an.jsxs)(hn,{alignItems:"center",className:"friend-head px-1",children:[e.participant.id>0&&Object(an.jsx)(kn,{figure:e.participant.figure,headOnly:!0,direction:3}),e.participant.id<=0&&Object(an.jsx)(Dn,{isGroup:!0,badgeCode:e.participant.figure})]}),Object(an.jsx)(ur,{truncate:!0,grow:!0,children:e.participant.name})]})]},e.threadId)))})]}),Object(an.jsx)(Fn,{size:8,overflow:"hidden",children:u&&Object(an.jsxs)(an.Fragment,{children:[Object(an.jsx)(ur,{bold:!0,center:!0,children:We("messenger.window.separator",["FRIEND_NAME"],[u.participant.name])}),Object(an.jsxs)(hn,{alignItems:"center",justifyContent:"between",gap:1,children:[Object(an.jsxs)(hn,{gap:1,children:[Object(an.jsxs)(gn,{children:[Object(an.jsx)(bn,{onClick:()=>u&&u.participant&&Ee(new a.Tb(u.participant.id)),children:Object(an.jsx)(on,{className:"nitro-friends-spritesheet icon-follow"})}),Object(an.jsx)(bn,{onClick:()=>u&&u.participant&&Xs(u.participant.id),children:Object(an.jsx)(on,{className:"nitro-friends-spritesheet icon-profile-sm"})})]}),Object(an.jsx)(bn,{variant:"danger",onClick:()=>m(us.IM,{reportedUserId:u.participant.id}),children:We("messenger.window.button.report")})]}),Object(an.jsx)(bn,{onClick:e=>g(u.threadId),children:Object(an.jsx)(fn.a,{icon:"times"})})]}),Object(an.jsx)(Fn,{fit:!0,className:"bg-muted p-2 rounded chat-messages",children:Object(an.jsx)(Fn,{innerRef:O,overflow:"auto",children:Object(an.jsx)(ko,{thread:u})})}),Object(an.jsxs)(hn,{gap:1,children:[Object(an.jsx)("input",{type:"text",className:"form-control form-control-sm",maxLength:255,placeholder:We("messenger.window.input.default",["FRIEND_NAME"],[u.participant.name]),value:i,onChange:e=>o(e.target.value),onKeyDown:e=>{"Enter"===e.key&&p()}}),Object(an.jsx)(bn,{variant:"success",onClick:p,children:We("widgets.chatinput.say")})]})]})})]})})]}):null},Do=e=>{const{settings:t=null,onlineFriends:s=[]}=ec();return t?Object(an.jsxs)(an.Fragment,{children:[Object(Tn.createPortal)(Object(an.jsx)(Io,{onlineFriends:s}),document.getElementById("toolbar-friend-bar-container")),Object(an.jsx)(Ro,{}),Object(an.jsx)(Ao,{})]}):null},Lo=[0,1,2,3,4,5,6,7,8],Po=e=>{const{badgeParts:t=[],setBadgeParts:s=null}=e,[n,r]=Object(c.useState)(-1),{groupCustomize:i=null}=rc(),a=(e,n,c)=>{const i=[...t];i[e][n]=c,s(i),"key"===n&&r(-1)};return t&&t.length?Object(an.jsxs)(an.Fragment,{children:[n<0&&t&&t.length>0&&t.map(((e,s)=>Object(an.jsxs)(hn,{alignItems:"center",justifyContent:"between",gap:2,className:"bg-muted rounded px-2 py-1",children:[Object(an.jsxs)(hn,{pointer:!0,center:!0,className:"bg-muted rounded p-1",onClick:e=>r(s),children:[t[s].code&&t[s].code.length>0&&Object(an.jsx)(Dn,{badgeCode:t[s].code,isGroup:!0}),(!t[s].code||!t[s].code.length)&&Object(an.jsx)(hn,{center:!0,className:"badge-image group-badge",children:Object(an.jsx)(fn.a,{icon:"plus"})})]}),e.type!==es.BASE&&Object(an.jsx)(un,{gap:1,columnCount:3,children:Lo.map(((e,n)=>Object(an.jsx)(on,{pointer:!0,className:"group-badge-position-swatch "+(t[s].position===e?"active":""),onClick:t=>a(s,"position",e)},n)))}),Object(an.jsx)(un,{gap:1,columnCount:8,children:i.badgePartColors.length>0&&i.badgePartColors.map(((e,n)=>Object(an.jsx)(on,{pointer:!0,className:"group-badge-color-swatch "+(t[s].color===n+1?"active":""),style:{backgroundColor:"#"+e.color},onClick:e=>a(s,"color",n+1)},n)))})]},s))),n>=0&&Object(an.jsxs)(un,{gap:1,columnCount:5,children:[t[n].type===es.SYMBOL&&Object(an.jsx)(Fn,{pointer:!0,center:!0,className:"bg-muted rounded p-1",onClick:e=>a(n,"key",0),children:Object(an.jsx)(hn,{center:!0,className:"badge-image group-badge",children:Object(an.jsx)(fn.a,{icon:"times"})})}),(t[n].type===es.BASE?i.badgeBases:i.badgeSymbols).map(((e,s)=>Object(an.jsx)(Fn,{pointer:!0,center:!0,className:"bg-muted rounded p-1",onClick:t=>a(n,"key",e.id),children:Object(an.jsx)(Dn,{badgeCode:es.getCode(t[n].type,e.id,t[n].color,4),isGroup:!0})},s)))]})]}):null},Uo=e=>{const{groupData:t=null,setGroupData:s=null,setCloseAction:n=null,skipDefault:r=null}=e,[i,o]=Object(c.useState)(null),{groupCustomize:l=null}=rc(),d=Object(c.useCallback)((()=>{if(!t||!i||!i.length)return!1;if(t.groupBadgeParts===i)return!0;if(t.groupId<=0)return s((e=>{const t={...e};return t.groupBadgeParts=i,t})),!0;const e=[];return i.forEach((t=>{t.code&&(e.push(t.key),e.push(t.color),e.push(t.position))})),Ee(new a.wd(t.groupId,e)),!0}),[t,i,s]);return Object(c.useEffect)((()=>{if(t.groupBadgeParts)return;const e=[new es(es.BASE,l.badgeBases[0].id,l.badgePartColors[0].id),new es(es.SYMBOL,0,l.badgePartColors[0].id),new es(es.SYMBOL,0,l.badgePartColors[0].id),new es(es.SYMBOL,0,l.badgePartColors[0].id),new es(es.SYMBOL,0,l.badgePartColors[0].id)];s((t=>({...t,groupBadgeParts:e})))}),[t.groupBadgeParts,l,s]),Object(c.useEffect)((()=>{t.groupId<=0?o(t.groupBadgeParts?[...t.groupBadgeParts]:null):o(t.groupBadgeParts)}),[t]),Object(c.useEffect)((()=>(n({action:d}),()=>n(null))),[n,d]),Object(an.jsxs)(un,{overflow:"hidden",gap:1,children:[Object(an.jsx)(Fn,{size:2,children:Object(an.jsx)(hn,{center:!0,className:"bg-muted rounded p-1",children:Object(an.jsx)(Dn,{badgeCode:(()=>{if(!i||!i.length)return"";let e="";return i.forEach((t=>t.code&&(e+=t.code))),e})(),isGroup:!0})})}),Object(an.jsx)(Fn,{size:10,overflow:"auto",children:Object(an.jsx)(Po,{badgeParts:i,setBadgeParts:o})})]})},Mo=e=>{const{groupData:t=null,setGroupData:s=null,setCloseAction:n=null}=e,[r,i]=Object(c.useState)(null),{groupCustomize:o=null}=rc(),l=e=>0===e?o.groupColorsA.find((t=>t.id===r[e])).color:o.groupColorsB.find((t=>t.id===r[e])).color,d=(e,t)=>{i((s=>{const n=[...s];return n[e]=t,n}))},u=Object(c.useCallback)((()=>!!(t&&r&&r.length)&&(t.groupColors===r||(t.groupId<=0?(s((e=>{const t={...e};return t.groupColors=[...r],t})),!0):(Ee(new a.xd(t.groupId,r[0],r[1])),!0)))),[t,r,s]);return Object(c.useEffect)((()=>{if(!o.groupColorsA||!o.groupColorsB||t.groupColors)return;const e=[o.groupColorsA[0].id,o.groupColorsB[0].id];s((t=>({...t,groupColors:e})))}),[o,t.groupColors,s]),Object(c.useEffect)((()=>{t.groupId<=0?i(t.groupColors?[...t.groupColors]:null):i(t.groupColors)}),[t]),Object(c.useEffect)((()=>(n({action:u}),()=>n(null))),[n,u]),r?Object(an.jsxs)(un,{overflow:"hidden",children:[Object(an.jsxs)(Fn,{size:2,gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:We("group.edit.color.guild.color")}),t.groupColors&&t.groupColors.length>0&&Object(an.jsxs)(hn,{overflow:"hidden",className:"rounded border",children:[Object(an.jsx)(on,{className:"group-color-swatch",style:{backgroundColor:"#"+l(0)}}),Object(an.jsx)(on,{className:"group-color-swatch",style:{backgroundColor:"#"+l(1)}})]})]}),Object(an.jsxs)(Fn,{size:5,gap:1,overflow:"hidden",children:[Object(an.jsx)(ur,{bold:!0,children:We("group.edit.color.primary.color")}),Object(an.jsx)(jn,{gap:1,columnCount:7,columnMinWidth:16,columnMinHeight:16,children:t.groupColors&&o.groupColorsA&&o.groupColorsA.map(((e,s)=>Object(an.jsx)("div",{className:"group-badge-color-swatch cursor-pointer"+Xi()({" active":t.groupColors[0]===e.id}),style:{backgroundColor:"#"+e.color},onClick:()=>d(0,e.id)},s)))})]}),Object(an.jsxs)(Fn,{size:5,gap:1,overflow:"hidden",children:[Object(an.jsx)(ur,{bold:!0,children:We("group.edit.color.secondary.color")}),Object(an.jsx)(jn,{gap:1,columnCount:7,columnMinWidth:16,columnMinHeight:16,children:t.groupColors&&o.groupColorsB&&o.groupColorsB.map(((e,s)=>Object(an.jsx)("div",{className:"group-badge-color-swatch cursor-pointer"+Xi()({" active":t.groupColors[1]===e.id}),style:{backgroundColor:"#"+e.color},onClick:()=>d(1,e.id)},s)))})]})]}):null},Fo=e=>{const{groupData:t=null,setGroupData:s=null,purchaseCost:n=0}=e,{groupCustomize:r=null}=rc(),c=e=>0===e?r.groupColorsA.find((s=>s.id===t.groupColors[e])).color:r.groupColorsB.find((s=>s.id===t.groupColors[e])).color;return t?Object(an.jsxs)(un,{overflow:"hidden",gap:1,children:[Object(an.jsxs)(Fn,{size:3,children:[Object(an.jsxs)(Fn,{center:!0,className:"bg-muted rounded p-1",gap:2,children:[Object(an.jsx)(ur,{bold:!0,center:!0,children:We("group.create.confirm.guildbadge")}),Object(an.jsx)(Dn,{badgeCode:(()=>{if(!t||!t.groupBadgeParts||!t.groupBadgeParts.length)return"";let e="";return t.groupBadgeParts.forEach((t=>t.code&&(e+=t.code))),e})(),isGroup:!0})]}),Object(an.jsxs)(Fn,{center:!0,className:"bg-muted rounded p-1",gap:2,children:[Object(an.jsx)(ur,{bold:!0,center:!0,children:We("group.edit.color.guild.color")}),Object(an.jsxs)(hn,{overflow:"hidden",className:"rounded border",children:[Object(an.jsx)(on,{className:"group-color-swatch",style:{backgroundColor:"#"+c(0)}}),Object(an.jsx)(on,{className:"group-color-swatch",style:{backgroundColor:"#"+c(1)}})]})]})]}),Object(an.jsxs)(Fn,{size:9,justifyContent:"between",children:[Object(an.jsxs)(Fn,{children:[Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:t.groupName}),Object(an.jsx)(ur,{children:t.groupDescription})]}),Object(an.jsx)(ur,{overflow:"auto",children:We("group.create.confirm.info")})]}),Object(an.jsx)(ur,{center:!0,variant:"white",className:"bg-primary rounded p-1",children:We("group.create.confirm.buyinfo",["amount"],[n.toString()])})]})]}):null},Bo=e=>{const{groupData:t=null,setGroupData:s=null,setCloseAction:n=null,onClose:r=null,isCreator:i=!1,availableRooms:o=[]}=e,[l,d]=Object(c.useState)(""),[u,j]=Object(c.useState)(""),[h,b]=Object(c.useState)(-1),{showConfirm:g=null}=Hr(),O=Object(c.useCallback)((()=>!!(t&&l&&l.length)&&(l===t.groupName&&u===t.groupDescription||(t.groupId<=0?!(h<=0)&&(s((e=>{const t={...e};return t.groupName=l,t.groupDescription=u,t.groupHomeroomId=h,t})),!0):(Ee(new a.yd(t.groupId,l,u||"")),!0)))),[t,l,u,h,s]);return Object(c.useEffect)((()=>{d(t.groupName||""),j(t.groupDescription||""),b(t.groupHomeroomId)}),[t]),Object(c.useEffect)((()=>(n({action:O}),()=>n(null))),[n,O]),t?Object(an.jsxs)(Fn,{justifyContent:"between",overflow:"auto",children:[Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)(ur,{center:!0,className:"col-3",children:We("group.edit.name")}),Object(an.jsx)("input",{type:"text",className:"form-control form-control-sm",value:l,maxLength:29,onChange:e=>d(e.target.value)})]}),Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)(ur,{center:!0,className:"col-3",children:We("group.edit.desc")}),Object(an.jsx)("textarea",{className:"form-control form-control-sm",value:u,maxLength:254,onChange:e=>j(e.target.value)})]}),i&&Object(an.jsxs)(an.Fragment,{children:[Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)(ur,{center:!0,className:"col-3",children:We("group.edit.base")}),Object(an.jsx)(Fn,{fullWidth:!0,gap:1,children:Object(an.jsxs)("select",{className:"form-select form-select-sm",value:h,onChange:e=>b(parseInt(e.target.value)),children:[Object(an.jsx)("option",{value:-1,disabled:!0,children:We("group.edit.base.select.room")}),o&&o.map(((e,t)=>Object(an.jsx)("option",{value:e.id,children:e.name},t)))]})})]}),Object(an.jsxs)(hn,{gap:1,children:[Object(an.jsx)(on,{className:"col-3",children:"\xa0"}),Object(an.jsx)(ur,{small:!0,children:We("group.edit.base.warning")})]})]})]}),!i&&Object(an.jsx)(bn,{variant:"danger",onClick:()=>{!t||t.groupId<=0||g(We("group.deleteconfirm.desc"),(()=>{Ee(new a.jd(t.groupId)),r&&r()}),null,null,null,We("group.deleteconfirm.title"))},children:We("group.delete")}),i&&Object(an.jsx)(ur,{underline:!0,center:!0,fullWidth:!0,pointer:!0,onClick:e=>m("navigator/create"),children:We("group.createroom")})]}):null},Ho=[1,2,3,4],Go=e=>{const{onClose:t=null}=e,[s,n]=Object(c.useState)(1),[r,i]=Object(c.useState)(null),[o,l]=Object(c.useState)(null),[d,u]=Object(c.useState)(null),[j,h]=Object(c.useState)(0);return pr(a.gd,(e=>{const t=e.getParser(),s=[];t.availableRooms.forEach(((e,t)=>s.push({id:t,name:e}))),u(s),h(t.groupCost)})),Object(c.useEffect)((()=>{n(1),l({groupId:-1,groupName:null,groupDescription:null,groupHomeroomId:-1,groupState:1,groupCanMembersDecorate:!0,groupColors:null,groupBadgeParts:null}),Ee(new a.fd)}),[l]),o?Object(an.jsxs)(yn,{className:"nitro-group-creator",theme:"primary-slim",children:[Object(an.jsx)(vn,{headerText:We("group.create.title"),onCloseClick:()=>{i(null),l(null),t&&t()}}),Object(an.jsxs)(In,{children:[Object(an.jsx)(hn,{center:!0,className:"creator-tabs",children:Ho.map(((e,t)=>Object(an.jsx)(hn,{center:!0,className:`tab tab-${1===e?"blue-flat":4===e?"yellow":"blue-arrow"} ${s===e?"active":""}`,children:Object(an.jsx)(ur,{variant:"white",children:We(`group.create.steplabel.${e}`)})},t)))}),Object(an.jsxs)(Fn,{overflow:"hidden",children:[Object(an.jsxs)(hn,{alignItems:"center",gap:2,children:[Object(an.jsx)(on,{className:`nitro-group-tab-image tab-${s}`}),Object(an.jsxs)(Fn,{grow:!0,gap:0,children:[Object(an.jsx)(ur,{bold:!0,fontSize:4,children:We(`group.create.stepcaption.${s}`)}),Object(an.jsx)(ur,{children:We(`group.create.stepdesc.${s}`)})]})]}),Object(an.jsxs)(Fn,{overflow:"hidden",children:[1===s&&Object(an.jsx)(Bo,{groupData:o,setGroupData:l,setCloseAction:i,onClose:null,isCreator:!0,availableRooms:d}),2===s&&Object(an.jsx)(Uo,{groupData:o,setGroupData:l,setCloseAction:i}),3===s&&Object(an.jsx)(Mo,{groupData:o,setGroupData:l,setCloseAction:i}),4===s&&Object(an.jsx)(Fo,{groupData:o,setGroupData:l,purchaseCost:j})]}),Object(an.jsxs)(hn,{justifyContent:"between",children:[Object(an.jsx)(bn,{variant:"link",className:"text-black",onClick:()=>{r&&r.action&&!r.action()||(1!==s?n((e=>e-1)):t())},children:We(1===s?"generic.cancel":"group.create.previousstep")}),Object(an.jsx)(bn,{disabled:4===s&&!ge(),variant:4===s?ge()?"success":"danger":"primary",onClick:()=>{r&&r.action&&!r.action()||(4!==s?n((e=>4===e?e:e+1)):(()=>{if(!o)return;const e=[];o.groupBadgeParts.forEach((t=>{t.code&&(e.push(t.key),e.push(t.color),e.push(t.position))})),Ee(new a.ed(o.groupName,o.groupDescription,o.groupHomeroomId,o.groupColors[0],o.groupColors[1],e))})())},children:We(4===s?ge()?"group.create.confirm.buy":"group.create.confirm.viprequired":"group.create.nextstep")})]})]})]})]}):null},Wo=["regular","exclusive","private"],Vo=e=>{const{groupInformation:t=null,onClose:s=null,overflow:n="hidden",...r}=e,{showConfirm:i=null}=Hr(),o=t&&t.ownerName===F().userName,l=Object(c.useCallback)((e=>{switch(e){case"members":Zt(t.id);break;case"members_pending":Zt(t.id,2);break;case"manage":Jt(t.id);break;case"homeroom":ps(t.roomId);break;case"furniture":m("catalog/open/"+V.GUILD_CUSTOM_FURNI);break;case"popular_groups":m("navigator/search/groups")}}),[t]);return t?Object(an.jsxs)(un,{overflow:n,...r,children:[Object(an.jsxs)(Fn,{center:!0,size:3,overflow:"hidden",children:[Object(an.jsx)(hn,{alignItems:"center",overflow:"hidden",className:"group-badge",children:Object(an.jsx)(Dn,{badgeCode:t.badge,isGroup:!0,scale:2})}),Object(an.jsxs)(Fn,{alignItems:"center",gap:1,children:[Object(an.jsx)(ur,{small:!0,underline:!0,pointer:!0,onClick:()=>l("members"),children:We("group.membercount",["totalMembers"],[t.membersCount.toString()])}),t.pendingRequestsCount>0&&Object(an.jsx)(ur,{small:!0,underline:!0,pointer:!0,onClick:()=>l("members_pending"),children:We("group.pendingmembercount",["amount"],[t.pendingRequestsCount.toString()])}),t.isOwner&&Object(an.jsx)(ur,{small:!0,underline:!0,pointer:!0,onClick:()=>l("manage"),children:We("group.manage")})]}),t.membershipType===ts.NOT_MEMBER||t.membershipType===ts.REQUEST_PENDING?null:o?Object(an.jsx)("i",{className:"icon icon-group-owner",title:We("group.youareowner")}):t.isAdmin?Object(an.jsx)("i",{className:"icon icon-group-admin",title:We("group.youareadmin")}):Object(an.jsx)("i",{className:"icon icon-group-member",title:We("group.youaremember")})]}),Object(an.jsxs)(Fn,{size:9,justifyContent:"between",overflow:"auto",children:[Object(an.jsxs)(Fn,{overflow:"hidden",children:[Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsxs)(hn,{alignItems:"center",gap:2,children:[Object(an.jsx)(ur,{bold:!0,children:t.title}),Object(an.jsxs)(hn,{gap:1,children:[Object(an.jsx)("i",{className:"icon icon-group-type-"+t.type,title:We(`group.edit.settings.type.${Wo[t.type]}.help`)}),t.canMembersDecorate&&Object(an.jsx)("i",{className:"icon icon-group-decorate",title:We("group.memberscandecorate")})]})]}),Object(an.jsx)(ur,{small:!0,children:We("group.created",["date","owner"],[t.createdAt,t.ownerName])})]}),Object(an.jsx)(ur,{small:!0,overflow:"auto",className:"group-description",children:t.description})]}),Object(an.jsxs)(Fn,{children:[Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{small:!0,underline:!0,pointer:!0,onClick:()=>l("homeroom"),children:We("group.linktobase")}),Object(an.jsx)(ur,{small:!0,underline:!0,pointer:!0,onClick:()=>l("furniture"),children:We("group.buyfurni")}),Object(an.jsx)(ur,{small:!0,underline:!0,pointer:!0,onClick:()=>l("popular_groups"),children:We("group.showgroups")})]}),t.type!==ss.PRIVATE&&Object(an.jsx)(bn,{disabled:t.membershipType===ts.REQUEST_PENDING||o,onClick:()=>{t.type===ss.PRIVATE&&t.membershipType===ts.NOT_MEMBER||(t.membershipType!==ts.MEMBER?t&&ns(t.id):i(We("group.leaveconfirm.desc"),(()=>{Ee(new a.vd(t.id,F().userId)),s&&s()}),null))},children:We(o?"group.youareowner":t.type===ss.PRIVATE?"":t.membershipType===ts.MEMBER?"group.leave":t.membershipType===ts.NOT_MEMBER&&t.type===ss.REGULAR?"group.join":t.membershipType===ts.REQUEST_PENDING?"group.membershippending":t.membershipType===ts.NOT_MEMBER&&t.type===ss.EXCLUSIVE?"group.requestmembership":void 0)})]})]})]}):null},qo=e=>{const[t,s]=Object(c.useState)(null);return pr(a.nd,(e=>{const n=e.getParser();(t&&t.id===n.id||n.flag)&&s(n)})),t?Object(an.jsxs)(yn,{className:"nitro-group-information-standalone",theme:"primary-slim",children:[Object(an.jsx)(vn,{headerText:We("group.window.title"),onCloseClick:e=>s(null)}),Object(an.jsx)(In,{children:Object(an.jsx)(Vo,{groupInformation:t,onClose:()=>s(null)})})]}):null},zo=["regular","exclusive","private"],Yo=e=>{const{groupData:t=null,setGroupData:s=null,setCloseAction:n=null}=e,[r,i]=Object(c.useState)(t.groupState),[o,l]=Object(c.useState)(t.groupCanMembersDecorate),d=Object(c.useCallback)((()=>!!t&&(r===t.groupState&&o===t.groupCanMembersDecorate||(t.groupId<=0?(s((e=>{const t={...e};return t.groupState=r,t.groupCanMembersDecorate=o,t})),!0):(Ee(new a.zd(t.groupId,r,o?0:1)),!0)))),[t,r,o,s]);return Object(c.useEffect)((()=>{i(t.groupState),l(t.groupCanMembersDecorate)}),[t]),Object(c.useEffect)((()=>(n({action:d}),()=>n(null))),[n,d]),Object(an.jsxs)(Fn,{overflow:"auto",children:[Object(an.jsx)(Fn,{children:zo.map(((e,t)=>Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)("input",{className:"form-check-input",type:"radio",name:"groupState",checked:r===t,onChange:e=>i(t)}),Object(an.jsxs)(Fn,{gap:0,children:[Object(an.jsxs)(hn,{gap:1,children:[Object(an.jsx)("i",{className:`icon icon-group-type-${t}`}),Object(an.jsx)(ur,{bold:!0,children:We(`group.edit.settings.type.${e}.label`)})]}),Object(an.jsx)(ur,{children:We(`group.edit.settings.type.${e}.help`)})]})]},t)))}),Object(an.jsx)(dr,{}),Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)("input",{className:"form-check-input",type:"checkbox",checked:o,onChange:e=>l((e=>!e))}),Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:We("group.edit.settings.rights.caption")}),Object(an.jsx)(ur,{children:We("group.edit.settings.rights.members.help")})]})]})]})},$o=[1,2,3,5],Ko=e=>{const[t,s]=Object(c.useState)(1),[n,r]=Object(c.useState)(null),[i,o]=Object(c.useState)(null),l=()=>{r((e=>(e&&e.action&&e.action(),null))),o(null)};return pr(a.nd,(e=>{const t=e.getParser();i&&i.groupId===t.id&&o((e=>{const s={...e};return s.groupName=t.title,s.groupDescription=t.description,s.groupState=t.type,s.groupCanMembersDecorate=t.canMembersDecorate,s}))})),pr(a.Bd,(e=>{const t=e.getParser(),s=[];t.badgeParts.forEach(((e,t)=>{s.push(new a.bd(e.isBase?a.bd.BASE:a.bd.SYMBOL,e.key,e.color,e.position))})),o({groupId:t.id,groupName:t.title,groupDescription:t.description,groupHomeroomId:t.roomId,groupState:t.state,groupCanMembersDecorate:t.canMembersDecorate,groupColors:[t.colorA,t.colorB],groupBadgeParts:s})})),!i||i.groupId<=0?null:Object(an.jsxs)(yn,{className:"nitro-group-manager",children:[Object(an.jsx)(vn,{headerText:We("group.window.title"),onCloseClick:l}),Object(an.jsx)(or,{children:$o.map((e=>Object(an.jsx)(ar,{isActive:t===e,onClick:()=>(e=>{n&&n.action&&n.action(),s(e)})(e),children:We(`group.edit.tab.${e}`)},e)))}),Object(an.jsxs)(In,{children:[Object(an.jsxs)(hn,{alignItems:"center",gap:2,children:[Object(an.jsx)(on,{className:`nitro-group-tab-image tab-${t}`}),Object(an.jsxs)(Fn,{grow:!0,gap:0,children:[Object(an.jsx)(ur,{bold:!0,fontSize:4,children:We(`group.edit.tabcaption.${t}`)}),Object(an.jsx)(ur,{children:We(`group.edit.tabdesc.${t}`)})]})]}),Object(an.jsxs)(Fn,{grow:!0,overflow:"hidden",children:[1===t&&Object(an.jsx)(Bo,{groupData:i,setGroupData:o,setCloseAction:r,onClose:l}),2===t&&Object(an.jsx)(Uo,{groupData:i,setGroupData:o,setCloseAction:r,skipDefault:!0}),3===t&&Object(an.jsx)(Mo,{groupData:i,setGroupData:o,setCloseAction:r}),5===t&&Object(an.jsx)(Yo,{groupData:i,setGroupData:o,setCloseAction:r})]})]})]})},Xo=e=>{const[t,s]=Object(c.useState)(-1),[n,r]=Object(c.useState)(-1),[i,o]=Object(c.useState)(null),[d,u]=Object(c.useState)(-1),[j,h]=Object(c.useState)(0),[b,g]=Object(c.useState)(""),[m,O]=Object(c.useState)(null),{showConfirm:p=null}=Hr(),f=e=>{if(e.rank===a.ud.OWNER)return"group.members.owner";if(i.admin){if(e.rank===a.ud.ADMIN)return"group.members.removerights";if(e.rank===a.ud.MEMBER)return"group.members.giverights"}return""},x=Object(c.useCallback)((()=>{-1!==t&&-1!==n&&-1!==d&&Ee(new a.pd(t,d,b,n))}),[t,n,d,b]);return pr(a.qd,(e=>{const t=e.getParser();o(t),r(t.level),h(Math.ceil(t.totalMembersCount/t.pageSize))})),pr(a.hd,(e=>{const t=e.getParser();p(We(t.furnitureCount>0?"group.kickconfirm.desc":"group.kickconfirm_nofurni.desc",["user","amount"],[m,t.furnitureCount.toString()]),(()=>{Ee(new a.vd(i.groupId,t.userId)),x()}),null),O(null)})),Object(c.useEffect)((()=>{const e={linkReceived:e=>{const t=e.split("/");if(t.length<2)return;const n=parseInt(t[1])||-1,c=parseInt(t[2])||3;s(n),r(c),u(0)},eventUrlPrefix:"group-members/"};return l(e),()=>E(e)}),[]),Object(c.useEffect)((()=>{u(0)}),[t,n,b]),Object(c.useEffect)((()=>{-1!==t&&-1!==n&&-1!==d&&Ee(new a.pd(t,d,b,n))}),[t,n,d,b]),Object(c.useEffect)((()=>{-1!==t&&(r(-1),o(null),h(0),g(""),O(null))}),[t]),-1!==t&&i?Object(an.jsxs)(yn,{className:"nitro-group-members",theme:"primary-slim",children:[Object(an.jsx)(vn,{headerText:We("group.members.title",["groupName"],[i?i.groupTitle:""]),onCloseClick:e=>s(-1)}),Object(an.jsxs)(In,{overflow:"hidden",children:[Object(an.jsxs)(hn,{gap:2,children:[Object(an.jsx)(hn,{center:!0,className:"group-badge",children:Object(an.jsx)(Dn,{badgeCode:i.badge,isGroup:!0,className:"mx-auto d-block"})}),Object(an.jsxs)(Fn,{fullWidth:!0,gap:1,children:[Object(an.jsx)("input",{type:"text",className:"form-control form-control-sm w-100",placeholder:We("group.members.searchinfo"),value:b,onChange:e=>g(e.target.value)}),Object(an.jsxs)("select",{className:"form-select form-select-sm w-100",value:n,onChange:e=>r(parseInt(e.target.value)),children:[Object(an.jsx)("option",{value:"0",children:We("group.members.search.all")}),Object(an.jsx)("option",{value:"1",children:We("group.members.search.admins")}),Object(an.jsx)("option",{value:"2",children:We("group.members.search.pending")})]})]})]}),Object(an.jsx)(un,{columnCount:2,overflow:"auto",className:"nitro-group-members-list-grid",children:i.result.map(((e,t)=>Object(an.jsxs)(hn,{gap:2,alignItems:"center",overflow:"hidden",className:"member-list-item bg-white rounded p-2",children:[Object(an.jsx)("div",{className:"avatar-head cursor-pointer",onClick:()=>Xs(e.id),children:Object(an.jsx)(kn,{figure:e.figure,headOnly:!0,direction:2})}),Object(an.jsxs)(Fn,{grow:!0,gap:1,children:[Object(an.jsx)(ur,{bold:!0,small:!0,pointer:!0,onClick:t=>Xs(e.id),children:e.name}),e.rank!==a.ud.REQUESTED&&Object(an.jsx)(ur,{small:!0,italics:!0,variant:"muted",children:We("group.members.since",["date"],[e.joinedAt])})]}),Object(an.jsxs)(Fn,{gap:1,children:[e.rank!==a.ud.REQUESTED&&Object(an.jsx)(hn,{center:!0,children:Object(an.jsx)(on,{pointer:i.admin,className:"icon icon-group-small-"+(e.rank===a.ud.OWNER?"owner":e.rank===a.ud.ADMIN?"admin":i.admin&&e.rank===a.ud.MEMBER?"not-admin":""),title:We(f(e)),onClick:t=>(e=>{i.admin&&e.rank!==a.ud.OWNER&&(e.rank!==a.ud.ADMIN?Ee(new a.Zc(i.groupId,e.id)):Ee(new a.ad(i.groupId,e.id)),x())})(e)})}),i.admin&&e.rank===a.ud.REQUESTED&&Object(an.jsx)(hn,{alignItems:"center",children:Object(an.jsx)(on,{pointer:!0,className:"nitro-friends-spritesheet icon-accept",title:We("group.members.accept"),onClick:t=>(e=>{i.admin&&e.rank===a.ud.REQUESTED&&(Ee(new a.rd(i.groupId,e.id)),x())})(e)})}),i.admin&&e.rank!==a.ud.OWNER&&e.id!==F().userId&&Object(an.jsx)(hn,{alignItems:"center",children:Object(an.jsx)(on,{pointer:!0,className:"nitro-friends-spritesheet icon-deny",title:We(e.rank===a.ud.REQUESTED?"group.members.reject":"group.members.kick"),onClick:t=>(e=>{if(i.admin){if(e.rank===a.ud.REQUESTED)return Ee(new a.sd(i.groupId,e.id)),void x();O(e.name),Ee(new a.id(i.groupId,e.id))}})(e)})})]})]},t)))}),Object(an.jsxs)(hn,{gap:1,justifyContent:"between",alignItems:"center",children:[Object(an.jsx)(bn,{disabled:0===i.pageIndex,onClick:e=>u((e=>e-1)),children:Object(an.jsx)(fn.a,{icon:"chevron-left"})}),Object(an.jsx)(ur,{small:!0,children:We("group.members.pageinfo",["amount","page","totalPages"],[i.totalMembersCount.toString(),(i.pageIndex+1).toString(),j.toString()])}),Object(an.jsx)(bn,{disabled:i.pageIndex===j-1,onClick:e=>u((e=>e+1)),children:Object(an.jsx)(fn.a,{icon:"chevron-right"})})]})]})]}):null},Qo=e=>{const[t,s]=Object(c.useState)(!1),{}=rc();return pr(a.td,(e=>{const t=e.getParser();s(!1),ps(t.roomId)})),Object(c.useEffect)((()=>{const e={linkReceived:e=>{const t=e.split("/");if(!(t.length<2))switch(t[1]){case"create":return void s(!0);case"manage":if(!t[2])return;return s(!1),void Ee(new a.Ad(Number(t[2])))}},eventUrlPrefix:"groups/"};return l(e),()=>E(e)}),[]),Object(an.jsxs)(an.Fragment,{children:[t&&Object(an.jsx)(Go,{onClose:()=>s(!1)}),!t&&Object(an.jsx)(Ko,{}),Object(an.jsx)(Xo,{}),Object(an.jsx)(qo,{})]})},Jo=e=>{const{helpRequestDescription:t=null,helpRequestAverageTime:s=0}=e,n=e=>Ee(new a.Kd(e));return Object(an.jsxs)(Fn,{children:[Object(an.jsxs)(Fn,{gap:0,className:"bg-muted p-2 rounded",children:[Object(an.jsx)(ur,{bold:!0,children:We("guide.help.request.guide.accept.request.title")}),Object(an.jsx)(ur,{variant:"muted",children:We("guide.help.request.type.1")}),Object(an.jsx)(ur,{wrap:!0,textBreak:!0,children:t})]}),Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(bn,{variant:"success",onClick:e=>n(!0),children:We("guide.help.request.guide.accept.accept.button")}),Object(an.jsx)(bn,{variant:"danger",onClick:e=>n(!1),children:We("guide.help.request.guide.accept.skip.link")})]})]})},Zo=e=>{const{isOnDuty:t=!1,isHandlingGuideRequests:s=!1,setIsHandlingGuideRequests:n=null,isHandlingHelpRequests:r=!1,setIsHandlingHelpRequests:c=null,isHandlingBullyReports:i=!1,setIsHandlingBullyReports:a=null,guidesOnDuty:o=0,helpersOnDuty:l=0,guardiansOnDuty:d=0,processAction:u=null}=e;return Object(an.jsxs)(Fn,{children:[Object(an.jsxs)(hn,{alignItems:"center",gap:2,className:"bg-muted p-2 rounded",children:[Object(an.jsx)(on,{className:"duty-switch"+(t?"":" off"),onClick:e=>u("toggle_duty")}),Object(an.jsxs)(Fn,{gap:0,children:[Object(an.jsx)(ur,{bold:!0,children:We("guide.help.guide.tool.yourstatus")}),Object(an.jsx)(ur,{children:We("guide.help.guide.tool.duty."+(t?"on":"off"))})]})]}),Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:We("guide.help.guide.tool.tickettypeselection.caption")}),Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)("input",{className:"form-check-input",disabled:t,type:"checkbox",checked:s,onChange:e=>n(e.target.checked)}),Object(an.jsx)(ur,{children:We("guide.help.guide.tool.tickettypeselection.guiderequests")})]}),Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)("input",{className:"form-check-input",disabled:t,type:"checkbox",checked:r,onChange:e=>c(e.target.checked)}),Object(an.jsx)(ur,{children:We("guide.help.guide.tool.tickettypeselection.onlyhelprequests")})]}),Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)("input",{className:"form-check-input",disabled:t,type:"checkbox",checked:i,onChange:e=>a(e.target.checked)}),Object(an.jsx)(ur,{children:We("guide.help.guide.tool.tickettypeselection.bullyreports")})]})]}),Object(an.jsx)("hr",{className:"bg-dark m-0"}),Object(an.jsxs)(hn,{center:!0,gap:2,children:[Object(an.jsx)(on,{className:"info-icon"}),Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(on,{dangerouslySetInnerHTML:{__html:We("guide.help.guide.tool.guidesonduty",["amount"],[o.toString()])}}),Object(an.jsx)(on,{dangerouslySetInnerHTML:{__html:We("guide.help.guide.tool.helpersonduty",["amount"],[l.toString()])}}),Object(an.jsx)(on,{dangerouslySetInnerHTML:{__html:We("guide.help.guide.tool.guardiansonduty",["amount"],[d.toString()])}})]})]}),Object(an.jsx)("hr",{className:"bg-dark m-0"}),Object(an.jsxs)(hn,{justifyContent:"between",gap:2,children:[Object(an.jsx)(bn,{disabled:!0,onClick:e=>u("forum_link"),children:We("guide.help.guide.tool.forum.link")}),Object(an.jsx)(bn,{disabled:!0,children:We("guide.help.guide.tool.skill.link")})]})]})},el=e=>{const t=Object(c.useRef)(null),{isGuide:s=!1,userId:n=0,userName:r=null,userFigure:i=null,isTyping:o=!1,messageGroups:l=[]}=e,[d,u]=Object(c.useState)("");Object(c.useEffect)((()=>{var e;null===(e=t.current)||void 0===e||e.scrollIntoView({block:"end",behavior:"smooth"})}),[l]);const j=Object(c.useCallback)((()=>{Ee(new a.Jd)}),[]),h=Object(c.useCallback)((()=>{Ee(new a.Ld)}),[]),b=Object(c.useCallback)((()=>{Ee(new a.Td)}),[]);pr(a.Sd,(e=>{ps(e.getParser().requesterRoomId)}));const g=Object(c.useCallback)((()=>{d&&d.length&&(Ee(new a.Nd(d)),u(""))}),[d]),m=Object(c.useCallback)((e=>{"Enter"===e.key&&g()}),[g]),O=Object(c.useCallback)((e=>e===F().userId),[]);return Object(an.jsxs)(Fn,{fullHeight:!0,children:[Object(an.jsxs)(hn,{alignItems:"center",justifyContent:"between",gap:1,className:"bg-muted p-2 rounded",children:[s&&Object(an.jsxs)(gn,{children:[Object(an.jsx)(bn,{onClick:j,children:We("guide.help.request.guide.ongoing.visit.button")}),Object(an.jsx)(bn,{disabled:!0,onClick:h,children:We("guide.help.request.guide.ongoing.invite.button")})]}),!s&&Object(an.jsxs)(Fn,{gap:0,children:[Object(an.jsx)(ur,{bold:!0,children:r}),Object(an.jsx)(ur,{children:We("guide.help.request.user.ongoing.guide.desc")})]}),Object(an.jsx)(bn,{variant:"danger",disabled:!0,children:We("guide.help.common.report.link")})]}),Object(an.jsx)(Fn,{overflow:"hidden",gap:1,className:"bg-muted rounded chat-messages p-2",children:Object(an.jsxs)(Fn,{overflow:"auto",children:[l.map(((e,t)=>Object(an.jsxs)(hn,{fullWidth:!0,justifyContent:O(e.userId)?"end":"start",gap:2,children:[Object(an.jsx)(on,{shrink:!0,className:"message-avatar",children:!O(e.userId)&&Object(an.jsx)(kn,{figure:i,direction:2})}),Object(an.jsxs)(on,{className:"bg-light text-black border-radius mb-2 rounded py-1 px-2 messages-group-"+(O(e.userId)?"right":"left"),children:[Object(an.jsxs)(ur,{bold:!0,children:[O(e.userId)&&F().userName,!O(e.userId)&&r]}),e.messages.map(((e,t)=>Object(an.jsx)(on,{className:"text-break",children:e.message},t)))]}),O(e.userId)&&Object(an.jsx)(on,{className:"message-avatar flex-shrink-0",children:Object(an.jsx)(kn,{figure:F().figure,direction:4})})]},t))),Object(an.jsx)("div",{ref:t})]})}),Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsxs)(hn,{gap:1,children:[Object(an.jsx)("input",{type:"text",className:"form-control form-control-sm",placeholder:We("guide.help.request.guide.ongoing.input.empty",["name"],[r]),value:d,onChange:e=>u(e.target.value),onKeyDown:m}),Object(an.jsx)(bn,{variant:"success",onClick:g,children:We("widgets.chatinput.say")})]}),o&&Object(an.jsx)(ur,{variant:"muted",children:We("guide.help.common.typing")})]}),Object(an.jsx)(bn,{fullWidth:!0,variant:"success",onClick:b,children:We("guide.help.request."+(s?"guide":"user")+".ongoing.close.link")})]})},tl=e=>{const{userRequest:t="",setUserRequest:s=null}=e,[n,r]=Object(c.useState)(!1);return Object(an.jsxs)(Fn,{children:[Object(an.jsx)(ur,{children:We("guide.help.request.user.create.help")}),Object(an.jsx)("textarea",{className:"request-message",maxLength:140,value:t,onChange:e=>s(e.target.value),placeholder:We("guide.help.request.user.create.input.help")}),Object(an.jsx)(bn,{fullWidth:!0,variant:"success",disabled:t.length<15||n,onClick:()=>{r(!0),Ee(new a.Fd(1,t))},children:We("guide.help.request.user.create.input.button")})]})},sl=e=>{const{userName:t=null}=e,s=Object(c.useCallback)((e=>{Ee(new a.Id(e))}),[]);return Object(an.jsxs)(Fn,{children:[Object(an.jsxs)(hn,{justifyContent:"between",gap:1,className:"bg-muted p-2 rounded",children:[Object(an.jsxs)(Fn,{gap:0,children:[Object(an.jsx)(ur,{bold:!0,children:t}),Object(an.jsx)(ur,{children:We("guide.help.request.user.feedback.guide.desc")})]}),Object(an.jsx)(bn,{variant:"danger",disabled:!0,children:We("guide.help.common.report.link")})]}),Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:We("guide.help.request.user.feedback.closed.title")}),Object(an.jsx)(ur,{children:We("guide.help.request.user.feedback.closed.desc")})]}),t&&t.length>0&&Object(an.jsxs)(an.Fragment,{children:[Object(an.jsx)("hr",{className:"bg-dark m-0 mt-auto"}),Object(an.jsxs)(Fn,{children:[Object(an.jsx)(ur,{center:!0,bold:!0,children:We("guide.help.request.user.feedback.question")}),Object(an.jsxs)(hn,{gap:1,children:[Object(an.jsx)(bn,{fullWidth:!0,variant:"success",onClick:e=>s(!0),children:We("guide.help.request.user.feedback.positive.button")}),Object(an.jsx)(bn,{fullWidth:!0,variant:"danger",onClick:e=>s(!1),children:We("guide.help.request.user.feedback.negative.button")})]})]})]})]})},nl=e=>{const{helpRequestDescription:t=null,helpRequestAverageTime:s=0}=e;return Object(an.jsxs)(Fn,{children:[Object(an.jsxs)(Fn,{gap:0,className:"bg-muted rounded p-2",children:[Object(an.jsx)(ur,{bold:!0,children:We("guide.help.request.guide.accept.request.title")}),Object(an.jsx)(ur,{variant:"muted",children:We("guide.help.request.type.1")}),Object(an.jsx)(ur,{wrap:!0,textBreak:!0,children:t})]}),Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:We("guide.help.request.user.pending.info.title")}),Object(an.jsx)(ur,{children:We("guide.help.request.user.pending.info.message")}),Object(an.jsx)(ur,{children:We("guide.help.request.user.pending.info.waiting",["waitingtime"],[s.toString()])})]}),Object(an.jsx)(bn,{variant:"danger",onClick:()=>Ee(new a.Rd),children:We("guide.help.request.user.pending.cancel.button")})]})},rl=e=>Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:We("guide.help.request.user.thanks.info.title")}),Object(an.jsx)(ur,{children:We("guide.help.request.user.thanks.info.desc")})]}),cl=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)(We("guide.help.guide.tool.title")),[i,o]=Object(c.useState)(!1),[d,u]=Object(c.useState)(rs.GUIDE_TOOL_MENU),[j,h]=Object(c.useState)(!1),[b,g]=Object(c.useState)(!1),[m,O]=Object(c.useState)(!1),[f,x]=Object(c.useState)(!1),[_,I]=Object(c.useState)(0),[C,v]=Object(c.useState)(0),[N,T]=Object(c.useState)(0),[S,w]=Object(c.useState)(""),[R,y]=Object(c.useState)(null),[k,A]=Object(c.useState)(0),[D,L]=Object(c.useState)(0),[P,U]=Object(c.useState)(null),[M,B]=Object(c.useState)(null),[H,G]=Object(c.useState)(!1),[W,V]=Object(c.useState)([]),{simpleAlert:q=null}=Hr(),z=Object(c.useCallback)(((e,t)=>{switch(e){case rs.GUIDE_TOOL_MENU:r(We("guide.help.guide.tool.title")),o(!1);break;case rs.GUIDE_ACCEPT:r(We("guide.help.request.guide.accept.title")),o(!0);break;case rs.GUIDE_ONGOING:r(We("guide.help.request.guide.ongoing.title",["name"],[t])),o(!0);break;case rs.USER_CREATE:r(We("guide.help.request.user.create.title")),o(!1);break;case rs.USER_PENDING:r(We("guide.help.request.user.pending.title")),o(!0);break;case rs.USER_ONGOING:r(We("guide.help.request.user.ongoing.title",["name"],[t])),o(!0);break;case rs.USER_FEEDBACK:r(We("guide.help.request.user.feedback.title")),o(!0);break;case rs.USER_THANKS:r(We("guide.help.request.user.thanks.title")),o(!1)}u(e),s(!0)}),[]),Y=Object(c.useCallback)((e=>{switch(e.type){case Ar.SHOW_GUIDE_TOOL:return void s(!0);case Ar.HIDE_GUIDE_TOOL:return void s(!1);case Ar.TOGGLE_GUIDE_TOOL:return void s((e=>!e));case Ar.CREATE_HELP_REQUEST:return void z(rs.USER_CREATE)}}),[z]);fr(Ar.SHOW_GUIDE_TOOL,Y),fr(Ar.HIDE_GUIDE_TOOL,Y),fr(Ar.TOGGLE_GUIDE_TOOL,Y),fr(Ar.CREATE_HELP_REQUEST,Y),pr(a.Bf,(e=>{!e.getParser().isAllowed(a.Cf.USE_GUIDE_TOOL)&&j&&(h(!1),Ee(new a.Pd(!1,!1,!1,!1)))})),pr(a.Dd,(e=>{const t=e.getParser();h(t.onDuty),v(t.guidesOnDuty),I(t.helpersOnDuty),T(t.guardiansOnDuty)})),pr(a.Ed,(e=>{const t=e.getParser();y(t.helpRequestDescription),A(t.roleSpecificWaitTime),t.asGuide&&j&&z(rs.GUIDE_ACCEPT),t.asGuide||z(rs.USER_PENDING)})),pr(a.Ud,(e=>{const t=e.getParser();j?(L(t.requesterUserId),U(t.requesterName),B(t.requesterFigure),z(rs.GUIDE_ONGOING,t.requesterName)):(L(t.guideUserId),U(t.guideName),B(t.guideFigure),z(rs.USER_ONGOING,t.guideName))})),pr(a.Qd,(e=>{const t=e.getParser();G(t.isTyping)})),pr(a.Od,(e=>{const t=e.getParser(),s=[...W];let n=s[s.length-1];n&&n.userId===t.senderId||(n=new is(t.senderId),s.push(n)),n.addChat(new cs(t.chatMessage)),V(s)})),pr(a.Md,(e=>{const t=e.getParser(),s=[...W];let n=s[s.length-1];const r=j?F().userId:D;n&&n.userId===r||(n=new is(r),s.push(n)),n.addChat(new cs(t.roomName,t.roomId)),V(s)})),pr(a.Hd,(e=>{j?(L(0),U(null),B(null),G(!1),V([]),z(rs.GUIDE_TOOL_MENU)):z(rs.USER_FEEDBACK)})),pr(a.Gd,(e=>{L(0),U(null),B(null),G(!1),V([]),z(j?rs.GUIDE_TOOL_MENU:rs.USER_THANKS)})),Object(c.useEffect)((()=>{const e={linkReceived:e=>{const t=e.split("/");t.length<2||t[1]},eventUrlPrefix:"help/"};return l(e),()=>E(e)}),[]);const $=Object(c.useCallback)((e=>{switch(e){case"close":return s(!1),w(""),void u(rs.GUIDE_TOOL_MENU);case"toggle_duty":return b||m||f?void h((e=>(Ee(new a.Pd(!e,!e&&m,!e&&f,!e&&b)),!e))):void q(We("guide.help.guide.tool.noqueueselected.message"),null,null,null,We("guide.help.guide.tool.noqueueselected.caption"),null);case"forum_link":const e=p("group.homepage.url","").replace("%groupid%",p("guide.help.alpha.groupid","0"));return void window.open(e)}}),[b,m,f,q]);return t?Object(an.jsxs)(yn,{className:"nitro-guide-tool",theme:"primary-slim",children:[Object(an.jsx)(vn,{headerText:n,onCloseClick:e=>$("close"),noCloseButton:i}),Object(an.jsxs)(In,{className:"text-black",children:[d===rs.GUIDE_TOOL_MENU&&Object(an.jsx)(Zo,{isOnDuty:j,isHandlingGuideRequests:m,setIsHandlingGuideRequests:O,isHandlingHelpRequests:f,setIsHandlingHelpRequests:x,isHandlingBullyReports:b,setIsHandlingBullyReports:g,guidesOnDuty:C,helpersOnDuty:_,guardiansOnDuty:N,processAction:$}),d===rs.GUIDE_ACCEPT&&Object(an.jsx)(Jo,{helpRequestDescription:R,helpRequestAverageTime:k}),[rs.GUIDE_ONGOING,rs.USER_ONGOING].includes(d)&&Object(an.jsx)(el,{isGuide:j,userId:D,userName:P,userFigure:M,isTyping:H,messageGroups:W}),d===rs.USER_CREATE&&Object(an.jsx)(tl,{userRequest:S,setUserRequest:w}),d===rs.USER_PENDING&&Object(an.jsx)(nl,{helpRequestDescription:R,helpRequestAverageTime:k}),d===rs.USER_FEEDBACK&&Object(an.jsx)(sl,{userName:P}),d===rs.USER_THANKS&&Object(an.jsx)(rl,{})]})]}):null};var il=s(88),al=s(141);const ol=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)(null),[i,o]=Object(c.useState)(0),[d,u]=Object(c.useState)(null),{userFigure:j=null}=pi(),{purse:h=null,clubStatus:b=null}=Tc(),{badgeCodes:g=[],activate:O=null,deactivate:f=null}=uc(),x=()=>We("hccenter.special.sum",["credits"],[(n.creditRewardForStreakBonus+n.creditRewardForMonthlySpent).toString()]);if(pr(a.pb,(e=>{const t=e.getParser();o(t.giftsAvailable)})),pr(a.Th,(e=>{const t=e.getParser();r(t.data)})),Object(c.useEffect)((()=>{const e={linkReceived:e=>{const t=e.split("/");if(!(t.length<2))if("open"!==t[1]);else if(t.length>2&&"hccenter"===t[2])s(!0)},eventUrlPrefix:"habboUI/"};return l(e),()=>E(e)}),[]),Object(c.useEffect)((()=>{u((e=>{let t=null;return os.forEach((s=>e.indexOf(s)>-1&&(t=s))),t||"HC1"})(g))}),[g]),Object(c.useEffect)((()=>{if(!t)return;const e=O();return()=>f(e)}),[t,O,f]),Object(c.useEffect)((()=>{Ee(new a.xc),Ee(new a.Sh)}),[]),!t)return null;const _=Object(an.jsx)(il.a,{id:"popover-basic",children:Object(an.jsxs)(il.a.Body,{className:"text-black py-2 px-3",children:[Object(an.jsx)("h5",{children:We("hccenter.breakdown.title")}),Object(an.jsx)("div",{children:We("hccenter.breakdown.creditsspent",["credits"],[n.totalCreditsSpent.toString()])}),Object(an.jsx)("div",{children:We("hccenter.breakdown.paydayfactor.percent",["percent"],[(100*n.kickbackPercentage).toString()])}),Object(an.jsx)("div",{children:We("hccenter.breakdown.streakbonus",["credits"],[n.creditRewardForStreakBonus.toString()])}),Object(an.jsx)("hr",{className:"w-100 text-black my-1"}),Object(an.jsx)("div",{children:We("hccenter.breakdown.total",["credits","actual"],[x(),(100*(n.kickbackPercentage*n.totalCreditsSpent+n.creditRewardForStreakBonus)/100).toString()])}),Object(an.jsx)("div",{className:"btn btn-link text-primary p-0",onClick:()=>m("habbopages/"+p("hc.center")["payday.habbopage"]),children:We("hccenter.special.infolink")})]})});return Object(an.jsxs)(yn,{theme:"primary-slim",className:"nitro-hc-center",children:[Object(an.jsx)(vn,{headerText:We("generic.hccenter"),onCloseClick:()=>s(!1)}),Object(an.jsxs)(hn,{position:"relative",className:"bg-muted p-2",children:[Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)("div",{className:"hc-logo"}),Object(an.jsx)(hn,{children:Object(an.jsx)(bn,{variant:"success",onClick:e=>m("catalog/open/"+p("catalog.links")["hc.buy_hc"]),children:We(b===as.ACTIVE?"hccenter.btn.extend":"hccenter.btn.buy")})})]}),Object(an.jsx)(on,{position:"absolute",className:"end-0 p-4 top-0 habbo-avatar",children:Object(an.jsx)(kn,{figure:j,direction:4,scale:2})})]}),Object(an.jsxs)(In,{children:[Object(an.jsxs)(hn,{gap:2,children:[Object(an.jsx)(Dn,{badgeCode:d,className:"align-self-center flex-shrink-0 me-1"}),Object(an.jsxs)(Fn,{size:5,className:"streak-info",gap:0,children:[Object(an.jsx)(ur,{children:We("hccenter.status."+b)}),Object(an.jsx)(ur,{dangerouslySetInnerHTML:{__html:(()=>{switch(b){case as.ACTIVE:return We(`hccenter.status.${b}.info`,["timeleft","joindate","streakduration"],[h.clubDays<=0?We("purse.clubdays.zero.amount.text"):h.minutesUntilExpiration>-1&&h.minutesUntilExpiration<1440?a.Zb.shortFormat(60*h.minutesUntilExpiration):a.Zb.shortFormat(86400*(31*h.clubPeriods+h.clubDays)),n.firstSubscriptionDate,a.Zb.shortFormat(86400*n.currentHcStreak)]);case as.EXPIRED:return We(`hccenter.status.${b}.info`,["joindate"],[n.firstSubscriptionDate]);default:return We(`hccenter.status.${b}.info`)}})()}})]})]}),p("hc.center")["payday.info"]&&Object(an.jsxs)(hn,{alignItems:"center",children:[Object(an.jsxs)(Fn,{className:"rounded-start bg-primary p-2 payday-special mb-1",children:[Object(an.jsx)("h4",{className:"mb-1",children:We("hccenter.special.title")}),Object(an.jsx)("div",{children:We("hccenter.special.info")}),Object(an.jsx)("div",{className:"btn btn-link text-white p-0 mt-auto align-self-baseline",onClick:()=>m("habbopages/"+p("hc.center")["payday.habbopage"]),children:We("hccenter.special.infolink")})]}),Object(an.jsxs)("div",{className:"payday flex-shrink-0 p-2",children:[Object(an.jsx)("h5",{className:"mb-2 ms-2",children:We("hccenter.special.time.title")}),Object(an.jsxs)("div",{className:"d-flex flex-row mb-2",children:[Object(an.jsx)("div",{className:"clock me-2"}),Object(an.jsx)("h6",{className:"mb-0 align-self-center",children:n.timeUntilPayday<60?We("hccenter.special.time.soon"):a.Zb.shortFormat(60*n.timeUntilPayday)})]}),b===as.ACTIVE&&Object(an.jsxs)("div",{className:"pe-3",children:[Object(an.jsx)("h5",{className:"ms-2 mb-1 bolder",children:We("hccenter.special.amount.title")}),Object(an.jsxs)("div",{className:"d-flex flex-column",children:[Object(an.jsx)("div",{className:"w-100 text-center ms-4n",children:x()}),Object(an.jsx)(al.a,{trigger:["hover","focus"],placement:"left",overlay:_,children:Object(an.jsx)("div",{className:"btn btn-link align-self-end text-primary",children:We("hccenter.breakdown.infolink")})})]})]})]})]}),p("hc.center")["gift.info"]&&Object(an.jsxs)("div",{className:"rounded bg-success p-2 d-flex flex-row mb-0",children:[Object(an.jsxs)("div",{children:[Object(an.jsx)("h4",{className:"mb-1",children:We("hccenter.gift.title")}),Object(an.jsx)("div",{dangerouslySetInnerHTML:{__html:i>0?We("hccenter.unclaimedgifts",["unclaimedgifts"],[i.toString()]):We("hccenter.gift.info")}})]}),Object(an.jsx)("button",{className:"btn btn-primary btn-lg align-self-center ms-auto",onClick:()=>m("catalog/open/"+p("catalog.links")["hc.hc_gifts"]),children:We(b===as.ACTIVE?"hccenter.btn.gifts.redeem":"hccenter.btn.gifts.view")})]}),p("hc.center")["benefits.info"]&&Object(an.jsxs)("div",{className:"benefits text-black py-2",children:[Object(an.jsx)("h5",{className:"mb-1 text-primary",children:We("hccenter.general.title")}),Object(an.jsx)("div",{className:"mb-2",dangerouslySetInnerHTML:{__html:We("hccenter.general.info")}}),Object(an.jsx)("button",{className:"btn btn-link p-0 text-primary",onClick:()=>m("habbopages/"+p("hc.center")["benefits.habbopage"]),children:We("hccenter.general.infolink")})]})]})]})},ll=e=>{const[t,s]=Object(c.useState)(""),{activeReport:n=null,setActiveReport:r=null}=ic();return Object(an.jsxs)(an.Fragment,{children:[Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{fontSize:4,children:We("help.emergency.chat_report.subtitle")}),Object(an.jsx)(ur,{children:We("help.cfh.input.text")})]}),Object(an.jsx)("textarea",{className:"form-control h-100",value:t,onChange:e=>s(e.target.value)}),Object(an.jsxs)(hn,{gap:2,justifyContent:"between",children:[Object(an.jsx)(bn,{variant:"secondary",disabled:!(n.reportType===us.BULLY||n.reportType===us.EMERGENCY),onClick:()=>{r((e=>({...e,currentStep:e.currentStep-1})))},children:We("generic.back")}),Object(an.jsx)(bn,{disabled:t.length<15,onClick:()=>{t.length<15||r((e=>{const s=ds.REPORT_SUMMARY;return{...e,message:t,currentStep:s}}))},children:We("help.emergency.main.submit.button")})]})]})},dl=e=>{const{setActiveReport:t=null}=ic();return Object(an.jsxs)(an.Fragment,{children:[Object(an.jsxs)(Fn,{grow:!0,center:!0,gap:1,children:[Object(an.jsx)(ur,{fontSize:3,children:We("help.main.frame.title")}),Object(an.jsx)(ur,{children:We("help.main.self.description")})]}),Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(bn,{onClick:()=>{t((e=>({...e,currentStep:ds.SELECT_USER})))},children:We("help.main.bully.subtitle")}),Object(an.jsx)(bn,{onClick:()=>$e(new Ar(Ar.CREATE_HELP_REQUEST)),children:We("help.main.help.title")}),Object(an.jsx)(bn,{disabled:!0,children:We("help.main.self.tips.title")})]}),Object(an.jsx)(bn,{variant:"link",textColor:"black",onClick:()=>Ee(new a.wc(!1)),children:We("help.main.my.sanction.status")})]})},ul=e=>{const{username:t="",onAction:s=null}=e,[n,r]=Object(c.useState)(!1);pr(a.Wi,(e=>{const t=e.getParser();t&&t.webId===F().userId&&s("close")}));const i=Object(c.useCallback)((()=>{n||(r(!0),Ee(new a.lb(t)))}),[n,t]);return Object(an.jsxs)("div",{className:"d-flex flex-column gap-4 h-100",children:[Object(an.jsx)("div",{className:"bg-muted rounded p-2 text-center",children:We("tutorial.name_change.info.confirm")}),Object(an.jsxs)("div",{className:"d-flex flex-column align-items-center gap-1 h-100",children:[Object(an.jsx)("div",{children:We("tutorial.name_change.confirm")}),Object(an.jsx)("div",{className:"fw-bold",children:t})]}),Object(an.jsxs)("div",{className:"d-flex gap-2",children:[Object(an.jsx)("button",{className:"btn btn-success w-100",disabled:n,onClick:i,children:We("generic.ok")}),Object(an.jsx)("button",{className:"btn btn-primary w-100",onClick:()=>s("close"),children:We("cancel")})]})]})},jl=e=>{const{onAction:t=null}=e;return Object(an.jsxs)("div",{className:"d-flex flex-column gap-4 h-100",children:[Object(an.jsx)("div",{className:"bg-muted rounded p-2 text-center",children:We("tutorial.name_change.info.main")}),Object(an.jsx)("div",{className:"fw-bold d-flex align-items-center justify-content-center h-100 w-100",children:We("tutorial.name_change.current",["name"],[F().userName])}),Object(an.jsxs)("div",{className:"d-flex gap-2",children:[Object(an.jsx)("button",{className:"btn btn-success w-100",onClick:()=>t("start"),children:We("tutorial.name_change.change")}),Object(an.jsx)("button",{className:"btn btn-primary w-100",onClick:()=>t("confirmation",F().userName),children:We("tutorial.name_change.keep")})]})]})},hl=e=>{const{onAction:t=null}=e,[s,n]=Object(c.useState)(""),[r,i]=Object(c.useState)(!1),[o,l]=Object(c.useState)(!1),[d,u]=Object(c.useState)(null),[j,h]=Object(c.useState)([]);pr(a.nb,(e=>{l(!1);const t=e.getParser();if(t)switch(t.resultCode){case 0:i(!0);break;case 2:u("short");break;case 3:u("long");break;case 4:u("invalid");break;case 5:h(t.nameSuggestions),u("taken");break;case 6:u("change_not_allowed")}}));const b=Object(c.useCallback)((()=>{""!==s&&(i(!1),h([]),u(null),l(!0),Ee(new a.mb(s)))}),[s]),g=Object(c.useCallback)((e=>{i(!1),h([]),u(null),n(e)}),[]);return Object(an.jsxs)("div",{className:"d-flex flex-column gap-3 h-100",children:[Object(an.jsx)("div",{children:We("tutorial.name_change.info.select")}),Object(an.jsxs)("div",{className:"d-flex gap-2",children:[Object(an.jsx)("input",{type:"text",className:"form-control form-control-sm",value:s,onChange:e=>g(e.target.value)}),Object(an.jsx)("button",{className:"btn btn-primary",disabled:""===s||o,onClick:b,children:We("tutorial.name_change.check")})]}),!d&&!r&&Object(an.jsx)("div",{className:"bg-muted rounded p-2 text-center",children:We("help.tutorial.name.info")}),d&&Object(an.jsx)("div",{className:"bg-danger rounded p-2 text-center text-white",children:We(`help.tutorial.name.${d}`,["name"],[s])}),r&&Object(an.jsx)("div",{className:"bg-success rounded p-2 text-center text-white",children:We("help.tutorial.name.available",["name"],[s])}),j&&Object(an.jsx)("div",{className:"d-flex flex-column gap-2",children:j.map(((e,t)=>Object(an.jsx)("div",{className:"col bg-muted rounded p-1 cursor-pointer",onClick:()=>g(e),children:e},t)))}),Object(an.jsxs)("div",{className:"d-flex gap-2",children:[Object(an.jsx)("button",{className:"btn btn-success w-100",disabled:!r,onClick:()=>t("confirmation",s),children:We("tutorial.name_change.pick")}),Object(an.jsx)("button",{className:"btn btn-primary w-100",onClick:()=>t("close"),children:We("cancel")})]})]})},bl="INIT",gl="INPUT",ml="CONFIRMATION",Ol=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)(bl),[i,a]=Object(c.useState)("");fr(Dr.INIT,(e=>{r(bl),s(!0)}));const o=Object(c.useCallback)(((e,t)=>{switch(e){case"start":r(gl);break;case"confirmation":a(t),r(ml);break;case"close":a(""),s(!1)}}),[]),l=Object(c.useMemo)((()=>{switch(n){case bl:return"tutorial.name_change.title.main";case gl:return"tutorial.name_change.title.select";case ml:return"tutorial.name_change.title.confirm"}}),[n]);return t?Object(an.jsxs)(yn,{className:"nitro-change-username",theme:"primary-slim",children:[Object(an.jsx)(vn,{headerText:We(l),onCloseClick:()=>o("close")}),Object(an.jsxs)(In,{className:"text-black",children:[n===bl&&Object(an.jsx)(jl,{onAction:o}),n===gl&&Object(an.jsx)(hl,{onAction:o}),n===ml&&Object(an.jsx)(ul,{username:i,onAction:o})]})]}):null},pl=e=>{const{activeReport:t=null,setActiveReport:s=null}=ic();return Object(an.jsxs)(an.Fragment,{children:[Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{fontSize:4,children:We("help.cfh.button.send")}),Object(an.jsx)(ur,{children:We("help.main.summary")})]}),Object(an.jsx)(bn,{variant:"success",onClick:()=>{const e=[];switch(t.reportType){case us.BULLY:case us.EMERGENCY:case us.ROOM:{const s=t.roomId<=0?t.reportedChats[0].roomId:t.roomId;t.reportedChats.forEach((t=>e.push(t.entityId,t.message))),Ee(new a.Q(t.message,t.cfhTopic,t.reportedUserId,s,e));break}case us.IM:t.reportedChats.forEach((t=>e.push(t.entityId,t.message))),Ee(new a.O(t.message,t.cfhTopic,t.reportedUserId,e));break;case us.THREAD:Ee(new a.N(t.groupId,t.threadId,t.cfhTopic,t.message));break;case us.MESSAGE:Ee(new a.M(t.groupId,t.threadId,t.messageId,t.cfhTopic,t.message));break;case us.PHOTO:Ee(new a.P(t.extraData,t.cfhTopic,t.roomId,F().userId,t.roomObjectId))}s(null)},children:We("guide.help.request.emergency.submit.button")})]})},fl=e=>{const{sanctionInfo:t=null,setSanctionInfo:s=null}=ic(),n=(e,t,s)=>{let n=`help.sanction.${e}`;switch(t){case"ALERT":n+=".alert";break;case"MUTE":n+=".mute";break;case"BAN_PERMANENT":n+=".permban";break;default:if(n+=".ban",s>24)return n+=".days",We(n,["days"],[(s/24).toString()])}return We(n,["hours"],[s.toString()])};return t?Object(an.jsxs)(yn,{className:"nitro-help",theme:"primary-slim",children:[Object(an.jsx)(vn,{headerText:We("help.sanction.info.title"),onCloseClick:()=>s(null)}),Object(an.jsx)(In,{className:"text-black",children:Object(an.jsxs)(un,{children:[Object(an.jsx)(Fn,{center:!0,size:5,overflow:"hidden",children:Object(an.jsx)(on,{className:"index-image"})}),Object(an.jsxs)(Fn,{justifyContent:"between",size:7,overflow:"hidden",children:["cfh.reason.EMPTY"===t.sanctionReason?Object(an.jsx)("div",{className:"col-12 fw-bold",children:We("help.sanction.current.none")}):Object(an.jsxs)(an.Fragment,{children:[(t.probationHoursLeft>0||t.isSanctionActive)&&Object(an.jsx)("div",{className:"col-12 fw-bold",children:We("help.sanction.probation.reminder")}),Object(an.jsxs)("div",{className:"col-12 fw-bold "+(t.isSanctionNew?"text-danger":""),children:[We("help.sanction.last.sanction")," ",n("current",t.sanctionName,t.sanctionLengthHours)]}),Object(an.jsxs)("div",{className:"col-12",children:[We("generic.start.time")," ",t.sanctionCreationTime]}),Object(an.jsxs)("div",{className:"col-12",children:[We("generic.reason")," ",t.sanctionReason]}),Object(an.jsxs)("div",{className:"col-12",children:[We("help.sanction.probation.days.left")," ",Math.trunc(t.probationHoursLeft/24)+1]})]}),t.hasCustomMute&&!t.isSanctionActive&&Object(an.jsx)("div",{className:"col-12 fw-bold",children:We("help.sanction.custom.mute")}),t.tradeLockExpiryTime&&t.tradeLockExpiryTime.length>0&&Object(an.jsxs)("div",{className:"col-12 fw-bold",children:[We("trade.locked.until")," ",t.tradeLockExpiryTime]}),Object(an.jsx)("div",{className:"col-12",children:n("next",t.nextSanctionName,t.nextSanctionLengthHours)}),Object(an.jsx)(bn,{variant:"success",onClick:e=>s(null),children:We("habbo.way.ok.button")})]})]})})]}):null},xl=e=>{const[t,s]=Object(c.useState)([]),{activeReport:n=null,setActiveReport:r=null}=ic(),{chatHistory:i=[],messengerHistory:o=[]}=Jr(),l=Object(c.useMemo)((()=>{switch(n.reportType){case us.BULLY:case us.EMERGENCY:return i.filter((e=>e.type===Mt.TYPE_CHAT&&e.entityId===n.reportedUserId&&e.entityType===a.ah.USER));case us.IM:return o.filter((e=>e.entityId===n.reportedUserId&&e.type===Mt.TYPE_IM))}return[]}),[n,i,o]);return Object(an.jsxs)(an.Fragment,{children:[Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{fontSize:4,children:We("help.emergency.chat_report.subtitle")}),Object(an.jsx)(ur,{children:We("help.emergency.chat_report.description")})]}),Object(an.jsxs)(Fn,{gap:1,overflow:"hidden",children:[!l||!l.length&&Object(an.jsx)(ur,{children:We("help.cfh.error.no_user_data")}),l.length>0&&Object(an.jsx)(jn,{gap:1,columnCount:1,columnMinHeight:25,overflow:"auto",children:l.map(((e,n)=>Object(an.jsx)(Vn,{onClick:t=>{return n=e,void s((e=>{const t=[...e],s=t.indexOf(n);return s>=0?t.splice(s,1):t.push(n),t}));var n},itemActive:t.indexOf(e)>=0,children:Object(an.jsx)(ur,{children:e.message})},e.id)))})]}),Object(an.jsxs)(hn,{gap:2,justifyContent:"between",children:[Object(an.jsx)(bn,{variant:"secondary",onClick:()=>{r((e=>({...e,currentStep:e.currentStep-1})))},disabled:n.reportType===us.IM,children:We("generic.back")}),Object(an.jsx)(bn,{disabled:t.length<=0,onClick:()=>{!t||t.length<=0||r((e=>({...e,reportedChats:t,currentStep:ds.SELECT_TOPICS})))},children:We("help.emergency.main.submit.button")})]})]})},_l=e=>{const[t,s]=Object(c.useState)(-1),{chatHistory:n=[]}=Jr(),{activeReport:r=null,setActiveReport:i=null}=ic(),o=Object(c.useMemo)((()=>{const e=new Map;return n.forEach((t=>{t.type!==Mt.TYPE_CHAT||t.entityType!==a.ah.USER||t.entityId===F().userId||e.has(t.entityId)||e.set(t.entityId,{id:t.entityId,username:t.name})})),Array.from(e.values())}),[n]);return Object(an.jsxs)(an.Fragment,{children:[Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{fontSize:4,children:We("help.emergency.main.step.two.title")}),o.length>0&&Object(an.jsx)(ur,{children:We("report.user.pick.user")})]}),Object(an.jsxs)(Fn,{gap:1,overflow:"hidden",children:[!o.length&&Object(an.jsx)(ur,{children:We("report.user.error.nolist")}),o.length>0&&Object(an.jsx)(jn,{columnCount:1,columnMinHeight:25,gap:1,children:o.map(((e,n)=>Object(an.jsx)(Vn,{onClick:t=>{return n=e.id,void s((e=>n===e?-1:n));var n},itemActive:t===e.id,children:Object(an.jsx)("span",{dangerouslySetInnerHTML:{__html:e.username}})},e.id)))})]}),Object(an.jsxs)(hn,{gap:2,justifyContent:"between",children:[Object(an.jsx)(bn,{variant:"secondary",onClick:()=>{i((e=>({...e,currentStep:e.currentStep-1})))},children:We("generic.back")}),Object(an.jsx)(bn,{disabled:t<=0,onClick:()=>{t<=0||i((e=>({...e,reportedUserId:t,currentStep:ds.SELECT_CHATS})))},children:We("help.emergency.main.submit.button")})]})]})},Il=e=>{const[t,s]=Object(c.useState)(-1),[n,r]=Object(c.useState)(-1),{setActiveReport:i=null}=ic(),{cfhCategories:a=[]}=Ec();return Object(an.jsxs)(an.Fragment,{children:[Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{fontSize:4,children:We("help.emergency.chat_report.subtitle")}),Object(an.jsx)(ur,{children:We("help.cfh.pick.topic")})]}),Object(an.jsxs)(Fn,{gap:1,overflow:"auto",children:[t<0&&a.map(((e,t)=>Object(an.jsx)(bn,{variant:"danger",onClick:e=>s(t),children:We(`help.cfh.reason.${e.name}`)},t))),t>=0&&a[t].topics.map(((e,t)=>Object(an.jsx)(bn,{variant:"danger",onClick:e=>r(t),active:n===t,children:We(`help.cfh.topic.${e.id}`)},t)))]}),Object(an.jsxs)(hn,{gap:2,justifyContent:"between",children:[Object(an.jsx)(bn,{variant:"secondary",onClick:()=>{i((e=>({...e,currentStep:e.currentStep-1})))},children:We("generic.back")}),Object(an.jsx)(bn,{disabled:n<0,onClick:()=>{t<0||n<0||i((e=>({...e,cfhCategory:t,cfhTopic:a[t].topics[n].id,currentStep:ds.INPUT_REPORT_MESSAGE})))},children:We("help.emergency.main.submit.button")})]})]})},El=e=>{const[t,s]=Object(c.useState)(!1),{activeReport:n=null,setActiveReport:r=null,report:i=null}=ic();Object(c.useEffect)((()=>{const e={linkReceived:e=>{const t=e.split("/");if(!(t.length<2))switch(t[1]){case"show":return void s(!0);case"hide":return void s(!1);case"toggle":return void s((e=>!e));case"tour":return;case"report":if(t.length>=5&&"room"===t[2]){parseInt(t[3]),unescape(t.splice(4).join("/"))}return}},eventUrlPrefix:"help/"};return l(e),()=>E(e)}),[]),Object(c.useEffect)((()=>{n&&s(!0)}),[n]);const a=()=>{if(n)switch(n.currentStep){case ds.SELECT_USER:return Object(an.jsx)(_l,{});case ds.SELECT_CHATS:return Object(an.jsx)(xl,{});case ds.SELECT_TOPICS:return Object(an.jsx)(Il,{});case ds.INPUT_REPORT_MESSAGE:return Object(an.jsx)(ll,{});case ds.REPORT_SUMMARY:return Object(an.jsx)(pl,{})}return Object(an.jsx)(dl,{})};return Object(an.jsxs)(an.Fragment,{children:[t&&Object(an.jsxs)(yn,{className:"nitro-help",theme:"primary-slim",children:[Object(an.jsx)(vn,{headerText:We("help.button.cfh"),onCloseClick:()=>{r(null),s(!1)}}),Object(an.jsx)(In,{className:"text-black",children:Object(an.jsxs)(un,{children:[Object(an.jsx)(Fn,{center:!0,size:5,overflow:"hidden",children:Object(an.jsx)(on,{className:"index-image"})}),Object(an.jsx)(Fn,{justifyContent:"between",size:7,overflow:"hidden",children:Object(an.jsx)(a,{})})]})})]}),Object(an.jsx)(fl,{}),Object(an.jsx)(Ol,{})]})},Cl=e=>{const[t,s]=Object(c.useState)(null),[n,r]=Object(c.useState)(null),[i,o]=Object(c.useState)(null),[l,d]=Object(c.useState)(null);return pr(a.y,(e=>{const t=e.getParser();s(t.productType),r(t.productClassId),o(t.totalCoinsForBonus),d(t.coinsStillRequiredToBuy)})),Object(c.useEffect)((()=>{Ee(new a.rc)}),[]),t?Object(an.jsxs)("div",{className:"bonus-rare widget d-flex",children:[t,Object(an.jsxs)("div",{className:"bg-light-dark rounded overflow-hidden position-relative bonus-bar-container",children:[Object(an.jsx)("div",{className:"d-flex justify-content-center align-items-center w-100 h-100 position-absolute small top-0",children:i-l+"/"+i}),Object(an.jsx)("div",{className:"small bg-info rounded position-absolute top-0 h-100",style:{width:(i-l)/i*100+"%"}})]})]}):null},vl=e=>{const{data:t=null,level:s=0}=e;return Object(an.jsxs)("div",{className:"hof-user-container",children:[Object(an.jsxs)("div",{className:"hof-tooltip",children:[Object(an.jsxs)("div",{className:"hof-header",children:[s,". ",t.userName," ",Object(an.jsx)(ir,{userId:t.userId})]}),Object(an.jsx)("div",{className:"small text-center text-white",children:We("landing.view.competition.hof.points",["points"],[He(t.currentScore).toString()])})]}),Object(an.jsx)(kn,{figure:t.figure,direction:2})]})},Nl=e=>{const{slot:t=-1,conf:s=null}=e,[n,r]=Object(c.useState)(null);return pr(a.tb,(e=>{const t=e.getParser();r(t.data)})),Object(c.useEffect)((()=>{const e=s?s.campaign:"";Ee(new a.zc(e))}),[s]),n?Object(an.jsx)("div",{className:"hall-of-fame d-flex",children:n.hof&&n.hof.length>0&&n.hof.map(((e,t)=>Object(an.jsx)(vl,{data:e,level:t+1},t)))}):null},Tl=e=>{const[t,s]=Object(c.useState)(null),[n,r]=Object(c.useState)(0);return pr(a.Pf,(e=>{const t=e.getParser();s(t.articles)})),Object(c.useEffect)((()=>{Ee(new a.Mc)}),[]),t?Object(an.jsxs)("div",{className:"promo-articles widget mb-2",children:[Object(an.jsxs)("div",{className:"d-flex flex-row align-items-center w-100 mb-1",children:[Object(an.jsx)("small",{className:"flex-shrink-0 pe-1",children:We("landing.view.promo.article.header")}),Object(an.jsx)("hr",{className:"w-100 my-0"})]}),Object(an.jsx)("div",{className:"d-flex flex-row mb-1",children:t&&t.length>0&&t.map(((e,s)=>Object(an.jsx)("div",{className:"promo-articles-bullet cursor-pointer "+(e===t[n]?"promo-articles-bullet-active":""),onClick:e=>r(s)},e.id)))}),t&&t[n]&&Object(an.jsxs)("div",{className:"promo-article d-flex flex-row row mx-0",children:[Object(an.jsx)("div",{className:"promo-article-image",style:{backgroundImage:`url(${t[n].imageUrl})`}}),Object(an.jsxs)("div",{className:"col-3 d-flex flex-column h-100",children:[Object(an.jsx)("h3",{className:"my-0",children:t[n].title}),Object(an.jsx)("b",{children:t[n].bodyText}),Object(an.jsx)("button",{className:"btn btn-sm mt-auto btn-gainsboro",onClick:e=>I(t[n].linkContent),children:t[n].buttonText})]})]})]}):null},Sl=e=>{const{conf:t=null}=e,s=Object(c.useCallback)((e=>{const s=t[e];return s?"image"===e?g().interpolate(s):s:null}),[t]);return Object(an.jsxs)("div",{className:"widgetcontainer widget d-flex flex-row overflow-hidden",children:[Object(an.jsx)("div",{className:"widgetcontainer-image flex-shrink-0",style:{backgroundImage:`url(${s("image")})`}}),Object(an.jsxs)("div",{className:"d-flex flex-column align-self-center",children:[Object(an.jsx)("h3",{className:"my-0",children:We(`landing.view.${s("texts")}.header`)}),Object(an.jsx)("i",{children:We(`landing.view.${s("texts")}.body`)}),Object(an.jsx)("button",{className:"btn btn-sm btn-gainsboro align-self-start px-3 mt-auto",onClick:e=>I(s("btnLink")),children:We(`landing.view.${s("texts")}.button`)})]})]})},wl=e=>{switch(e.widgetType){case"promoarticle":return Object(an.jsx)(Tl,{});case"achievementcompetition_hall_of_fame":return Object(an.jsx)(Nl,{slot:e.slot,conf:e.widgetConf});case"bonusrare":return Object(an.jsx)(Cl,{});case"widgetcontainer":return Object(an.jsx)(Sl,{conf:e.widgetConf});default:return null}},Rl=e=>{const{widgetType:t=null,widgetSlot:s=0,widgetConf:n=null,className:r="",...c}=e;return Object(an.jsx)("div",{className:`widget-slot slot-${s} ${r||""}`,...c,children:Object(an.jsx)(wl,{widgetType:t,slot:s,widgetConf:n})})},yl=e=>{const[t,s]=Object(c.useState)(!0),{userFigure:n=null}=pi(),r=Object(c.useCallback)((e=>{switch(e.type){case a.mh.CREATED:return void s(!1);case a.mh.ENDED:return void s(e.openLandingView)}}),[]);if(Or(a.mh.CREATED,r),Or(a.mh.ENDED,r),!t)return null;const i=p("hotelview").images["background.colour"],o=g().interpolate(p("hotelview").images.background),l=g().interpolate(p("hotelview").images.sun),d=g().interpolate(p("hotelview").images.drape),u=g().interpolate(p("hotelview").images.left),j=g().interpolate(p("hotelview").images["right.repeat"]),h=g().interpolate(p("hotelview").images.right);return Object(an.jsxs)("div",{className:"nitro-hotel-view",style:i&&i?{background:i}:{},children:[Object(an.jsx)("div",{className:"container h-100 py-3 overflow-hidden landing-widgets",children:Object(an.jsxs)("div",{className:"row h-100",children:[Object(an.jsxs)("div",{className:"col-9 h-100 d-flex flex-column",children:[Object(an.jsx)(Rl,{widgetSlot:1,widgetType:p("hotelview").widgets["slot.1.widget"],widgetConf:p("hotelview").widgets["slot.1.conf"],className:"col-6"}),Object(an.jsxs)("div",{className:"col-12 row mx-0",children:[Object(an.jsx)(Rl,{widgetSlot:2,widgetType:p("hotelview").widgets["slot.2.widget"],widgetConf:p("hotelview").widgets["slot.2.conf"],className:"col-7"}),Object(an.jsx)(Rl,{widgetSlot:3,widgetType:p("hotelview").widgets["slot.3.widget"],widgetConf:p("hotelview").widgets["slot.3.conf"],className:"col-5"}),Object(an.jsx)(Rl,{widgetSlot:4,widgetType:p("hotelview").widgets["slot.4.widget"],widgetConf:p("hotelview").widgets["slot.4.conf"],className:"col-7"}),Object(an.jsx)(Rl,{widgetSlot:5,widgetType:p("hotelview").widgets["slot.5.widget"],widgetConf:p("hotelview").widgets["slot.5.conf"],className:"col-5"})]}),Object(an.jsx)(Rl,{widgetSlot:6,widgetType:p("hotelview").widgets["slot.6.widget"],widgetConf:p("hotelview").widgets["slot.6.conf"],className:"mt-auto"})]}),Object(an.jsx)("div",{className:"col-3 h-100",children:Object(an.jsx)(Rl,{widgetSlot:7,widgetType:p("hotelview").widgets["slot.7.widget"],widgetConf:p("hotelview").widgets["slot.7.conf"]})})]})}),Object(an.jsx)("div",{className:"background position-absolute",style:o&&o.length?{backgroundImage:`url(${o})`}:{}}),Object(an.jsx)("div",{className:"sun position-absolute",style:l&&l.length?{backgroundImage:`url(${l})`}:{}}),Object(an.jsx)("div",{className:"drape position-absolute",style:d&&d.length?{backgroundImage:`url(${d})`}:{}}),Object(an.jsx)("div",{className:"left position-absolute",style:u&&u.length?{backgroundImage:`url(${u})`}:{}}),Object(an.jsx)("div",{className:"right-repeat position-absolute",style:j&&j.length?{backgroundImage:`url(${j})`}:{}}),Object(an.jsx)("div",{className:"right position-absolute",style:h&&h.length?{backgroundImage:`url(${h})`}:{}}),p("hotelview")["show.avatar"]&&Object(an.jsx)("div",{className:"avatar-image",children:Object(an.jsx)(kn,{figure:n,direction:2})})]})},kl=e=>{const{badgeCode:t=null,children:s=null,...n}=e,{selectedBadgeCode:r=null,setSelectedBadgeCode:c=null,toggleBadge:i=null,getBadgeId:a=null}=uc(),{isUnseen:o=null}=lc(),l=o(jt.BADGE,a(t));return Object(an.jsxs)(Vn,{itemActive:r===t,itemUnseen:l,onMouseDown:e=>c(t),onDoubleClick:e=>i(r),...n,children:[Object(an.jsx)(Dn,{badgeCode:t}),s]})},Al=e=>{const[t,s]=Object(c.useState)(!1),{badgeCodes:n=[],activeBadgeCodes:r=[],selectedBadgeCode:i=null,isWearingBadge:a=null,canWearBadges:o=null,toggleBadge:l=null,getBadgeId:d=null,activate:u=null,deactivate:j=null}=uc(),{isUnseen:h=null,removeUnseen:b=null}=lc();return Object(c.useEffect)((()=>{i&&h(jt.BADGE,d(i))&&b(jt.BADGE,d(i))}),[i,h,b,d]),Object(c.useEffect)((()=>{if(!t)return;const e=u();return()=>j(e)}),[t,u,j]),Object(c.useEffect)((()=>(s(!0),()=>s(!1))),[]),Object(an.jsxs)(un,{children:[Object(an.jsx)(Fn,{size:7,overflow:"hidden",children:Object(an.jsx)(jn,{columnCount:4,children:n&&n.length>0&&n.map(((e,t)=>r.indexOf(e)>=0?null:Object(an.jsx)(kl,{badgeCode:e},t)))})}),Object(an.jsxs)(Fn,{className:"justify-content-between",size:5,overflow:"auto",children:[Object(an.jsxs)(Fn,{overflow:"hidden",gap:2,children:[Object(an.jsx)(ur,{children:We("inventory.badges.activebadges")}),Object(an.jsx)(jn,{columnCount:3,children:r&&r.length>0&&r.map(((e,t)=>Object(an.jsx)(kl,{badgeCode:e},t)))})]}),!!i&&Object(an.jsxs)(Fn,{grow:!0,justifyContent:"end",gap:2,children:[Object(an.jsxs)(hn,{alignItems:"center",gap:2,children:[Object(an.jsx)(Dn,{shrink:!0,badgeCode:i}),Object(an.jsx)(ur,{children:Be(i)})]}),Object(an.jsx)(bn,{variant:a(i)?"danger":"success",disabled:!a(i)&&!o(),onClick:e=>l(i),children:We(a(i)?"inventory.badges.clearbadge":"inventory.badges.wearbadge")})]})]})]})},Dl=e=>{const{title:t="",desc:s="",children:n=null,...r}=e;return Object(an.jsxs)(un,{...r,children:[Object(an.jsx)(Fn,{center:!0,size:5,overflow:"hidden",children:Object(an.jsx)("div",{className:"empty-image"})}),Object(an.jsxs)(Fn,{justifyContent:"center",size:7,overflow:"hidden",children:[Object(an.jsx)(ur,{fontWeight:"bold",fontSize:5,overflow:"unset",truncate:!0,children:t}),Object(an.jsx)(ur,{overflow:"auto",children:s})]}),n]})},Ll=e=>{const{botItem:t=null,children:s=null,...n}=e,[r,i]=Object(c.useState)(!1),{selectedBot:o=null,setSelectedBot:l=null}=hc(),{isUnseen:d=null}=lc(),u=d(jt.BOT,t.botData.id),j=e=>{switch(e.type){case a.Ve.MOUSE_DOWN:return l(t),void i(!0);case a.Ve.MOUSE_UP:return void i(!1);case a.Ve.ROLL_OUT:if(!r||o!==t)return;return void ut(t);case"dblclick":return void ut(t)}};return Object(an.jsxs)(Vn,{itemActive:o===t,itemUnseen:u,onMouseDown:j,onMouseUp:j,onMouseOut:j,onDoubleClick:j,...n,children:[Object(an.jsx)(kn,{figure:t.botData.figure,direction:3,headOnly:!0}),s]})},Pl=e=>{const{roomSession:t=null,roomPreviewer:s=null}=e,[n,r]=Object(c.useState)(!1),{botItems:i=[],selectedBot:o=null,activate:l=null,deactivate:d=null}=hc(),{isUnseen:u=null,removeUnseen:j=null}=lc();return Object(c.useEffect)((()=>{if(!o||!s)return;const e=o.botData,t=C();let n=t.getRoomInstanceVariable(t.activeRoomId,a.ch.ROOM_WALL_TYPE),r=t.getRoomInstanceVariable(t.activeRoomId,a.ch.ROOM_FLOOR_TYPE),c=t.getRoomInstanceVariable(t.activeRoomId,a.ch.ROOM_LANDSCAPE_TYPE);n=n&&n.length?n:"101",r=r&&r.length?r:"101",c=c&&c.length?c:"1.1",s.reset(!1),s.updateRoomWallsAndFloorVisibility(!0,!0),s.updateObjectRoom(r,n,c),s.addAvatarIntoRoom(e.figure,0)}),[s,o]),Object(c.useEffect)((()=>{o&&u(jt.BOT,o.botData.id)&&j(jt.BOT,o.botData.id)}),[o,u,j]),Object(c.useEffect)((()=>{if(!n)return;const e=l();return()=>d(e)}),[n,l,d]),Object(c.useEffect)((()=>(r(!0),()=>r(!1))),[]),i&&i.length?Object(an.jsxs)(un,{children:[Object(an.jsx)(Fn,{size:7,overflow:"hidden",children:Object(an.jsx)(jn,{columnCount:5,children:i&&i.length>0&&i.map((e=>Object(an.jsx)(Ll,{botItem:e},e.botData.id)))})}),Object(an.jsxs)(Fn,{size:5,overflow:"auto",children:[Object(an.jsx)(Fn,{overflow:"hidden",position:"relative",children:Object(an.jsx)(nr,{roomPreviewer:s,height:140})}),o&&Object(an.jsxs)(Fn,{grow:!0,justifyContent:"between",gap:2,children:[Object(an.jsx)(ur,{grow:!0,truncate:!0,children:o.botData.name}),!!t&&Object(an.jsx)(bn,{variant:"success",onClick:e=>ut(o),children:We("inventory.furni.placetoroom")})]})]})]}):Object(an.jsx)(Dl,{title:We("inventory.empty.bots.title"),desc:We("inventory.empty.bots.desc")})},Ul=e=>{const{groupItem:t=null,...s}=e,[n,r]=Object(c.useState)(!1),{selectedItem:i=null,setSelectedItem:o=null}=mc(),l=e=>{switch(e.type){case a.Ve.MOUSE_DOWN:return o(t),void r(!0);case a.Ve.MOUSE_UP:return void r(!1);case a.Ve.ROLL_OUT:if(!n||t!==i)return;return void dt(t);case"dblclick":return void dt(t)}},d=t.getUnlockedCount();return Object(an.jsx)(Vn,{className:d?"":"opacity-0-5 ",itemImage:t.iconUrl,itemCount:t.getUnlockedCount(),itemActive:t===i,itemUniqueNumber:t.stuffData.uniqueNumber,itemUnseen:t.hasUnseenItems,onMouseDown:l,onMouseUp:l,onMouseOut:l,onDoubleClick:l,...s})},Ml=e=>{const{groupItems:t=[],setGroupItems:s=null}=e,[n,r]=Object(c.useState)("");return Object(c.useEffect)((()=>{let e=[...t];if(n&&n.length){const s=n.toLocaleLowerCase();e=t.filter((e=>s&&s.length&&e.name.toLocaleLowerCase().includes(s)?e:null))}s(e)}),[t,s,n]),Object(an.jsxs)(hn,{gap:1,children:[Object(an.jsx)("input",{type:"text",className:"form-control form-control-sm",placeholder:We("generic.search"),value:n,onChange:e=>r(e.target.value)}),Object(an.jsx)(bn,{variant:"primary",children:Object(an.jsx)(fn.a,{icon:"search"})})]})},Fl=e=>{const{roomSession:t=null,roomPreviewer:s=null}=e,[n,r]=Object(c.useState)(!1),[i,o]=Object(c.useState)([]),{groupItems:l=[],selectedItem:d=null,activate:u=null,deactivate:j=null}=mc(),{resetItems:h=null}=lc();return Object(c.useEffect)((()=>{if(!d||!s)return;const e=d.getLastItem();if(!e)return;const t=C();let n=t.getRoomInstanceVariable(t.activeRoomId,a.ch.ROOM_WALL_TYPE),r=t.getRoomInstanceVariable(t.activeRoomId,a.ch.ROOM_FLOOR_TYPE),c=t.getRoomInstanceVariable(t.activeRoomId,a.ch.ROOM_LANDSCAPE_TYPE);if(n=n&&n.length?n:"101",r=r&&r.length?r:"101",c=c&&c.length?c:"1.1",s.reset(!1),s.updateObjectRoom(r,n,c),s.updateRoomWallsAndFloorVisibility(!0,!0),e.category===Je.WALL_PAPER||e.category===Je.FLOOR||e.category===Je.LANDSCAPE){if(r=e.category===Je.FLOOR?d.stuffData.getLegacyString():r,n=e.category===Je.WALL_PAPER?d.stuffData.getLegacyString():n,c=e.category===Je.LANDSCAPE?d.stuffData.getLegacyString():c,s.updateObjectRoom(r,n,c),e.category===Je.LANDSCAPE){const e=F().getWallItemDataByName("noob_window_double");e&&s.addWallItemIntoRoom(e.id,new a.kj(90,0,0),e.customParams)}}else d.isWallItem?s.addWallItemIntoRoom(d.type,new a.kj(90),e.stuffData.getLegacyString()):s.addFurnitureIntoRoom(d.type,new a.kj(90),d.stuffData,e.extra.toString())}),[s,d]),Object(c.useEffect)((()=>{d&&d.hasUnseenItems&&(h(jt.FURNI,d.items.map((e=>e.id))),d.hasUnseenItems=!1)}),[d,h]),Object(c.useEffect)((()=>{if(!n)return;const e=u();return()=>j(e)}),[n,u,j]),Object(c.useEffect)((()=>(r(!0),()=>r(!1))),[]),l&&l.length?Object(an.jsxs)(un,{children:[Object(an.jsxs)(Fn,{size:7,overflow:"hidden",children:[Object(an.jsx)(Ml,{groupItems:l,setGroupItems:o}),Object(an.jsx)(jn,{columnCount:5,children:i&&i.length>0&&i.map(((e,t)=>Object(an.jsx)(Ul,{groupItem:e},t)))})]}),Object(an.jsxs)(Fn,{size:5,overflow:"auto",children:[Object(an.jsxs)(Fn,{overflow:"hidden",position:"relative",children:[Object(an.jsx)(nr,{roomPreviewer:s,height:140}),d&&d.stuffData.isUnique&&Object(an.jsx)(Gn,{className:"top-2 end-2",position:"absolute",uniqueNumber:d.stuffData.uniqueNumber,uniqueSeries:d.stuffData.uniqueSeries}),d&&d.stuffData.rarityLevel>-1&&Object(an.jsx)(sr,{className:"top-2 end-2",position:"absolute",level:d.stuffData.rarityLevel})]}),d&&Object(an.jsxs)(Fn,{grow:!0,justifyContent:"between",gap:2,children:[Object(an.jsx)(ur,{grow:!0,truncate:!0,children:d.name}),Object(an.jsxs)(Fn,{gap:1,children:[!!t&&Object(an.jsx)(bn,{variant:"success",onClick:e=>dt(d),children:We("inventory.furni.placetoroom")}),d&&d.isSellable&&Object(an.jsx)(bn,{onClick:e=>(e=>{const t=e.getLastItem();return!!t&&!!t.sellable&&void $e(new Nr(t))})(d),children:We("inventory.marketplace.sell")})]})]})]})]}):Object(an.jsx)(Dl,{title:We("inventory.empty.title"),desc:We("inventory.empty.desc")})},Bl=e=>{const{cancelTrade:t=null}=e,[s,n]=Object(c.useState)(null),[r,i]=Object(c.useState)(null),[o,l]=Object(c.useState)(null),[d,u]=Object(c.useState)(null),[j,h]=Object(c.useState)(3),[b,g]=Object(c.useState)(1),{ownUser:m=null,otherUser:O=null,groupItems:p=[],tradeState:f=gt.TRADING_STATE_READY,progressTrade:x=null,removeItem:_=null,setTradeState:I=null}=_c(),{simpleAlert:E=null}=Hr(),C=(e,t,s,n,r)=>{if(!m||m.accepts||!m.userItems)return!1;if(m.userItems.length<9)return!0;if(!n)return!1;let c=t.toString();return c=s===Je.POSTER?c+"poster"+r.getLegacyString():s===Je.GUILD_FURNI?((e,t)=>{let s=e.toString();if(!(t instanceof a.di))return s;let n=1;for(;n<5;)s=s+","+t.getValue(n),n++;return s})(t,r):(e?"I":"S")+c,!!m.userItems.getValue(c)},v=e=>{if(!s)return;const t=s.getTradeItems(e);if(!t||!t.length)return;let n=null;const r=[];for(const s of t)r.push(s.id),n||(n=s);if(m.userItems.length+r.length<=1500)if(!n.isGroupable&&r.length)Ee(new a.ri(r.pop()));else{const e=[];for(const t of r)C(n.isWallItem,n.type,n.category,n.isGroupable,n.stuffData)&&e.push(t);e.length&&(1===e.length?Ee(new a.ri(e.pop())):Ee(new a.si(...e)))}else E(We("trading.items.too_many_items.desc"),fs.DEFAULT,null,null,We("trading.items.too_many_items.title"))},N=e=>{const t=e?"lock":"unlock",s=e?"success":"danger";return Object(an.jsx)(fn.a,{icon:t,className:"text-"+s})},T=e=>{((e,t)=>{(isNaN(Number(e))||Number(e)<0||!e)&&(e=1),e=Math.max(Number(e),1),(e=Math.min(Number(e),t))!==b&&g(e)})(b,e),v(b)};return Object(c.useEffect)((()=>{g(1)}),[s]),Object(c.useEffect)((()=>{if(f!==gt.TRADING_STATE_COUNTDOWN)return;h(3);const e=setInterval((()=>{h((t=>{const s=t-1;return 0===s&&clearInterval(e),s}))}),1e3);return()=>clearInterval(e)}),[f,I]),Object(c.useEffect)((()=>{0===j&&I(gt.TRADING_STATE_CONFIRMING)}),[j,I]),f!==gt.TRADING_STATE_READY&&m&&O?Object(an.jsxs)(un,{children:[Object(an.jsxs)(Fn,{size:4,overflow:"hidden",children:[Object(an.jsx)(Ml,{groupItems:p,setGroupItems:u}),Object(an.jsxs)(hn,{column:!0,fullHeight:!0,justifyContent:"between",overflow:"hidden",gap:2,children:[Object(an.jsx)(jn,{columnCount:3,children:d&&d.length>0&&d.map(((e,t)=>{const r=e.getUnlockedCount();return Object(an.jsx)(Vn,{className:r?"":"opacity-0-5 ",itemImage:e.iconUrl,itemCount:r,itemActive:s===e,itemUniqueNumber:e.stuffData.uniqueNumber,onClick:t=>r&&n(e),onDoubleClick:e=>v(1),children:r>0&&s===e&&Object(an.jsx)(bn,{position:"absolute",variant:"success",className:"trade-button bottom-1 end-1",onClick:e=>v(1),children:Object(an.jsx)(fn.a,{icon:"chevron-right"})})},t)}))}),Object(an.jsxs)(Fn,{gap:1,alignItems:"end",children:[Object(an.jsxs)(un,{overflow:"hidden",children:[Object(an.jsx)(Fn,{size:6,overflow:"hidden",children:Object(an.jsx)("input",{type:"number",className:"form-control form-control-sm quantity-input",placeholder:We("catalog.bundlewidget.spinner.select.amount"),disabled:!s,value:b,onChange:e=>g(e.target.valueAsNumber)})}),Object(an.jsx)(Fn,{size:6,overflow:"hidden",children:Object(an.jsx)(bn,{variant:"secondary",disabled:!s,onClick:e=>T(s.getUnlockedCount()),children:We("inventory.trading.areoffering")})})]}),Object(an.jsx)(on,{fullWidth:!0,className:"badge bg-muted",children:s?s.name:We("catalog_selectproduct")})]})]})]}),Object(an.jsxs)(Fn,{size:8,overflow:"hidden",children:[Object(an.jsxs)(un,{overflow:"hidden",children:[Object(an.jsxs)(Fn,{size:6,overflow:"hidden",children:[Object(an.jsxs)(hn,{justifyContent:"between",alignItems:"center",children:[Object(an.jsxs)(ur,{children:[We("inventory.trading.you")," ",We("inventory.trading.areoffering"),":"]}),N(m.accepts)]}),Object(an.jsx)(jn,{columnCount:3,children:Array.from(Array(9),((e,t)=>{const s=m.userItems.getWithIndex(t)||null;return s?Object(an.jsx)(Vn,{itemActive:r===s,itemImage:s.iconUrl,itemCount:s.getTotalCount(),itemUniqueNumber:s.stuffData.uniqueNumber,onClick:e=>i(s),onDoubleClick:e=>_(s),children:r===s&&Object(an.jsx)(bn,{position:"absolute",variant:"danger",className:"trade-button bottom-1 start-1",onClick:e=>_(s),children:Object(an.jsx)(fn.a,{icon:"chevron-left"})})},t):Object(an.jsx)(Vn,{},t)}))}),Object(an.jsx)(on,{fullWidth:!0,className:"badge bg-muted",children:r?r.name:We("catalog_selectproduct")})]}),Object(an.jsxs)(Fn,{size:6,overflow:"hidden",children:[Object(an.jsxs)(hn,{justifyContent:"between",alignItems:"center",children:[Object(an.jsxs)(ur,{children:[O.userName," ",We("inventory.trading.isoffering"),":"]}),N(O.accepts)]}),Object(an.jsx)(jn,{columnCount:3,children:Array.from(Array(9),((e,t)=>{const s=O.userItems.getWithIndex(t)||null;return s?Object(an.jsx)(Vn,{itemActive:o===s,itemImage:s.iconUrl,itemCount:s.getTotalCount(),itemUniqueNumber:s.stuffData.uniqueNumber,onClick:e=>l(s)},t):Object(an.jsx)(Vn,{},t)}))}),Object(an.jsx)(on,{fullWidth:!0,className:"badge bg-muted w-100",children:o?o.name:We("catalog_selectproduct")})]})]}),Object(an.jsxs)(hn,{grow:!0,justifyContent:"between",children:[Object(an.jsx)(bn,{variant:"danger",onClick:t,children:We("generic.cancel")}),f===gt.TRADING_STATE_READY&&Object(an.jsx)(bn,{variant:"secondary",disabled:!m.itemCount&&!O.itemCount,onClick:x,children:We("inventory.trading.accept")}),f===gt.TRADING_STATE_RUNNING&&Object(an.jsx)(bn,{variant:"secondary",disabled:!m.itemCount&&!O.itemCount,onClick:x,children:We(m.accepts?"inventory.trading.modify":"inventory.trading.accept")}),f===gt.TRADING_STATE_COUNTDOWN&&Object(an.jsx)(bn,{variant:"secondary",disabled:!0,children:We("inventory.trading.countdown",["counter"],[j.toString()])}),f===gt.TRADING_STATE_CONFIRMING&&Object(an.jsx)(bn,{variant:"secondary",onClick:x,children:We("inventory.trading.button.restore")}),f===gt.TRADING_STATE_CONFIRMED&&Object(an.jsx)(bn,{variant:"secondary",children:We("inventory.trading.info.waiting")})]})]})]}):null},Hl=e=>{const{petItem:t=null,children:s=null,...n}=e,[r,i]=Object(c.useState)(!1),{selectedPet:o=null,setSelectedPet:l=null}=fc(),{isUnseen:d}=lc(),u=d(jt.PET,t.petData.id),j=e=>{switch(e.type){case a.Ve.MOUSE_DOWN:return l(t),void i(!0);case a.Ve.MOUSE_UP:return void i(!1);case a.Ve.ROLL_OUT:if(!r||t!==o)return;return void lt(t);case"dblclick":return void lt(t)}};return Object(an.jsxs)(Vn,{itemActive:t===o,itemUnseen:u,onMouseDown:j,onMouseUp:j,onMouseOut:j,onDoubleClick:j,...n,children:[Object(an.jsx)(er,{figure:t.petData.figureData.figuredata,direction:3,headOnly:!0}),s]})},Gl=e=>{const{roomSession:t=null,roomPreviewer:s=null}=e,[n,r]=Object(c.useState)(!1),{petItems:i=null,selectedPet:o=null,activate:l=null,deactivate:d=null}=fc(),{isUnseen:u=null,removeUnseen:j=null}=lc();return Object(c.useEffect)((()=>{if(!o||!s)return;const e=o.petData,t=C();let n=t.getRoomInstanceVariable(t.activeRoomId,a.ch.ROOM_WALL_TYPE),r=t.getRoomInstanceVariable(t.activeRoomId,a.ch.ROOM_FLOOR_TYPE),c=t.getRoomInstanceVariable(t.activeRoomId,a.ch.ROOM_LANDSCAPE_TYPE);n=n&&n.length?n:"101",r=r&&r.length?r:"101",c=c&&c.length?c:"1.1",s.reset(!1),s.updateRoomWallsAndFloorVisibility(!0,!0),s.updateObjectRoom(r,n,c),s.addPetIntoRoom(e.figureString)}),[s,o]),Object(c.useEffect)((()=>{o&&u(jt.PET,o.petData.id)&&j(jt.PET,o.petData.id)}),[o,u,j]),Object(c.useEffect)((()=>{if(!n)return;const e=l();return()=>d(e)}),[n,l,d]),Object(c.useEffect)((()=>(r(!0),()=>r(!1))),[]),i&&i.length?Object(an.jsxs)(un,{children:[Object(an.jsx)(Fn,{size:7,overflow:"hidden",children:Object(an.jsx)(jn,{columnCount:5,children:i&&i.length>0&&i.map((e=>Object(an.jsx)(Hl,{petItem:e},e.petData.id)))})}),Object(an.jsxs)(Fn,{size:5,overflow:"auto",children:[Object(an.jsx)(Fn,{overflow:"hidden",position:"relative",children:Object(an.jsx)(nr,{roomPreviewer:s,height:140})}),o&&o.petData&&Object(an.jsxs)(Fn,{grow:!0,justifyContent:"between",gap:2,children:[Object(an.jsx)(ur,{grow:!0,truncate:!0,children:o.petData.name}),!!t&&Object(an.jsx)(bn,{variant:"success",onClick:e=>lt(o),children:We("inventory.furni.placetoroom")})]})]})]}):Object(an.jsx)(Dl,{title:We("inventory.empty.pets.title"),desc:We("inventory.empty.pets.desc")})},Wl="inventory.furni",Vl="inventory.bots",ql="inventory.furni.tab.pets",zl="inventory.badges",Yl=[Wl,Vl,ql,zl],$l=[jt.FURNI,jt.BOT,jt.PET,jt.BADGE],Kl=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)(Yl[0]),[i,o]=Object(c.useState)(null),[d,u]=Object(c.useState)(null),{isTrading:j=!1,stopTrading:h=null}=_c(),{getCount:b=null,resetCategory:g=null}=lc(),m=()=>{j&&h(),s(!1)};return mr(a.Fg.PLACED,(e=>{nt&&(ct(!1),e.placedInRoom||s(!0))})),Or([a.mh.CREATED,a.mh.ENDED],(e=>{switch(e.type){case a.mh.CREATED:return void o(e.session);case a.mh.ENDED:return o(null),void s(!1)}})),pr(a.u,(e=>{const t=e.getParser();for(const s of t.data)x().setBadgePointLimit(s.badgeId,s.limit)})),Object(c.useEffect)((()=>{const e={linkReceived:e=>{const t=e.split("/");if(!(t.length<2))switch(t[1]){case"show":return void s(!0);case"hide":return void s(!1);case"toggle":return void s((e=>!e))}},eventUrlPrefix:"inventory/"};return l(e),()=>E(e)}),[]),Object(c.useEffect)((()=>(u(new a.eh(C(),++a.eh.PREVIEW_COUNTER)),()=>{u((e=>(e.dispose(),null)))})),[]),Object(c.useEffect)((()=>{!t&&j&&s(!0)}),[t,j]),t?Object(an.jsxs)(yn,{uniqueKey:"inventory",className:"nitro-inventory",theme:j?"primary-slim":"",children:[Object(an.jsx)(vn,{headerText:We("inventory.title"),onCloseClick:m}),!j&&Object(an.jsxs)(an.Fragment,{children:[Object(an.jsx)(or,{children:Yl.map(((e,t)=>Object(an.jsx)(ar,{isActive:n===e,onClick:t=>r(e),count:b($l[t]),children:We(e)},t)))}),Object(an.jsxs)(In,{children:[n===Wl&&Object(an.jsx)(Fl,{roomSession:i,roomPreviewer:d}),n===Vl&&Object(an.jsx)(Pl,{roomSession:i,roomPreviewer:d}),n===ql&&Object(an.jsx)(Gl,{roomSession:i,roomPreviewer:d}),n===zl&&Object(an.jsx)(Al,{})]})]}),j&&Object(an.jsx)(In,{children:Object(an.jsx)(Bl,{cancelTrade:m})})]}):null},Xl=e=>{const{records:t=null}=e,{openRoomInfo:s=null}=Ec(),n=e=>{let s=t[0].chatlog[e.index];return Object(an.jsx)(Ja.b,{cache:o,columnIndex:0,parent:e.parent,rowIndex:e.index,children:Object(an.jsxs)(un,{fullHeight:!1,style:e.style,gap:1,alignItems:"center",className:"log-entry py-1 border-bottom",children:[Object(an.jsx)(ur,{className:"g-col-2",children:s.timestamp}),Object(an.jsx)(ur,{className:"g-col-3",bold:!0,underline:!0,pointer:!0,onClick:e=>m(`mod-tools/open-user-info/${s.userId}`),children:s.userName}),Object(an.jsx)(ur,{textBreak:!0,wrap:!0,className:"g-col-7",children:s.message})]},e.key)},e.key)},r=e=>{let s=null,n=null,r=!1,c=0;for(let i=0;i<t.length;i++){if(n=t[i],c++,c+=n.chatlog.length,e.index>c-1)continue;if(e.index+1===c-n.chatlog.length){r=!0;break}const a=e.index-(c-n.chatlog.length);s=n.chatlog[a];break}return Object(an.jsxs)(Ja.b,{cache:o,columnIndex:0,parent:e.parent,rowIndex:e.index,children:[r&&n&&Object(an.jsx)(a,{roomId:n.roomId,roomName:n.roomName,uniqueKey:e.key,style:e.style}),!r&&Object(an.jsxs)(un,{fullHeight:!1,style:e.style,gap:1,alignItems:"center",className:"log-entry py-1 border-bottom",children:[Object(an.jsx)(ur,{className:"g-col-2",children:s.timestamp}),Object(an.jsx)(ur,{className:"g-col-3",bold:!0,underline:!0,pointer:!0,onClick:e=>m(`mod-tools/open-user-info/${s.userId}`),children:s.userName}),Object(an.jsx)(ur,{textBreak:!0,wrap:!0,className:"g-col-7",children:s.message})]},e.key)]},e.key)},i=Object(c.useCallback)((()=>{let e=0;for(let s=0;s<t.length;s++)e++,e+=t[s].chatlog.length;return e}),[t]),a=e=>Object(an.jsxs)(hn,{gap:2,alignItems:"center",justifyContent:"between",className:"room-info bg-muted rounded p-1",style:e.style,children:[Object(an.jsxs)(hn,{gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:"Room name:"}),Object(an.jsx)(ur,{children:e.roomName})]}),Object(an.jsxs)(hn,{gap:1,children:[Object(an.jsx)(bn,{onClick:t=>ps(e.roomId),children:"Visit Room"}),Object(an.jsx)(bn,{onClick:t=>s(e.roomId),children:"Room Tools"})]})]},e.uniqueKey),o=new Ja.c({defaultHeight:25,fixedWidth:!0});return Object(an.jsxs)(an.Fragment,{children:[t&&1===t.length&&Object(an.jsx)(a,{roomId:t[0].roomId,roomName:t[0].roomName,uniqueKey:null,style:{}}),Object(an.jsxs)(Fn,{fit:!0,gap:0,overflow:"hidden",children:[Object(an.jsx)(Fn,{gap:2,children:Object(an.jsxs)(un,{gap:1,className:"text-black fw-bold border-bottom pb-1",children:[Object(an.jsx)(on,{className:"g-col-2",children:"Time"}),Object(an.jsx)(on,{className:"g-col-3",children:"User"}),Object(an.jsx)(on,{className:"g-col-7",children:"Message"})]})}),t&&t.length>0&&Object(an.jsx)(Fn,{className:"log-container striped-children",overflow:"auto",gap:0,children:Object(an.jsx)(Ja.a,{defaultWidth:400,defaultHeight:200,children:e=>{let{height:s,width:c}=e;return o.clearAll(),Object(an.jsx)(Ja.d,{width:c,height:s,rowCount:t.length>1?i():t[0].chatlog.length,rowHeight:o.rowHeight,className:"log-entry-container",rowRenderer:t.length>1?r:n,deferredMeasurementCache:o})}})})]})]})},Ql=e=>{const{roomId:t=null,onCloseClick:s=null}=e,[n,r]=Object(c.useState)(null);return pr(a.xg,(e=>{const s=e.getParser();s&&s.data.roomId===t&&r(s.data)})),Object(c.useEffect)((()=>{Ee(new a.Oc(t))}),[t]),n?Object(an.jsxs)(yn,{className:"nitro-mod-tools-chatlog",theme:"primary-slim",windowPosition:Sn.TOP_LEFT,children:[Object(an.jsx)(vn,{headerText:`Room Chatlog ${n.roomName}`,onCloseClick:s}),Object(an.jsx)(In,{className:"text-black h-100",children:n&&Object(an.jsx)(Xl,{records:[n]})})]}):null},Jl=e=>{const{roomId:t=null,onCloseClick:s=null}=e,[n,r]=Object(c.useState)(!1),[i,o]=Object(c.useState)(null),[l,d]=Object(c.useState)(null),[u,j]=Object(c.useState)(null),[h,b]=Object(c.useState)(null),[g,O]=Object(c.useState)(!1),[p,f]=Object(c.useState)(0),[x,_]=Object(c.useState)(!1),[I,E]=Object(c.useState)(!1),[C,v]=Object(c.useState)(!1),[N,T]=Object(c.useState)(""),S=(e,s)=>{if(e)switch(e){case"alert_only":if(0===N.trim().length)return;return Ee(new a.Me(a.Me.ACTION_ALERT,N,"")),void Ee(new a.Le(t,I?1:0,C?1:0,x?1:0));case"send_message":if(0===N.trim().length)return;return Ee(new a.Me(a.Me.ACTION_MESSAGE,N,"")),void Ee(new a.Le(t,I?1:0,C?1:0,x?1:0))}};return pr(a.Re,(e=>{const s=e.getParser();s&&s.data.flatId===t&&(o(s.data.flatId),d(s.data.room.name),j(s.data.ownerId),b(s.data.ownerName),O(s.data.ownerInRoom),f(s.data.userCount))})),Object(c.useEffect)((()=>{n||(Ee(new a.Hc(t)),r(!0))}),[t,n,r]),Object(an.jsxs)(yn,{className:"nitro-mod-tools-room",theme:"primary-slim",windowPosition:Sn.TOP_LEFT,children:[Object(an.jsx)(vn,{headerText:"Room Info"+(l?": "+l:""),onCloseClick:e=>s()}),Object(an.jsxs)(In,{className:"text-black",children:[Object(an.jsxs)(hn,{gap:2,children:[Object(an.jsxs)(Fn,{justifyContent:"center",grow:!0,gap:1,children:[Object(an.jsxs)(hn,{alignItems:"center",gap:2,children:[Object(an.jsx)(ur,{bold:!0,align:"end",className:"col-7",children:"Room Owner:"}),Object(an.jsx)(ur,{underline:!0,pointer:!0,truncate:!0,children:h})]}),Object(an.jsxs)(hn,{alignItems:"center",gap:2,children:[Object(an.jsx)(ur,{bold:!0,align:"end",className:"col-7",children:"Users in room:"}),Object(an.jsx)(ur,{children:p})]}),Object(an.jsxs)(hn,{alignItems:"center",gap:2,children:[Object(an.jsx)(ur,{bold:!0,align:"end",className:"col-7",children:"Owner in room:"}),Object(an.jsx)(ur,{children:g?"Yes":"No"})]})]}),Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(bn,{onClick:e=>ps(t),children:"Visit Room"}),Object(an.jsx)(bn,{onClick:e=>m(`mod-tools/open-room-chatlog/${t}`),children:"Chatlog"})]})]}),Object(an.jsxs)(Fn,{className:"bg-muted rounded p-2",gap:1,children:[Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)("input",{className:"form-check-input",type:"checkbox",checked:x,onChange:e=>_(e.target.checked)}),Object(an.jsx)(ur,{small:!0,children:"Kick everyone out"})]}),Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)("input",{className:"form-check-input",type:"checkbox",checked:I,onChange:e=>E(e.target.checked)}),Object(an.jsx)(ur,{small:!0,children:"Enable the doorbell"})]}),Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)("input",{className:"form-check-input",type:"checkbox",checked:C,onChange:e=>v(e.target.checked)}),Object(an.jsx)(ur,{small:!0,children:"Change room name"})]})]}),Object(an.jsx)("textarea",{className:"form-control",placeholder:"Type a mandatory message to the users in this text box...",value:N,onChange:e=>T(e.target.value)}),Object(an.jsxs)(hn,{justifyContent:"between",children:[Object(an.jsx)(bn,{variant:"danger",onClick:e=>S("send_message"),children:"Send Caution"}),Object(an.jsx)(bn,{onClick:e=>S("alert_only"),children:"Send Alert only"})]})]})]})},Zl=e=>{const{onCloseClick:t=null,issueId:s=null}=e,[n,r]=Object(c.useState)(null);return pr(a.ib,(e=>{const t=e.getParser();t&&t.data.issueId===s&&r(t.data)})),Object(c.useEffect)((()=>{Ee(new a.vc(s))}),[s]),Object(an.jsxs)(yn,{className:"nitro-mod-tools-chatlog",theme:"primary-slim",children:[Object(an.jsx)(vn,{headerText:"Issue Chatlog",onCloseClick:t}),Object(an.jsx)(In,{className:"text-black",children:n&&Object(an.jsx)(Xl,{records:[n.chatRecord]})})]})},ed=e=>{const{issueId:t=null,onIssueInfoClosed:s=null}=e,[n,r]=Object(c.useState)(!1),{tickets:i=[],openUserInfo:o=null}=Ec(),l=i.find((e=>e.issueId===t)),d=e=>{Ee(new a.ob([t],e)),s(t)};return Object(an.jsxs)(an.Fragment,{children:[Object(an.jsxs)(yn,{className:"nitro-mod-tools-handle-issue",theme:"primary-slim",children:[Object(an.jsx)(vn,{headerText:"Resolving issue "+t,onCloseClick:()=>s(t)}),Object(an.jsxs)(In,{className:"text-black",children:[Object(an.jsx)(ur,{fontSize:4,children:"Issue Information"}),Object(an.jsxs)(un,{overflow:"auto",children:[Object(an.jsx)(Fn,{size:8,children:Object(an.jsx)("table",{className:"table table-striped table-sm table-text-small text-black m-0",children:Object(an.jsxs)("tbody",{children:[Object(an.jsxs)("tr",{children:[Object(an.jsx)("th",{children:"Source"}),Object(an.jsx)("td",{children:js(l.categoryId)})]}),Object(an.jsxs)("tr",{children:[Object(an.jsx)("th",{children:"Category"}),Object(an.jsx)("td",{className:"text-break",children:We("help.cfh.topic."+l.reportedCategoryId)})]}),Object(an.jsxs)("tr",{children:[Object(an.jsx)("th",{children:"Description"}),Object(an.jsx)("td",{className:"text-break",children:l.message})]}),Object(an.jsxs)("tr",{children:[Object(an.jsx)("th",{children:"Caller"}),Object(an.jsx)("td",{children:Object(an.jsx)(ur,{bold:!0,underline:!0,pointer:!0,onClick:e=>o(l.reporterUserId),children:l.reporterUserName})})]}),Object(an.jsxs)("tr",{children:[Object(an.jsx)("th",{children:"Reported User"}),Object(an.jsx)("td",{children:Object(an.jsx)(ur,{bold:!0,underline:!0,pointer:!0,onClick:e=>o(l.reportedUserId),children:l.reportedUserName})})]})]})})}),Object(an.jsxs)(Fn,{size:4,gap:1,children:[Object(an.jsx)(bn,{variant:"secondary",onClick:()=>r(!n),children:"Chatlog"}),Object(an.jsx)(bn,{onClick:e=>d(a.ob.RESOLUTION_USELESS),children:"Close as useless"}),Object(an.jsx)(bn,{variant:"danger",onClick:e=>d(a.ob.RESOLUTION_ABUSIVE),children:"Close as abusive"}),Object(an.jsx)(bn,{variant:"success",onClick:e=>d(a.ob.RESOLUTION_RESOLVED),children:"Close as resolved"}),Object(an.jsx)(bn,{variant:"secondary",onClick:e=>(e=>{Ee(new a.fg([e])),s(e)})(t),children:"Release"})]})]})]})]}),n&&Object(an.jsx)(Zl,{issueId:t,onCloseClick:()=>r(!1)})]})},td=e=>{const{myIssues:t=null,handleIssue:s=null}=e;return Object(an.jsxs)(Fn,{gap:0,overflow:"hidden",children:[Object(an.jsx)(Fn,{gap:2,children:Object(an.jsxs)(un,{gap:1,className:"text-black fw-bold border-bottom pb-1",children:[Object(an.jsx)(on,{className:"g-col-2",children:"Type"}),Object(an.jsx)(on,{className:"g-col-3",children:"Room/Player"}),Object(an.jsx)(on,{className:"g-col-3",children:"Opened"}),Object(an.jsx)(on,{className:"g-col-2"}),Object(an.jsx)(on,{className:"g-col-2"})]})}),Object(an.jsx)(Fn,{overflow:"auto",className:"striped-children",gap:0,children:t&&t.length>0&&t.map((e=>Object(an.jsxs)(un,{gap:1,alignItems:"center",className:"text-black py-1 border-bottom",children:[Object(an.jsx)(on,{className:"g-col-2",children:e.categoryId}),Object(an.jsx)(on,{className:"g-col-3",children:e.reportedUserName}),Object(an.jsx)(on,{className:"g-col-3",children:new Date(Date.now()-e.issueAgeInMilliseconds).toLocaleTimeString()}),Object(an.jsx)(on,{className:"g-col-2",children:Object(an.jsx)(bn,{variant:"primary",onClick:t=>s(e.issueId),children:"Handle"})}),Object(an.jsx)(on,{className:"g-col-2",children:Object(an.jsx)(bn,{variant:"danger",onClick:t=>Ee(new a.fg([e.issueId])),children:"Release"})})]},e.issueId)))})]})},sd=e=>{const{openIssues:t=null}=e;return Object(an.jsxs)(Fn,{gap:0,overflow:"hidden",children:[Object(an.jsx)(Fn,{gap:2,children:Object(an.jsxs)(un,{gap:1,className:"text-black fw-bold border-bottom pb-1",children:[Object(an.jsx)(on,{className:"g-col-2",children:"Type"}),Object(an.jsx)(on,{className:"g-col-3",children:"Room/Player"}),Object(an.jsx)(on,{className:"g-col-4",children:"Opened"}),Object(an.jsx)(on,{className:"g-col-3"})]})}),Object(an.jsx)(Fn,{overflow:"auto",className:"striped-children",gap:0,children:t&&t.length>0&&t.map((e=>Object(an.jsxs)(un,{gap:1,alignItems:"center",className:"text-black py-1 border-bottom",children:[Object(an.jsx)(on,{className:"g-col-2",children:e.categoryId}),Object(an.jsx)(on,{className:"g-col-3",children:e.reportedUserName}),Object(an.jsx)(on,{className:"g-col-4",children:new Date(Date.now()-e.issueAgeInMilliseconds).toLocaleTimeString()}),Object(an.jsx)(on,{className:"g-col-3",children:Object(an.jsx)(bn,{variant:"success",onClick:t=>Ee(new a.Mf([e.issueId],!1,0,"pick issue button")),children:"Pick Issue"})})]},e.issueId)))})]})},nd=e=>{const{pickedIssues:t=null}=e;return Object(an.jsxs)(Fn,{gap:0,overflow:"hidden",children:[Object(an.jsx)(Fn,{gap:2,children:Object(an.jsxs)(un,{gap:1,className:"text-black fw-bold border-bottom pb-1",children:[Object(an.jsx)(on,{className:"g-col-2",children:"Type"}),Object(an.jsx)(on,{className:"g-col-3",children:"Room/Player"}),Object(an.jsx)(on,{className:"g-col-4",children:"Opened"}),Object(an.jsx)(on,{className:"g-col-3",children:"Picker"})]})}),Object(an.jsx)(Fn,{overflow:"auto",className:"striped-children",gap:0,children:t&&t.length>0&&t.map((e=>Object(an.jsxs)(un,{gap:1,alignItems:"center",className:"text-black py-1 border-bottom",children:[Object(an.jsx)(on,{className:"g-col-2",children:e.categoryId}),Object(an.jsx)(on,{className:"g-col-3",children:e.reportedUserName}),Object(an.jsx)(on,{className:"g-col-4",children:new Date(Date.now()-e.issueAgeInMilliseconds).toLocaleTimeString()}),Object(an.jsx)(on,{className:"g-col-3",children:e.pickerUserName})]},e.issueId)))})]})},rd=["Open Issues","My Issues","Picked Issues"],cd=e=>{const{onCloseClick:t=null}=e,[s,n]=Object(c.useState)(0),[r,i]=Object(c.useState)([]),{tickets:o=[]}=Ec(),l=o.filter((e=>e.state===a.le.STATE_OPEN)),d=o.filter((e=>e.state===a.le.STATE_PICKED&&e.pickerUserId===F().userId)),u=o.filter((e=>e.state===a.le.STATE_PICKED)),j=e=>{i((t=>{const s=[...t],n=s.indexOf(e);return n>=0&&s.splice(n,1),s}))},h=e=>{i((t=>{const s=[...t],n=s.indexOf(e);return-1===n?s.push(e):s.splice(n,1),s}))},b=()=>{switch(s){case 0:return Object(an.jsx)(sd,{openIssues:l});case 1:return Object(an.jsx)(td,{myIssues:d,handleIssue:h});case 2:return Object(an.jsx)(nd,{pickedIssues:u})}return null};return Object(an.jsxs)(an.Fragment,{children:[Object(an.jsxs)(yn,{className:"nitro-mod-tools-tickets",children:[Object(an.jsx)(vn,{headerText:"Tickets",onCloseClick:t}),Object(an.jsx)(or,{children:rd.map(((e,t)=>Object(an.jsx)(ar,{isActive:s===t,onClick:e=>n(t),children:e},t)))}),Object(an.jsx)(In,{gap:1,children:Object(an.jsx)(b,{})})]}),r&&r.length>0&&r.map((e=>Object(an.jsx)(ed,{issueId:e,onIssueInfoClosed:j},e)))]})},id=e=>{const{userId:t=null,onCloseClick:s=null}=e,[n,r]=Object(c.useState)(null),[i,o]=Object(c.useState)(null);return pr(a.Mi,(e=>{const s=e.getParser();s&&s.data.userId===t&&(o(s.data.username),r(s.data.roomChatlogs))})),Object(c.useEffect)((()=>{Ee(new a.Sc(t))}),[t]),Object(an.jsxs)(yn,{className:"nitro-mod-tools-chatlog",theme:"primary-slim",windowPosition:Sn.TOP_LEFT,children:[Object(an.jsx)(vn,{headerText:`User Chatlog: ${i||""}`,onCloseClick:s}),Object(an.jsx)(In,{className:"text-black h-100",children:n&&Object(an.jsx)(Xl,{records:n})})]})},ad=[new hs(1,"Alert",hs.ALERT,1,0),new hs(2,"Mute 1h",hs.MUTE,2,0),new hs(3,"Ban 18h",hs.BAN,3,0),new hs(4,"Ban 7 days",hs.BAN,4,0),new hs(5,"Ban 30 days (step 1)",hs.BAN,5,0),new hs(7,"Ban 30 days (step 2)",hs.BAN,7,0),new hs(6,"Ban 100 years",hs.BAN,6,0),new hs(106,"Ban avatar-only 100 years",hs.BAN,6,0),new hs(101,"Kick",hs.KICK,0,0),new hs(102,"Lock trade 1 week",hs.TRADE_LOCK,0,168),new hs(104,"Lock trade permanent",hs.TRADE_LOCK,0,876e3),new hs(105,"Message",hs.MESSAGE,0,0)],od=e=>{const{user:t=null,onCloseClick:s=null}=e,[n,r]=Object(c.useState)(-1),[i,o]=Object(c.useState)(-1),[l,d]=Object(c.useState)(""),{cfhCategories:u=null,settings:j=null}=Ec(),{simpleAlert:h=null}=Hr(),b=Object(c.useMemo)((()=>{const e=[];if(u&&u.length)for(const t of u)for(const s of t.topics)e.push(s);return e}),[u]),g=e=>h(e,fs.DEFAULT,null,null,"Error");return t?Object(an.jsxs)(yn,{className:"nitro-mod-tools-user-action",theme:"primary-slim",windowPosition:Sn.TOP_LEFT,children:[Object(an.jsx)(vn,{headerText:"Mod Action: "+(t?t.username:""),onCloseClick:()=>s()}),Object(an.jsxs)(In,{className:"text-black",children:[Object(an.jsxs)("select",{className:"form-select form-select-sm",value:n,onChange:e=>r(parseInt(e.target.value)),children:[Object(an.jsx)("option",{value:-1,disabled:!0,children:"CFH Topic"}),b.map(((e,t)=>Object(an.jsx)("option",{value:t,children:We("help.cfh.topic."+e.id)},t)))]}),Object(an.jsxs)("select",{className:"form-select form-select-sm",value:i,onChange:e=>o(parseInt(e.target.value)),children:[Object(an.jsx)("option",{value:-1,disabled:!0,children:"Sanction Type"}),ad.map(((e,t)=>Object(an.jsx)("option",{value:t,children:e.name},t)))]}),Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{small:!0,children:"Optional message type, overrides default"}),Object(an.jsx)("textarea",{className:"form-control",value:l,onChange:e=>d(e.target.value)})]}),Object(an.jsxs)(hn,{justifyContent:"between",gap:1,children:[Object(an.jsx)(bn,{variant:"primary",onClick:()=>{let e=null;const r=b[n];if(-1===n&&(e="You must select a CFH topic"),e)return g(e);const c=0===l.trim().length?We(`help.cfh.topic.${r.id}`):l;Ee(new a.Bb(t.userId,n,c)),s()},children:"Default Sanction"}),Object(an.jsx)(bn,{variant:"success",onClick:()=>{let e=null;const r=b[n],c=ad[i];if(-1===n||-1===i?e="You must select a CFH topic and Sanction":j&&j.cfhPermission?r?c||(e="You must select a sanction"):e="You must select a CFH topic":e="You do not have permission to do this",e)return void g(e);const o=0===l.trim().length?We(`help.cfh.topic.${r.id}`):l;switch(c.actionType){case hs.ALERT:if(!j.alertPermission)return void g("You have insufficient permissions");Ee(new a.Fe(t.userId,o,r.id));break;case hs.MUTE:Ee(new a.Je(t.userId,o,r.id));break;case hs.BAN:if(!j.banPermission)return void g("You have insufficient permissions");Ee(new a.Ge(t.userId,o,r.id,i,106===c.actionId));break;case hs.KICK:if(!j.kickPermission)return void g("You have insufficient permissions");Ee(new a.He(t.userId,o,r.id));break;case hs.TRADE_LOCK:{const e=60*c.actionLengthHours;Ee(new a.Ke(t.userId,o,e,r.id));break}case hs.MESSAGE:if(0===l.trim().length)return void g("Please write a message to user");Ee(new a.Ie(t.userId,l,r.id))}s()},children:"Sanction"})]})]})]}):null},ld=e=>{const{userId:t=null,onCloseClick:s=null}=e,[n,r]=Object(c.useState)(null);if(pr(a.Kh,(e=>{const s=e.getParser();s.data.userId===t&&r(s.data)})),Object(c.useEffect)((()=>{Ee(new a.Qc(t))}),[t]),!t)return null;const i=e=>{const t=n.rooms[e.index];return Object(an.jsxs)(un,{fullHeight:!1,style:e.style,gap:1,alignItems:"center",className:"text-black py-1 border-bottom",children:[Object(an.jsxs)(ur,{className:"g-col-2",children:[t.enterHour.toString().padStart(2,"0"),": ",t.enterMinute.toString().padStart(2,"0")]}),Object(an.jsx)(ur,{className:"g-col-7",children:t.roomName}),Object(an.jsx)(ur,{bold:!0,underline:!0,pointer:!0,variant:"primary",className:"g-col-3",onClick:e=>ps(t.roomId),children:"Visit Room"})]},e.key)};return Object(an.jsxs)(yn,{className:"nitro-mod-tools-user-visits",theme:"primary-slim",windowPosition:Sn.TOP_LEFT,children:[Object(an.jsx)(vn,{headerText:"User Visits",onCloseClick:s}),Object(an.jsx)(In,{className:"text-black",gap:1,children:Object(an.jsxs)(Fn,{fullHeight:!0,gap:0,overflow:"hidden",children:[Object(an.jsx)(Fn,{gap:2,children:Object(an.jsxs)(un,{gap:1,className:"text-black fw-bold border-bottom pb-1",children:[Object(an.jsx)(on,{className:"g-col-2",children:"Time"}),Object(an.jsx)(on,{className:"g-col-7",children:"Room name"}),Object(an.jsx)(on,{className:"g-col-3",children:"Visit"})]})}),Object(an.jsx)(Fn,{className:"log-container striped-children",overflow:"auto",gap:0,children:n&&Object(an.jsx)(Ja.a,{defaultWidth:400,defaultHeight:200,children:e=>{let{height:t,width:s}=e;return Object(an.jsx)(Ja.d,{width:s,height:t,rowCount:n.rooms.length,rowHeight:25,className:"log-entry-container",rowRenderer:i})}})})]})})]})},dd=e=>{const{user:t=null,onCloseClick:s=null}=e,[n,r]=Object(c.useState)(""),{simpleAlert:i=null}=Hr();if(!t)return null;return Object(an.jsxs)(yn,{className:"nitro-mod-tools-user-message",theme:"primary-slim",windowPosition:Sn.TOP_LEFT,children:[Object(an.jsx)(vn,{headerText:"Send Message",onCloseClick:()=>s()}),Object(an.jsxs)(In,{className:"text-black",children:[Object(an.jsxs)(ur,{children:["Message To: ",t.username]}),Object(an.jsx)("textarea",{className:"form-control",value:n,onChange:e=>r(e.target.value)}),Object(an.jsx)(bn,{fullWidth:!0,onClick:()=>{0!==n.trim().length?(Ee(new a.Ie(t.userId,n,-999)),s()):i("Please write a message to user.",null,null,null,"Error",null)},children:"Send message"})]})]})},ud=e=>{const{onCloseClick:t=null,userId:s=null}=e,[n,r]=Object(c.useState)(null),[i,o]=Object(c.useState)(!1),[l,d]=Object(c.useState)(!1),[u,j]=Object(c.useState)(!1),h=Object(c.useMemo)((()=>n?[{localeKey:"modtools.userinfo.userName",value:n.userName,showOnline:!0},{localeKey:"modtools.userinfo.cfhCount",value:n.cfhCount.toString()},{localeKey:"modtools.userinfo.abusiveCfhCount",value:n.abusiveCfhCount.toString()},{localeKey:"modtools.userinfo.cautionCount",value:n.cautionCount.toString()},{localeKey:"modtools.userinfo.banCount",value:n.banCount.toString()},{localeKey:"modtools.userinfo.lastSanctionTime",value:n.lastSanctionTime},{localeKey:"modtools.userinfo.tradingLockCount",value:n.tradingLockCount.toString()},{localeKey:"modtools.userinfo.tradingExpiryDate",value:n.tradingExpiryDate},{localeKey:"modtools.userinfo.minutesSinceLastLogin",value:a.Zb.format(60*n.minutesSinceLastLogin,".ago",2)},{localeKey:"modtools.userinfo.lastPurchaseDate",value:n.lastPurchaseDate},{localeKey:"modtools.userinfo.primaryEmailAddress",value:n.primaryEmailAddress},{localeKey:"modtools.userinfo.identityRelatedBanCount",value:n.identityRelatedBanCount.toString()},{localeKey:"modtools.userinfo.registrationAgeInMinutes",value:a.Zb.format(60*n.registrationAgeInMinutes,".ago",2)},{localeKey:"modtools.userinfo.userClassification",value:n.userClassification}]:null),[n]);return pr(a.Te,(e=>{const t=e.getParser();t&&t.data.userId===s&&r(t.data)})),Object(c.useEffect)((()=>{Ee(new a.Ic(s))}),[s]),n?Object(an.jsxs)(an.Fragment,{children:[Object(an.jsxs)(yn,{className:"nitro-mod-tools-user",theme:"primary-slim",windowPosition:Sn.TOP_LEFT,children:[Object(an.jsx)(vn,{headerText:We("modtools.userinfo.title",["username"],[n.userName]),onCloseClick:()=>t()}),Object(an.jsx)(In,{className:"text-black",children:Object(an.jsxs)(un,{overflow:"hidden",children:[Object(an.jsx)(Fn,{size:8,overflow:"auto",children:Object(an.jsx)("table",{className:"table table-striped table-sm table-text-small text-black m-0",children:Object(an.jsx)("tbody",{children:h.map(((e,t)=>Object(an.jsxs)("tr",{children:[Object(an.jsx)("th",{scope:"row",children:We(e.localeKey)}),Object(an.jsxs)("td",{children:[e.value,e.showOnline&&Object(an.jsx)("i",{className:`icon icon-pf-${n.online?"online":"offline"} ms-2`})]})]},t)))})})}),Object(an.jsxs)(Fn,{size:4,gap:1,children:[Object(an.jsx)(bn,{onClick:e=>m(`mod-tools/open-user-chatlog/${s}`),children:"Room Chat"}),Object(an.jsx)(bn,{onClick:e=>o(!i),children:"Send Message"}),Object(an.jsx)(bn,{onClick:e=>j(!u),children:"Room Visits"}),Object(an.jsx)(bn,{onClick:e=>d(!l),children:"Mod Action"})]})]})})]}),i&&Object(an.jsx)(dd,{user:{userId:s,username:n.userName},onCloseClick:()=>o(!1)}),l&&Object(an.jsx)(od,{user:{userId:s,username:n.userName},onCloseClick:()=>d(!1)}),u&&Object(an.jsx)(ld,{userId:s,onCloseClick:()=>j(!1)})]}):null},jd=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)(-1),[i,o]=Object(c.useState)(null),[d,u]=Object(c.useState)(!1),{openRooms:j=[],openRoomChatlogs:h=[],openUserChatlogs:b=[],openUserInfos:g=[],openRoomInfo:O=null,closeRoomInfo:p=null,toggleRoomInfo:f=null,openRoomChatlog:x=null,closeRoomChatlog:_=null,toggleRoomChatlog:I=null,openUserInfo:C=null,closeUserInfo:v=null,toggleUserInfo:N=null,openUserChatlog:T=null,closeUserChatlog:S=null,toggleUserChatlog:w=null}=Ec(),R=Object(c.useRef)(null);return mr([a.Eg.INITIALIZED,a.Eg.DISPOSED],(e=>{if(!a.Rg.isRoomPreviewerId(e.roomId))switch(e.type){case a.Eg.INITIALIZED:return void r(e.roomId);case a.Eg.DISPOSED:return void r(-1)}})),wc((e=>{if(e.category!==a.Wg.UNIT)return;const t=he();if(!t)return;const s=t.userDataManager.getUserDataByIndex(e.id);s&&s.type===a.ah.USER&&o({userId:s.webID,username:s.name})})),Object(c.useEffect)((()=>{const e={linkReceived:e=>{const t=e.split("/");if(!(t.length<2))switch(t[1]){case"show":return void s(!0);case"hide":return void s(!1);case"toggle":return void s((e=>!e));case"open-room-info":return void O(Number(t[2]));case"close-room-info":return void p(Number(t[2]));case"toggle-room-info":return void f(Number(t[2]));case"open-room-chatlog":return void x(Number(t[2]));case"close-room-chatlog":return void _(Number(t[2]));case"toggle-room-chatlog":return void I(Number(t[2]));case"open-user-info":return void C(Number(t[2]));case"close-user-info":return void v(Number(t[2]));case"toggle-user-info":return void N(Number(t[2]));case"open-user-chatlog":return void T(Number(t[2]));case"close-user-chatlog":return void S(Number(t[2]));case"toggle-user-chatlog":return void w(Number(t[2]))}},eventUrlPrefix:"mod-tools/"};return l(e),()=>E(e)}),[O,p,f,x,_,I,C,v,N,T,S,w]),Object(an.jsxs)(an.Fragment,{children:[t&&Object(an.jsxs)(yn,{uniqueKey:"mod-tools",className:"nitro-mod-tools",windowPosition:Sn.TOP_LEFT,theme:"primary-slim",children:[Object(an.jsx)(vn,{headerText:"Mod Tools",onCloseClick:e=>s(!1)}),Object(an.jsxs)(In,{className:"text-black",gap:1,children:[Object(an.jsxs)(bn,{gap:1,onClick:e=>m(`mod-tools/toggle-room-info/${n}`),disabled:n<=0,className:"position-relative",children:[Object(an.jsx)(on,{className:"icon icon-small-room position-absolute start-1"})," Room Tool"]}),Object(an.jsxs)(bn,{innerRef:R,gap:1,onClick:e=>m(`mod-tools/toggle-room-chatlog/${n}`),disabled:n<=0,className:"position-relative",children:[Object(an.jsx)(on,{className:"icon icon-chat-history position-absolute start-1"})," Chatlog Tool"]}),Object(an.jsxs)(bn,{gap:1,onClick:()=>m(`mod-tools/toggle-user-info/${i.userId}`),disabled:!i,className:"position-relative",children:[Object(an.jsx)(on,{className:"icon icon-user position-absolute start-1"})," User: ",i?i.username:""]}),Object(an.jsxs)(bn,{gap:1,onClick:()=>u((e=>!e)),className:"position-relative",children:[Object(an.jsx)(on,{className:"icon icon-tickets position-absolute start-1"})," Report Tool"]})]})]}),j.length>0&&j.map((e=>Object(an.jsx)(Jl,{roomId:e,onCloseClick:()=>m(`mod-tools/close-room-info/${e}`)},e))),h.length>0&&h.map((e=>Object(an.jsx)(Ql,{roomId:e,onCloseClick:()=>m(`mod-tools/close-room-chatlog/${e}`)},e))),g.length>0&&g.map((e=>Object(an.jsx)(ud,{userId:e,onCloseClick:()=>m(`mod-tools/close-user-info/${e}`)},e))),b.length>0&&b.map((e=>Object(an.jsx)(id,{userId:e,onCloseClick:()=>m(`mod-tools/close-user-chatlog/${e}`)},e))),d&&Object(an.jsx)(cd,{onCloseClick:()=>u(!1)})]})},hd=[bs.START_DOORBELL,bs.STATE_WAITING,bs.STATE_NO_ANSWER,bs.START_PASSWORD,bs.STATE_WRONG_PASSWORD],bd=[bs.START_DOORBELL,bs.STATE_WAITING,bs.STATE_NO_ANSWER],gd=(bs.START_PASSWORD,bs.STATE_WRONG_PASSWORD,e=>{const[t,s]=Object(c.useState)(""),{doorData:n=null,setDoorData:r=null}=vc(),i=()=>{n&&n.state===bs.STATE_WAITING&&be(),r(null)};if(Object(c.useEffect)((()=>{n&&n.state===bs.STATE_NO_ANSWER&&be()}),[n]),!n||n.state===bs.NONE||-1===hd.indexOf(n.state))return null;const a=bd.indexOf(n.state)>=0;return Object(an.jsxs)(yn,{className:"nitro-navigator-doorbell",theme:"primary-slim",children:[Object(an.jsx)(vn,{headerText:We(a?"navigator.doorbell.title":"navigator.password.title"),onCloseClick:i}),Object(an.jsxs)(In,{children:[Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:n&&n.roomInfo&&n.roomInfo.roomName}),n.state===bs.START_DOORBELL&&Object(an.jsx)(ur,{children:We("navigator.doorbell.info")}),n.state===bs.STATE_WAITING&&Object(an.jsx)(ur,{children:We("navigator.doorbell.waiting")}),n.state===bs.STATE_NO_ANSWER&&Object(an.jsx)(ur,{children:We("navigator.doorbell.no.answer")}),n.state===bs.START_PASSWORD&&Object(an.jsx)(ur,{children:We("navigator.password.info")}),n.state===bs.STATE_WRONG_PASSWORD&&Object(an.jsx)(ur,{children:We("navigator.password.retryinfo")})]}),a&&Object(an.jsxs)(Fn,{gap:1,children:[n.state===bs.START_DOORBELL&&Object(an.jsx)(bn,{variant:"success",onClick:()=>{n&&n.roomInfo&&(P(n.roomInfo.roomId),r((e=>{const t={...e};return t.state=bs.STATE_PENDING_SERVER,t})))},children:We("navigator.doorbell.button.ring")}),Object(an.jsx)(bn,{variant:"danger",onClick:i,children:We("generic.cancel")})]}),!a&&Object(an.jsxs)(an.Fragment,{children:[Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{children:We("navigator.password.enter")}),Object(an.jsx)("input",{type:"password",className:"form-control form-control-sm",onChange:e=>s(e.target.value)})]}),Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(bn,{variant:"success",onClick:()=>{n&&n.roomInfo&&(P(n.roomInfo.roomId,t),r((e=>{const t={...e};return t.state=bs.STATE_PENDING_SERVER,t})))},children:We("navigator.password.button.try")}),Object(an.jsx)(bn,{variant:"danger",onClick:i,children:We("generic.cancel")})]})]})]})]})}),md=e=>{const[t,s]=Object(c.useState)(null),[n,r]=Object(c.useState)(null),[i,o]=Object(c.useState)(null),[l,d]=Object(c.useState)(null),[u,j]=Object(c.useState)(null),[h,b]=Object(c.useState)(0),[g,m]=Object(c.useState)([]),[O,f]=Object(c.useState)(""),{categories:x=null}=vc(),_=p("hc.disabled",!1),I=e=>p("images.url")+`/navigator/models/model_${e}.png`;return Object(c.useEffect)((()=>{if(!t){const e=[];for(let t=10;t<=100;t+=10)e.push(t);s(e),j(e[0])}}),[t]),Object(c.useEffect)((()=>{x&&x.length&&d(x[0].id)}),[x]),Object(c.useEffect)((()=>{const e=p("navigator.room.models");e&&e.length&&(m(e),f(e[0].name))}),[]),Object(an.jsxs)(Fn,{overflow:"hidden",children:[Object(an.jsxs)(un,{overflow:"hidden",children:[Object(an.jsxs)(Fn,{size:6,gap:1,overflow:"auto",children:[Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{children:We("navigator.createroom.roomnameinfo")}),Object(an.jsx)("input",{type:"text",className:"form-control form-control-sm",maxLength:60,onChange:e=>r(e.target.value),placeholder:We("navigator.createroom.roomnameinfo")})]}),Object(an.jsxs)(Fn,{grow:!0,gap:1,children:[Object(an.jsx)(ur,{children:We("navigator.createroom.roomdescinfo")}),Object(an.jsx)("textarea",{className:"flex-grow-1 form-control form-control-sm w-100",maxLength:255,onChange:e=>o(e.target.value),placeholder:We("navigator.createroom.roomdescinfo")})]}),Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{children:We("navigator.category")}),Object(an.jsx)("select",{className:"form-select form-select-sm",onChange:e=>d(Number(e.target.value)),children:x&&x.length>0&&x.map((e=>Object(an.jsx)("option",{value:e.id,children:We(e.name)},e.id)))})]}),Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{children:We("navigator.maxvisitors")}),Object(an.jsx)("select",{className:"form-select form-select-sm",onChange:e=>j(Number(e.target.value)),children:t&&t.map((e=>Object(an.jsx)("option",{value:e,children:e},e)))})]}),Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{children:We("navigator.tradesettings")}),Object(an.jsxs)("select",{className:"form-select form-select-sm",onChange:e=>b(Number(e.target.value)),children:[Object(an.jsx)("option",{value:"0",children:We("navigator.roomsettings.trade_not_allowed")}),Object(an.jsx)("option",{value:"1",children:We("navigator.roomsettings.trade_not_with_Controller")}),Object(an.jsx)("option",{value:"2",children:We("navigator.roomsettings.trade_allowed")})]})]})]}),Object(an.jsx)(Fn,{size:6,gap:1,overflow:"auto",children:g.map(((e,t)=>Object(an.jsxs)(Vn,{fullHeight:!0,onClick:()=>((e,t)=>{!e||e.clubLevel>B()||f(g[t].name)})(e,t),itemActive:O===e.name,overflow:"unset",gap:0,className:"p-1",disabled:B()<e.clubLevel,children:[Object(an.jsx)(hn,{fullHeight:!0,center:!0,overflow:"hidden",children:Object(an.jsx)("img",{alt:"",src:I(e.name)})}),Object(an.jsxs)(ur,{bold:!0,children:[e.tileSize," ",We("navigator.createroom.tilesize")]}),!_&&e.clubLevel>a.Xd.NO_CLUB&&Object(an.jsx)(Pn,{position:"absolute",className:"top-1 end-1",type:"hc"})]},e.name)))})]}),Object(an.jsx)(bn,{fullWidth:!0,variant:!n||n.length<3?"danger":"success",onClick:()=>{Ee(new a.zb(n,i,"model_"+O,Number(l),Number(u),h))},disabled:!n||n.length<3,children:We("navigator.createroom.create")})]})};const Od=e=>{const{onCloseClick:t=null}=e,[s,n]=Object(c.useState)(!1),[r,i]=Object(c.useState)(!1),{navigatorData:o=null}=vc(),l=e=>{switch(e){case"settings":return F().userId===o.enteredGuestRoom.ownerId||F().isModerator;case"staff_pick":return F().securityLevel>=a.Uh.COMMUNITY;default:return!1}},d=(e,s)=>{if(o&&o.enteredGuestRoom)switch(e){case"set_home_room":let e=-1;return o.homeRoomId!==o.enteredGuestRoom.roomId&&(e=o.enteredGuestRoom.roomId),void(e>0&&Ee(new a.Ji(e)));case"navigator_search_tag":return;case"open_room_thumbnail_camera":return void $e(new Pr(Pr.TOGGLE_THUMBNAIL));case"open_group_info":return void Qt(o.enteredGuestRoom.habboGroupId);case"toggle_room_link":return void m("navigator/toggle-room-link");case"open_room_settings":return void Ee(new a.wh(o.enteredGuestRoom.roomId));case"toggle_pick":return n((e=>!e)),void Ee(new a.gi(o.enteredGuestRoom.roomId));case"toggle_mute":return i((e=>!e)),void Ee(new a.Vg);case"open_floorplan_editor":return void m("floor-editor/toggle");case"close":return void t()}};return Object(c.useEffect)((()=>{o&&(n(o.currentRoomIsStaffPick),o.enteredGuestRoom&&i(o.enteredGuestRoom.allInRoomMuted))}),[o]),o.enteredGuestRoom?Object(an.jsxs)(yn,{className:"nitro-room-info",theme:"primary-slim",children:[Object(an.jsx)(vn,{headerText:We("navigator.roomsettings.roominfo"),onCloseClick:()=>d("close")}),Object(an.jsx)(In,{className:"text-black",children:o.enteredGuestRoom&&Object(an.jsxs)(an.Fragment,{children:[Object(an.jsxs)(hn,{gap:2,overflow:"hidden",children:[Object(an.jsx)(rr,{roomId:o.enteredGuestRoom.roomId,customUrl:o.enteredGuestRoom.officialRoomPicRef,children:l("settings")&&Object(an.jsx)("i",{className:"icon icon-camera-small position-absolute b-0 r-0 m-1 cursor-pointer top-0",onClick:()=>d("open_room_thumbnail_camera")})}),Object(an.jsxs)(Fn,{grow:!0,gap:1,overflow:"hidden",children:[Object(an.jsxs)(hn,{gap:1,children:[Object(an.jsxs)(Fn,{grow:!0,gap:1,children:[Object(an.jsxs)(hn,{gap:1,children:[Object(an.jsx)("i",{onClick:()=>d("set_home_room"),className:"flex-shrink-0 icon icon-house-small cursor-pointer"+Xi()({" gray":o.homeRoomId!==o.enteredGuestRoom.roomId})}),Object(an.jsx)(ur,{bold:!0,children:o.enteredGuestRoom.roomName})]}),o.enteredGuestRoom.showOwner&&Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)(ur,{variant:"muted",children:We("navigator.roomownercaption")}),Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)(ir,{userId:o.enteredGuestRoom.ownerId}),Object(an.jsx)(ur,{children:o.enteredGuestRoom.ownerName})]})]}),Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)(ur,{variant:"muted",children:We("navigator.roomrating")}),Object(an.jsx)(ur,{children:o.currentRoomRating})]}),o.enteredGuestRoom.tags.length>0&&Object(an.jsx)(hn,{alignItems:"center",gap:1,children:o.enteredGuestRoom.tags.map((e=>Object(an.jsxs)(ur,{pointer:!0,className:"bg-muted rounded p-1",onClick:e=>d("navigator_search_tag"),children:["#",e]},e)))})]}),Object(an.jsxs)(Fn,{alignItems:"center",gap:1,children:[l("settings")&&Object(an.jsx)("i",{className:"icon icon-cog cursor-pointer",title:We("navigator.room.popup.info.room.settings"),onClick:e=>d("open_room_settings")}),Object(an.jsx)(fn.a,{icon:"link",title:We("navigator.embed.caption"),className:"cursor-pointer",onClick:e=>m("navigator/toggle-room-link")})]})]}),Object(an.jsx)(ur,{overflow:"auto",style:{maxHeight:50},children:o.enteredGuestRoom.description}),o.enteredGuestRoom.habboGroupId>0&&Object(an.jsxs)(hn,{pointer:!0,alignItems:"center",gap:1,onClick:()=>d("open_group_info"),children:[Object(an.jsx)(Dn,{className:"flex-none",badgeCode:o.enteredGuestRoom.groupBadgeCode,isGroup:!0}),Object(an.jsx)(ur,{underline:!0,children:We("navigator.guildbase",["groupName"],[o.enteredGuestRoom.groupName])})]})]})]}),Object(an.jsxs)(Fn,{gap:1,children:[l("staff_pick")&&Object(an.jsx)(bn,{onClick:()=>d("toggle_pick"),children:We(s?"navigator.staffpicks.unpick":"navigator.staffpicks.pick")}),Object(an.jsx)(bn,{variant:"danger",disabled:!0,children:We("help.emergency.main.report.room")}),l("settings")&&Object(an.jsxs)(an.Fragment,{children:[Object(an.jsx)(bn,{onClick:()=>d("toggle_mute"),children:We(r?"navigator.muteall_on":"navigator.muteall_off")}),Object(an.jsx)(bn,{onClick:()=>d("open_floorplan_editor"),children:We("open.floor.plan.editor")})]})]})]})})]}):null};const pd=e=>{const{onCloseClick:t=null}=e,{navigatorData:s=null}=vc();return s.enteredGuestRoom?Object(an.jsxs)(yn,{className:"nitro-room-link",theme:"primary-slim",children:[Object(an.jsx)(vn,{headerText:We("navigator.embed.title"),onCloseClick:t}),Object(an.jsx)(In,{className:"text-black d-flex align-items-center",children:Object(an.jsxs)(hn,{gap:2,children:[Object(an.jsx)(rr,{roomId:s.enteredGuestRoom.roomId,customUrl:s.enteredGuestRoom.officialRoomPicRef}),Object(an.jsxs)(Fn,{children:[Object(an.jsx)(ur,{bold:!0,fontSize:5,children:We("navigator.embed.headline")}),Object(an.jsx)(ur,{children:We("navigator.embed.info")}),Object(an.jsx)("input",{type:"text",readOnly:!0,className:"form-control form-control-sm",value:We("navigator.embed.src",["roomId"],[s.enteredGuestRoom.roomId.toString()]).replace("${url.prefix}",p("url.prefix",""))})]})]})})]}):null},fd=e=>{const{roomData:t=null,handleChange:s=null}=e,[n,r]=Object(c.useState)(""),[i,o]=Object(c.useState)(""),[l,d]=Object(c.useState)(!1);return Object(c.useEffect)((()=>{r(""),o(""),d(!1)}),[t]),Object(an.jsxs)(an.Fragment,{children:[Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:We("navigator.roomsettings.roomaccess.caption")}),Object(an.jsx)(ur,{children:We("navigator.roomsettings.roomaccess.info")})]}),Object(an.jsxs)(Fn,{overflow:"auto",children:[Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:We("navigator.roomsettings.doormode")}),Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)("input",{className:"form-check-input",type:"radio",name:"lockState",checked:t.lockState===a.zg.OPEN_STATE&&!l,onChange:e=>s("lock_state",a.zg.OPEN_STATE)}),Object(an.jsx)(ur,{children:We("navigator.roomsettings.doormode.open")})]}),Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)("input",{className:"form-check-input",type:"radio",name:"lockState",checked:t.lockState===a.zg.DOORBELL_STATE&&!l,onChange:e=>s("lock_state",a.zg.DOORBELL_STATE)}),Object(an.jsx)(ur,{children:We("navigator.roomsettings.doormode.doorbell")})]}),Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)("input",{className:"form-check-input",type:"radio",name:"lockState",checked:t.lockState===a.zg.INVISIBLE_STATE&&!l,onChange:e=>s("lock_state",a.zg.INVISIBLE_STATE)}),Object(an.jsx)(ur,{children:We("navigator.roomsettings.doormode.invisible")})]}),Object(an.jsxs)(hn,{fullWidth:!0,gap:1,children:[Object(an.jsx)("input",{className:"form-check-input",type:"radio",name:"lockState",checked:t.lockState===a.zg.PASSWORD_STATE||l,onChange:e=>d(e.target.checked)}),!l&&t.lockState!==a.zg.PASSWORD_STATE&&Object(an.jsx)(ur,{children:We("navigator.roomsettings.doormode.password")}),(l||t.lockState===a.zg.PASSWORD_STATE)&&Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{children:We("navigator.roomsettings.doormode.password")}),Object(an.jsx)("input",{type:"password",className:"form-control form-control-sm col-4",value:n,onChange:e=>r(e.target.value),placeholder:We("navigator.roomsettings.password"),onFocus:e=>d(!0)}),l&&n.length<=0&&Object(an.jsx)(ur,{bold:!0,small:!0,variant:"danger",children:We("navigator.roomsettings.passwordismandatory")}),Object(an.jsx)("input",{type:"password",className:"form-control form-control-sm col-4",value:i,onChange:e=>o(e.target.value),onBlur:()=>{!l||n.length<=0||i.length<=0||n!==i||s("password",n)},placeholder:We("navigator.roomsettings.passwordconfirm")}),l&&n.length>0&&n!==i&&Object(an.jsx)(ur,{bold:!0,small:!0,variant:"danger",children:We("navigator.roomsettings.invalidconfirm")})]})]})]}),Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:We("navigator.roomsettings.pets")}),Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)("input",{className:"form-check-input",type:"checkbox",checked:t.allowPets,onChange:e=>s("allow_pets",e.target.checked)}),Object(an.jsx)(ur,{children:We("navigator.roomsettings.allowpets")})]}),Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)("input",{className:"form-check-input",type:"checkbox",checked:t.allowPetsEat,onChange:e=>s("allow_pets_eat",e.target.checked)}),Object(an.jsx)(ur,{children:We("navigator.roomsettings.allowfoodconsume")})]})]})]})]})},xd=e=>{const{roomData:t=null,handleChange:s=null,onClose:n=null}=e,[r,i]=Object(c.useState)(""),[o,l]=Object(c.useState)(""),{showConfirm:d=null}=Hr(),{categories:u=null}=vc();return Object(c.useEffect)((()=>{i(t.roomName),l(t.roomDescription)}),[t]),Object(an.jsxs)(an.Fragment,{children:[Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)(ur,{className:"col-3",children:We("navigator.roomname")}),Object(an.jsxs)(Fn,{fullWidth:!0,gap:0,children:[Object(an.jsx)("input",{className:"form-control form-control-sm",value:r,maxLength:60,onChange:e=>i(e.target.value),onBlur:()=>{r===t.roomName||r.length<3||r.length>60||s("name",r)}}),r.length<3&&Object(an.jsx)(ur,{bold:!0,small:!0,variant:"danger",children:We("navigator.roomsettings.roomnameismandatory")})]})]}),Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)(ur,{className:"col-3",children:We("navigator.roomsettings.desc")}),Object(an.jsx)("textarea",{className:"form-control form-control-sm",value:o,maxLength:255,onChange:e=>l(e.target.value),onBlur:()=>{o===t.roomDescription||o.length>255||s("description",o)}})]}),Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)(ur,{className:"col-3",children:We("navigator.category")}),Object(an.jsx)("select",{className:"form-select form-select-sm",value:t.categoryId,onChange:e=>s("category",e.target.value),children:u&&u.map((e=>Object(an.jsx)("option",{value:e.id,children:We(e.name)},e.id)))})]}),Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)(ur,{className:"col-3",children:We("navigator.maxvisitors")}),Object(an.jsx)("select",{className:"form-select form-select-sm",value:t.userCount,onChange:e=>s("max_visitors",e.target.value),children:ms&&ms.map((e=>Object(an.jsx)("option",{value:e,children:e},e)))})]}),Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)(ur,{className:"col-3",children:We("navigator.tradesettings")}),Object(an.jsxs)("select",{className:"form-select form-select-sm",value:t.tradeState,onChange:e=>s("trade_state",e.target.value),children:[Object(an.jsx)("option",{value:"0",children:We("navigator.roomsettings.trade_not_allowed")}),Object(an.jsx)("option",{value:"1",children:We("navigator.roomsettings.trade_not_with_Controller")}),Object(an.jsx)("option",{value:"2",children:We("navigator.roomsettings.trade_allowed")})]})]}),Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)(on,{className:"col-3"}),Object(an.jsx)("input",{className:"form-check-input",type:"checkbox",checked:t.allowWalkthrough,onChange:e=>s("allow_walkthrough",e.target.checked)}),Object(an.jsx)(ur,{children:We("navigator.roomsettings.allow_walk_through")})]}),Object(an.jsxs)(ur,{variant:"danger",underline:!0,bold:!0,pointer:!0,className:"d-flex justify-content-center align-items-center gap-1",onClick:()=>{d(We("navigator.roomsettings.deleteroom.confirm.message",["room_name"],[t.roomName]),(()=>{Ee(new a.Ag(t.roomId)),n&&n(),m("navigator/search/myworld_view")}),null,null,null,We("navigator.roomsettings.deleteroom.confirm.title"))},children:[Object(an.jsx)(fn.a,{icon:"times"}),We("navigator.roomsettings.delete")]})]})},_d=e=>{var t;const{roomData:s=null,handleChange:n=null}=e,[r,i]=Object(c.useState)(-1),[o,l]=Object(c.useState)([]);pr(a.x,(e=>{const t=e.getParser();s&&s.roomId===t.roomId&&l(t.bannedUsers)}));const d=Object(c.useCallback)((e=>{l((t=>{const s=[...t],n=s.findIndex((t=>t.userId===e));return n>=0&&s.splice(n,1),s})),Ee(new a.Ch(e,s.roomId)),i(-1)}),[s]);return Object(c.useEffect)((()=>{Ee(new a.sg(s.roomId))}),[s.roomId]),Object(an.jsxs)(un,{overflow:"auto",children:[Object(an.jsxs)(Fn,{size:6,children:[Object(an.jsxs)(ur,{bold:!0,children:[We("navigator.roomsettings.moderation.banned.users")," (",o.length,")"]}),Object(an.jsx)(hn,{overflow:"hidden",className:"bg-white rounded list-container p-2",children:Object(an.jsx)(Fn,{fullWidth:!0,overflow:"auto",gap:1,children:o&&o.length>0&&o.map(((e,t)=>Object(an.jsxs)(hn,{shrink:!0,alignItems:"center",gap:1,overflow:"hidden",children:[Object(an.jsx)(ir,{userName:e.userName}),Object(an.jsxs)(ur,{pointer:!0,grow:!0,onClick:t=>i(e.userId),children:[" ",e.userName]})]},t)))})}),Object(an.jsxs)(bn,{disabled:r<=0,onClick:e=>d(r),children:[We("navigator.roomsettings.moderation.unban")," ",r>0&&(null===(t=o.find((e=>e.userId===r)))||void 0===t?void 0:t.userName)]})]}),Object(an.jsxs)(Fn,{size:6,children:[Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:We("navigator.roomsettings.moderation.mute.header")}),Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)("input",{className:"form-check-input",type:"checkbox",checked:s.moderationSettings.allowMute===a.Ug.MODERATION_LEVEL_USER_WITH_RIGHTS,onChange:e=>n("moderation_mute",e.target.checked?a.Ug.MODERATION_LEVEL_USER_WITH_RIGHTS:a.Ug.MODERATION_LEVEL_NONE)}),Object(an.jsx)(ur,{children:We("navigator.roomsettings.moderation.rights")})]})]}),Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:We("navigator.roomsettings.moderation.kick.header")}),Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)("input",{className:"form-check-input",type:"checkbox",checked:s.moderationSettings.allowKick===a.Ug.MODERATION_LEVEL_ALL,onChange:e=>n("moderation_kick",e.target.checked?a.Ug.MODERATION_LEVEL_ALL:a.Ug.MODERATION_LEVEL_NONE)}),Object(an.jsx)(ur,{children:We("navigator.roomsettings.moderation.all")})]}),Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)("input",{className:"form-check-input",type:"checkbox",checked:s.moderationSettings.allowKick>=a.Ug.MODERATION_LEVEL_USER_WITH_RIGHTS,disabled:s.moderationSettings.allowKick===a.Ug.MODERATION_LEVEL_ALL,onChange:e=>n("moderation_kick",e.target.checked?a.Ug.MODERATION_LEVEL_USER_WITH_RIGHTS:a.Ug.MODERATION_LEVEL_NONE)}),Object(an.jsx)(ur,{children:We("navigator.roomsettings.moderation.rights")})]})]}),Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:We("navigator.roomsettings.moderation.ban.header")}),Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)("input",{className:"form-check-input",type:"checkbox",checked:s.moderationSettings.allowBan===a.Ug.MODERATION_LEVEL_USER_WITH_RIGHTS,onChange:e=>n("moderation_ban",e.target.checked?a.Ug.MODERATION_LEVEL_USER_WITH_RIGHTS:a.Ug.MODERATION_LEVEL_NONE)}),Object(an.jsx)(ur,{children:We("navigator.roomsettings.moderation.rights")})]})]})]})]})},Id=e=>{const{roomData:t=null}=e,[s,n]=Object(c.useState)(new Map);return pr(a.Qb,(e=>{const s=e.getParser();t&&t.roomId===s.roomId&&n(s.users)})),pr(a.Ob,(e=>{const s=e.getParser();t&&t.roomId===s.roomId&&n((e=>{const t=new Map(e);return t.set(s.data.userId,s.data.userName),t}))})),pr(a.Pb,(e=>{const s=e.getParser();t&&t.roomId===s.roomId&&n((e=>{const t=new Map(e);return t.delete(s.userId),t}))})),Object(c.useEffect)((()=>{Ee(new a.Ih(t.roomId))}),[t.roomId]),Object(an.jsxs)(un,{children:[Object(an.jsxs)(Fn,{size:6,children:[Object(an.jsx)(ur,{bold:!0,children:We("navigator.flatctrls.userswithrights",["displayed","total"],[s.size.toString(),s.size.toString()])}),Object(an.jsx)(hn,{overflow:"hidden",className:"bg-white rounded list-container p-2",children:Object(an.jsx)(Fn,{fullWidth:!0,overflow:"auto",gap:1,children:Array.from(s.entries()).map(((e,t)=>{let[s,n]=e;return Object(an.jsxs)(hn,{shrink:!0,alignItems:"center",gap:1,overflow:"hidden",children:[Object(an.jsx)(ir,{userName:n}),Object(an.jsxs)(ur,{pointer:!0,grow:!0,onClick:e=>Ee(new a.Ah(s)),children:[" ",n]})]},t)}))})})]}),Object(an.jsx)(Fn,{size:6,justifyContent:"end",children:Object(an.jsx)(bn,{variant:"danger",disabled:!s.size,onClick:e=>Ee(new a.gg(t.roomId)),children:We("navigator.flatctrls.clear")})})]})},Ed=e=>{const{roomData:t=null,handleChange:s=null}=e,[n,r]=Object(c.useState)(0);return Object(c.useEffect)((()=>{r(t.chatSettings.distance)}),[t.chatSettings]),Object(an.jsxs)(an.Fragment,{children:[Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:We("navigator.roomsettings.vip.caption")}),Object(an.jsx)(ur,{children:We("navigator.roomsettings.vip.info")})]}),Object(an.jsxs)(un,{overflow:"auto",children:[Object(an.jsxs)(Fn,{size:6,gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:We("navigator.roomsettings.chat_settings")}),Object(an.jsx)(ur,{children:We("navigator.roomsettings.chat_settings.info")}),Object(an.jsxs)("select",{className:"form-select form-select-sm",value:t.chatSettings.mode,onChange:e=>s("bubble_mode",e.target.value),children:[Object(an.jsx)("option",{value:a.vg.CHAT_MODE_FREE_FLOW,children:We("navigator.roomsettings.chat.mode.free.flow")}),Object(an.jsx)("option",{value:a.vg.CHAT_MODE_LINE_BY_LINE,children:We("navigator.roomsettings.chat.mode.line.by.line")})]}),Object(an.jsxs)("select",{className:"form-select form-select-sm",value:t.chatSettings.weight,onChange:e=>s("chat_weight",e.target.value),children:[Object(an.jsx)("option",{value:a.vg.CHAT_BUBBLE_WIDTH_NORMAL,children:We("navigator.roomsettings.chat.bubbles.width.normal")}),Object(an.jsx)("option",{value:a.vg.CHAT_BUBBLE_WIDTH_THIN,children:We("navigator.roomsettings.chat.bubbles.width.thin")}),Object(an.jsx)("option",{value:a.vg.CHAT_BUBBLE_WIDTH_WIDE,children:We("navigator.roomsettings.chat.bubbles.width.wide")})]}),Object(an.jsxs)("select",{className:"form-select form-select-sm",value:t.chatSettings.speed,onChange:e=>s("bubble_speed",e.target.value),children:[Object(an.jsx)("option",{value:a.vg.CHAT_SCROLL_SPEED_FAST,children:We("navigator.roomsettings.chat.speed.fast")}),Object(an.jsx)("option",{value:a.vg.CHAT_SCROLL_SPEED_NORMAL,children:We("navigator.roomsettings.chat.speed.normal")}),Object(an.jsx)("option",{value:a.vg.CHAT_SCROLL_SPEED_SLOW,children:We("navigator.roomsettings.chat.speed.slow")})]}),Object(an.jsxs)("select",{className:"form-select form-select-sm",value:t.chatSettings.protection,onChange:e=>s("flood_protection",e.target.value),children:[Object(an.jsx)("option",{value:a.vg.FLOOD_FILTER_LOOSE,children:We("navigator.roomsettings.chat.flood.loose")}),Object(an.jsx)("option",{value:a.vg.FLOOD_FILTER_NORMAL,children:We("navigator.roomsettings.chat.flood.normal")}),Object(an.jsx)("option",{value:a.vg.FLOOD_FILTER_STRICT,children:We("navigator.roomsettings.chat.flood.strict")})]}),Object(an.jsx)(ur,{children:We("navigator.roomsettings.chat_settings.hearing.distance")}),Object(an.jsx)("input",{type:"number",min:"0",className:"form-control form-control-sm",value:n,onChange:e=>r(e.target.valueAsNumber),onBlur:e=>s("chat_distance",n)})]}),Object(an.jsxs)(Fn,{size:6,gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:We("navigator.roomsettings.vip_settings")}),Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)("input",{className:"form-check-input",type:"checkbox",checked:t.hideWalls,onChange:e=>s("hide_walls",e.target.checked)}),Object(an.jsx)(ur,{children:We("navigator.roomsettings.hide_walls")})]}),Object(an.jsxs)("select",{className:"form-select form-select-sm",value:t.wallThickness,onChange:e=>s("wall_thickness",e.target.value),children:[Object(an.jsx)("option",{value:"0",children:We("navigator.roomsettings.wall_thickness.normal")}),Object(an.jsx)("option",{value:"1",children:We("navigator.roomsettings.wall_thickness.thick")}),Object(an.jsx)("option",{value:"-1",children:We("navigator.roomsettings.wall_thickness.thin")}),Object(an.jsx)("option",{value:"-2",children:We("navigator.roomsettings.wall_thickness.thinnest")})]}),Object(an.jsxs)("select",{className:"form-select form-select-sm",value:t.floorThickness,onChange:e=>s("floor_thickness",e.target.value),children:[Object(an.jsx)("option",{value:"0",children:We("navigator.roomsettings.floor_thickness.normal")}),Object(an.jsx)("option",{value:"1",children:We("navigator.roomsettings.floor_thickness.thick")}),Object(an.jsx)("option",{value:"-1",children:We("navigator.roomsettings.floor_thickness.thin")}),Object(an.jsx)("option",{value:"-2",children:We("navigator.roomsettings.floor_thickness.thinnest")})]})]})]})]})},Cd=["navigator.roomsettings.tab.1","navigator.roomsettings.tab.2","navigator.roomsettings.tab.3","navigator.roomsettings.tab.4","navigator.roomsettings.tab.5"],vd=e=>{const[t,s]=Object(c.useState)(null),[n,r]=Object(c.useState)(Cd[0]);pr(a.xh,(e=>{const t=e.getParser();if(!t)return;const n=t.data;s({roomId:n.roomId,roomName:n.name,roomDescription:n.description,categoryId:n.categoryId,userCount:n.maximumVisitorsLimit,tags:n.tags,tradeState:n.tradeMode,allowWalkthrough:n.allowWalkThrough,lockState:n.doorMode,password:null,allowPets:n.allowPets,allowPetsEat:n.allowFoodConsume,hideWalls:n.hideWalls,wallThickness:n.wallThickness,floorThickness:n.floorThickness,chatSettings:{mode:n.chatSettings.mode,weight:n.chatSettings.weight,speed:n.chatSettings.speed,distance:n.chatSettings.distance,protection:n.chatSettings.protection},moderationSettings:{allowMute:n.roomModerationSettings.allowMute,allowKick:n.roomModerationSettings.allowKick,allowBan:n.roomModerationSettings.allowBan}}),Ee(new a.sg(n.roomId))}));const i=()=>{s(null),r(Cd[0])},o=(e,t)=>{s((s=>{const n={...s};switch(e){case"name":n.roomName=String(t);break;case"description":n.roomDescription=String(t);break;case"category":n.categoryId=Number(t);break;case"max_visitors":n.userCount=Number(t);break;case"trade_state":n.tradeState=Number(t);break;case"allow_walkthrough":n.allowWalkthrough=Boolean(t);break;case"allow_pets":n.allowPets=Boolean(t);break;case"allow_pets_eat":n.allowPetsEat=Boolean(t);break;case"hide_walls":n.hideWalls=Boolean(t);break;case"wall_thickness":n.wallThickness=Number(t);break;case"floor_thickness":n.floorThickness=Number(t);break;case"lock_state":n.lockState=Number(t);break;case"password":n.lockState=a.zg.PASSWORD_STATE,n.password=String(t);break;case"moderation_mute":n.moderationSettings.allowMute=Number(t);break;case"moderation_kick":n.moderationSettings.allowKick=Number(t);break;case"moderation_ban":n.moderationSettings.allowBan=Number(t);break;case"bubble_mode":n.chatSettings.mode=Number(t);break;case"chat_weight":n.chatSettings.weight=Number(t);break;case"bubble_speed":n.chatSettings.speed=Number(t);break;case"flood_protection":n.chatSettings.protection=Number(t);break;case"chat_distance":n.chatSettings.distance=Number(t)}return Ee(new a.Qh(n.roomId,n.roomName,n.roomDescription,n.lockState,n.password,n.userCount,n.categoryId,n.tags.length,n.tags,n.tradeState,n.allowPets,n.allowPetsEat,n.allowWalkthrough,n.hideWalls,n.wallThickness,n.floorThickness,n.moderationSettings.allowMute,n.moderationSettings.allowKick,n.moderationSettings.allowBan,n.chatSettings.mode,n.chatSettings.weight,n.chatSettings.speed,n.chatSettings.distance,n.chatSettings.protection)),n}))};return t?Object(an.jsxs)(yn,{uniqueKey:"nitro-room-settings",className:"nitro-room-settings",children:[Object(an.jsx)(vn,{headerText:We("navigator.roomsettings"),onCloseClick:i}),Object(an.jsx)(or,{children:Cd.map((e=>Object(an.jsx)(ar,{isActive:n===e,onClick:t=>r(e),children:We(e)},e)))}),Object(an.jsxs)(In,{children:[n===Cd[0]&&Object(an.jsx)(xd,{roomData:t,handleChange:o,onClose:i}),n===Cd[1]&&Object(an.jsx)(fd,{roomData:t,handleChange:o}),n===Cd[2]&&Object(an.jsx)(Id,{roomData:t,handleChange:o}),n===Cd[3]&&Object(an.jsx)(Ed,{roomData:t,handleChange:o}),n===Cd[4]&&Object(an.jsx)(_d,{roomData:t,handleChange:o})]})]}):null};var Nd=s(87);const Td=e=>{const{roomData:t=null}=e,[s,n]=Object(c.useState)(!1),r=Object(c.useRef)();return Object(an.jsxs)(an.Fragment,{children:[Object(an.jsx)(on,{pointer:!0,innerRef:r,className:"icon icon-navigator-info",onMouseOver:e=>n(!0),onMouseLeave:e=>n(!1)}),Object(an.jsx)(Nd.a,{show:s,target:r.current,placement:"right",children:Object(an.jsx)(il.a,{children:Object(an.jsx)(In,{overflow:"hidden",className:"room-info image-rendering-pixelated bg-transparent",children:Object(an.jsxs)(hn,{gap:2,overflow:"hidden",children:[Object(an.jsxs)(rr,{roomId:t.roomId,customUrl:t.officialRoomPicRef,className:"d-flex flex-column align-items-center justify-content-end mb-1",children:[t.habboGroupId>0&&Object(an.jsx)(Dn,{badgeCode:t.groupBadgeCode,isGroup:!0,className:"position-absolute top-0 start-0 m-1 "}),t.doorMode!==a.zg.OPEN_STATE&&Object(an.jsx)("i",{className:"position-absolute end-0 mb-1 me-1 icon icon-navigator-room-"+(t.doorMode===a.zg.DOORBELL_STATE?"locked":t.doorMode===a.zg.PASSWORD_STATE?"password":t.doorMode===a.zg.INVISIBLE_STATE?"invisible":"")})]}),Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{bold:!0,truncate:!0,className:"flex-grow-1",style:{maxHeight:13},children:t.roomName}),Object(an.jsxs)(hn,{gap:2,children:[Object(an.jsx)(ur,{italics:!0,variant:"muted",children:We("navigator.roomownercaption")}),Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)(ir,{userId:t.ownerId}),Object(an.jsx)(ur,{italics:!0,children:t.ownerName})]})]}),Object(an.jsx)(ur,{className:"flex-grow-1",children:t.description}),Object(an.jsxs)(hn,{className:"badge p-1 position-absolute m-1 bottom-0 end-0 m-2 "+(()=>{const e=t.userCount/t.maxUserCount*100;let s="bg-primary";return e>=92?s="bg-danger":e>=50?s="bg-warning":e>0&&(s="bg-success"),s})(),gap:1,children:[Object(an.jsx)(fn.a,{icon:"user"}),t.userCount]})]})]})})})})]})},Sd=e=>{const{roomData:t=null,children:s=null,thumbnail:n=!1,...r}=e,{setDoorData:c=null}=vc(),i=()=>{const e=t.userCount/t.maxUserCount*100;let s="bg-primary";return e>=92?s="bg-danger":e>=50?s="bg-warning":e>0&&(s="bg-success"),s},o=e=>{if(t.ownerId!==F().userId){if(0!==t.habboGroupId)return void ps(t.roomId);switch(t.doorMode){case a.zg.DOORBELL_STATE:return void c((e=>{const s={...e};return s.roomInfo=t,s.state=bs.START_DOORBELL,s}));case a.zg.PASSWORD_STATE:return void c((e=>{const s={...e};return s.roomInfo=t,s.state=bs.START_PASSWORD,s}))}}P(t.roomId)};return n?Object(an.jsxs)(Fn,{pointer:!0,overflow:"hidden",alignItems:"center",onClick:o,gap:0,className:"navigator-item p-1 bg-light rounded-3 small mb-1 flex-column border border-muted",...r,children:[Object(an.jsxs)(rr,{roomId:t.roomId,customUrl:t.officialRoomPicRef,className:"d-flex flex-column align-items-center justify-content-end mb-1",children:[t.habboGroupId>0&&Object(an.jsx)(Dn,{badgeCode:t.groupBadgeCode,isGroup:!0,className:"position-absolute top-0 start-0 m-1"}),Object(an.jsxs)(hn,{center:!0,className:"badge p-1 position-absolute m-1 "+i(),gap:1,children:[Object(an.jsx)(fn.a,{icon:"user"}),t.userCount]}),t.doorMode!==a.zg.OPEN_STATE&&Object(an.jsx)("i",{className:"position-absolute end-0 mb-1 me-1 icon icon-navigator-room-"+(t.doorMode===a.zg.DOORBELL_STATE?"locked":t.doorMode===a.zg.PASSWORD_STATE?"password":t.doorMode===a.zg.INVISIBLE_STATE?"invisible":"")})]}),Object(an.jsxs)(hn,{className:"w-100",children:[Object(an.jsx)(ur,{truncate:!0,className:"flex-grow-1",children:t.roomName}),Object(an.jsx)(hn,{reverse:!0,alignItems:"center",gap:1,children:Object(an.jsx)(Td,{roomData:t})}),s]})]}):Object(an.jsxs)(hn,{pointer:!0,overflow:"hidden",alignItems:"center",onClick:o,gap:2,className:"navigator-item px-2 py-1 small",...r,children:[Object(an.jsxs)(hn,{center:!0,className:"badge p-1 "+i(),gap:1,children:[Object(an.jsx)(fn.a,{icon:"user"}),t.userCount]}),Object(an.jsx)(ur,{truncate:!0,grow:!0,children:t.roomName}),Object(an.jsxs)(hn,{reverse:!0,alignItems:"center",gap:1,children:[Object(an.jsx)(Td,{roomData:t}),t.habboGroupId>0&&Object(an.jsx)("i",{className:"icon icon-navigator-room-group"}),t.doorMode!==a.zg.OPEN_STATE&&Object(an.jsx)("i",{className:"icon icon-navigator-room-"+(t.doorMode===a.zg.DOORBELL_STATE?"locked":t.doorMode===a.zg.PASSWORD_STATE?"password":t.doorMode===a.zg.INVISIBLE_STATE?"invisible":"")})]}),s]})},wd=e=>{const{searchResult:t=null,...s}=e,[n,r]=Object(c.useState)(!0),[i,a]=Object(c.useState)(0);Object(c.useEffect)((()=>{t&&a(t.mode)}),[t]);const o=i>=gs.THUMBNAILS;return Object(an.jsxs)(Fn,{className:"bg-white rounded border border-muted",gap:0,children:[Object(an.jsxs)(hn,{fullWidth:!0,alignItems:"center",justifyContent:"between",className:"px-2 py-1",children:[Object(an.jsxs)(hn,{grow:!0,pointer:!0,alignItems:"center",gap:1,onClick:e=>r((e=>!e)),children:[Object(an.jsx)(fn.a,{icon:n?"minus":"plus",className:"text-secondary"}),Object(an.jsx)(ur,{children:We((()=>{let e=t.code;return e&&e.length?e.startsWith("${")?e.slice(2,e.length-1):"navigator.searchcode.title."+e:t.data})())})]}),Object(an.jsx)(fn.a,{icon:i===gs.LIST?"th":i>=gs.THUMBNAILS?"bars":null,className:"text-secondary",onClick:()=>{a((e=>e===gs.LIST?gs.THUMBNAILS:gs.LIST))}})]})," ",n&&Object(an.jsx)(an.Fragment,{children:o?Object(an.jsx)(jn,{columnCount:3,...s,columnMinWidth:110,columnMinHeight:130,className:"mx-2",children:t.rooms.length>0&&t.rooms.map(((e,t)=>Object(an.jsx)(Sd,{roomData:e,thumbnail:!0},t)))}):Object(an.jsx)(un,{columnCount:1,className:"navigator-grid",gap:0,children:t.rooms.length>0&&t.rooms.map(((e,t)=>Object(an.jsx)(Sd,{roomData:e},t)))})})]})},Rd=e=>{const{sendSearch:t=null}=e,[s,n]=Object(c.useState)(0),[r,i]=Object(c.useState)(""),{topLevelContext:a=null,searchResult:o=null}=vc(),l=()=>{if(!a)return;let e=Os[s];e||(e=Os[0]);const n=(e.query?e.query+":":"")+r;t(n||"",a.code)};return Object(c.useEffect)((()=>{if(!o)return;const e=o.data.split(":");let t=null,s="";if(e.length>=2){const[n,...r]=e;t=Os.find((e=>e.query===n)),s=r.join(":")}else s=o.data;t||(t=Os[0]),n(Os.findIndex((e=>e===t))),i(s)}),[o]),Object(an.jsxs)(hn,{fullWidth:!0,gap:1,children:[Object(an.jsx)(hn,{shrink:!0,children:Object(an.jsx)("select",{className:"form-select form-select-sm",value:s,onChange:e=>n(parseInt(e.target.value)),children:Os.map(((e,t)=>Object(an.jsx)("option",{value:t,children:We("navigator.filter."+e.name)},t)))})}),Object(an.jsxs)(hn,{fullWidth:!0,gap:1,children:[Object(an.jsx)("input",{type:"text",className:"form-control form-control-sm",placeholder:We("navigator.filter.input.placeholder"),value:r,onChange:e=>i(e.target.value),onKeyDown:e=>(e=>{"Enter"===e.key&&l()})(e)}),Object(an.jsx)(bn,{variant:"primary",onClick:l,children:Object(an.jsx)(fn.a,{icon:"search"})})]})]})},yd=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)(!1),[i,o]=Object(c.useState)(!1),[d,u]=Object(c.useState)(!1),[j,h]=Object(c.useState)(!1),[b,g]=Object(c.useState)(!1),[m,O]=Object(c.useState)(!0),[p,f]=Object(c.useState)(!1),{searchResult:x=null,topLevelContext:_=null,topLevelContexts:I=null,navigatorData:C=null}=vc(),v=Object(c.useRef)(null),N=Object(c.useRef)();Or(a.mh.CREATED,(e=>{s(!1),o(!1)}));const T=Object(c.useCallback)(((e,t)=>{o(!1),Ee(new a.af(t,e)),g(!0)}),[]),S=Object(c.useCallback)((()=>{if(n)return v.current?(T(v.current.value,v.current.code),void(v.current=null)):void(x?T(x.data,x.code):_&&T("",_.code));f(!0)}),[n,x,_,T]);return Object(c.useEffect)((()=>{const e={linkReceived:e=>{const n=e.split("/");if(!(n.length<2))switch(n[1]){case"show":return s(!0),void f(!0);case"hide":return void s(!1);case"toggle":return t?void s(!1):(s(!0),void f(!0));case"toggle-room-info":return void u((e=>!e));case"toggle-room-link":return void h((e=>!e));case"goto":if(n.length<=2)return;if("home"===n[2]){if(C.homeRoomId<=0)return;ps(C.homeRoomId)}else{ps(parseInt(n[2]))}return;case"create":return s(!0),void o(!0);case"search":if(n.length>2){const e=n[2];let t="";n.length>3&&(t=n[3]),v.current={value:t,code:e},s(!0),f(!0)}return}},eventUrlPrefix:"navigator/"};return l(e),()=>E(e)}),[t,C]),Object(c.useEffect)((()=>{x&&(g(!1),N&&N.current&&(N.current.scrollTop=0))}),[x]),Object(c.useEffect)((()=>{t&&n&&p&&(S(),f(!1))}),[t,n,p,S]),Object(c.useEffect)((()=>{!n&&_&&r(!0)}),[n,_]),Object(c.useEffect)((()=>{t&&m&&(Ee(new a.Xe),O(!1))}),[t,m]),Object(c.useEffect)((()=>{a.pe.addCallback(a.ce.OPENROOM,(function(e){return Ee(new a.yb(e))}))}),[]),Object(an.jsxs)(an.Fragment,{children:[t&&Object(an.jsxs)(yn,{uniqueKey:"navigator",className:"nitro-navigator",children:[Object(an.jsx)(vn,{headerText:We(i?"navigator.createroom.title":"navigator.title"),onCloseClick:e=>s(!1)}),Object(an.jsxs)(or,{children:[I&&I.length>0&&I.map(((e,t)=>Object(an.jsx)(ar,{isActive:_===e&&!i,onClick:t=>T("",e.code),children:We("navigator.toplevelview."+e.code)},t))),Object(an.jsx)(ar,{isActive:i,onClick:e=>o(!0),children:Object(an.jsx)(fn.a,{icon:"plus"})})]}),Object(an.jsxs)(In,{position:"relative",children:[b&&Object(an.jsx)(on,{fit:!0,position:"absolute",className:"top-0 start-0 z-index-1 bg-muted opacity-0-5"}),!i&&Object(an.jsxs)(an.Fragment,{children:[Object(an.jsx)(Rd,{sendSearch:T}),Object(an.jsx)(Fn,{innerRef:N,overflow:"auto",children:x&&x.results.map(((e,t)=>Object(an.jsx)(wd,{searchResult:e},t)))})]}),i&&Object(an.jsx)(md,{})]})]}),Object(an.jsx)(gd,{}),d&&Object(an.jsx)(Od,{onCloseClick:()=>u(!1)}),j&&Object(an.jsx)(pd,{onCloseClick:()=>h(!1)}),Object(an.jsx)(vd,{})]})},kd=/\n\r|\n|\r/gm,Ad=e=>{const[t,s]=Object(c.useState)(null),[n,r]=Object(c.useState)(""),[i,o]=Object(c.useState)(null),d=Object(c.useRef)(null),u=Object(c.useCallback)((async e=>{try{const t=await fetch(e);if(!t)return;const n=(await t.text()).split(kd),c=n.shift().split("|");r(c[0]),o((e=>c[1]&&2===c[1].split(";").length?{width:parseInt(c[1].split(";")[0]),height:parseInt(c[1].split(";")[1])}:null)),s(n.join(""))}catch(t){a.mf.error(`Failed to fetch ${e}`)}}),[]);return Object(c.useEffect)((()=>{const e={linkReceived:e=>{const t=e.split("/");t.length<2||(t.shift(),u(p("habbopages.url")+t.join("/")))},eventUrlPrefix:"habbopages/"};return l(e),()=>E(e)}),[u]),Object(c.useEffect)((()=>{const e=e=>{if(!(e.target instanceof HTMLAnchorElement))return;e.preventDefault();const t=e.target.href;t&&t.length&&I(t)};return document.addEventListener("click",e),()=>{document.removeEventListener("click",e)}}),[]),t?Object(an.jsxs)(yn,{className:"nitropedia",theme:"primary-slim",style:i?{width:i.width,height:i.height}:{},children:[Object(an.jsx)(vn,{headerText:n,onCloseClick:()=>s(null)}),Object(an.jsx)(In,{children:Object(an.jsx)(on,{fit:!0,innerRef:d,className:"text-black",dangerouslySetInnerHTML:{__html:t}})})]}):null},Dd=e=>{const[t,s]=Object(c.useState)(0),[n,r]=Object(c.useState)(null),[i,o]=Object(c.useState)(!0),{showConfirm:l=null}=Hr();pr(a.Eb,(e=>{s(0),r(null)})),pr(a.Ng,(e=>{s(0),r(null)})),pr(a.Dc,(e=>{const t=e.getParser();t.roomEnter&&(t.data.habboGroupId>0?(s(t.data.habboGroupId),Ee(new a.md(t.data.habboGroupId,!1))):(s(0),r(null)))})),pr(a.Zd,(e=>{const c=e.getParser();!n||c.groupId!==n.id&&c.groupId!==t||(s(0),r(null))})),pr(a.nd,(e=>{const s=e.getParser();s.id===t&&r(s)}));const d=n&&n.ownerName===F().userName;return n?Object(an.jsx)(on,{className:"nitro-notification-bubble rounded",children:Object(an.jsxs)(Fn,{children:[Object(an.jsxs)(hn,{alignItems:"center",justifyContent:"between",pointer:!0,onClick:e=>o((e=>!e)),children:[Object(an.jsx)(ur,{variant:"white",children:We("group.homeroominfo.title")}),Object(an.jsx)(fn.a,{icon:i?"chevron-up":"chevron-down"})]}),i&&Object(an.jsxs)(an.Fragment,{children:[Object(an.jsxs)(hn,{pointer:!0,alignItems:"center",gap:2,onClick:e=>Qt(n.id),children:[Object(an.jsx)(on,{className:"group-badge",children:Object(an.jsx)(Dn,{badgeCode:n.badge,isGroup:!0})}),Object(an.jsx)(ur,{variant:"white",children:n.title})]}),(n.type!==ss.PRIVATE||d)&&Object(an.jsx)(bn,{fullWidth:!0,variant:"success",disabled:n.membershipType===ts.REQUEST_PENDING,onClick:()=>{if(d)return Jt(n.id);n.type===ss.PRIVATE&&n.membershipType===ts.NOT_MEMBER||(n.membershipType!==ts.MEMBER?ns(n.id):l(We("group.leaveconfirm.desc"),(()=>{Ee(new a.vd(n.id,F().userId))}),null))},children:We(d?"group.manage":n.type===ss.PRIVATE?"":n.membershipType===ts.MEMBER?"group.leave":n.membershipType===ts.NOT_MEMBER&&n.type===ss.REGULAR?"group.join":n.membershipType===ts.REQUEST_PENDING?"group.membershippending":n.membershipType===ts.NOT_MEMBER&&n.type===ss.EXCLUSIVE?"group.requestmembership":void 0)})]})]})}):null},Ld=e=>{const{title:t="Nitro",onClose:s=null,...n}=e;return Object(an.jsx)($n,{title:t,onClose:s,...n,children:Object(an.jsxs)(un,{children:[Object(an.jsx)(Fn,{center:!0,size:5,children:Object(an.jsx)("object",{data:"https://assets.nitrodev.co/logos/nitro-n-dark.svg",width:"100",height:"100",children:"\xa0"})}),Object(an.jsxs)(Fn,{size:7,children:[Object(an.jsxs)(Fn,{alignItems:"center",gap:0,children:[Object(an.jsx)(ur,{bold:!0,fontSize:4,children:"Nitro React"}),Object(an.jsxs)(ur,{children:["v","2.1.1"]})]}),Object(an.jsxs)(Fn,{alignItems:"center",children:[Object(an.jsxs)(ur,{children:[Object(an.jsx)("b",{children:"Renderer:"})," v",a.vf.RENDERER_VERSION]}),Object(an.jsxs)(Fn,{fullWidth:!0,gap:1,children:[Object(an.jsx)(bn,{fullWidth:!0,variant:"success",onClick:e=>window.open("https://discord.nitrodev.co"),children:"Discord"}),Object(an.jsxs)(hn,{gap:1,children:[Object(an.jsx)(bn,{fullWidth:!0,onClick:e=>window.open("https://git.krews.org/nitro/nitro-react"),children:"Git"}),Object(an.jsx)(bn,{fullWidth:!0,onClick:e=>window.open("https://git.krews.org/nitro/nitro-react/-/issues"),children:"Bug Report"})]})]})]})]})]})})},Pd=e=>{const{item:t=null,title:s=e.item&&e.item.title||"",onClose:n=null,...r}=e,[i,a]=Object(c.useState)(!1),o=Object(c.useCallback)((()=>{I(t.clickUrl),n()}),[t,n]),l=t.alertType===fs.DEFAULT;return Object(an.jsxs)($n,{title:s,onClose:n,...r,type:l?fs.DEFAULT:t.alertType,children:[Object(an.jsxs)(hn,{fullHeight:!0,overflow:"auto",gap:l||t.imageUrl&&!i?2:0,children:[l&&!t.imageUrl&&Object(an.jsx)(on,{className:"notification-frank flex-shrink-0"}),t.imageUrl&&!i&&Object(an.jsx)("img",{src:t.imageUrl,alt:t.title,onError:()=>{a(!0)},className:"align-self-baseline"}),Object(an.jsxs)(on,{classNames:["notification-text overflow-y-auto d-flex flex-column w-100",t.clickUrl&&!l?"justify-content-center":""],children:[t.messages.length>0&&t.messages.map(((e,t)=>{const s=e.replace(/\r\n|\r|\n/g,"<br />");return Object(an.jsx)(on,{dangerouslySetInnerHTML:{__html:s}},t)})),t.clickUrl&&t.clickUrl.length>0&&t.imageUrl&&!i&&Object(an.jsxs)(an.Fragment,{children:[Object(an.jsx)("hr",{className:"my-2 w-100"}),Object(an.jsx)(bn,{onClick:o,className:"align-self-center px-3",children:We(t.clickUrlText)})]})]})]}),(!t.imageUrl||t.imageUrl&&i)&&Object(an.jsx)(an.Fragment,{children:Object(an.jsxs)(Fn,{alignItems:"center",center:!0,gap:0,children:[Object(an.jsx)("hr",{className:"my-2 w-100"}),!t.clickUrl&&Object(an.jsx)(bn,{onClick:n,children:We("generic.close")}),t.clickUrl&&t.clickUrl.length>0&&Object(an.jsx)(bn,{onClick:o,children:We(t.clickUrlText)})]})})]})},Ud=e=>{const{item:t=null,title:s=e.item&&e.item.title||"",onClose:n=null,...r}=e,[i,a]=Object(c.useState)(""),[o,l]=Object(c.useState)([]),d=Object(c.useCallback)((()=>{I(t.clickUrl),n()}),[t,n]);Object(c.useEffect)((()=>{l(JSON.parse(t.messages[0]))}),[t]);const u=Object(c.useCallback)((e=>{let s=JSON.parse(t.messages[0]);l(s.filter((t=>t.includes(e)))),a(e)}),[t]),j=t.clickUrl&&t.clickUrl.startsWith("event:");return Object(an.jsxs)($n,{title:s,onClose:n,...r,children:[Object(an.jsx)(hn,{fullWidth:!0,alignItems:"center",position:"relative",children:Object(an.jsx)("input",{type:"text",className:"form-control form-control-sm",placeholder:We("generic.search"),value:i,onChange:e=>u(e.target.value)})}),Object(an.jsx)(Fn,{fullHeight:!0,className:"py-1",overflow:"hidden",children:Object(an.jsx)(jn,{gap:1,columnCount:1,children:o&&o.map(((e,t)=>Object(an.jsx)("span",{children:e},t)))})}),Object(an.jsx)("hr",{className:"my-2"}),Object(an.jsxs)(Fn,{alignItems:"center",center:!0,gap:1,children:[!j&&!t.clickUrl&&Object(an.jsx)(bn,{onClick:n,children:We("generic.close")}),t.clickUrl&&t.clickUrl.length>0&&Object(an.jsx)(bn,{onClick:d,children:We(t.clickUrlText)})]})]})},Md=(e,t)=>{if(!e)return null;const s={key:e.id,item:e,onClose:t};switch(e.alertType){case fs.NITRO:return Object(an.jsx)(Ld,{...s});case fs.SEARCH:return Object(an.jsx)(Ud,{...s});default:return Object(an.jsx)(Pd,{...s})}},Fd=e=>{const{item:t=null,onClose:s=null,...n}=e;return Object(an.jsxs)(Zn,{fadesOut:!1,className:"flex-column club-gift",onClose:s,...n,children:[Object(an.jsxs)("div",{className:"d-flex align-items-center gap-2 mb-2",children:[Object(an.jsx)(Pn,{type:"hc",className:"flex-shrink-0"}),Object(an.jsx)("span",{className:"ms-1",children:We("notifications.text.club_gift")})]}),Object(an.jsxs)("div",{className:"d-flex align-items-center justify-content-end gap-2",children:[Object(an.jsx)("button",{type:"button",className:"btn btn-success w-100 btn-sm",onClick:()=>I(t.linkUrl),children:We("notifications.button.show_gift_list")}),Object(an.jsx)("span",{className:"text-decoration-underline cursor-pointer text-nowrap",onClick:s,children:We("notifications.button.later")})]})]})},Bd=e=>{const{item:t=null,onClose:s=null,...n}=e,r=t.message.replace(/\r\n|\r|\n/g,"<br />");return Object(an.jsxs)(Zn,{onClose:s,gap:2,alignItems:"center",onClick:e=>t.linkUrl&&t.linkUrl.length&&I(t.linkUrl),...n,children:[Object(an.jsx)(hn,{center:!0,className:"bubble-image-container",children:t.iconUrl&&t.iconUrl.length&&Object(an.jsx)("img",{className:"no-select",src:t.iconUrl,alt:""})}),Object(an.jsx)(ur,{wrap:!0,variant:"white",dangerouslySetInnerHTML:{__html:r}})]})},Hd=(e,t)=>{if(!e)return null;const s={key:e.id,item:e,onClose:t};return e.notificationType===_s.CLUBGIFT?Object(an.jsx)(Fd,{...s}):Object(an.jsx)(Bd,{...s})},Gd=e=>{const{item:t=null,onClose:s=null,...n}=e,{message:r=null,onConfirm:c=null,onCancel:i=null,confirmText:a=null,cancelText:o=null,title:l=null}=t;return Object(an.jsxs)($n,{title:l,onClose:s,...n,type:fs.ALERT,children:[Object(an.jsx)(hn,{grow:!0,center:!0,children:Object(an.jsx)(ur,{children:r})}),Object(an.jsxs)(hn,{gap:1,children:[Object(an.jsx)(bn,{fullWidth:!0,variant:"danger",onClick:()=>{i&&i(),s()},children:o}),Object(an.jsx)(bn,{fullWidth:!0,onClick:()=>{c&&c(),s()},children:a})]})]})},Wd=(e,t)=>{if(!e)return null;const s={key:e.id,item:e,onClose:t};return e.confirmType,Object(an.jsx)(Gd,{...s})},Vd=e=>{const{alerts:t=[],bubbleAlerts:s=[],confirms:n=[],closeAlert:r=null,closeBubbleAlert:i=null,closeConfirm:a=null}=Hr(),o=Object(c.useMemo)((()=>{if(!t||!t.length)return null;const e=[];for(const s of t){const t=Md(s,(()=>r(s)));e.push(t)}return e}),[t,r]),l=Object(c.useMemo)((()=>{if(!s||!s.length)return null;const e=[];for(const t of s){const s=Hd(t,(()=>i(t)));t.notificationType!==_s.CLUBGIFT?e.push(s):e.unshift(s)}return e}),[s,i]),d=Object(c.useMemo)((()=>{if(!n||!n.length)return null;const e=[];for(const t of n){const s=Wd(t,(()=>a(t)));e.push(s)}return e}),[n,a]);return Object(an.jsxs)(an.Fragment,{children:[Object(an.jsx)(Fn,{gap:1,children:l}),d,o]})};var qd=s(140);const zd=e=>{const{type:t=-1,amount:s=-1,short:n=!1}=e,r=Object(c.useMemo)((()=>Object(an.jsxs)(hn,{justifyContent:"end",pointer:!0,gap:1,className:"nitro-purse-button rounded",children:[Object(an.jsx)(ur,{truncate:!0,textEnd:!0,variant:"white",grow:!0,children:n?Ge(s):He(s)}),Object(an.jsx)(Pn,{type:t})]})),[s,n,t]);return n?Object(an.jsx)(al.a,{placement:"left",overlay:Object(an.jsx)(qd.a,{id:`tooltip-${t}`,children:He(s)}),children:r}):r},Yd=e=>{const{type:t=-1,amount:s=-1}=e;return Object(an.jsxs)(hn,{fullWidth:!0,justifyContent:"between",className:"nitro-purse-seasonal-currency p-2 rounded",children:[Object(an.jsx)(ur,{variant:"white",children:We(`purse.seasonal.currency.${t}`)}),Object(an.jsxs)(hn,{gap:1,children:[Object(an.jsx)(ur,{variant:"white",children:He(s)}),Object(an.jsx)(Pn,{type:t})]})]})},$d=e=>{const{purse:t=null,hcDisabled:s=!1}=Tc(),n=Object(c.useMemo)((()=>p("system.currency.types",[])),[]),r=Object(c.useMemo)((()=>p("currency.display.number.short",!1)),[]),i=Object(c.useMemo)((()=>{if(!t)return null;const e=31*t.clubPeriods+t.clubDays,s=t.minutesUntilExpiration;return t.clubLevel===a.Xd.NO_CLUB?We("purse.clubdays.zero.amount.text"):s>-1&&s<1440?a.Zb.shortFormat(60*s):a.Zb.shortFormat(86400*e)}),[t]),o=Object(c.useCallback)((function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,c=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!t||!t.activityPoints||!t.activityPoints.size)return null;const i=Array.from(t.activityPoints.keys()).filter((e=>n.indexOf(e)>=0));let a=0;for(;a<e;)i.shift(),a++;a=0;const o=[];for(const n of i){if(s>-1&&a===s)break;c?o.push(Object(an.jsx)(Yd,{type:n,amount:t.activityPoints.get(n)},n)):o.push(Object(an.jsx)(zd,{type:n,amount:t.activityPoints.get(n),short:r},n)),a++}return o}),[t,n,r]);return t?Object(an.jsxs)(Fn,{alignItems:"end",className:"nitro-purse-container",gap:1,children:[Object(an.jsx)(hn,{className:"nitro-purse rounded-bottom p-1",children:Object(an.jsxs)(un,{fullWidth:!0,gap:1,children:[Object(an.jsxs)(Fn,{justifyContent:"center",size:s?10:6,gap:0,children:[Object(an.jsx)(zd,{type:-1,amount:t.credits,short:r}),o(0,2)]}),!s&&Object(an.jsxs)(Fn,{center:!0,pointer:!0,size:4,gap:1,className:"nitro-purse-subscription rounded",onClick:e=>m("habboUI/open/hccenter"),children:[Object(an.jsx)(Pn,{type:"hc"}),Object(an.jsx)(ur,{variant:"white",children:i})]}),Object(an.jsxs)(Fn,{justifyContent:"center",size:2,gap:0,children:[Object(an.jsx)(hn,{center:!0,pointer:!0,fullHeight:!0,className:"nitro-purse-button p-1 rounded",onClick:e=>m("help/show"),children:Object(an.jsx)("i",{className:"icon icon-help"})}),Object(an.jsx)(hn,{center:!0,pointer:!0,fullHeight:!0,className:"nitro-purse-button p-1 rounded",onClick:e=>m("user-settings/toggle"),children:Object(an.jsx)("i",{className:"icon icon-cog"})})]})]})}),o(2,-1,!0)]}):null},Kd=e=>Object(an.jsx)("div",{className:"nitro-right-side",children:Object(an.jsxs)(Fn,{position:"relative",gap:1,children:[Object(an.jsx)($d,{}),Object(an.jsx)(Dd,{}),Object(an.jsx)(Vd,{})]})}),Xd=e=>Object(an.jsx)("div",{className:"room-spectator"}),Qd=e=>{const{justifyContent:t="center",alignItems:s="center",classNames:n=[],...r}=e,i=Object(c.useMemo)((()=>{const e=["menu-header","p-1"];return n.length&&e.push(...n),e}),[n]);return Object(an.jsx)(hn,{justifyContent:t,alignItems:s,classNames:i,...r})},Jd=e=>{const{chatEvent:t=null,onClose:s=null}=e,[n,r]=Object(c.useState)("${bot.skill.chatter.configuration.text.placeholder}"===t.chat?"":t.chat),[i,o]=Object(c.useState)(t.automaticChat),[l,d]=Object(c.useState)(t.mixSentences),[u,j]=Object(c.useState)(t.chatDelay),h=Object(c.useMemo)((()=>fe(he().roomId,t.objectId,t.category,1)),[t]);return Object(an.jsx)(Rn,{windowPosition:Sn.NOTHING,handleSelector:".drag-handler",dragStyle:{top:h.y,left:h.x},children:Object(an.jsxs)(on,{className:"nitro-context-menu bot-chat",children:[Object(an.jsx)(Qd,{className:"drag-handler",children:We("bot.skill.chatter.configuration.title")}),Object(an.jsxs)(Fn,{className:"p-1",children:[Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{variant:"white",children:We("bot.skill.chatter.configuration.chat.text")}),Object(an.jsx)("textarea",{className:"form-control form-control-sm",placeholder:We("bot.skill.chatter.configuration.text.placeholder"),value:n,rows:7,onChange:e=>r(e.target.value)})]}),Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsxs)(hn,{gap:1,alignItems:"center",justifyContent:"between",children:[Object(an.jsx)(ur,{fullWidth:!0,variant:"white",children:We("bot.skill.chatter.configuration.automatic.chat")}),Object(an.jsx)("input",{type:"checkbox",className:"form-check-input",checked:i,onChange:e=>o(e.target.checked)})]}),Object(an.jsxs)(hn,{gap:1,alignItems:"center",justifyContent:"between",children:[Object(an.jsx)(ur,{fullWidth:!0,variant:"white",children:We("bot.skill.chatter.configuration.markov")}),Object(an.jsx)("input",{type:"checkbox",className:"form-check-input",checked:l,onChange:e=>d(e.target.checked)})]}),Object(an.jsxs)(hn,{gap:1,alignItems:"center",justifyContent:"between",children:[Object(an.jsx)(ur,{fullWidth:!0,variant:"white",children:We("bot.skill.chatter.configuration.chat.delay")}),Object(an.jsx)("input",{type:"number",className:"form-control form-control-sm",value:u,onChange:e=>j(e.target.valueAsNumber)})]})]}),Object(an.jsxs)(hn,{alignItems:"center",justifyContent:"between",gap:1,children:[Object(an.jsx)(bn,{fullWidth:!0,variant:"primary",onClick:s,children:We("cancel")}),Object(an.jsx)(bn,{fullWidth:!0,variant:"success",onClick:()=>{const e=n.replace(/;#;/g," ").replace(/\r\n|\r|\n/g,"\r")+";#;"+i+";#;"+u+";#;"+l;Ee(new a.E(t.botId,Us.SETUP_CHAT,e)),s()},children:We("save")})]})]})]})})},Zd=e=>{const{item:t=null,onClose:s=null}=e,[n,r]=Object(c.useState)(-1),[i,o]=Object(c.useState)(null),[l,d]=Object(c.useState)(null),{roomSession:u=null}=Ac(),j=Object(c.useCallback)((()=>{i&&C().selectRoomObject(u.roomId,i.roomIndex,a.Wg.UNIT)}),[u,i]),h=Object(c.useCallback)((()=>{u.usePetProduct(t.requestRoomObjectId,i.webID),s()}),[u,t,i,s]),b=Object(c.useMemo)((()=>{if(!i||!l)return null;const e=new a.Ff(i.figure),t=l.customParams.split(" "),s=parseInt(t[0]);switch(l.specialType){case Je.PET_SHAMPOO:{if(t.length<2)return null;const n=C().getPetColorResult(s,e.paletteId),r=C().getPetColorResultsForTag(s,t[1]);let c=-1;for(const e of r)if(e.breed===n.breed){c=parseInt(e.id);break}return Object(an.jsx)(er,{typeId:e.typeId,paletteId:c,petColor:e.color,customParts:e.customParts,direction:2})}case Je.PET_CUSTOM_PART:{if(t.length<4)return null;const s=[],n=t[1].split(",").map((e=>parseInt(e))),r=t[2].split(",").map((e=>parseInt(e))),c=t[3].split(",").map((e=>parseInt(e)));let i=0;for(;i<n.length;){const t=n[i],o=e.getCustomPart(t);let l=c[i];null!=o&&(l=o.paletteId),s.push(new a.Ef(t,r[i],l)),i++}return Object(an.jsx)(er,{typeId:e.typeId,paletteId:e.paletteId,petColor:e.color,customParts:s,direction:2})}case Je.PET_CUSTOM_PART_SHAMPOO:{if(t.length<3)return null;const s=[],n=t[1].split(",").map((e=>parseInt(e))),r=t[2].split(",").map((e=>parseInt(e)));let c=0;for(;c<n.length;){const t=n[c],i=e.getCustomPart(t);let o=-1;null!=i&&(o=i.partId),s.push(new a.Ef(n[c],o,r[c])),c++}return Object(an.jsx)(er,{typeId:e.typeId,paletteId:e.paletteId,petColor:e.color,customParts:s,direction:2})}case Je.PET_SADDLE:{if(t.length<4)return null;const s=[],n=t[1].split(",").map((e=>parseInt(e))),r=t[2].split(",").map((e=>parseInt(e))),c=t[3].split(",").map((e=>parseInt(e)));let i=0;for(;i<n.length;)s.push(new a.Ef(n[i],r[i],c[i])),i++;for(const t of e.customParts)-1===n.indexOf(t.layerId)&&s.push(t);return Object(an.jsx)(er,{typeId:e.typeId,paletteId:e.paletteId,petColor:e.color,customParts:s,direction:2})}case Je.MONSTERPLANT_REBREED:case Je.MONSTERPLANT_REVIVAL:case Je.MONSTERPLANT_FERTILIZE:{let t="rip";const s=C().getRoomObject(u.roomId,i.roomIndex,a.Wg.UNIT);if(s&&(t=s.model.getValue(a.ch.FIGURE_POSTURE),"rip"===t)){const e=i.petLevel;t=e<7?`grw${e}`:"std"}return Object(an.jsx)(er,{typeId:e.typeId,paletteId:e.paletteId,petColor:e.color,customParts:e.customParts,posture:t,direction:2})}}}),[i,l,u]);return Object(c.useEffect)((()=>{const e=u.userDataManager.getUserDataByIndex(t.id);o(e);const s=de(u.roomId,t.requestRoomObjectId,a.Wg.FLOOR);if(!s)return;d(s);let n=-1;switch(s.specialType){case Je.PET_SHAMPOO:n=0;break;case Je.PET_CUSTOM_PART:n=1;break;case Je.PET_CUSTOM_PART_SHAMPOO:n=2;break;case Je.PET_SADDLE:n=3;break;case Je.MONSTERPLANT_REVIVAL:n=4;break;case Je.MONSTERPLANT_REBREED:n=5;break;case Je.MONSTERPLANT_FERTILIZE:n=6}r(n)}),[u,t]),i?Object(an.jsxs)(yn,{className:"nitro-use-product-confirmation",children:[Object(an.jsx)(vn,{headerText:We("useproduct.widget.title",["name"],[i.name]),onCloseClick:s}),Object(an.jsx)(In,{center:!0,children:Object(an.jsxs)(hn,{gap:2,overflow:"hidden",children:[Object(an.jsx)(Fn,{children:Object(an.jsx)(on,{pointer:!0,className:"product-preview",onClick:j,children:b})}),Object(an.jsxs)(Fn,{justifyContent:"between",overflow:"auto",children:[Object(an.jsxs)(Fn,{gap:2,children:[0===n&&Object(an.jsxs)(an.Fragment,{children:[Object(an.jsx)(ur,{children:We("useproduct.widget.text.shampoo",["productName"],[l.name])}),Object(an.jsx)(ur,{children:We("useproduct.widget.info.shampoo")})]}),1===n&&Object(an.jsxs)(an.Fragment,{children:[Object(an.jsx)(ur,{children:We("useproduct.widget.text.custompart",["productName"],[l.name])}),Object(an.jsx)(ur,{children:We("useproduct.widget.info.custompart")})]}),2===n&&Object(an.jsxs)(an.Fragment,{children:[Object(an.jsx)(ur,{children:We("useproduct.widget.text.custompartshampoo",["productName"],[l.name])}),Object(an.jsx)(ur,{children:We("useproduct.widget.info.custompartshampoo")})]}),3===n&&Object(an.jsxs)(an.Fragment,{children:[Object(an.jsx)(ur,{children:We("useproduct.widget.text.saddle",["productName"],[l.name])}),Object(an.jsx)(ur,{children:We("useproduct.widget.info.saddle")})]}),4===n&&Object(an.jsxs)(an.Fragment,{children:[Object(an.jsx)(ur,{children:We("useproduct.widget.text.revive_monsterplant",["productName"],[l.name])}),Object(an.jsx)(ur,{children:We("useproduct.widget.info.revive_monsterplant")})]}),5===n&&Object(an.jsxs)(an.Fragment,{children:[Object(an.jsx)(ur,{children:We("useproduct.widget.text.rebreed_monsterplant",["productName"],[l.name])}),Object(an.jsx)(ur,{children:We("useproduct.widget.info.rebreed_monsterplant")})]}),6===n&&Object(an.jsxs)(an.Fragment,{children:[Object(an.jsx)(ur,{children:We("useproduct.widget.text.fertilize_monsterplant",["productName"],[l.name])}),Object(an.jsx)(ur,{children:We("useproduct.widget.info.fertilize_monsterplant")})]})]}),Object(an.jsxs)(hn,{alignItems:"center",justifyContent:"between",children:[Object(an.jsx)(bn,{variant:"danger",onClick:s,children:We("useproduct.widget.cancel")}),Object(an.jsx)(bn,{variant:"success",onClick:h,children:We("useproduct.widget.use")})]})]})]})})]}):null},eu=e=>{const{disabled:t=!1,fullWidth:s=!0,justifyContent:n="center",alignItems:r="center",classNames:i=[],onClick:a=null,...o}=e,l=Object(c.useMemo)((()=>{const e=["menu-item","list-item"];return t&&e.push("disabled"),i.length&&e.push(...i),e}),[t,i]);return Object(an.jsx)(hn,{fullWidth:s,justifyContent:n,alignItems:r,classNames:l,onClick:e=>{t||a&&a(e)},...o})},tu=e=>{const{justifyContent:t="center",alignItems:s="center",classNames:n=[],collapsed:r=!0,...i}=e,a=Object(c.useMemo)((()=>{const e=["menu-footer"];return n.length&&e.push(...n),e}),[n]);return Object(an.jsx)(hn,{justifyContent:t,alignItems:s,classNames:a,...i,children:Object(an.jsx)(fn.a,{icon:r?"caret-up":"caret-down",className:"align-self-center"})})},su=10;let nu=!1,ru=null,cu=-1e6,iu=1;const au=e=>{const{objectId:t=-1,category:s=-1,userType:n=-1,fades:r=!1,onClose:i=null,position:l="absolute",classNames:d=[],style:u={},children:j=null,collapsable:h=!1,...b}=e,[g,m]=Object(c.useState)({x:null,y:null}),[O,p]=Object(c.useState)(1),[f,x]=Object(c.useState)(!1),[I,E]=Object(c.useState)(nu),C=Object(c.useRef)(),v=Object(c.useCallback)((e=>{if(!f)return;iu+=e;let t=1*(1-iu/75);if(t<=0)return i(),!1;p(t)}),[f,i]),N=Object(c.useCallback)(((e,t)=>{if(!e||!t||!ru)return;let s=-C.current.offsetHeight;n>-1&&(n===a.ah.USER||n===a.ah.BOT||n===a.ah.RENTABLE_BOT)?s+=e.height>50?15:0:s-=14,ru.addValue(t.y-e.top);let r=ru.getMax();r<cu-3&&(r=cu-3),cu=r;const c=t.y-r;let i=~~(t.x-C.current.offsetWidth/2),l=~~(c+s);const d=o().width-C.current.offsetWidth-su,u=o().height-C.current.offsetHeight-su;i<su?i=su:i>d&&(i=d),l<su?l=su:l>u&&(l=u),m({x:i,y:l})}),[n]),T=Object(c.useMemo)((()=>{const e=["nitro-context-menu"];return I&&e.push("menu-hidden"),e.push(null!==g.x?"visible":"invisible"),d.length&&e.push(...d),e}),[g,d,I]),S=Object(c.useMemo)((()=>{let e={};return e.left=g.x||0,e.top=g.y||0,e.opacity=O,Object.keys(u).length&&(e={...e,...u}),e}),[g,O,u]);return Object(c.useEffect)((()=>{if(!C.current)return;const e=e=>{if(!C.current)return;v(e);const n=fe(he().roomId,t,s),r=xe(he().roomId,t,s);N(n,r)};return _().add(e),()=>{_().remove(e)}}),[t,s,v,N]),Object(c.useEffect)((()=>{if(!r)return;const e=setTimeout((()=>x(!0)),5e3);return()=>clearTimeout(e)}),[r]),Object(c.useEffect)((()=>{nu=I}),[I]),Object(c.useEffect)((()=>{ru=new a.Mb(25),cu=-1e6,iu=1}),[]),Object(an.jsxs)(on,{innerRef:C,position:l,classNames:T,style:S,...b,children:[!(h&&nu)&&j,h&&Object(an.jsx)(tu,{onClick:()=>E(!I),collapsed:I})]})},ou=e=>{const{item:t=null,updateConfirmingProduct:s=null,onClose:n=null}=e,[r,i]=Object(c.useState)(0),{roomSession:o=null}=Ac();Object(c.useEffect)((()=>{if(!t)return;const e=de(o.roomId,t.requestRoomObjectId,a.Wg.FLOOR);if(!e)return;let s=0;switch(e.specialType){case Je.PET_SHAMPOO:s=1;break;case Je.PET_CUSTOM_PART:s=2;break;case Je.PET_CUSTOM_PART_SHAMPOO:s=3;break;case Je.PET_SADDLE:s=4;break;case Je.MONSTERPLANT_REVIVAL:s=5;break;case Je.MONSTERPLANT_REBREED:s=6;break;case Je.MONSTERPLANT_FERTILIZE:s=7}i(s)}),[o,t]);const l=Object(c.useCallback)((e=>{if(e)switch(e){case"use_product":case"use_product_shampoo":case"use_product_custom_part":case"use_product_custom_part_shampoo":case"use_product_saddle":case"replace_product_saddle":case"revive_monsterplant":case"rebreed_monsterplant":case"fertilize_monsterplant":s(t)}}),[t,s]);return Object(an.jsxs)(au,{objectId:t.id,category:a.Wg.UNIT,userType:a.ah.PET,onClose:n,collapsable:!0,children:[Object(an.jsx)(Qd,{children:t.name}),0===r&&Object(an.jsx)(eu,{onClick:e=>l("use_product"),children:We("infostand.button.useproduct")}),1===r&&Object(an.jsx)(eu,{onClick:e=>l("use_product_shampoo"),children:We("infostand.button.useproduct_shampoo")}),2===r&&Object(an.jsx)(eu,{onClick:e=>l("use_product_custom_part"),children:We("infostand.button.useproduct_custom_part")}),3===r&&Object(an.jsx)(eu,{onClick:e=>l("use_product_custom_part_shampoo"),children:We("infostand.button.useproduct_custom_part_shampoo")}),4===r&&Object(an.jsxs)(an.Fragment,{children:[t.replace&&Object(an.jsx)(eu,{onClick:e=>l("replace_product_saddle"),children:We("infostand.button.replaceproduct_saddle")}),!t.replace&&Object(an.jsx)(eu,{onClick:e=>l("use_product_saddle"),children:We("infostand.button.useproduct_saddle")})]}),5===r&&Object(an.jsx)(eu,{onClick:e=>l("revive_monsterplant"),children:We("infostand.button.revive_monsterplant")}),6===r&&Object(an.jsx)(eu,{onClick:e=>l("rebreed_monsterplant"),children:We("infostand.button.rebreed_monsterplant")}),7===r&&Object(an.jsx)(eu,{onClick:e=>l("fertilize_monsterplant"),children:We("infostand.button.fertilize_monsterplant")})]})},lu=e=>{const{avatarInfo:t=null,onClose:s=null}=e;return t?Object(an.jsx)(Fn,{className:"nitro-infostand rounded",children:Object(an.jsxs)(Fn,{overflow:"visible",className:"container-fluid content-area",gap:1,children:[Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsxs)(hn,{alignItems:"center",justifyContent:"between",gap:1,children:[Object(an.jsx)(ur,{variant:"white",small:!0,wrap:!0,children:t.name}),Object(an.jsx)(fn.a,{icon:"times",className:"cursor-pointer",onClick:s})]}),Object(an.jsx)("hr",{className:"m-0"})]}),Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsxs)(hn,{gap:1,children:[Object(an.jsx)(Fn,{fullWidth:!0,className:"body-image bot",children:Object(an.jsx)(kn,{figure:t.figure,direction:4})}),Object(an.jsx)(Fn,{grow:!0,center:!0,gap:0,children:t.badges.length>0&&t.badges.map((e=>Object(an.jsx)(Dn,{badgeCode:e,showInfo:!0},e)))})]}),Object(an.jsx)("hr",{className:"m-0"})]}),Object(an.jsx)(hn,{alignItems:"center",className:"bg-light-dark rounded py-1 px-2",children:Object(an.jsx)(ur,{fullWidth:!0,wrap:!0,textBreak:!0,variant:"white",small:!0,className:"motto-content",children:t.motto})}),t.carryItem>0&&Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)("hr",{className:"m-0"}),Object(an.jsx)(ur,{variant:"white",small:!0,wrap:!0,children:We("infostand.text.handitem",["item"],[We("handitem"+t.carryItem)])})]})]})}):null},du=e=>{const{avatarInfo:t=null,onClose:s=null}=e,{roomSession:n=null}=Ac(),[r,i]=Object(c.useState)(0),[o,l]=Object(c.useState)(!1),[d,u]=Object(c.useState)(!1),[j,h]=Object(c.useState)(!1),[b,g]=Object(c.useState)([]),[O,p]=Object(c.useState)([]),[f,x]=Object(c.useState)([]),[_,I]=Object(c.useState)([]),[E,v]=Object(c.useState)(!1),[N,T]=Object(c.useState)(0),[S,w]=Object(c.useState)(0),[R,y]=Object(c.useState)(!1),[k,A]=Object(c.useState)(!1),[D,L]=Object(c.useState)(null);Object(c.useEffect)((()=>{let e=0,s=!1,r=!1,c=!1,o=[],d=[],j=[],b=[],m=!1,O=0,f=0,_=!1,E=!1;const N=t.roomControllerLevel>=a.yg.GUEST;if((N||t.isOwner||t.isRoomOwner||t.isAnyRoomController)&&(s=!0,r=!t.isWallItem,t.roomControllerLevel>=a.yg.MODERATOR&&(_=!0)),t.isAnyRoomController&&(E=!0),(t.usagePolicy===a.Nh.EVERYBODY||t.usagePolicy===a.Nh.CONTROLLER&&N||t.extraParam===a.Mh.JUKEBOX&&N||t.extraParam===a.Mh.USABLE_PRODUCT&&N)&&(c=!0),t.extraParam){if(t.extraParam===a.Mh.CRACKABLE_FURNI){const e=t.stuffData;c=!0,m=!0,O=e.hits,f=e.target}if(_){const e=t.extraParam.substr(a.Mh.BRANDING_OPTIONS.length);if(e){const t=e.split("\t");for(const e of t){const t=e.split("=");t&&2===t.length&&(o.push(t[0]),d.push(t[1]))}}}}if(_){const e=C().getRoomObject(n.roomId,t.id,t.isWallItem?a.Wg.WALL:a.Wg.FLOOR);if(e){const t=e.model.getValue(a.ch.FURNITURE_CUSTOM_VARIABLES),s=e.model.getValue(a.ch.FURNITURE_DATA);if(t&&t.length)for(const e of t)j.push(e),b.push(s[e]||"")}}t.isOwner||t.isAnyRoomController?e=2:(t.isRoomOwner||t.roomControllerLevel>=a.yg.GUILD_ADMIN)&&(e=1),t.isStickie&&(e=0),i(e),l(s),u(r),h(c),g(o),p(d),x(j),I(b),v(m),T(O),w(f),y(_),A(E),L(null),t.groupId&&Ee(new a.md(t.groupId,!1))}),[n,t]),pr(a.nd,(e=>{const s=e.getParser();t&&t.groupId===s.id&&!s.flag&&(D&&L(null),L(s.title))}));const P=Object(c.useCallback)(((e,t)=>{const s=Array.from(O);s[e]=t,p(s)}),[O]),U=Object(c.useCallback)(((e,t)=>{const s=Array.from(_);s[e]=t,I(s)}),[_]),M=Object(c.useCallback)((()=>{if(0===b.length||0===O.length)return"";let e="",t=0;for(;t<b.length;){e=e+(b[t]+"=")+O[t]+"\t",t++}return e}),[b,O]),F=Object(c.useCallback)((e=>{if(!e||""===e)return;switch(e){case"buy_one":return void m(`catalog/open/offerId/${t.purchaseOfferId}`);case"move":C().processRoomObjectOperation(t.id,t.category,a.Yg.OBJECT_MOVE);break;case"rotate":C().processRoomObjectOperation(t.id,t.category,a.Yg.OBJECT_ROTATE_POSITIVE);break;case"pickup":2===r?C().processRoomObjectOperation(t.id,t.category,a.Yg.OBJECT_PICKUP):C().processRoomObjectOperation(t.id,t.category,a.Yg.OBJECT_EJECT);break;case"use":C().useRoomObject(t.id,t.category);break;case"save_branding_configuration":{const e=new Map,s=M().split("\t");if(s)for(const t of s){const[s,n]=t.split("=",2);e.set(s,n)}C().modifyRoomObjectDataWithMap(t.id,t.category,a.Yg.OBJECT_SAVE_STUFF_DATA,e);break}case"save_custom_variables":{const e=new Map;for(let t=0;t<f.length;t++){const s=f[t],n=_[t];s&&s.length&&n&&n.length&&e.set(s,n)}Ee(new a.ai(t.id,e));break}}}),[t,r,f,_,M]),B=Object(c.useCallback)((()=>{const e=t.stuffData;return e&&e instanceof a.di?e.getValue(2):null}),[t]);return t?Object(an.jsxs)(Fn,{gap:1,alignItems:"end",children:[Object(an.jsx)(Fn,{className:"nitro-infostand rounded",children:Object(an.jsxs)(Fn,{overflow:"visible",className:"container-fluid content-area",gap:1,children:[Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsxs)(hn,{alignItems:"center",justifyContent:"between",gap:1,children:[Object(an.jsx)(ur,{variant:"white",small:!0,wrap:!0,children:t.name}),Object(an.jsx)(fn.a,{icon:"times",className:"cursor-pointer",onClick:s})]}),Object(an.jsx)("hr",{className:"m-0"})]}),Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsxs)(hn,{position:"relative",gap:1,children:[t.stuffData.isUnique&&Object(an.jsx)("div",{className:"position-absolute end-0",children:Object(an.jsx)(Gn,{uniqueNumber:t.stuffData.uniqueNumber,uniqueSeries:t.stuffData.uniqueSeries})}),t.stuffData.rarityLevel>-1&&Object(an.jsx)("div",{className:"position-absolute end-0",children:Object(an.jsx)(sr,{level:t.stuffData.rarityLevel})}),t.image&&t.image.src.length&&Object(an.jsx)("img",{className:"d-block mx-auto",src:t.image.src,alt:""})]}),Object(an.jsx)("hr",{className:"m-0"})]}),Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{fullWidth:!0,wrap:!0,textBreak:!0,variant:"white",small:!0,children:t.description}),Object(an.jsx)("hr",{className:"m-0"})]}),Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)(ir,{userId:t.ownerId}),Object(an.jsx)(ur,{variant:"white",small:!0,wrap:!0,children:We("furni.owner",["name"],[t.ownerName])})]}),t.purchaseOfferId>0&&Object(an.jsx)(hn,{children:Object(an.jsx)(ur,{variant:"white",small:!0,underline:!0,pointer:!0,onClick:e=>F("buy_one"),children:We("infostand.button.buy")})})]}),Object(an.jsxs)(Fn,{gap:1,children:[E&&Object(an.jsxs)(an.Fragment,{children:[Object(an.jsx)("hr",{className:"m-0"}),Object(an.jsx)(ur,{variant:"white",small:!0,wrap:!0,children:We("infostand.crackable_furni.hits_remaining",["hits","target"],[N.toString(),S.toString()])})]}),t.groupId>0&&Object(an.jsxs)(an.Fragment,{children:[Object(an.jsx)("hr",{className:"m-0"}),Object(an.jsxs)(hn,{pointer:!0,alignItems:"center",gap:2,onClick:()=>Qt(t.groupId),children:[Object(an.jsx)(Dn,{badgeCode:B(),isGroup:!0}),Object(an.jsx)(ur,{variant:"white",underline:!0,children:D})]})]}),R&&Object(an.jsxs)(an.Fragment,{children:[Object(an.jsx)("hr",{className:"m-0"}),k&&Object(an.jsxs)(ur,{small:!0,wrap:!0,variant:"white",children:["ID: ",t.id]}),b.length>0&&Object(an.jsxs)(an.Fragment,{children:[Object(an.jsx)("hr",{className:"m-0"}),Object(an.jsx)(Fn,{gap:1,children:b.map(((e,t)=>Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)(ur,{small:!0,wrap:!0,align:"end",variant:"white",className:"col-4",children:e}),Object(an.jsx)("input",{type:"text",className:"form-control form-control-sm",value:O[t],onChange:e=>P(t,e.target.value)})]},t)))})]})]}),f.length>0&&Object(an.jsxs)(an.Fragment,{children:[Object(an.jsx)("hr",{className:"m-0 my-1"}),Object(an.jsx)(Fn,{gap:1,children:f.map(((e,t)=>Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)(ur,{small:!0,wrap:!0,align:"end",variant:"white",className:"col-4",children:e}),Object(an.jsx)("input",{type:"text",className:"form-control form-control-sm",value:_[t],onChange:e=>U(t,e.target.value)})]},t)))})]})]})]})}),Object(an.jsxs)(hn,{gap:1,justifyContent:"end",children:[o&&Object(an.jsx)(bn,{variant:"dark",onClick:e=>F("move"),children:We("infostand.button.move")}),d&&Object(an.jsx)(bn,{variant:"dark",onClick:e=>F("rotate"),children:We("infostand.button.rotate")}),0!==r&&Object(an.jsx)(bn,{variant:"dark",onClick:e=>F("pickup"),children:We(1===r?"infostand.button.eject":"infostand.button.pickup")}),j&&Object(an.jsx)(bn,{variant:"dark",onClick:e=>F("use"),children:We("infostand.button.use")}),b.length>0&&O.length>0&&b.length===O.length&&Object(an.jsx)(bn,{variant:"dark",onClick:()=>F("save_branding_configuration"),children:We("save")}),f.length>0&&_.length>0&&f.length===_.length&&Object(an.jsx)(bn,{variant:"dark",onClick:()=>F("save_custom_variables"),children:We("save")})]})]}):null},uu=e=>{const{avatarInfo:t=null,onClose:s=null}=e,[n,r]=Object(c.useState)(0),[i,o]=Object(c.useState)(0),{roomSession:l=null}=Ac(),{petRespectRemaining:d=0,respectPet:u=null}=pi();if(Object(c.useEffect)((()=>{r(t.remainingGrowTime),o(t.remainingTimeToLive)}),[t]),Object(c.useEffect)((()=>{if(t.petType!==a.Lf.MONSTERPLANT||t.dead)return;const e=setInterval((()=>{r((e=>e-1)),o((e=>e-1))}),1e3);return()=>clearInterval(e)}),[t]),!t)return null;const j=e=>{let n=!0;if(e&&""!=e){switch(e){case"respect":u(t.id),d-1>=1&&(n=!1);break;case"buyfood":m("catalog/open/"+p("catalog.links")["pets.buy_saddle"]);break;case"train":break;case"treat":Ee(new a.Kf(t.id));break;case"compost":null===l||void 0===l||l.compostPlant(t.id);break;case"pick_up":null===l||void 0===l||l.pickupPet(t.id)}n&&s()}};return Object(an.jsxs)(Fn,{gap:1,alignItems:"end",children:[Object(an.jsx)(Fn,{className:"nitro-infostand rounded",children:Object(an.jsxs)(Fn,{overflow:"visible",className:"container-fluid content-area",gap:1,children:[Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsxs)(hn,{alignItems:"center",justifyContent:"between",gap:1,children:[Object(an.jsx)(ur,{variant:"white",small:!0,wrap:!0,children:t.name}),Object(an.jsx)(fn.a,{icon:"times",className:"cursor-pointer",onClick:s})]}),Object(an.jsx)(ur,{variant:"white",small:!0,wrap:!0,children:We(`pet.breed.${t.petType}.${t.petBreed}`)}),Object(an.jsx)("hr",{className:"m-0"})]}),t.petType===a.Lf.MONSTERPLANT&&Object(an.jsxs)(an.Fragment,{children:[Object(an.jsxs)(Fn,{center:!0,gap:1,children:[Object(an.jsx)(er,{figure:t.petFigure,posture:t.posture,direction:4}),Object(an.jsx)("hr",{className:"m-0"})]}),Object(an.jsxs)(Fn,{gap:2,children:[!t.dead&&Object(an.jsx)(Fn,{alignItems:"center",gap:1,children:Object(an.jsx)(ur,{variant:"white",center:!0,small:!0,wrap:!0,children:We("pet.level",["level","maxlevel"],[t.level.toString(),t.maximumLevel.toString()])})}),Object(an.jsxs)(Fn,{alignItems:"center",gap:1,children:[Object(an.jsx)(ur,{variant:"white",small:!0,truncate:!0,children:We("infostand.pet.text.wellbeing")}),Object(an.jsxs)(on,{fullWidth:!0,overflow:"hidden",position:"relative",className:"bg-light-dark rounded",children:[Object(an.jsx)(hn,{fit:!0,center:!0,position:"absolute",children:Object(an.jsx)(ur,{variant:"white",small:!0,children:t.dead?"00:00:00":Ue(0==i?t.remainingTimeToLive:i).split(":")[1]+":"+Ue(null==i||void 0==i?0:i).split(":")[2]+":"+Ue(null==i||void 0==i?0:i).split(":")[3]})}),Object(an.jsx)(on,{className:"bg-success rounded pet-stats",style:{width:t.dead?"0":Math.round(100*t.maximumTimeToLive/i).toString()}})]})]}),0!=n&&n>0&&Object(an.jsxs)(Fn,{alignItems:"center",gap:1,children:[Object(an.jsx)(ur,{variant:"white",small:!0,truncate:!0,children:We("infostand.pet.text.growth")}),Object(an.jsx)(Ln,{className:"top-2 end-2",day:Ue(n).split(":")[0],hour:Ue(n).split(":")[1],minutes:Ue(n).split(":")[2],seconds:Ue(n).split(":")[3]})]}),Object(an.jsxs)(Fn,{alignItems:"center",gap:1,children:[Object(an.jsx)(ur,{variant:"white",small:!0,truncate:!0,children:We("infostand.pet.text.raritylevel",["level"],[We(`infostand.pet.raritylevel.${t.rarityLevel}`)])}),Object(an.jsx)(sr,{className:"top-2 end-2",level:t.rarityLevel})]}),Object(an.jsx)("hr",{className:"m-0"})]}),Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{variant:"white",small:!0,wrap:!0,children:We("pet.age",["age"],[t.age.toString()])}),Object(an.jsx)("hr",{className:"m-0"})]})]}),t.petType!==a.Lf.MONSTERPLANT&&Object(an.jsxs)(an.Fragment,{children:[Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsxs)(hn,{gap:1,children:[Object(an.jsx)(Fn,{fullWidth:!0,overflow:"hidden",className:"body-image pet p-1",children:Object(an.jsx)(er,{figure:t.petFigure,posture:t.posture,direction:4})}),Object(an.jsxs)(Fn,{grow:!0,gap:1,children:[Object(an.jsx)(ur,{variant:"white",center:!0,small:!0,wrap:!0,children:We("pet.level",["level","maxlevel"],[t.level.toString(),t.maximumLevel.toString()])}),Object(an.jsxs)(Fn,{alignItems:"center",gap:1,children:[Object(an.jsx)(ur,{variant:"white",small:!0,truncate:!0,children:We("infostand.pet.text.happiness")}),Object(an.jsxs)(on,{fullWidth:!0,overflow:"hidden",position:"relative",className:"bg-light-dark rounded",children:[Object(an.jsx)(hn,{fit:!0,center:!0,position:"absolute",children:Object(an.jsx)(ur,{variant:"white",small:!0,children:t.happyness+"/"+t.maximumHappyness})}),Object(an.jsx)(on,{className:"bg-info rounded pet-stats",style:{width:t.happyness/t.maximumHappyness*100+"%"}})]})]}),Object(an.jsxs)(Fn,{alignItems:"center",gap:1,children:[Object(an.jsx)(ur,{variant:"white",small:!0,truncate:!0,children:We("infostand.pet.text.experience")}),Object(an.jsxs)(on,{fullWidth:!0,overflow:"hidden",position:"relative",className:"bg-light-dark rounded",children:[Object(an.jsx)(hn,{fit:!0,center:!0,position:"absolute",children:Object(an.jsx)(ur,{variant:"white",small:!0,children:t.experience+"/"+t.levelExperienceGoal})}),Object(an.jsx)(on,{className:"bg-purple rounded pet-stats",style:{width:t.experience/t.levelExperienceGoal*100+"%"}})]})]}),Object(an.jsxs)(Fn,{alignItems:"center",gap:1,children:[Object(an.jsx)(ur,{variant:"white",small:!0,truncate:!0,children:We("infostand.pet.text.energy")}),Object(an.jsxs)(on,{fullWidth:!0,overflow:"hidden",position:"relative",className:"bg-light-dark rounded",children:[Object(an.jsx)(hn,{fit:!0,center:!0,position:"absolute",children:Object(an.jsx)(ur,{variant:"white",small:!0,children:t.energy+"/"+t.maximumEnergy})}),Object(an.jsx)(on,{className:"bg-success rounded pet-stats",style:{width:t.energy/t.maximumEnergy*100+"%"}})]})]})]})]}),Object(an.jsx)("hr",{className:"m-0"})]}),Object(an.jsxs)(Fn,{gap:1,children:[t.petType!==a.Lf.MONSTERPLANT&&Object(an.jsx)(ur,{variant:"white",small:!0,wrap:!0,children:We("infostand.text.petrespect",["count"],[t.respect.toString()])}),Object(an.jsx)(ur,{variant:"white",small:!0,wrap:!0,children:We("pet.age",["age"],[t.age.toString()])}),Object(an.jsx)("hr",{className:"m-0"})]})]}),Object(an.jsx)(Fn,{gap:1,children:Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)(ir,{userId:t.ownerId}),Object(an.jsx)(ur,{variant:"white",small:!0,wrap:!0,children:We("infostand.text.petowner",["name"],[t.ownerName])})]})})]})}),Object(an.jsxs)(hn,{gap:1,justifyContent:"end",children:[t.petType!==a.Lf.MONSTERPLANT&&Object(an.jsx)(bn,{variant:"dark",onClick:e=>j("buyfood"),children:We("infostand.button.buyfood")}),t.isOwner&&t.petType!==a.Lf.MONSTERPLANT&&Object(an.jsx)(bn,{variant:"dark",onClick:e=>j("train"),children:We("infostand.button.train")}),!t.dead&&t.energy/t.maximumEnergy<.98&&t.petType===a.Lf.MONSTERPLANT&&Object(an.jsx)(bn,{variant:"dark",onClick:e=>j("treat"),children:We("infostand.button.pettreat")}),(null===l||void 0===l?void 0:l.isRoomOwner)&&t.petType===a.Lf.MONSTERPLANT&&Object(an.jsx)(bn,{variant:"dark",onClick:e=>j("compost"),children:We("infostand.button.compost")}),t.isOwner&&Object(an.jsx)(bn,{variant:"dark",onClick:e=>j("pick_up"),children:We("inventory.pets.pickup")}),d>0&&t.petType!==a.Lf.MONSTERPLANT&&Object(an.jsx)(bn,{variant:"dark",onClick:e=>j("respect"),children:We("infostand.button.petrespect",["count"],[d.toString()])})]})]})},ju=e=>{const{avatarInfo:t=null,onClose:s=null}=e,n=Object(c.useMemo)((()=>!(t.botSkills.indexOf(Us.NO_PICK_UP)>=0)&&!(!t.amIOwner&&!t.amIAnyRoomController)),[t]);if(t)return Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(Fn,{className:"nitro-infostand rounded",children:Object(an.jsxs)(Fn,{overflow:"visible",className:"container-fluid content-area",gap:1,children:[Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsxs)(hn,{alignItems:"center",justifyContent:"between",gap:1,children:[Object(an.jsx)(ur,{variant:"white",small:!0,wrap:!0,children:t.name}),Object(an.jsx)(fn.a,{icon:"times",className:"cursor-pointer",onClick:s})]}),Object(an.jsx)("hr",{className:"m-0"})]}),Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsxs)(hn,{gap:1,children:[Object(an.jsx)(Fn,{fullWidth:!0,className:"body-image bot",children:Object(an.jsx)(kn,{figure:t.figure,direction:4})}),Object(an.jsx)(Fn,{grow:!0,center:!0,gap:0,children:t.badges.length>0&&t.badges.map((e=>Object(an.jsx)(Dn,{badgeCode:e,showInfo:!0},e)))})]}),Object(an.jsx)("hr",{className:"m-0"})]}),Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(hn,{alignItems:"center",className:"bg-light-dark rounded py-1 px-2",children:Object(an.jsx)(ur,{fullWidth:!0,wrap:!0,textBreak:!0,variant:"white",small:!0,className:"motto-content",children:t.motto})}),Object(an.jsx)("hr",{className:"m-0"})]}),Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)(ir,{userId:t.ownerId}),Object(an.jsx)(ur,{variant:"white",small:!0,wrap:!0,children:We("infostand.text.botowner",["name"],[t.ownerName])})]}),t.carryItem>0&&Object(an.jsxs)(an.Fragment,{children:[Object(an.jsx)("hr",{className:"m-0"}),Object(an.jsx)(ur,{variant:"white",small:!0,wrap:!0,children:We("infostand.text.handitem",["item"],[We("handitem"+t.carryItem)])})]})]})]})}),n&&Object(an.jsx)(hn,{justifyContent:"end",children:Object(an.jsx)(bn,{variant:"dark",onClick:()=>Ee(new a.C(t.webID)),children:We("infostand.button.pickup")})})]})},hu=e=>{const{type:t=-1,relationship:s=null}=e;if(!s)return null;const n=a.dg.RELATIONSHIP_NAMES[t].toLocaleLowerCase();return Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)("i",{className:`nitro-friends-spritesheet icon-${n}`}),Object(an.jsx)(hn,{alignItems:"center",gap:0,children:Object(an.jsxs)(ur,{small:!0,variant:"white",onClick:e=>Xs(s.randomFriendId),children:[Object(an.jsx)("u",{children:s.randomFriendName}),s.friendCount>1&&" "+We(`extendedprofile.relstatus.others.${n}`,["count"],[(s.friendCount-1).toString()])]})})]})},bu=e=>{const{relationships:t=null}=e;return t&&t.relationshipStatusMap.length?Object(an.jsxs)(an.Fragment,{children:[Object(an.jsx)(hu,{type:a.dg.HEART,relationship:t.relationshipStatusMap.getValue(a.dg.HEART)}),Object(an.jsx)(hu,{type:a.dg.SMILE,relationship:t.relationshipStatusMap.getValue(a.dg.SMILE)}),Object(an.jsx)(hu,{type:a.dg.BOBBA,relationship:t.relationshipStatusMap.getValue(a.dg.BOBBA)})]}):null},gu=e=>{const{avatarInfo:t=null,setAvatarInfo:s=null,onClose:n=null}=e,[r,i]=Object(c.useState)(null),[o,l]=Object(c.useState)(!1),[d,u]=Object(c.useState)(null),{roomSession:j=null}=Ac(),h=e=>{!o||e.length>p("motto.max.length",38)||(j.sendMottoMessage(e),l(!1))};return Or(a.sh.RSUBE_BADGES,(e=>{if(!t||t.webID!==e.userId)return;t.badges.join("")!==e.badges.join("")&&s((t=>{const s=Le(t);return s.badges=e.badges,s}))})),Or(a.uh.USER_FIGURE,(e=>{t&&t.roomIndex===e.roomIndex&&s((t=>{const s=Le(t);return s.figure=e.figure,s.motto=e.customInfo,s.achievementScore=e.activityPoints,s}))})),Or(a.nh.FAVOURITE_GROUP_UPDATE,(e=>{t&&t.roomIndex===e.roomIndex&&s((t=>{const s=Le(t),n=-1===e.status||e.habboGroupId<=0;return s.groupId=n?-1:e.habboGroupId,s.groupName=n?null:e.habboGroupName,s.groupBadgeId=n?null:F().getGroupBadge(e.habboGroupId),s}))})),pr(a.eg,(e=>{const s=e.getParser();t&&t.webID===s.userId&&u(s)})),Object(c.useEffect)((()=>(l(!1),i(t.motto),Ee(new a.aj(t.webID)),()=>{l(!1),i(null),u(null)})),[t]),t?Object(an.jsx)(Fn,{className:"nitro-infostand rounded",children:Object(an.jsxs)(Fn,{overflow:"visible",className:"container-fluid content-area",gap:1,children:[Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsxs)(hn,{alignItems:"center",justifyContent:"between",children:[Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)(ir,{userId:t.webID}),Object(an.jsx)(ur,{variant:"white",small:!0,wrap:!0,children:t.name})]}),Object(an.jsx)(fn.a,{icon:"times",className:"cursor-pointer",onClick:n})]}),Object(an.jsx)("hr",{className:"m-0"})]}),Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsxs)(hn,{gap:1,children:[Object(an.jsx)(Fn,{fullWidth:!0,className:"body-image",onClick:e=>Xs(t.webID),children:Object(an.jsx)(kn,{figure:t.figure,direction:4})}),Object(an.jsxs)(Fn,{grow:!0,alignItems:"center",gap:0,children:[Object(an.jsxs)(hn,{gap:1,children:[Object(an.jsx)(hn,{center:!0,className:"badge-image",children:t.badges[0]&&Object(an.jsx)(Dn,{badgeCode:t.badges[0],showInfo:!0})}),Object(an.jsx)(hn,{center:!0,pointer:t.groupId>0,className:"badge-image",onClick:e=>Qt(t.groupId),children:t.groupId>0&&Object(an.jsx)(Dn,{badgeCode:t.groupBadgeId,isGroup:!0,showInfo:!0,customTitle:t.groupName})})]}),Object(an.jsxs)(hn,{center:!0,gap:1,children:[Object(an.jsx)(hn,{center:!0,className:"badge-image",children:t.badges[1]&&Object(an.jsx)(Dn,{badgeCode:t.badges[1],showInfo:!0})}),Object(an.jsx)(hn,{center:!0,className:"badge-image",children:t.badges[2]&&Object(an.jsx)(Dn,{badgeCode:t.badges[2],showInfo:!0})})]}),Object(an.jsxs)(hn,{center:!0,gap:1,children:[Object(an.jsx)(hn,{center:!0,className:"badge-image",children:t.badges[3]&&Object(an.jsx)(Dn,{badgeCode:t.badges[3],showInfo:!0})}),Object(an.jsx)(hn,{center:!0,className:"badge-image",children:t.badges[4]&&Object(an.jsx)(Dn,{badgeCode:t.badges[4],showInfo:!0})})]})]})]}),Object(an.jsx)("hr",{className:"m-0"})]}),Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsxs)(hn,{alignItems:"center",className:"bg-light-dark rounded py-1 px-2",children:[t.type!==Ls.OWN_USER&&Object(an.jsx)(hn,{grow:!0,alignItems:"center",className:"motto-content",children:Object(an.jsx)(ur,{fullWidth:!0,pointer:!0,wrap:!0,textBreak:!0,small:!0,variant:"white",children:r})}),t.type===Ls.OWN_USER&&Object(an.jsxs)(hn,{grow:!0,alignItems:"center",gap:2,children:[Object(an.jsx)(fn.a,{icon:"pencil-alt",className:"small"}),Object(an.jsxs)(hn,{grow:!0,alignItems:"center",className:"motto-content",children:[!o&&Object(an.jsxs)(ur,{fullWidth:!0,pointer:!0,wrap:!0,textBreak:!0,small:!0,variant:"white",onClick:e=>l(!0),children:[r,"\xa0"]}),o&&Object(an.jsx)("input",{type:"text",className:"motto-input",maxLength:p("motto.max.length",38),value:r,onChange:e=>i(e.target.value),onBlur:e=>h(e.target.value),onKeyDown:e=>{e.stopPropagation(),"Enter"!==e.key||h(e.target.value)},autoFocus:!0})]})]})]}),Object(an.jsx)("hr",{className:"m-0"})]}),Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{variant:"white",small:!0,wrap:!0,children:We("infostand.text.achievement_score")+" "+t.achievementScore}),t.carryItem>0&&Object(an.jsxs)(an.Fragment,{children:[Object(an.jsx)("hr",{className:"m-0"}),Object(an.jsx)(ur,{variant:"white",small:!0,wrap:!0,children:We("infostand.text.handitem",["item"],[We("handitem"+t.carryItem)])})]})]}),Object(an.jsx)(Fn,{gap:1,children:Object(an.jsx)(bu,{relationships:d})})]})}):null},mu=e=>{const{avatarInfo:t=null,onClose:s=null}=e,[n,r]=Object(c.useState)(0),{canRequestFriend:i=null}=ec(),{report:o=null}=ic(),{roomSession:l=null}=Ac(),{userRespectRemaining:d=0,respectUser:u=null}=pi(),j=Object(c.useMemo)((()=>t.amIOwner&&t.targetRoomControllerLevel<a.yg.GUEST&&!t.isGuildRoom),[t]),h=Object(c.useMemo)((()=>t.amIOwner&&t.targetRoomControllerLevel===a.yg.GUEST&&!t.isGuildRoom),[t]),b=Object(c.useMemo)((()=>t.canBeKicked||t.canBeBanned||t.canBeMuted||j||h),[j,h,t]),g=Object(c.useMemo)((()=>{let e=!1;const t=pe();if(t){const s=t.model.getValue(a.ch.FIGURE_CARRY_OBJECT);s>0&&s<999999&&(e=!0)}return e}),[]),O=e=>{let n=!0;if(e)switch(e){case"moderate":case"back_moderate":n=!1,r(1);break;case"ban":n=!1,r(2);break;case"mute":n=!1,r(3);break;case"ambassador":case"back_ambassador":n=!1,r(4);break;case"ambassador_mute":n=!1,r(5);break;case"back":n=!1,r(0);break;case"whisper":$e(new Ss(Ss.WHISPER,t.name));break;case"friend":m(`friends/request/${t.webID}/${t.name}`);break;case"relationship":n=!1,r(6);break;case"respect":u(t.webID),d-1>=1&&(n=!1);break;case"ignore":F().ignoreUser(t.name);break;case"unignore":F().unignoreUser(t.name);break;case"kick":case"ambassador_kick":l.sendKickMessage(t.webID);break;case"ban_hour":l.sendBanMessage(t.webID,"RWUAM_BAN_USER_HOUR");break;case"ban_day":l.sendBanMessage(t.webID,"RWUAM_BAN_USER_DAY");break;case"perm_ban":l.sendBanMessage(t.webID,"RWUAM_BAN_USER_PERM");break;case"mute_2min":case"ambassador_mute_2min":l.sendMuteMessage(t.webID,2);break;case"mute_5min":l.sendMuteMessage(t.webID,5);break;case"mute_10min":case"ambassador_mute_10min":l.sendMuteMessage(t.webID,10);break;case"give_rights":l.sendGiveRightsMessage(t.webID);break;case"remove_rights":l.sendTakeRightsMessage(t.webID);break;case"trade":Ee(new a.wi(t.roomIndex));break;case"report":o(us.BULLY,{reportedUserId:t.webID});break;case"pass_hand_item":Ee(new a.Fh(t.webID));break;case"ambassador_alert":l.sendAmbassadorAlertMessage(t.webID);break;case"ambassador_mute_60min":l.sendMuteMessage(t.webID,60);break;case"ambassador_mute_18hour":l.sendMuteMessage(t.webID,1080);break;case"rship_heart":Ee(new a.bi(t.webID,Gt.RELATIONSHIP_HEART));break;case"rship_smile":Ee(new a.bi(t.webID,Gt.RELATIONSHIP_SMILE));break;case"rship_bobba":Ee(new a.bi(t.webID,Gt.RELATIONSHIP_BOBBA));break;case"rship_none":Ee(new a.bi(t.webID,Gt.RELATIONSHIP_NONE))}n&&s()};return Object(c.useEffect)((()=>{r(0)}),[t]),Object(an.jsxs)(au,{objectId:t.roomIndex,category:a.Wg.UNIT,userType:t.userType,onClose:s,collapsable:!0,children:[Object(an.jsx)(Qd,{className:"cursor-pointer",onClick:e=>Xs(t.webID),children:t.name}),0===n&&Object(an.jsxs)(an.Fragment,{children:[i(t.webID)&&Object(an.jsx)(eu,{onClick:e=>O("friend"),children:We("infostand.button.friend")}),Object(an.jsx)(eu,{onClick:e=>O("trade"),children:We("infostand.button.trade")}),Object(an.jsx)(eu,{onClick:e=>O("whisper"),children:We("infostand.button.whisper")}),d>0&&Object(an.jsx)(eu,{onClick:e=>O("respect"),children:We("infostand.button.respect",["count"],[d.toString()])}),!i(t.webID)&&Object(an.jsxs)(eu,{onClick:e=>O("relationship"),children:[We("infostand.link.relationship"),Object(an.jsx)(fn.a,{icon:"chevron-right",className:"right"})]}),!t.isIgnored&&Object(an.jsx)(eu,{onClick:e=>O("ignore"),children:We("infostand.button.ignore")}),t.isIgnored&&Object(an.jsx)(eu,{onClick:e=>O("unignore"),children:We("infostand.button.unignore")}),Object(an.jsx)(eu,{onClick:e=>O("report"),children:We("infostand.button.report")}),b&&Object(an.jsxs)(eu,{onClick:e=>O("moderate"),children:[Object(an.jsx)(fn.a,{icon:"chevron-right",className:"right"}),We("infostand.link.moderate")]}),t.isAmbassador&&Object(an.jsxs)(eu,{onClick:e=>O("ambassador"),children:[Object(an.jsx)(fn.a,{icon:"chevron-right",className:"right"}),We("infostand.link.ambassador")]}),g&&Object(an.jsx)(eu,{onClick:e=>O("pass_hand_item"),children:We("avatar.widget.pass_hand_item")})]}),1===n&&Object(an.jsxs)(an.Fragment,{children:[Object(an.jsx)(eu,{onClick:e=>O("kick"),children:We("infostand.button.kick")}),Object(an.jsxs)(eu,{onClick:e=>O("mute"),children:[Object(an.jsx)(fn.a,{icon:"chevron-right",className:"right"}),We("infostand.button.mute")]}),Object(an.jsxs)(eu,{onClick:e=>O("ban"),children:[Object(an.jsx)(fn.a,{icon:"chevron-right",className:"right"}),We("infostand.button.ban")]}),j&&Object(an.jsx)(eu,{onClick:e=>O("give_rights"),children:We("infostand.button.giverights")}),h&&Object(an.jsx)(eu,{onClick:e=>O("remove_rights"),children:We("infostand.button.removerights")}),Object(an.jsxs)(eu,{onClick:e=>O("back"),children:[Object(an.jsx)(fn.a,{icon:"chevron-left",className:"left"}),We("generic.back")]})]}),2===n&&Object(an.jsxs)(an.Fragment,{children:[Object(an.jsx)(eu,{onClick:e=>O("ban_hour"),children:We("infostand.button.ban_hour")}),Object(an.jsx)(eu,{onClick:e=>O("ban_day"),children:We("infostand.button.ban_day")}),Object(an.jsx)(eu,{onClick:e=>O("perm_ban"),children:We("infostand.button.perm_ban")}),Object(an.jsxs)(eu,{onClick:e=>O("back_moderate"),children:[Object(an.jsx)(fn.a,{icon:"chevron-left",className:"left"}),We("generic.back")]})]}),3===n&&Object(an.jsxs)(an.Fragment,{children:[Object(an.jsx)(eu,{onClick:e=>O("mute_2min"),children:We("infostand.button.mute_2min")}),Object(an.jsx)(eu,{onClick:e=>O("mute_5min"),children:We("infostand.button.mute_5min")}),Object(an.jsx)(eu,{onClick:e=>O("mute_10min"),children:We("infostand.button.mute_10min")}),Object(an.jsxs)(eu,{onClick:e=>O("back_moderate"),children:[Object(an.jsx)(fn.a,{icon:"chevron-left",className:"left"}),We("generic.back")]})]}),4===n&&Object(an.jsxs)(an.Fragment,{children:[Object(an.jsx)(eu,{onClick:e=>O("ambassador_alert"),children:We("infostand.button.alert")}),Object(an.jsx)(eu,{onClick:e=>O("ambassador_kick"),children:We("infostand.button.kick")}),Object(an.jsxs)(eu,{onClick:e=>O("ambassador_mute"),children:[We("infostand.button.mute"),Object(an.jsx)(fn.a,{icon:"chevron-right",className:"right"})]}),Object(an.jsxs)(eu,{onClick:e=>O("back"),children:[Object(an.jsx)(fn.a,{icon:"chevron-left",className:"left"}),We("generic.back")]})]}),5===n&&Object(an.jsxs)(an.Fragment,{children:[Object(an.jsx)(eu,{onClick:e=>O("ambassador_mute_2min"),children:We("infostand.button.mute_2min")}),Object(an.jsx)(eu,{onClick:e=>O("ambassador_mute_10min"),children:We("infostand.button.mute_10min")}),Object(an.jsx)(eu,{onClick:e=>O("ambassador_mute_60min"),children:We("infostand.button.mute_60min")}),Object(an.jsx)(eu,{onClick:e=>O("ambassador_mute_18hr"),children:We("infostand.button.mute_18hour")}),Object(an.jsxs)(eu,{onClick:e=>O("back_ambassador"),children:[Object(an.jsx)(fn.a,{icon:"chevron-left",className:"left"}),We("generic.back")]})]}),6===n&&Object(an.jsxs)(an.Fragment,{children:[Object(an.jsxs)(hn,{className:"menu-list-split-3",children:[Object(an.jsx)(eu,{onClick:e=>O("rship_heart"),children:Object(an.jsx)(on,{pointer:!0,className:"nitro-friends-spritesheet icon-heart"})}),Object(an.jsx)(eu,{onClick:e=>O("rship_smile"),children:Object(an.jsx)(on,{pointer:!0,className:"nitro-friends-spritesheet icon-smile"})}),Object(an.jsx)(eu,{onClick:e=>O("rship_bobba"),children:Object(an.jsx)(on,{pointer:!0,className:"nitro-friends-spritesheet icon-bobba"})})]}),Object(an.jsx)(eu,{onClick:e=>O("rship_none"),children:We("avatar.widget.clear_relationship")}),Object(an.jsxs)(eu,{onClick:e=>O("back"),children:[Object(an.jsx)(fn.a,{icon:"chevron-left",className:"left"}),We("generic.back")]})]})]})},Ou=e=>{const{classNames:t=[],...s}=e,n=Object(c.useMemo)((()=>{const e=["menu-list"];return t.length&&e.push(...t),e}),[t]);return Object(an.jsx)(Fn,{classNames:n,...s})},pu=e=>{const{userId:t=-1,userName:s="",roomIndex:n=-1,setIsDecorating:r=null}=e;return Object(an.jsx)(au,{objectId:n,category:a.Wg.UNIT,onClose:null,children:Object(an.jsx)(Ou,{children:Object(an.jsx)(eu,{onClick:e=>r(!1),children:We("widget.avatar.stop_decorating")})})})},fu=e=>{const{avatarInfo:t=null,onClose:s=null}=e,n=e=>{if(e)switch(e){case"move":_e(t.id,t.category,a.Yg.OBJECT_MOVE);break;case"rotate":_e(t.id,t.category,a.Yg.OBJECT_ROTATE_POSITIVE);break;case"pickup":_e(t.id,t.category,a.Yg.OBJECT_PICKUP);break;case"eject":_e(t.id,t.category,a.Yg.OBJECT_EJECT)}};return Object(an.jsxs)(au,{objectId:t.id,category:t.category,onClose:s,collapsable:!0,children:[Object(an.jsx)(Qd,{children:t.name}),Object(an.jsxs)(hn,{className:"menu-list-split-3",children:[Object(an.jsx)(eu,{onClick:e=>n("move"),children:Object(an.jsx)(fn.a,{icon:"arrows-up-down-left-right",className:"center"})}),Object(an.jsx)(eu,{onClick:e=>n("rotate"),disabled:t.isWallItem,children:Object(an.jsx)(fn.a,{icon:"rotate",className:"center"})}),(t.isOwner||t.isAnyRoomController)&&Object(an.jsx)(eu,{onClick:e=>n("pickup"),children:Object(an.jsx)(fn.a,{icon:"trash-arrow-up",className:"center"})}),!t.isOwner&&!t.isAnyRoomController&&(t.isRoomOwner||t.roomControllerLevel>=a.yg.GUILD_ADMIN)&&Object(an.jsx)(eu,{onClick:e=>n("eject"),children:Object(an.jsx)(fn.a,{icon:"trash-arrow-up",className:"center"})})]})]})},xu=e=>{const{nameInfo:t=null,onClose:s=null}=e,n=Object(c.useMemo)((()=>{const e=["name-only"];return t.isFriend&&e.push("is-friend"),e}),[t]);return Object(an.jsx)(au,{objectId:t.roomIndex,category:t.category,userType:t.userType,fades:t.id!==F().userId,classNames:n,onClose:s,children:Object(an.jsx)("div",{className:"text-shadow",children:t.name})})},_u=e=>{const{avatarInfo:t=null,isDancing:s=!1,setIsDecorating:n=null,onClose:r=null}=e,[i,o]=Object(c.useState)(s&&ge()?1:0),{roomSession:l=null}=Ac(),d=e=>{let t=!0;if(e)if(e.startsWith("sign_")){const t=parseInt(e.split("_")[1]);l.sendSignMessage(t)}else switch(e){case"decorate":n(!0);break;case"change_name":$e(new Dr(Dr.INIT));break;case"change_looks":m("avatar-editor/show");break;case"expressions":t=!1,o(3);break;case"sit":l.sendPostureMessage(qs.POSTURE_SIT);break;case"stand":l.sendPostureMessage(qs.POSTURE_STAND);break;case"wave":l.sendExpressionMessage(a.o.WAVE.ordinal);break;case"blow":l.sendExpressionMessage(a.o.BLOW.ordinal);break;case"laugh":l.sendExpressionMessage(a.o.LAUGH.ordinal);break;case"idle":l.sendExpressionMessage(a.o.IDLE.ordinal);break;case"dance_menu":t=!1,o(1);break;case"dance":l.sendDanceMessage(1);break;case"dance_stop":l.sendDanceMessage(0);break;case"dance_1":case"dance_2":case"dance_3":case"dance_4":l.sendDanceMessage(parseInt(e.charAt(e.length-1)));break;case"signs":t=!1,o(4);break;case"back":t=!1,o(0);break;case"drop_carry_item":Ee(new a.Eh)}t&&r()},u=function(){const e=pe();return!!e&&77===e.model.getValue(a.ch.FIGURE_EFFECT)}();return Object(an.jsxs)(au,{objectId:t.roomIndex,category:a.Wg.UNIT,userType:t.userType,onClose:r,collapsable:!0,children:[Object(an.jsx)(Qd,{className:"cursor-pointer",onClick:e=>Xs(t.webID),children:t.name}),0===i&&Object(an.jsxs)(an.Fragment,{children:[t.allowNameChange&&Object(an.jsx)(eu,{onClick:e=>d("change_name"),children:We("widget.avatar.change_name")}),(t.amIOwner||t.amIAnyRoomController||t.roomControllerLevel>a.yg.GUEST)&&Object(an.jsx)(eu,{onClick:e=>d("decorate"),children:We("widget.avatar.decorate")}),Object(an.jsx)(eu,{onClick:e=>d("change_looks"),children:We("widget.memenu.myclothes")}),ge()&&!u&&Object(an.jsxs)(eu,{onClick:e=>d("dance_menu"),children:[Object(an.jsx)(fn.a,{icon:"chevron-right",className:"right"}),We("widget.memenu.dance")]}),!s&&!ge()&&!u&&Object(an.jsx)(eu,{onClick:e=>d("dance"),children:We("widget.memenu.dance")}),s&&!ge()&&!u&&Object(an.jsx)(eu,{onClick:e=>d("dance_stop"),children:We("widget.memenu.dance.stop")}),Object(an.jsxs)(eu,{onClick:e=>d("expressions"),children:[Object(an.jsx)(fn.a,{icon:"chevron-right",className:"right"}),We("infostand.link.expressions")]}),Object(an.jsxs)(eu,{onClick:e=>d("signs"),children:[Object(an.jsx)(fn.a,{icon:"chevron-right",className:"right"}),We("infostand.show.signs")]}),t.carryItem>0&&Object(an.jsx)(eu,{onClick:e=>d("drop_carry_item"),children:We("avatar.widget.drop_hand_item")})]}),1===i&&Object(an.jsxs)(an.Fragment,{children:[s&&Object(an.jsx)(eu,{onClick:e=>d("dance_stop"),children:We("widget.memenu.dance.stop")}),Object(an.jsx)(eu,{onClick:e=>d("dance_1"),children:We("widget.memenu.dance1")}),Object(an.jsx)(eu,{onClick:e=>d("dance_2"),children:We("widget.memenu.dance2")}),Object(an.jsx)(eu,{onClick:e=>d("dance_3"),children:We("widget.memenu.dance3")}),Object(an.jsx)(eu,{onClick:e=>d("dance_4"),children:We("widget.memenu.dance4")}),Object(an.jsxs)(eu,{onClick:e=>d("back"),children:[Object(an.jsx)(fn.a,{icon:"chevron-left",className:"left"}),We("generic.back")]})]}),3===i&&Object(an.jsxs)(an.Fragment,{children:[ue()===a.l.POSTURE_STAND&&Object(an.jsx)(eu,{onClick:e=>d("sit"),children:We("widget.memenu.sit")}),U()&&Object(an.jsx)(eu,{onClick:e=>d("stand"),children:We("widget.memenu.stand")}),M()&&Object(an.jsx)(eu,{onClick:e=>d("wave"),children:We("widget.memenu.wave")}),M()&&Object(an.jsxs)(eu,{disabled:!me(),onClick:e=>d("laugh"),children:[!me()&&Object(an.jsx)(Pn,{type:"hc"}),We("widget.memenu.laugh")]}),M()&&Object(an.jsxs)(eu,{disabled:!me(),onClick:e=>d("blow"),children:[!me()&&Object(an.jsx)(Pn,{type:"hc"}),We("widget.memenu.blow")]}),Object(an.jsx)(eu,{onClick:e=>d("idle"),children:We("widget.memenu.idle")}),Object(an.jsxs)(eu,{onClick:e=>d("back"),children:[Object(an.jsx)(fn.a,{icon:"chevron-left",className:"left"}),We("generic.back")]})]}),4===i&&Object(an.jsxs)(an.Fragment,{children:[Object(an.jsxs)(hn,{className:"menu-list-split-3",children:[Object(an.jsx)(eu,{onClick:e=>d("sign_1"),children:"1"}),Object(an.jsx)(eu,{onClick:e=>d("sign_2"),children:"2"}),Object(an.jsx)(eu,{onClick:e=>d("sign_3"),children:"3"})]}),Object(an.jsxs)(hn,{className:"menu-list-split-3",children:[Object(an.jsx)(eu,{onClick:e=>d("sign_4"),children:"4"}),Object(an.jsx)(eu,{onClick:e=>d("sign_5"),children:"5"}),Object(an.jsx)(eu,{onClick:e=>d("sign_6"),children:"6"})]}),Object(an.jsxs)(hn,{className:"menu-list-split-3",children:[Object(an.jsx)(eu,{onClick:e=>d("sign_7"),children:"7"}),Object(an.jsx)(eu,{onClick:e=>d("sign_8"),children:"8"}),Object(an.jsx)(eu,{onClick:e=>d("sign_9"),children:"9"})]}),Object(an.jsxs)(hn,{className:"menu-list-split-3",children:[Object(an.jsx)(eu,{onClick:e=>d("sign_10"),children:"10"}),Object(an.jsx)(eu,{onClick:e=>d("sign_11"),children:Object(an.jsx)("i",{className:"icon icon-sign-heart"})}),Object(an.jsx)(eu,{onClick:e=>d("sign_12"),children:Object(an.jsx)("i",{className:"icon icon-sign-skull"})})]}),Object(an.jsxs)(hn,{className:"menu-list-split-3",children:[Object(an.jsx)(eu,{onClick:e=>d("sign_0"),children:"0"}),Object(an.jsx)(eu,{onClick:e=>d("sign_13"),children:Object(an.jsx)("i",{className:"icon icon-sign-exclamation"})}),Object(an.jsx)(eu,{onClick:e=>d("sign_15"),children:Object(an.jsx)("i",{className:"icon icon-sign-smile"})})]}),Object(an.jsxs)(hn,{className:"menu-list-split-3",children:[Object(an.jsx)(eu,{onClick:e=>d("sign_14"),children:Object(an.jsx)("i",{className:"icon icon-sign-soccer"})}),Object(an.jsx)(eu,{onClick:e=>d("sign_17"),children:Object(an.jsx)("i",{className:"icon icon-sign-yellow"})}),Object(an.jsx)(eu,{onClick:e=>d("sign_16"),children:Object(an.jsx)("i",{className:"icon icon-sign-red"})})]}),Object(an.jsxs)(eu,{onClick:e=>d("back"),children:[Object(an.jsx)(fn.a,{icon:"chevron-left",className:"left"}),We("generic.back")]})]})]})},Iu=e=>{const{avatarInfo:t=null,onClose:s=null}=e,[n,r]=Object(c.useState)(0),{roomSession:i=null}=Ac(),{petRespectRemaining:o=0,respectPet:l=null}=pi(),d=Object(c.useMemo)((()=>{let e=!1;const t=pe();if(t){const s=t.model.getValue(a.ch.FIGURE_CARRY_OBJECT);s>0&&s<999999&&(e=!0)}return e}),[]),u=e=>{let n=!0;if(e)switch(e){case"respect":l(t.id),o-1>=1&&(n=!1);break;case"treat":Ee(new a.Kf(t.id));break;case"pass_handitem":Ee(new a.Gh(t.id));break;case"train":case"breed":case"revive":break;case"pick_up":i.pickupPet(t.id);break;case"mount":i.mountPet(t.id);break;case"toggle_riding_permission":i.togglePetRiding(t.id);break;case"toggle_breeding_permission":i.togglePetBreeding(t.id);break;case"dismount":i.dismountPet(t.id);break;case"saddle_off":i.removePetSaddle(t.id);break;case"harvest":i.harvestPet(t.id);break;case"compost":i.compostPlant(t.id);break;case"buy_saddle":m("catalog/open/"+p("catalog.links")["pets.buy_saddle"])}n&&s()};return Object(c.useEffect)((()=>{r((e=>t.petType===a.Lf.MONSTERPLANT?3:t.saddle&&!t.rider?1:t.rider?2:0))}),[t]),Object(an.jsxs)(au,{objectId:t.roomIndex,category:a.Wg.UNIT,userType:a.ah.PET,onClose:s,collapsable:!0,children:[Object(an.jsx)(Qd,{children:t.name}),0===n&&Object(an.jsxs)(an.Fragment,{children:[o>0&&Object(an.jsx)(eu,{onClick:e=>u("respect"),children:We("infostand.button.petrespect",["count"],[o.toString()])}),Object(an.jsx)(eu,{onClick:e=>u("train"),children:We("infostand.button.train")}),Object(an.jsx)(eu,{onClick:e=>u("pick_up"),children:We("infostand.button.pickup")}),t.petType===a.Lf.HORSE&&Object(an.jsx)(eu,{onClick:e=>u("buy_saddle"),children:We("infostand.button.buy_saddle")}),[a.Lf.BEAR,a.Lf.TERRIER,a.Lf.CAT,a.Lf.DOG,a.Lf.PIG].indexOf(t.petType)>-1&&Object(an.jsx)(eu,{onClick:e=>u("breed"),children:We("infostand.button.breed")})]}),1===n&&Object(an.jsxs)(an.Fragment,{children:[Object(an.jsx)(eu,{onClick:e=>u("mount"),children:We("infostand.button.mount")}),Object(an.jsxs)(eu,{onClick:e=>u("toggle_riding_permission"),gap:1,children:[Object(an.jsx)("input",{type:"checkbox",checked:!!t.publiclyRideable,readOnly:!0}),We("infostand.button.toggle_riding_permission")]}),o>0&&Object(an.jsx)(eu,{onClick:e=>u("respect"),children:We("infostand.button.petrespect",["count"],[o.toString()])}),Object(an.jsx)(eu,{onClick:e=>u("train"),children:We("infostand.button.train")}),Object(an.jsx)(eu,{onClick:e=>u("pick_up"),children:We("infostand.button.pickup")}),Object(an.jsx)(eu,{onClick:e=>u("saddle_off"),children:We("infostand.button.saddleoff")})]}),2===n&&Object(an.jsxs)(an.Fragment,{children:[Object(an.jsx)(eu,{onClick:e=>u("dismount"),children:We("infostand.button.dismount")}),o>0&&Object(an.jsx)(eu,{onClick:e=>u("respect"),children:We("infostand.button.petrespect",["count"],[o.toString()])})]}),3===n&&Object(an.jsxs)(an.Fragment,{children:[Object(an.jsx)(eu,{onClick:e=>u("pick_up"),children:We("infostand.button.pickup")}),t.dead&&Object(an.jsx)(eu,{onClick:e=>u("revive"),children:We("infostand.button.revive")}),i.isRoomOwner&&Object(an.jsx)(eu,{onClick:e=>u("compost"),children:We("infostand.button.compost")}),!t.dead&&t.energy/t.maximumEnergy<.98&&Object(an.jsx)(eu,{onClick:e=>u("treat"),children:We("infostand.button.pettreat")}),!t.dead&&t.level===t.maximumLevel&&t.breedable&&Object(an.jsxs)(an.Fragment,{children:[Object(an.jsxs)(eu,{onClick:e=>u("toggle_breeding_permission"),gap:1,children:[Object(an.jsx)("input",{type:"checkbox",checked:t.publiclyBreedable,readOnly:!0}),We("infostand.button.toggle_breeding_permission")]}),Object(an.jsx)(eu,{onClick:e=>u("breed"),children:We("infostand.button.breed")})]})]}),d&&Object(an.jsx)(eu,{onClick:e=>u("pass_hand_item"),children:We("infostand.button.pass_hand_item")})]})},Eu=e=>{const{avatarInfo:t=null,onClose:s=null}=e,[n,r]=Object(c.useState)(0),{roomSession:i=null}=Ac(),{petRespectRemaining:o=0,respectPet:l=null}=pi(),d=Object(c.useMemo)((()=>i.isRoomOwner||i.controllerLevel>=a.yg.GUEST||F().isModerator),[i]),u=Object(c.useMemo)((()=>{let e=!1;const t=pe();if(t){const s=t.model.getValue(a.ch.FIGURE_CARRY_OBJECT);s>0&&s<999999&&(e=!0)}return e}),[]),j=e=>{let n=!0;if(e)switch(e){case"respect":l(t.id),o-1>=1&&(n=!1);break;case"treat":Ee(new a.Kf(t.id));break;case"pass_handitem":Ee(new a.Gh(t.id));break;case"pick_up":i.pickupPet(t.id);break;case"mount":i.mountPet(t.id);break;case"dismount":i.dismountPet(t.id)}n&&s()};return Object(c.useEffect)((()=>{r((e=>t.petType===a.Lf.MONSTERPLANT?3:t.saddle&&!t.rider?1:t.rider?2:0))}),[t]),Object(an.jsxs)(au,{objectId:t.roomIndex,category:a.Wg.UNIT,userType:a.ah.PET,onClose:s,collapsable:!0,children:[Object(an.jsx)(Qd,{children:t.name}),0===n&&o>0&&Object(an.jsx)(eu,{onClick:e=>j("respect"),children:We("infostand.button.petrespect",["count"],[o.toString()])}),1===n&&Object(an.jsxs)(an.Fragment,{children:[!!t.publiclyRideable&&Object(an.jsx)(eu,{onClick:e=>j("mount"),children:We("infostand.button.mount")}),o>0&&Object(an.jsx)(eu,{onClick:e=>j("respect"),children:We("infostand.button.petrespect",["count"],[o.toString()])})]}),2===n&&Object(an.jsxs)(an.Fragment,{children:[Object(an.jsx)(eu,{onClick:e=>j("dismount"),children:We("infostand.button.dismount")}),o>0&&Object(an.jsx)(eu,{onClick:e=>j("respect"),children:We("infostand.button.petrespect",["count"],[o.toString()])})]}),3===n&&!t.dead&&t.energy/t.maximumEnergy<.98&&Object(an.jsx)(eu,{onClick:e=>j("treat"),children:We("infostand.button.pettreat")}),d&&Object(an.jsx)(eu,{onClick:e=>j("pick_up"),children:We("infostand.button.pickup")}),u&&Object(an.jsx)(eu,{onClick:e=>j("pass_hand_item"),children:We("infostand.button.pass_hand_item")})]})},Cu=e=>{const{avatarInfo:t=null,onClose:s=null}=e,[n,r]=Object(c.useState)(0),[i,l]=Object(c.useState)(""),[d,u]=Object(c.useState)("");pr(a.A,(e=>{const n=e.getParser();if(n.botId===t.webID)switch(n.commandId){case Us.CHANGE_BOT_NAME:return l(n.data),void r(1);case Us.CHANGE_BOT_MOTTO:return u(n.data),void r(2);case Us.SETUP_CHAT:{const e=n.data,r=e.split(-1===e.indexOf(";#;")?";":";#;");return void(3!==r.length&&4!==r.length||($e(new ws(t.roomIndex,a.Wg.UNIT,t.webID,r[0],"true"===r[1].toLowerCase()||"1"===r[1],parseInt(r[2]),!!r[3]&&("true"===r[3].toLowerCase()||"1"===r[3]))),s()))}}}));const j=e=>Ee(new a.kg(t.webID,e)),h=e=>{let n=!0;if(e)switch(e){case"donate_to_all":j(Us.DONATE_TO_ALL),Ee(new a.E(t.webID,Us.DONATE_TO_ALL,""));break;case"donate_to_user":j(Us.DONATE_TO_USER),Ee(new a.E(t.webID,Us.DONATE_TO_USER,""));break;case"change_bot_name":j(Us.CHANGE_BOT_NAME),n=!1;break;case"save_bot_name":Ee(new a.E(t.webID,Us.CHANGE_BOT_NAME,i));break;case"change_bot_motto":j(Us.CHANGE_BOT_MOTTO),n=!1;break;case"save_bot_motto":Ee(new a.E(t.webID,Us.CHANGE_BOT_MOTTO,d));break;case"dress_up":Ee(new a.E(t.webID,Us.DRESS_UP,""));break;case"random_walk":Ee(new a.E(t.webID,Us.RANDOM_WALK,""));break;case"setup_chat":j(Us.SETUP_CHAT),n=!1;break;case"dance":Ee(new a.E(t.webID,Us.DANCE,""));break;case"nux_take_tour":o().createLinkEvent("help/tour"),Ee(new a.E(t.webID,Us.NUX_TAKE_TOUR,""));break;case"pick":Ee(new a.C(t.webID))}n&&s()};Object(c.useEffect)((()=>{r(0)}),[t]);const b=t.amIOwner||t.amIAnyRoomController;return Object(an.jsxs)(au,{objectId:t.roomIndex,category:a.Wg.UNIT,userType:a.ah.RENTABLE_BOT,onClose:s,collapsable:!0,children:[Object(an.jsx)(Qd,{children:t.name}),0===n&&b&&Object(an.jsxs)(an.Fragment,{children:[t.botSkills.indexOf(Us.DONATE_TO_ALL)>=0&&Object(an.jsx)(eu,{onClick:e=>h("donate_to_all"),children:We("avatar.widget.donate_to_all")}),t.botSkills.indexOf(Us.DONATE_TO_USER)>=0&&Object(an.jsx)(eu,{onClick:e=>h("donate_to_user"),children:We("avatar.widget.donate_to_user")}),t.botSkills.indexOf(Us.CHANGE_BOT_NAME)>=0&&Object(an.jsx)(eu,{onClick:e=>h("change_bot_name"),children:We("avatar.widget.change_bot_name")}),t.botSkills.indexOf(Us.CHANGE_BOT_MOTTO)>=0&&Object(an.jsx)(eu,{onClick:e=>h("change_bot_motto"),children:We("avatar.widget.change_bot_motto")}),t.botSkills.indexOf(Us.DRESS_UP)>=0&&Object(an.jsx)(eu,{onClick:e=>h("dress_up"),children:We("avatar.widget.dress_up")}),t.botSkills.indexOf(Us.RANDOM_WALK)>=0&&Object(an.jsx)(eu,{onClick:e=>h("random_walk"),children:We("avatar.widget.random_walk")}),t.botSkills.indexOf(Us.SETUP_CHAT)>=0&&Object(an.jsx)(eu,{onClick:e=>h("setup_chat"),children:We("avatar.widget.setup_chat")}),t.botSkills.indexOf(Us.DANCE)>=0&&Object(an.jsx)(eu,{onClick:e=>h("dance"),children:We("avatar.widget.dance")}),-1===t.botSkills.indexOf(Us.NO_PICK_UP)&&Object(an.jsx)(eu,{onClick:e=>h("pick"),children:We("avatar.widget.pick_up")})]}),1===n&&Object(an.jsxs)(Fn,{className:"menu-item",onClick:null,gap:1,children:[Object(an.jsx)(ur,{variant:"white",children:We("bot.skill.name.configuration.new.name")}),Object(an.jsx)("input",{type:"text",className:"form-control form-control-sm",value:i,maxLength:p("bot.name.max.length",15),onChange:e=>l(e.target.value)}),Object(an.jsxs)(hn,{alignItems:"center",justifyContent:"between",gap:1,children:[Object(an.jsx)(bn,{fullWidth:!0,variant:"secondary",onClick:e=>h(null),children:We("cancel")}),Object(an.jsx)(bn,{fullWidth:!0,variant:"success",onClick:e=>h("save_bot_name"),children:We("save")})]})]}),2===n&&Object(an.jsxs)(Fn,{className:"menu-item",onClick:null,gap:1,children:[Object(an.jsx)(ur,{variant:"white",children:We("bot.skill.name.configuration.new.motto")}),Object(an.jsx)("input",{type:"text",className:"form-control form-control-sm",value:d,maxLength:p("motto.max.length",38),onChange:e=>u(e.target.value)}),Object(an.jsxs)(hn,{alignItems:"center",justifyContent:"between",gap:1,children:[Object(an.jsx)(bn,{fullWidth:!0,variant:"secondary",onClick:e=>h(null),children:We("cancel")}),Object(an.jsx)(bn,{fullWidth:!0,variant:"success",onClick:e=>h("save_bot_motto"),children:We("save")})]})]})]})},vu=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)(!1),[i,o]=Object(c.useState)(null),{avatarInfo:l=null,setAvatarInfo:d=null,activeNameBubble:u=null,setActiveNameBubble:j=null,nameBubbles:h=[],removeNameBubble:b=null,productBubbles:g=[],confirmingProduct:m=null,updateConfirmingProduct:O=null,removeProductBubble:p=null,isDecorating:f=!1,setIsDecorating:x=null}=ci(),{roomSession:_=null}=Ac();mr(a.Eg.NORMAL_MODE,(e=>{t&&s(!1)})),mr(a.Eg.GAME_MODE,(e=>{t||s(!0)})),Or(a.ih.RSDE_DANCE,(e=>{e.roomIndex===_.ownRoomIndex&&r(0!==e.danceId)})),fr(ws.UPDATE_CHAT,(e=>o(e)));return Object(an.jsxs)(an.Fragment,{children:[f&&Object(an.jsx)(pu,{userId:F().userId,userName:F().userName,roomIndex:_.ownRoomIndex,setIsDecorating:x}),(()=>{if(!_||t)return null;if(u)return Object(an.jsx)(xu,{nameInfo:u,onClose:()=>j(null)});if(l)switch(l.type){case ys.FURNI:{const e=l;return f?Object(an.jsx)(fu,{avatarInfo:e,onClose:()=>d(null)}):null}case Ls.OWN_USER:case Ls.PEER:{const e=l;return e.isSpectatorMode?null:e.isOwnUser?a.Kg.isRunning()?null:Object(an.jsx)(_u,{avatarInfo:e,isDancing:n,setIsDecorating:x,onClose:()=>d(null)}):Object(an.jsx)(mu,{avatarInfo:e,onClose:()=>d(null)})}case As.PET_INFO:{const e=l;return e.isOwner?Object(an.jsx)(Iu,{avatarInfo:e,onClose:()=>d(null)}):Object(an.jsx)(Eu,{avatarInfo:e,onClose:()=>d(null)})}case Ds.RENTABLE_BOT:return Object(an.jsx)(Cu,{avatarInfo:l,onClose:()=>d(null)})}return null})(),l&&Object(an.jsx)(Fn,{alignItems:"end",className:"nitro-infostand-container",children:(()=>{if(!l)return null;switch(l.type){case ys.FURNI:return Object(an.jsx)(du,{avatarInfo:l,onClose:()=>d(null)});case Ls.OWN_USER:case Ls.PEER:return Object(an.jsx)(gu,{avatarInfo:l,setAvatarInfo:d,onClose:()=>d(null)});case Ls.BOT:return Object(an.jsx)(lu,{avatarInfo:l,onClose:()=>d(null)});case Ds.RENTABLE_BOT:return Object(an.jsx)(ju,{avatarInfo:l,onClose:()=>d(null)});case As.PET_INFO:return Object(an.jsx)(uu,{avatarInfo:l,onClose:()=>d(null)})}})()}),h.length>0&&h.map(((e,t)=>Object(an.jsx)(xu,{nameInfo:e,onClose:()=>b(t)},t))),g.length>0&&g.map(((e,t)=>Object(an.jsx)(ou,{item:e,updateConfirmingProduct:O,onClose:()=>p(t)},e.id))),i&&Object(an.jsx)(Jd,{chatEvent:i,onClose:()=>o(null)}),m&&Object(an.jsx)(Zd,{item:m,onClose:()=>O(null)})]})},Nu=e=>{const{chatStyleId:t=0,chatStyleIds:s=null,selectChatStyleId:n=null}=e,[r,i]=Object(c.useState)(null),[a,o]=Object(c.useState)(!1);return Object(c.useEffect)((()=>{a||i(null)}),[a]),Object(an.jsxs)(an.Fragment,{children:[Object(an.jsx)(on,{pointer:!0,className:"icon chatstyles-icon",onClick:e=>{let t=!1;o((e=>(t=!e,t))),t&&i(e.target)}}),Object(an.jsx)(Nd.a,{show:a,target:r,placement:"top",children:Object(an.jsx)(il.a,{className:"nitro-chat-style-selector-container image-rendering-pixelated",children:Object(an.jsx)(In,{overflow:"hidden",className:"bg-transparent",children:Object(an.jsx)(un,{columnCount:3,overflow:"auto",children:s&&s.length>0&&s.map((e=>Object(an.jsx)(hn,{center:!0,pointer:!0,className:"bubble-parent-container",onClick:t=>(e=>{n(e),o(!1)})(e),children:Object(an.jsx)(on,{className:"bubble-container",children:Object(an.jsx)(on,{className:`chat-bubble bubble-${e}`,children:"\xa0"})},e)},e)))})})})})]})},Tu=e=>{const[t,s]=Object(c.useState)(""),{chatStyleId:n=0,updateChatStyleId:r=null}=pi(),{selectedUsername:i="",floodBlocked:o=!1,floodBlockedSeconds:l=0,setIsTyping:d=null,setIsIdle:u=null,sendChat:j=null}=ii(),h=Object(c.useRef)(),b=Object(c.useMemo)((()=>We("widgets.chatinput.mode.whisper")),[]),g=Object(c.useMemo)((()=>We("widgets.chatinput.mode.shout")),[]),m=Object(c.useMemo)((()=>We("widgets.chatinput.mode.speak")),[]),O=Object(c.useMemo)((()=>p("chat.input.maxlength",100)),[]),f=Object(c.useCallback)((()=>{const e=document.activeElement;return!!e&&((!h||h.current!==e)&&(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement))}),[h]),x=Object(c.useCallback)((()=>{h.current.focus(),h.current.setSelectionRange(2*h.current.value.length,2*h.current.value.length)}),[h]),_=Object(c.useCallback)((()=>{s((e=>e===b&&i.length?`${e} ${i}`:e))}),[i,b]),I=Object(c.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e||""===e)return;let r=t?Fs.CHAT_SHOUT:Fs.CHAT_DEFAULT,c=e;const i=c.split(" ");let a="",o="";switch(i[0]){case b:r=Fs.CHAT_WHISPER,a=i[1],o=b+" "+a+" ",i.shift(),i.shift();break;case g:r=Fs.CHAT_SHOUT,i.shift();break;case m:r=Fs.CHAT_DEFAULT,i.shift()}c=i.join(" "),d(!1),u(!1),c.length<=O&&(/%CC%/g.test(encodeURIComponent(c))?s(""):(s(""),j(c,r,a,n))),s(o)}),[b,g,m,O,n,d,u,j]),E=Object(c.useCallback)((e=>{e&&e.length?(d(!0),u(!0)):d(!1),s(e)}),[d,u]),C=Object(c.useCallback)((e=>{if(o||!h.current||f())return;document.activeElement!==h.current&&x();const t=e.target.value;switch(e.key){case" ":case"Space":return void _();case"NumpadEnter":case"Enter":return void I(t,e.shiftKey);case"Backspace":if(t){const e=t.split(" ");e[0]===b&&3===e.length&&""===e[2]&&s("")}return}}),[o,h,b,f,x,_,I]);fr(Ss.CHAT_INPUT_CONTENT,(e=>{switch(e.chatMode){case Ss.WHISPER:return void s(`${b} ${e.userName} `);case Ss.SHOUT:return}}));const v=Object(c.useMemo)((()=>{let e=[];const t=p("chat.styles");for(const s of t)s&&(s.minRank>0?F().hasSecurity(s.minRank)&&e.push(s.styleId):s.isSystemStyle&&F().hasSecurity(a.yg.MODERATOR)?e.push(s.styleId):p("chat.styles.disabled").indexOf(s.styleId)>=0||(s.isHcOnly&&B()>=a.Xd.CLUB||s.isAmbassadorOnly&&F().isAmbassador?e.push(s.styleId):s.isHcOnly||s.isAmbassadorOnly||e.push(s.styleId)));return e}),[]);return Object(c.useEffect)((()=>(document.body.addEventListener("keydown",C),()=>{document.body.removeEventListener("keydown",C)})),[C]),Object(c.useEffect)((()=>{h.current&&(h.current.parentElement.dataset.value=t)}),[t]),he().isSpectator?null:Object(Tn.createPortal)(Object(an.jsxs)("div",{className:"nitro-chat-input-container",children:[Object(an.jsxs)("div",{className:"input-sizer align-items-center",children:[!o&&Object(an.jsx)("input",{ref:h,type:"text",className:"chat-input",placeholder:We("widgets.chatinput.default"),value:t,maxLength:O,onChange:e=>E(e.target.value),onMouseDown:e=>x()}),o&&Object(an.jsxs)(ur,{variant:"danger",children:[We("chat.input.alert.flood",["time"],[l.toString()])," "]})]}),Object(an.jsx)(Nu,{chatStyleId:n,chatStyleIds:v,selectChatStyleId:r})]}),document.getElementById("toolbar-chat-input-container"))},Su=e=>{const{chat:t=null,makeRoom:s=null,bubbleWidth:n=a.vg.CHAT_BUBBLE_WIDTH_NORMAL}=e,[r,i]=Object(c.useState)(!1),o=Object(c.useRef)(),l=Object(c.useMemo)((()=>{switch(n){case a.vg.CHAT_BUBBLE_WIDTH_NORMAL:return 350;case a.vg.CHAT_BUBBLE_WIDTH_THIN:return 240;case a.vg.CHAT_BUBBLE_WIDTH_WIDE:return 2e3}}),[n]);return Object(c.useEffect)((()=>{const e=o.current;if(!e)return;const n=e.offsetWidth,r=e.offsetHeight;t.width=n,t.height=r,t.elementRef=e;let c=t.left,i=t.top;return c||i||(c=t.location.x-n/2,i=e.parentElement.offsetHeight-r,t.left=c,t.top=i),t.visible||(s(t),t.visible=!0),()=>{t.elementRef=null}}),[o,t,s]),Object(c.useEffect)((()=>i(t.visible)),[t.visible]),Object(an.jsxs)("div",{ref:o,className:"bubble-container "+(r?"visible":"invisible"),onClick:e=>C().selectRoomObject(t.roomId,t.senderId,a.Wg.UNIT),children:[0===t.styleId&&Object(an.jsx)("div",{className:"user-container-bg",style:{backgroundColor:t.color}}),Object(an.jsxs)("div",{className:`chat-bubble bubble-${t.styleId} type-${t.type}`,style:{maxWidth:l},children:[Object(an.jsx)("div",{className:"user-container",children:t.imageUrl&&t.imageUrl.length>0&&Object(an.jsx)("div",{className:"user-image",style:{backgroundImage:`url(${t.imageUrl})`}})}),Object(an.jsxs)("div",{className:"chat-content",children:[Object(an.jsx)("b",{className:"username mr-1",dangerouslySetInnerHTML:{__html:`${t.username}: `}}),Object(an.jsx)("span",{className:"message",dangerouslySetInnerHTML:{__html:`${t.formattedText}`}})]}),Object(an.jsx)("div",{className:"pointer"})]})]})};let wu=0;const Ru=e=>{const[t,s]=Object(c.useState)(wu++),{chatMessages:n=[],setChatMessages:r=null,chatSettings:i=null,getScrollSpeed:l=6e3,removeHiddenChats:d=null,moveAllChatsUp:u=null}=di(),j=Object(c.useRef)(),h=(e,t,s)=>{const r=n.length;if(r)for(let c=r-1;c>=0;c--){const r=n[c];if(!(!r||e===r||s.indexOf(r)>=0||r.top+r.height-t>e.top+e.height)&&(e.skipMovement=!0,Hs(e,r,-t,0))){const t=Math.abs(r.top+r.height-e.top);s.push(r),r.top-=t,r.skipMovement=!0,h(r,t,s)}}},b=e=>{if(i.mode===a.vg.CHAT_MODE_FREE_FLOW)e.skipMovement=!0,h(e,0,[e]),d();else{const t=e.top+e.height,s=e.height,r=j.current.offsetHeight-t,c=s-r;r<s&&(n.forEach((t=>{t!==e&&(t.top-=c)})),d())}};return Object(c.useEffect)((()=>{const e=function(){if(!j||!j.current)return;const e=j.current.offsetHeight,t=Math.round(document.body.offsetHeight*p("chat.viewer.height.percentage"));j.current.style.height=`${t}px`,r((s=>(s&&s.forEach((s=>s.top-=e-t)),s)))};return window.addEventListener("resize",e),e(),()=>{window.removeEventListener("resize",e)}}),[r]),Object(c.useEffect)((()=>{const e={workerMessageReceived:e=>{"MOVE_CHATS"!==e.type||u(15)}};var s;return s=e,o().addWorkerEventTracker(s),Ce({type:"CREATE_INTERVAL",time:l,timerId:t,response:{type:"MOVE_CHATS"}}),()=>{Ce({type:"REMOVE_INTERVAL",timerId:t}),(e=>{o().removeWorkerEventTracker(e)})(e)}}),[t,l,u]),Object(an.jsx)("div",{ref:j,className:"nitro-chat-widget",children:n.map((e=>Object(an.jsx)(Su,{chat:e,makeRoom:b,bubbleWidth:i.weight},e.id)))})},yu=e=>{const{title:t=null,items:s=[],selectItem:n=null,onClose:r=null}=e,[i,a]=Object(c.useState)(null),[o,l]=Object(c.useState)(""),d=F().isModerator,u=Object(c.useMemo)((()=>{const e=o.toLocaleLowerCase();return s.filter((t=>t.name.toLocaleLowerCase().includes(e)))}),[s,o]),j=e=>{const t=u[e.index];return Object(an.jsx)(hn,{alignItems:"center",position:"absolute",className:"rounded px-1"+(i===t?" bg-muted":""),pointer:!0,style:e.style,onClick:e=>a(t),children:Object(an.jsxs)(ur,{truncate:!0,children:[t.name," ",d&&" - "+t.id]})},e.key)};return Object(c.useEffect)((()=>{i&&n(i)}),[i,n]),Object(an.jsxs)(yn,{className:"nitro-chooser-widget",theme:"primary-slim",children:[Object(an.jsx)(vn,{headerText:t,onCloseClick:r}),Object(an.jsxs)(In,{overflow:"hidden",children:[Object(an.jsx)("input",{type:"text",className:"form-control form-control-sm",placeholder:We("generic.search"),value:o,onChange:e=>l(e.target.value)}),Object(an.jsx)(Fn,{fullHeight:!0,overflow:"auto",children:Object(an.jsx)(Ja.a,{defaultWidth:0,defaultHeight:0,children:e=>{let{width:t,height:s}=e;return Object(an.jsx)(Ja.d,{width:t,height:s,rowCount:u.length,rowHeight:20,rowRenderer:j})}})})]})]})},ku=e=>{const{items:t=null,onClose:s=null,selectItem:n=null,populateChooser:r=null}=hi();return Object(c.useEffect)((()=>{const e={linkReceived:e=>{e.split("/");r()},eventUrlPrefix:"furni-chooser/"};return l(e),()=>E(e)}),[r]),t?Object(an.jsx)(yu,{title:We("widget.chooser.furni.title"),items:t,selectItem:n,onClose:s}):null},Au=e=>{const{items:t=null,onClose:s=null,selectItem:n=null,populateChooser:r=null}=gi();return Object(c.useEffect)((()=>{const e={linkReceived:e=>{e.split("/");r()},eventUrlPrefix:"user-chooser/"};return l(e),()=>E(e)}),[r]),t?Object(an.jsx)(yu,{title:We("widget.chooser.user.title"),items:t,selectItem:n,onClose:s}):null},Du=e=>{const[t,s]=Object(c.useState)(!1),{users:n=[],answer:r=null}=ui();return Object(c.useEffect)((()=>{s(!!n.length)}),[n]),t?Object(an.jsxs)(yn,{className:"nitro-widget-doorbell",theme:"primary-slim",children:[Object(an.jsx)(vn,{headerText:We("navigator.doorbell.title"),onCloseClick:e=>s(!1)}),Object(an.jsxs)(In,{overflow:"hidden",gap:0,children:[Object(an.jsx)(Fn,{gap:2,children:Object(an.jsxs)(un,{gap:1,className:"text-black fw-bold border-bottom px-1 pb-1",children:[Object(an.jsx)(on,{className:"g-col-6",children:We("generic.username")}),Object(an.jsx)(on,{className:"g-col-6"})]})}),Object(an.jsx)(Fn,{overflow:"auto",className:"striped-children",gap:0,children:n&&n.length>0&&n.map((e=>Object(an.jsxs)(un,{gap:1,alignItems:"center",className:"text-black border-bottom p-1",children:[Object(an.jsx)(on,{className:"g-col-6",children:e}),Object(an.jsx)(on,{className:"g-col-6",children:Object(an.jsxs)(hn,{alignItems:"center",justifyContent:"end",gap:1,children:[Object(an.jsx)(bn,{variant:"success",onClick:()=>r(e,!0),children:We("generic.accept")}),Object(an.jsx)(bn,{variant:"danger",onClick:()=>r(e,!1),children:We("generic.deny")})]})})]},e)))})]})]}):null},Lu=e=>{const{objectId:t=-1,category:s=-1,noFollow:n=!1,position:r="absolute",...i}=e,[a,l]=Object(c.useState)({x:-1,y:-1}),d=Object(c.useRef)();return Object(c.useEffect)((()=>{let e=!1;const r=()=>{const e=(()=>{const e=he();return fe(e.roomId,t,s,1)})();e&&d.current&&l({x:Math.round(e.left+e.width/2-d.current.offsetWidth/2),y:Math.round(e.top-d.current.offsetHeight+10)})};return n?r():(e=!0,o().ticker.add(r)),()=>{e&&o().ticker.remove(r)}}),[t,s,n]),Object(an.jsx)(on,{innerRef:d,position:r,visible:a.x+(d.current?d.current.offsetWidth:0)>-1,className:"object-location",style:{left:a.x,top:a.y},...i})},Pu=e=>{const{roomIndex:t=-1,request:s=null,hideFriendRequest:n=null,requestResponse:r=null}=e;return Object(an.jsx)(Lu,{objectId:t,category:a.Wg.UNIT,children:Object(an.jsx)(on,{className:"nitro-friend-request-dialog nitro-context-menu p-2",children:Object(an.jsxs)(Fn,{children:[Object(an.jsxs)(hn,{alignItems:"center",justifyContent:"between",gap:2,children:[Object(an.jsx)(ur,{variant:"white",fontSize:6,children:We("widget.friendrequest.from",["username"],[s.name])}),Object(an.jsx)(fn.a,{icon:"times",className:"cursor-pointer",onClick:e=>n(s.requesterUserId)})]}),Object(an.jsxs)(hn,{justifyContent:"end",gap:1,children:[Object(an.jsx)(bn,{variant:"danger",onClick:e=>r(s.requesterUserId,!1),children:We("widget.friendrequest.decline")}),Object(an.jsx)(bn,{variant:"success",onClick:e=>r(s.requesterUserId,!0),children:We("widget.friendrequest.accept")})]})]})})})},Uu=e=>{const{displayedRequests:t=[],hideFriendRequest:s=null}=ji(),{requestResponse:n=null}=ec();return t.length?Object(an.jsx)(an.Fragment,{children:t.map(((e,t)=>Object(an.jsx)(Pu,{roomIndex:e.roomIndex,request:e.request,hideFriendRequest:s,requestResponse:n},t)))}):null},Mu=e=>{const{objectId:t=-1,onClose:s=null}=e,{roomSession:n=null}=Ac();return Object(an.jsxs)(yn,{className:"nitro-use-product-confirmation",children:[Object(an.jsx)(vn,{headerText:We("effectbox.header.title"),onCloseClick:s}),Object(an.jsx)(In,{center:!0,children:Object(an.jsx)(hn,{gap:2,children:Object(an.jsxs)(Fn,{justifyContent:"between",children:[Object(an.jsx)(ur,{children:We("effectbox.header.description")}),Object(an.jsxs)(hn,{alignItems:"center",justifyContent:"between",children:[Object(an.jsx)(bn,{variant:"danger",onClick:s,children:We("generic.cancel")}),Object(an.jsx)(bn,{variant:"success",onClick:()=>{n.useMultistateItem(t),s()},children:We("generic.ok")})]})]})})})]})},Fu=e=>{const{objectId:t=-1,onClose:s=null}=e,[n,r]=Object(c.useState)(null),[i,o]=Object(c.useState)(-1),{roomSession:l=null}=Ac();return Object(c.useEffect)((()=>{if(!l||-1===t)return;const e=de(l.roomId,t,a.Wg.FLOOR);if(!e)return;r(e);let n=-1;if(e.specialType===Je.MONSTERPLANT_SEED)n=0;-1!==n?o(n):s()}),[l,t,s]),-1===i?null:Object(an.jsxs)(yn,{className:"nitro-use-product-confirmation",children:[Object(an.jsx)(vn,{headerText:We("useproduct.widget.title.plant_seed",["name"],[n.name]),onCloseClick:s}),Object(an.jsx)(In,{center:!0,children:Object(an.jsxs)(hn,{gap:2,overflow:"hidden",children:[Object(an.jsx)(Fn,{children:Object(an.jsx)(on,{className:"product-preview",children:Object(an.jsx)(on,{className:"monsterplant-image"})})}),Object(an.jsxs)(Fn,{justifyContent:"between",overflow:"auto",children:[Object(an.jsxs)(Fn,{gap:2,children:[Object(an.jsx)(ur,{children:We("useproduct.widget.text.plant_seed",["productName"],[n.name])}),Object(an.jsx)(ur,{children:We("useproduct.widget.info.plant_seed")})]}),Object(an.jsxs)(hn,{alignItems:"center",justifyContent:"between",children:[Object(an.jsx)(bn,{variant:"danger",onClick:s,children:We("useproduct.widget.cancel")}),Object(an.jsx)(bn,{variant:"success",onClick:()=>{l.useMultistateItem(t),s()},children:We("widget.monsterplant_seed.button.use")})]})]})]})})]})},Bu=e=>{const{objectId:t=-1,onClose:s=null}=e,[n,r]=Object(c.useState)(-1),[i,o]=Object(c.useState)(ye.MALE),[l,u]=Object(c.useState)(null),{roomSession:j=null}=Ac();return Object(c.useEffect)((()=>{let e=-1;const n=F().figure,c=F().gender,i=[];if(j&&t>=0){const s=de(j.roomId,t,a.Wg.FLOOR);if(s&&s.specialType===Je.FIGURE_PURCHASABLE_SET){e=0;const t=s.customParams.split(",").map((e=>parseInt(e)));for(const e of t)d().isValidFigureSetForGender(e,c)&&i.push(e)}}-1!==e?(o(c),u(d().getFigureStringWithFigureIds(n,c,i)),r(e)):s()}),[j,t,s]),-1===n?null:Object(an.jsxs)(yn,{className:"nitro-use-product-confirmation",children:[Object(an.jsx)(vn,{headerText:We("useproduct.widget.title.bind_clothing"),onCloseClick:s}),Object(an.jsx)(In,{center:!0,children:Object(an.jsxs)(hn,{gap:2,overflow:"hidden",children:[Object(an.jsx)(Fn,{children:Object(an.jsx)(on,{className:"mannequin-preview",children:Object(an.jsx)(kn,{figure:l,direction:2})})}),Object(an.jsxs)(Fn,{justifyContent:"between",overflow:"auto",children:[Object(an.jsxs)(Fn,{gap:2,children:[Object(an.jsx)(ur,{children:We("useproduct.widget.text.bind_clothing")}),Object(an.jsx)(ur,{children:We("useproduct.widget.info.bind_clothing")})]}),Object(an.jsxs)(hn,{alignItems:"center",justifyContent:"between",children:[Object(an.jsx)(bn,{variant:"danger",onClick:s,children:We("useproduct.widget.cancel")}),Object(an.jsx)(bn,{variant:"success",onClick:()=>{f().send(new a.ag(t)),f().send(new a.Ti(i,l)),s()},children:We("useproduct.widget.bind_clothing")})]})]})]})})]})},Hu=e=>{const{closeConfirm:t=null,processAction:s=null,onClose:n=null,objectId:r=-1,mode:c=null,confirmMode:i=null,confirmingObjectId:o=-1,groupData:l=null,isGroupMember:d=!1}=Mc();return Object(an.jsxs)(an.Fragment,{children:["MONSTERPLANT_SEED_CONFIRMATION"===i&&Object(an.jsx)(Fu,{objectId:o,onClose:t}),"PURCHASABLE_CLOTHING_CONFIRMATION"===i&&Object(an.jsx)(Bu,{objectId:o,onClose:t}),"EFFECTBOX_OPEN"===i&&Object(an.jsx)(Mu,{objectId:o,onClose:t}),r>=0&&c&&Object(an.jsxs)(au,{objectId:r,category:a.Wg.FLOOR,onClose:n,fades:!0,children:[c===a.wb.FRIEND_FURNITURE&&Object(an.jsxs)(an.Fragment,{children:[Object(an.jsx)(Qd,{children:We("friendfurni.context.title")}),Object(an.jsx)(eu,{onClick:e=>s("use_friend_furni"),children:We("friendfurni.context.use")})]}),c===a.wb.MONSTERPLANT_SEED&&Object(an.jsxs)(an.Fragment,{children:[Object(an.jsx)(Qd,{children:We("furni.mnstr_seed.name")}),Object(an.jsx)(eu,{onClick:e=>s("use_monsterplant_seed"),children:We("widget.monsterplant_seed.button.use")})]}),c===a.wb.RANDOM_TELEPORT&&Object(an.jsxs)(an.Fragment,{children:[Object(an.jsx)(Qd,{children:We("furni.random_teleport.name")}),Object(an.jsx)(eu,{onClick:e=>s("use_random_teleport"),children:We("widget.random_teleport.button.use")})]}),c===a.wb.PURCHASABLE_CLOTHING&&Object(an.jsxs)(an.Fragment,{children:[Object(an.jsx)(Qd,{children:We("furni.generic_usable.name")}),Object(an.jsx)(eu,{onClick:e=>s("use_purchaseable_clothing"),children:We("widget.generic_usable.button.use")})]}),"GROUP_FURNITURE"===c&&l&&Object(an.jsxs)(an.Fragment,{children:[Object(an.jsx)(Qd,{className:"cursor-pointer text-truncate",onClick:()=>Qt(l.guildId),children:l.guildName}),!d&&Object(an.jsx)(eu,{onClick:e=>s("join_group"),children:We("widget.furniture.button.join.group")}),Object(an.jsx)(eu,{onClick:e=>s("go_to_group_homeroom"),children:We("widget.furniture.button.go.to.group.home.room")}),l.guildHasReadableForum&&Object(an.jsx)(eu,{onClick:e=>s("open_forum"),children:We("widget.furniture.button.open_group_forum")})]})]})]})},Gu=e=>{const{objectId:t=-1,hue:s=0,setHue:n=null,saturation:r=0,setSaturation:c=null,lightness:i=0,setLightness:a=null,applyToner:o=null,toggleToner:l=null,onClose:d=null}=Dc();return-1===t?null:Object(an.jsxs)(yn,{theme:"primary-slim",className:"nitro-room-widget-toner",children:[Object(an.jsx)(vn,{headerText:We("widget.backgroundcolor.title"),onCloseClick:d}),Object(an.jsxs)(In,{overflow:"hidden",justifyContent:"between",children:[Object(an.jsxs)(Fn,{overflow:"auto",gap:1,children:[Object(an.jsxs)(Fn,{children:[Object(an.jsx)(ur,{bold:!0,children:We("widget.backgroundcolor.hue")}),Object(an.jsx)(Fi.a,{className:"nitro-slider",min:0,max:360,value:s,onChange:e=>n(e),thumbClassName:"thumb degree",renderThumb:(e,t)=>Object(an.jsx)("div",{...e,children:t.valueNow})})]}),Object(an.jsxs)(Fn,{children:[Object(an.jsx)(ur,{bold:!0,children:We("widget.backgroundcolor.saturation")}),Object(an.jsx)(Fi.a,{className:"nitro-slider",min:0,max:100,value:r,onChange:e=>c(e),thumbClassName:"thumb percent",renderThumb:(e,t)=>Object(an.jsx)("div",{...e,children:t.valueNow})})]}),Object(an.jsxs)(Fn,{children:[Object(an.jsx)(ur,{bold:!0,children:We("widget.backgroundcolor.lightness")}),Object(an.jsx)(Fi.a,{className:"nitro-slider",min:0,max:100,value:i,onChange:e=>a(e),thumbClassName:"thumb percent",renderThumb:(e,t)=>Object(an.jsx)("div",{...e,children:t.valueNow})})]})]}),Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(bn,{fullWidth:!0,variant:"primary",onClick:l,children:We("widget.backgroundcolor.button.on")}),Object(an.jsx)(bn,{fullWidth:!0,variant:"primary",onClick:o,children:We("widget.backgroundcolor.button.apply")})]})]})]})},Wu=e=>{const{objectId:t=-1,color:s="1",badgeName:n="",badgeDesc:r="",date:c="",senderName:i="",onClose:a=null}=Lc();return-1===t?null:Object(an.jsx)(cr,{color:s,message:r,date:c,senderName:i,customTitle:n,onCloseClick:a})},Vu=e=>{const[t,s]=Object(c.useState)(!1),{presets:n=[],dimmerState:r=0,selectedPresetId:i=0,color:o=16777215,brightness:l=255,effectId:d=0,selectedColor:u=0,setSelectedColor:j=null,selectedBrightness:h=0,setSelectedBrightness:b=null,selectedEffectId:g=0,setSelectedEffectId:m=null,selectPresetId:O=null,applyChanges:f}=Fc();mr(a.Ig.REMOVE_DIMMER,(e=>s(!1))),Object(c.useEffect)((()=>{n&&n.length&&s(!0)}),[n]);const x=Object(c.useMemo)((()=>p("widget.dimmer.colorwheel",!1)),[]);return t?Object(an.jsxs)(yn,{className:"nitro-room-widget-dimmer",children:[Object(an.jsx)(vn,{headerText:We("widget.dimmer.title"),onCloseClick:()=>{Gs.previewDimmer(o,l,2===d),s(!1)}}),1===r&&Object(an.jsx)(or,{children:n.map((e=>Object(an.jsx)(ar,{isActive:i===e.id,onClick:t=>O(e.id),children:We(`widget.dimmer.tab.${e.id}`)},e.id)))}),Object(an.jsxs)(In,{children:[0===r&&Object(an.jsxs)(Fn,{alignItems:"center",children:[Object(an.jsx)(on,{className:"dimmer-banner"}),Object(an.jsx)(ur,{center:!0,className:"bg-muted rounded p-1",children:We("widget.dimmer.info.off")}),Object(an.jsx)(bn,{fullWidth:!0,variant:"success",onClick:()=>Gs.changeState(),children:We("widget.dimmer.button.on")})]}),1===r&&Object(an.jsxs)(an.Fragment,{children:[Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{fontWeight:"bold",children:We("widget.backgroundcolor.hue")}),x&&Object(an.jsx)("input",{type:"color",className:"form-control",value:Pe.makeColorNumberHex(u),onChange:e=>j(Pe.convertFromHex(e.target.value))}),!x&&Object(an.jsx)(un,{gap:1,columnCount:7,children:Gs.AVAILABLE_COLORS.map(((e,t)=>Object(an.jsx)(Fn,{fullWidth:!0,pointer:!0,className:"color-swatch rounded"+Xi()({" active":e===u}),onClick:()=>j(e),style:{backgroundColor:Gs.HTML_COLORS[t]}},t)))})]}),Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{fontWeight:"bold",children:We("widget.backgroundcolor.lightness")}),Object(an.jsx)(Fi.a,{className:"nitro-slider",min:Gs.MIN_BRIGHTNESS,max:Gs.MAX_BRIGHTNESS,value:h,onChange:e=>b(e),thumbClassName:"thumb percent",renderThumb:(e,t)=>Object(an.jsx)("div",{...e,children:Gs.scaleBrightness(t.valueNow)})})]}),Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)("input",{className:"form-check-input",type:"checkbox",checked:2===g,onChange:e=>m(e.target.checked?2:1)}),Object(an.jsx)(ur,{children:We("widget.dimmer.type.checkbox")})]}),Object(an.jsxs)(hn,{gap:1,children:[Object(an.jsx)(bn,{fullWidth:!0,variant:"danger",onClick:()=>Gs.changeState(),children:We("widget.dimmer.button.off")}),Object(an.jsx)(bn,{fullWidth:!0,variant:"success",onClick:f,children:We("widget.dimmer.button.apply")})]})]})]})]}):null},qu=e=>{const{objectId:t=-1,value:s=0,onClose:n=null,redeem:r=null}=Bc();return-1===t?null:Object(an.jsxs)(yn,{className:"nitro-widget-exchange-credit",theme:"primary-slim",children:[Object(an.jsx)(vn,{headerText:We("catalog.redeem.dialog.title"),onCloseClick:n}),Object(an.jsx)(In,{center:!0,children:Object(an.jsxs)(hn,{overflow:"hidden",gap:2,children:[Object(an.jsx)(Fn,{center:!0,children:Object(an.jsx)(on,{className:"exchange-image"})}),Object(an.jsxs)(Fn,{grow:!0,justifyContent:"between",overflow:"hidden",children:[Object(an.jsxs)(Fn,{gap:1,overflow:"auto",children:[Object(an.jsx)(ur,{fontWeight:"bold",children:We("creditfurni.description",["credits"],[s.toString()])}),Object(an.jsx)(ur,{children:We("creditfurni.prompt")})]}),Object(an.jsx)(bn,{variant:"success",onClick:r,children:We("catalog.redeem.dialog.button.exchange")})]})]})})]})},zu=e=>{const{objectId:t=-1,photoData:s=null,onClose:n=null}=Hc();return-1!==t&&s?Object(an.jsxs)(yn,{className:"nitro-external-image-widget",theme:"primary-slim",children:[Object(an.jsx)(vn,{headerText:"",onCloseClick:n}),Object(an.jsxs)(In,{children:[Object(an.jsx)(hn,{center:!0,className:"picture-preview border border-black",style:s.w?{backgroundImage:"url("+s.w+")"}:{},children:!s.w&&Object(an.jsx)(ur,{bold:!0,children:We("camera.loading")})}),s.m&&s.m.length&&Object(an.jsx)(ur,{center:!0,children:s.m}),Object(an.jsxs)(hn,{alignItems:"center",justifyContent:"between",children:[Object(an.jsx)(ur,{children:s.n||""}),Object(an.jsx)(ur,{children:new Date(1e3*s.t).toLocaleDateString()})]})]})]}):null},Yu=e=>{const{objectId:t=-1,type:s=0,stage:n=0,usernames:r=[],figures:c=[],date:i=null,onClose:a=null,respond:o=null}=Gc();return-1===t?null:n>0?Object(an.jsxs)(yn,{className:"nitro-engraving-lock",theme:"primary-slim",children:[Object(an.jsx)(vn,{headerText:We("friend.furniture.confirm.lock.caption"),onCloseClick:a}),Object(an.jsxs)(In,{children:[Object(an.jsx)("h5",{className:"text-black text-center fw-bold mt-2 mb-2",children:We("friend.furniture.confirm.lock.subtitle")}),Object(an.jsx)("div",{className:"d-flex justify-content-center mb-2",children:Object(an.jsx)("div",{className:`engraving-lock-stage-${n}`})}),2===n&&Object(an.jsx)("div",{className:"text-small text-black text-center mb-2",children:We("friend.furniture.confirm.lock.other.locked")}),Object(an.jsxs)(hn,{gap:1,children:[Object(an.jsx)(bn,{fullWidth:!0,onClick:e=>o(!1),children:We("friend.furniture.confirm.lock.button.cancel")}),Object(an.jsx)(bn,{fullWidth:!0,variant:"success",onClick:e=>o(!0),children:We("friend.furniture.confirm.lock.button.confirm")})]})]})]}):r.length>0?Object(an.jsx)(Rn,{handleSelector:".nitro-engraving-lock-view",children:Object(an.jsxs)("div",{className:`nitro-engraving-lock-view engraving-lock-${s}`,children:[Object(an.jsx)("div",{className:"engraving-lock-close",onClick:a}),Object(an.jsxs)(hn,{justifyContent:"center",children:[Object(an.jsx)("div",{className:"engraving-lock-avatar",children:Object(an.jsx)(kn,{figure:c[0],direction:2})}),Object(an.jsx)("div",{className:"engraving-lock-avatar",children:Object(an.jsx)(kn,{figure:c[1],direction:4})})]}),Object(an.jsxs)(Fn,{justifyContent:"between",className:"mt-1",children:[Object(an.jsxs)(Fn,{alignItems:"center",justifyContent:"center",gap:1,children:[Object(an.jsxs)("div",{children:[0===s&&We("lovelock.engraving.caption"),3===s&&We("wildwest.engraving.caption")]}),Object(an.jsx)("div",{children:i})]}),Object(an.jsxs)(hn,{justifyContent:"center",gap:4,children:[Object(an.jsx)("div",{children:r[0]}),Object(an.jsx)("div",{children:r[1]})]})]})]})}):void 0},$u=e=>{const{objectId:t=-1,classId:s=-1,itemType:n=null,text:r=null,isOwnerOfFurniture:c=!1,senderName:i=null,senderFigure:a=null,placedItemId:o=-1,placedItemType:l=null,placedInRoom:d=!1,imageUrl:u=null,openPresent:j=null,onClose:h=null}=Xc(),{groupItems:b=[]}=mc();if(-1===t)return null;return Object(an.jsxs)(yn,{className:"nitro-gift-opening",theme:"primary-slim",children:[Object(an.jsx)(vn,{headerText:We(i?"widget.furni.present.window.title_from":"widget.furni.present.window.title",["name"],[i]),onCloseClick:h}),Object(an.jsxs)(In,{children:[-1===o&&Object(an.jsxs)(Fn,{overflow:"hidden",children:[Object(an.jsx)(hn,{center:!0,overflow:"auto",children:Object(an.jsx)(Mn,{userName:i,figure:a,message:r})}),c&&Object(an.jsxs)(hn,{gap:1,children:[i&&Object(an.jsx)(bn,{fullWidth:!0,onClick:e=>m("catalog/open"),children:We("widget.furni.present.give_gift",["name"],[i])}),Object(an.jsx)(bn,{fullWidth:!0,variant:"success",onClick:j,children:We("widget.furni.present.open_gift")})]})]}),o>-1&&Object(an.jsxs)(hn,{gap:2,overflow:"hidden",children:[Object(an.jsx)(Fn,{center:!0,className:"p-2",children:Object(an.jsx)(qn,{imageUrl:u})}),Object(an.jsxs)(Fn,{grow:!0,children:[Object(an.jsxs)(Fn,{center:!0,gap:1,children:[Object(an.jsx)(ur,{wrap:!0,small:!0,children:We("widget.furni.present.message_opened")}),Object(an.jsx)(ur,{bold:!0,fontSize:5,children:r})]}),Object(an.jsxs)(Fn,{grow:!0,gap:1,children:[Object(an.jsxs)(hn,{gap:1,children:[d&&Object(an.jsx)(bn,{fullWidth:!0,onClick:null,children:We("widget.furni.present.put_in_inventory")}),Object(an.jsx)(bn,{fullWidth:!0,variant:"success",onClick:e=>(e=>{const t=b.find((t=>{var s;return(null===(s=t.getItemById(e))||void 0===s?void 0:s.id)===e}));t&&dt(t),h()})(o),children:We(d?"widget.furni.present.keep_in_room":"widget.furni.present.place_in_room")})]}),i&&i.length&&Object(an.jsx)(bn,{fullWidth:!0,onClick:e=>m("catalog/open"),children:We("widget.furni.present.give_gift",["name"],[i])})]})]})]})]})]})},Ku=e=>{const{stuffDatas:t=null,getScoreType:s=null,getClearType:n=null}=qc();return t&&t.size?Object(an.jsx)(an.Fragment,{children:Array.from(t.entries()).map(((e,t)=>{let[r,c]=e;return Object(an.jsx)(Lu,{objectId:r,category:a.Wg.FLOOR,children:Object(an.jsxs)(Fn,{className:"nitro-widget-high-score nitro-context-menu",gap:0,children:[Object(an.jsx)(Qd,{children:We("high.score.display.caption",["scoretype","cleartype"],[We(`high.score.display.scoretype.${s(c.scoreType)}`),We(`high.score.display.cleartype.${n(c.clearType)}`)])}),Object(an.jsxs)(Ou,{overflow:"hidden",gap:1,className:"h-100",children:[Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsxs)(hn,{alignItems:"center",children:[Object(an.jsx)(ur,{center:!0,bold:!0,variant:"white",className:"col-8",children:We("high.score.display.users.header")}),Object(an.jsx)(ur,{center:!0,bold:!0,variant:"white",className:"col-4",children:We("high.score.display.score.header")})]}),Object(an.jsx)("hr",{className:"m-0"})]}),Object(an.jsx)(Fn,{overflow:"auto",gap:1,className:"overflow-y-scroll",children:c.entries.map(((e,t)=>Object(an.jsxs)(hn,{alignItems:"center",children:[Object(an.jsx)(ur,{center:!0,variant:"white",className:"col-8",children:e.users.join(", ")}),Object(an.jsx)(ur,{center:!0,variant:"white",className:"col-4",children:e.score})]},t)))})]})]})},t)}))}):null},Xu=e=>{const{}=zc();return null},Qu=e=>{const[t,s]=Object(c.useState)(null),[n,r]=Object(c.useState)(-1),{objectId:i=-1,figure:o=null,gender:l=null,clubLevel:u=a.Xd.NO_CLUB,name:j=null,setName:h=null,saveFigure:b=null,wearFigure:g=null,saveName:m=null,onClose:O=null}=Yc();return Object(c.useEffect)((()=>{if(-1===i)return;const e=he();e.isRoomOwner||e.controllerLevel>=a.yg.GUEST||F().isModerator?r(0):F().gender.toLowerCase()===l.toLowerCase()?B()<u?r(3):r(2):r(4)}),[i,l,u]),Object(c.useEffect)((()=>{switch(n){case 0:case 4:{const e=d().createFigureContainer(o);Ws.transformAsMannequinFigure(e),s(e.getFigureString());break}case 1:{const e=d().createFigureContainer(F().figure);Ws.transformAsMannequinFigure(e),s(e.getFigureString());break}case 2:case 3:{const e=Ws.getMergedMannequinFigureContainer(F().figure,o);s(e.getFigureString());break}}}),[n,o,u]),-1===i?null:Object(an.jsxs)(yn,{className:"nitro-mannequin no-resize",theme:"primary-slim",children:[Object(an.jsx)(vn,{headerText:We("mannequin.widget.title"),onCloseClick:O}),Object(an.jsx)(In,{center:!0,children:Object(an.jsxs)(hn,{fullWidth:!0,gap:2,overflow:"hidden",children:[Object(an.jsx)(Fn,{children:Object(an.jsxs)(on,{position:"relative",className:"mannequin-preview",children:[Object(an.jsx)(kn,{position:"absolute",figure:t,direction:2}),u>0&&Object(an.jsx)(Pn,{className:"position-absolute end-2 bottom-2",type:"hc"})]})}),Object(an.jsxs)(Fn,{grow:!0,justifyContent:"between",overflow:"auto",children:[0===n&&Object(an.jsxs)(an.Fragment,{children:[Object(an.jsx)("input",{type:"text",className:"form-control form-control-sm",value:j,onChange:e=>h(e.target.value),onBlur:m}),Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(bn,{variant:"success",onClick:e=>r(1),children:We("mannequin.widget.style")}),Object(an.jsx)(bn,{variant:"success",onClick:g,children:We("mannequin.widget.wear")})]})]}),1===n&&Object(an.jsxs)(an.Fragment,{children:[Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:j}),Object(an.jsx)(ur,{wrap:!0,children:We("mannequin.widget.savetext")})]}),Object(an.jsxs)(hn,{alignItems:"center",justifyContent:"between",children:[Object(an.jsx)(ur,{underline:!0,pointer:!0,onClick:e=>r(0),children:We("mannequin.widget.back")}),Object(an.jsx)(bn,{variant:"success",onClick:b,children:We("mannequin.widget.save")})]})]}),2===n&&Object(an.jsxs)(an.Fragment,{children:[Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:j}),Object(an.jsx)(ur,{children:We("mannequin.widget.weartext")})]}),Object(an.jsx)(bn,{variant:"success",onClick:g,children:We("mannequin.widget.wear")})]}),3===n&&Object(an.jsx)(hn,{center:!0,grow:!0,children:Object(an.jsx)(ur,{children:We("mannequin.widget.clubnotification")})}),4===n&&Object(an.jsx)(ur,{children:We("mannequin.widget.wronggender")})]})]})})]})},Ju=e=>{const{}=Qc();return null},Zu=["9CCEFF","FF9CFF","9CFF9C","FFFF33"],ej=["blue","pink","green","yellow"],tj=e=>{let t=Zu.indexOf(e);return-1===t&&(t=0),ej[t]},sj=e=>{const{objectId:t=-1,color:s="0",setColor:n=null,text:r="",setText:c=null,canModify:i=!1,onClose:a=null}=Jc();return-1===t?null:Object(an.jsx)(Rn,{handleSelector:".drag-handler",windowPosition:Sn.TOP_LEFT,children:Object(an.jsxs)("div",{className:"nitro-stickie nitro-stickie-image stickie-"+tj(s),children:[Object(an.jsxs)("div",{className:"d-flex align-items-center stickie-header drag-handler",children:[Object(an.jsx)("div",{className:"d-flex align-items-center flex-grow-1 h-100",children:i&&Object(an.jsxs)(an.Fragment,{children:[Object(an.jsx)("div",{className:"nitro-stickie-image stickie-trash header-trash",onClick:a}),Zu.map((e=>Object(an.jsx)("div",{className:"stickie-color ms-1",onClick:t=>n(e),style:{backgroundColor:Pe.makeColorHex(e)}},e)))]})}),Object(an.jsx)("div",{className:"d-flex align-items-center nitro-stickie-image stickie-close header-close",onClick:a})]}),Object(an.jsx)("div",{className:"stickie-context",children:Object(an.jsx)("textarea",{className:"context-text",value:r,onChange:e=>c(e.target.value),tabIndex:0,autoFocus:!0})})]})})},nj=e=>{const{objectId:t=-1,height:s=0,maxHeight:n=40,onClose:r=null,updateHeight:i=null}=Zc(),[o,l]=Object(c.useState)("");return Object(c.useEffect)((()=>{l(s.toString())}),[s]),-1===t?null:Object(an.jsxs)(yn,{className:"nitro-widget-custom-stack-height",theme:"primary-slim",children:[Object(an.jsx)(vn,{headerText:We("widget.custom.stack.height.title"),onCloseClick:r}),Object(an.jsxs)(In,{justifyContent:"between",children:[Object(an.jsx)(ur,{children:We("widget.custom.stack.height.text")}),Object(an.jsxs)(hn,{gap:2,children:[Object(an.jsx)(Fi.a,{className:"nitro-slider",min:0,max:n,step:.01,value:s,onChange:e=>i(e),renderThumb:(e,t)=>Object(an.jsx)("div",{...e,children:t.valueNow})}),Object(an.jsx)("input",{className:"show-number-arrows",style:{width:50},type:"number",min:0,max:n,value:o,onChange:e=>(e=>{l(e);const t=parseFloat(e);isNaN(t)||t===s||i(t)})(e.target.value)})]}),Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(bn,{onClick:e=>Ee(new a.nc(t,-100)),children:We("furniture.above.stack")}),Object(an.jsx)(bn,{onClick:e=>Ee(new a.nc(t,0)),children:We("furniture.floor.level")})]})]})]})},rj=["9CCEFF","FF9CFF","9CFF9C","FFFF33"],cj=["blue","pink","green","yellow"],ij=["post_it","post_it_shakesp","post_it_dreams","post_it_xmas","post_it_vd","post_it_juninas"],aj=["post_it","shakesp","dreams","christmas","heart","juninas"],oj=e=>{let t=rj.indexOf(e);return-1===t&&(t=0),cj[t]},lj=e=>{let t=ij.indexOf(e);return-1===t&&(t=0),aj[t]},dj=e=>{const{objectId:t=-1,color:s="0",text:n="",type:r="",canModify:i=!1,updateColor:a=null,updateText:o=null,trash:l=null,onClose:d=null}=ei(),[u,j]=Object(c.useState)(!1);return Object(c.useEffect)((()=>{j(!1)}),[t,s,n,r]),-1===t?null:Object(an.jsx)(Rn,{handleSelector:".drag-handler",windowPosition:Sn.TOP_LEFT,children:Object(an.jsxs)("div",{className:"nitro-stickie nitro-stickie-image stickie-"+("post_it"==r?oj(s):lj(r)),children:[Object(an.jsxs)("div",{className:"d-flex align-items-center stickie-header drag-handler",children:[Object(an.jsx)("div",{className:"d-flex align-items-center flex-grow-1 h-100",children:i&&Object(an.jsxs)(an.Fragment,{children:[Object(an.jsx)("div",{className:"nitro-stickie-image stickie-trash header-trash",onClick:l}),"post_it"==r&&Object(an.jsx)(an.Fragment,{children:rj.map((e=>Object(an.jsx)("div",{className:"stickie-color ms-1",onClick:t=>a(e),style:{backgroundColor:Pe.makeColorHex(e)}},e)))})]})}),Object(an.jsx)("div",{className:"d-flex align-items-center nitro-stickie-image stickie-close header-close",onClick:d})]}),Object(an.jsx)("div",{className:"stickie-context",children:u&&i?Object(an.jsx)("textarea",{className:"context-text",defaultValue:n,tabIndex:0,onBlur:e=>o(e.target.value),autoFocus:!0}):Object(an.jsx)("div",{className:"context-text",onClick:e=>i&&j(!0),children:n})})]})})},uj=e=>{const{objectId:t=-1,color:s="1",senderName:n="",date:r="",message:c="",onClose:i=null}=ti();return-1===t?null:Object(an.jsx)(cr,{color:s,message:c,date:r,senderName:n,onCloseClick:i})};var jj=s(83);const hj=e=>{const[t,s]=Object(c.useState)(null),{objectId:n=-1,videoId:r=null,videoStart:i=0,videoEnd:a=0,currentVideoState:o=null,selectedVideo:l=null,playlists:d=[],onClose:u=null,previous:j=null,next:h=null,pause:b=null,play:g=null,selectVideo:m=null}=si(),O=Object(c.useCallback)((e=>{if(s(e.target),-1!==n)switch(e.target.getPlayerState()){case-1:case 1:return void(1!==o&&g());case 2:2!==o&&b()}}),[n,o,g,b]);if(Object(c.useEffect)((()=>{null!==o&&t&&(o!==Ks.PLAYING||t.getPlayerState()===Ks.PLAYING?o!==Ks.PAUSED||t.getPlayerState()===Ks.PAUSED||t.pauseVideo():t.playVideo())}),[o,t]),-1===n)return null;const p={height:"375",width:"500",playerVars:{autoplay:1,disablekb:1,controls:0,origin:window.origin,modestbranding:1,start:i,end:a}};return Object(an.jsxs)(yn,{className:"youtube-tv-widget",children:[Object(an.jsx)(vn,{headerText:"",onCloseClick:u}),Object(an.jsx)(In,{children:Object(an.jsxs)("div",{className:"row w-100 h-100",children:[Object(an.jsxs)("div",{className:"youtube-video-container col-9",children:[r&&r.length>0&&Object(an.jsx)(jj.a,{videoId:r,opts:p,onReady:e=>s(e.target),onStateChange:O,containerClassName:"youtubeContainer"}),(!r||0===r.length)&&Object(an.jsx)("div",{className:"empty-video w-100 h-100 justify-content-center align-items-center d-flex",children:We("widget.furni.video_viewer.no_videos")})]}),Object(an.jsxs)("div",{className:"playlist-container col-3",children:[Object(an.jsxs)("span",{className:"playlist-controls justify-content-center d-flex",children:[Object(an.jsx)("i",{className:"icon icon-youtube-prev cursor-pointer",onClick:j}),Object(an.jsx)("i",{className:"icon icon-youtube-next cursor-pointer",onClick:h})]}),Object(an.jsx)("div",{className:"mb-1",children:We("widget.furni.video_viewer.playlists")}),Object(an.jsx)(un,{columnCount:1,className:"playlist-grid",children:d&&d.map(((e,t)=>Object(an.jsxs)(Vn,{onClick:t=>m(e.video),itemActive:e.video===l,children:[Object(an.jsx)("b",{children:e.title})," - ",e.description]},t)))})]})]})})]})},bj=e=>Object(an.jsxs)(on,{fit:!0,position:"absolute",className:"nitro-room-widgets top-0 start-0",children:[Object(an.jsx)(Gu,{}),Object(an.jsx)(Wu,{}),Object(an.jsx)(Vu,{}),Object(an.jsx)(qu,{}),Object(an.jsx)(zu,{}),Object(an.jsx)(Yu,{}),Object(an.jsx)($u,{}),Object(an.jsx)(Ku,{}),Object(an.jsx)(Xu,{}),Object(an.jsx)(Qu,{}),Object(an.jsx)(Ju,{}),Object(an.jsx)(sj,{}),Object(an.jsx)(nj,{}),Object(an.jsx)(dj,{}),Object(an.jsx)(uj,{}),Object(an.jsx)(Hu,{}),Object(an.jsx)(hj,{})]}),gj=e=>{const[t,s]=Object(c.useState)(!1),{roomSession:n=null}=Ac(),r=Object(c.useCallback)((e=>{switch(e.type){case Pr.SHOW_THUMBNAIL:return void s(!0);case Pr.HIDE_THUMBNAIL:return void s(!1);case Pr.TOGGLE_THUMBNAIL:return void s((e=>!e))}}),[]);fr(Pr.SHOW_THUMBNAIL,r),fr(Pr.HIDE_THUMBNAIL,r),fr(Pr.TOGGLE_THUMBNAIL,r);const i=Object(c.useCallback)((e=>{C().saveTextureAsScreenshot(e,!0),s(!1)}),[]);return t?Object(an.jsx)(Yn,{roomId:n.roomId,textureReceiver:i,onClose:()=>s(!1)}):null},mj=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)(null),[i,o]=Object(c.useState)(null),[l,d]=Object(c.useState)(null),[u,j]=Object(c.useState)(!1),{navigatorData:h=null}=vc(),{roomSession:b=null}=Ac(),g=e=>{switch(e){case"settings":return void m("navigator/toggle-room-info");case"zoom":return void s((e=>{let t=C().getRoomInstanceRenderingCanvasScale(b.roomId,1);return e?t*=2:t/=2,C().setRoomInstanceRenderingCanvasScale(b.roomId,1,t),!e}));case"chat_history":return void m("chat-history/toggle");case"like_room":return void Ee(new a.Zf(1));case"toggle_room_link":return void m("navigator/toggle-room-link")}};return pr(a.Dc,(e=>{const t=e.getParser();t.roomEnter&&t.data.roomId===b.roomId&&(n!==t.data.roomName&&r(t.data.roomName),i!==t.data.ownerName&&o(t.data.ownerName),l!==t.data.tags&&d(t.data.tags))})),Object(c.useEffect)((()=>{j(!0);const e=setTimeout((()=>j(!1)),5e3);return()=>clearTimeout(e)}),[n,i,l]),Object(an.jsxs)(hn,{className:"nitro-room-tools-container",gap:2,children:[Object(an.jsxs)(Fn,{center:!0,className:"nitro-room-tools p-2",children:[Object(an.jsx)(on,{pointer:!0,title:We("room.settings.button.text"),className:"icon icon-cog",onClick:()=>g("settings")}),Object(an.jsx)(on,{pointer:!0,title:We("room.zoom.button.text"),onClick:()=>g("zoom"),className:"icon "+Xi()({"icon-zoom-less":!t,"icon-zoom-more":t})}),Object(an.jsx)(on,{pointer:!0,title:We("room.chathistory.button.text"),onClick:()=>g("chat_history"),className:"icon icon-chat-history"}),h.canRate&&Object(an.jsx)(on,{pointer:!0,title:We("room.like.button.text"),onClick:()=>g("like_room"),className:"icon icon-like-room"})]}),Object(an.jsx)(Fn,{justifyContent:"center",children:Object(an.jsx)(Jn,{type:Xn.SLIDE_LEFT,inProp:u,timeout:300,children:Object(an.jsx)(Fn,{center:!0,children:Object(an.jsxs)(Fn,{className:"nitro-room-tools-info rounded py-2 px-3",children:[Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{wrap:!0,variant:"white",fontSize:4,children:n}),Object(an.jsx)(ur,{variant:"muted",fontSize:5,children:i})]}),l&&l.length>0&&Object(an.jsx)(hn,{gap:2,children:l.map(((e,t)=>Object(an.jsxs)(ur,{small:!0,variant:"white",className:"rounded bg-primary p-1",children:["#",e]},t)))})]})})})})]})},Oj=e=>{const{question:t=null,canVote:s=null,vote:n=null,noVotes:r=null,yesVotes:c=null}=e;return Object(an.jsxs)(Fn,{gap:2,className:"wordquiz-question p-2",children:[!s&&Object(an.jsxs)(hn,{fullWidth:!0,alignItems:"center",gap:2,children:[Object(an.jsx)(hn,{center:!0,pointer:!0,className:"bg-danger rounded p-2",children:Object(an.jsx)(ur,{variant:"white",children:r})}),Object(an.jsx)(ur,{variant:"white",center:!0,textBreak:!0,children:t}),Object(an.jsx)(hn,{center:!0,pointer:!0,className:"bg-success rounded p-2",children:Object(an.jsx)(ur,{variant:"white",children:c})})]}),s&&Object(an.jsxs)(Fn,{children:[Object(an.jsx)(ur,{variant:"white",center:!0,textBreak:!0,children:t}),Object(an.jsxs)(hn,{fullWidth:!0,justifyContent:"center",gap:1,children:[Object(an.jsx)(hn,{center:!0,pointer:!0,className:"bg-danger rounded p-1",onClick:e=>n($s),children:Object(an.jsx)(on,{className:"word-quiz-dislike"})}),Object(an.jsx)(hn,{center:!0,pointer:!0,className:"bg-success rounded p-1",onClick:e=>n("1"),children:Object(an.jsx)(on,{className:"word-quiz-like"})})]})]})]})},pj=e=>{const{userIndex:t=null,vote:s=null,...n}=e;return Object(an.jsx)(Lu,{objectId:t,category:a.Wg.UNIT,...n,children:Object(an.jsx)(hn,{center:!0,pointer:!0,className:`bg-${s===$s?"danger":"success"} rounded p-1`,children:Object(an.jsx)(on,{className:`word-quiz-${s===$s?"dislike":"like"}-sm`})})})},fj=e=>{const{question:t=null,answerSent:s=!1,answerCounts:n=null,userAnswers:r=null,vote:c=null}=mi();return Object(an.jsxs)(an.Fragment,{children:[t&&Object(an.jsx)(Oj,{question:t.content,canVote:!s,vote:c,noVotes:n.get($s)||0,yesVotes:n.get("1")||0}),r&&Array.from(r.entries()).map(((e,t)=>{let[s,n]=e;return Object(an.jsx)(pj,{userIndex:s,vote:n.value},t)}))]})},xj=e=>{const{roomSession:t=null}=Ac(),{simpleAlert:s=null}=Hr();return mr(a.Oh.ROOM_ZOOM,(e=>C().setRoomInstanceRenderingCanvasScale(e.roomId,1,e.level,null,null,!1,e.asDelta))),mr([a.Ig.REQUEST_TEASER,a.Ig.REQUEST_ECOTRONBOX,a.Ig.REQUEST_CLOTHING_CHANGE,a.Ig.REQUEST_PLAYLIST_EDITOR,a.Ig.OPEN_WIDGET,a.Ig.CLOSE_WIDGET,a.Hg.FURNI_CLICK,a.Hg.FURNI_DOUBLE_CLICK,a.Hg.TOOLTIP_SHOW,a.Hg.TOOLTIP_HIDE],(e=>{if(!t)return;e.objectId,e.category;switch(e.type){case a.Ig.REQUEST_TEASER:case a.Ig.REQUEST_ECOTRONBOX:case a.Ig.REQUEST_PLACEHOLDER:case a.Ig.REQUEST_CLOTHING_CHANGE:case a.Ig.REQUEST_PLAYLIST_EDITOR:case a.Ig.OPEN_WIDGET:case a.Ig.CLOSE_WIDGET:case a.Jg.USE_PRODUCT_FROM_ROOM:case a.Hg.FURNI_CLICK:case a.Hg.FURNI_DOUBLE_CLICK:case a.Hg.TOOLTIP_SHOW:case a.Hg.TOOLTIP_HIDE:}})),Or([a.lh.RSEME_KICKED,a.lh.RSEME_PETS_FORBIDDEN_IN_HOTEL,a.lh.RSEME_PETS_FORBIDDEN_IN_FLAT,a.lh.RSEME_MAX_PETS,a.lh.RSEME_MAX_NUMBER_OF_OWN_PETS,a.lh.RSEME_NO_FREE_TILES_FOR_PET,a.lh.RSEME_SELECTED_TILE_NOT_FREE_FOR_PET,a.lh.RSEME_BOTS_FORBIDDEN_IN_HOTEL,a.lh.RSEME_BOTS_FORBIDDEN_IN_FLAT,a.lh.RSEME_BOT_LIMIT_REACHED,a.lh.RSEME_SELECTED_TILE_NOT_FREE_FOR_BOT,a.lh.RSEME_BOT_NAME_NOT_ACCEPTED],(e=>{let t=We("error.title"),n="";switch(e.type){case a.lh.RSEME_MAX_PETS:n=We("room.error.max_pets");break;case a.lh.RSEME_MAX_NUMBER_OF_OWN_PETS:n=We("room.error.max_own_pets");break;case a.lh.RSEME_KICKED:n=We("room.error.kicked"),t=We("generic.alert.title");break;case a.lh.RSEME_PETS_FORBIDDEN_IN_HOTEL:n=We("room.error.pets.forbidden_in_hotel");break;case a.lh.RSEME_PETS_FORBIDDEN_IN_FLAT:n=We("room.error.pets.forbidden_in_flat");break;case a.lh.RSEME_NO_FREE_TILES_FOR_PET:n=We("room.error.pets.no_free_tiles");break;case a.lh.RSEME_SELECTED_TILE_NOT_FREE_FOR_PET:n=We("room.error.pets.selected_tile_not_free");break;case a.lh.RSEME_BOTS_FORBIDDEN_IN_HOTEL:n=We("room.error.bots.forbidden_in_hotel");break;case a.lh.RSEME_BOTS_FORBIDDEN_IN_FLAT:n=We("room.error.bots.forbidden_in_flat");break;case a.lh.RSEME_BOT_LIMIT_REACHED:n=We("room.error.max_bots");break;case a.lh.RSEME_SELECTED_TILE_NOT_FREE_FOR_BOT:n=We("room.error.bots.selected_tile_not_free");break;case a.lh.RSEME_BOT_NAME_NOT_ACCEPTED:n=We("room.error.bots.name.not.accepted");break;default:return}s(n,fs.DEFAULT,null,null,t)})),Object(an.jsxs)(an.Fragment,{children:[Object(an.jsx)(vu,{}),Object(an.jsx)(Ru,{}),Object(an.jsx)(Tu,{}),Object(an.jsx)(Du,{}),Object(an.jsx)(bj,{}),Object(an.jsx)(mj,{}),Object(an.jsx)(gj,{}),Object(an.jsx)(ku,{}),Object(an.jsx)(Au,{}),Object(an.jsx)(fj,{}),Object(an.jsx)(Uu,{})]})},_j=e=>{const{roomSession:t=null}=Ac(),s=Object(c.useRef)();return Object(c.useEffect)((()=>{const e=o().renderer.view;if(!e)return;e.onclick=e=>S(e),e.onmousemove=e=>S(e),e.onmousedown=e=>S(e),e.onmouseup=e=>S(e),e.ontouchstart=e=>k(e),e.ontouchmove=e=>k(e),e.ontouchend=e=>k(e),e.ontouchcancel=e=>k(e);const t=s.current;t&&t.appendChild(e)}),[]),Object(an.jsx)(on,{fit:!0,innerRef:s,className:!t&&"d-none",children:t&&Object(an.jsxs)(an.Fragment,{children:[Object(an.jsx)(xj,{}),t.isSpectator&&Object(an.jsx)(Xd,{})]})})},Ij=e=>{const{useGuideTool:t=!1,unseenAchievementCount:s=0,setMeExpanded:n=null,children:r=null,...i}=e,o=Object(c.useRef)();return Object(c.useEffect)((()=>{const e=he();e&&C().selectRoomObject(e.roomId,e.ownRoomIndex,a.Wg.UNIT)}),[]),Object(c.useEffect)((()=>{const e=e=>n(!1);return document.addEventListener("click",e),()=>document.removeEventListener(a.Ve.MOUSE_CLICK,e)}),[n]),Object(an.jsxs)(hn,{innerRef:o,alignItems:"center",className:"nitro-toolbar-me p-2",gap:2,children:[t&&Object(an.jsx)(on,{pointer:!0,className:"navigation-item icon icon-me-helper-tool",onClick:e=>$e(new Ar(Ar.TOGGLE_GUIDE_TOOL))}),Object(an.jsx)(on,{pointer:!0,className:"navigation-item icon icon-me-achievements",onClick:e=>m("achievements/toggle"),children:s>0&&Object(an.jsx)(Bn,{count:s})}),Object(an.jsx)(on,{pointer:!0,className:"navigation-item icon icon-me-profile",onClick:e=>Xs(F().userId)}),Object(an.jsx)(on,{pointer:!0,className:"navigation-item icon icon-me-rooms",onClick:e=>m("navigator/search/myworld_view")}),Object(an.jsx)(on,{pointer:!0,className:"navigation-item icon icon-me-clothing",onClick:e=>m("avatar-editor/toggle")}),Object(an.jsx)(on,{pointer:!0,className:"navigation-item icon icon-me-settings",onClick:e=>m("user-settings/toggle")}),r]})},Ej=e=>{const{isInRoom:t}=e,[s,n]=Object(c.useState)(!1),[r,i]=Object(c.useState)(!1),{userFigure:o=null}=pi(),{getFullCount:l=0}=lc(),{getTotalUnseen:d=0}=xr(),{requests:u=[]}=ec(),{iconState:j=Vt.HIDDEN}=sc(),h=F().isModerator;pr(a.Bf,(e=>{const t=e.getParser();i(t.isAllowed(a.Cf.USE_GUIDE_TOOL))}));const b=Object(c.useCallback)(((e,t,s,n)=>{const r=document.body.getElementsByClassName(e)[0];if(!r)return;t.className="toolbar-icon-animation",t.style.visibility="visible",t.style.left=s+"px",t.style.top=n+"px",document.body.append(t);const c=r.getBoundingClientRect(),i=t.getBoundingClientRect(),o=i.x-c.x,l=i.y-c.y,d=Math.sqrt(o*o+l*l),u=500-Math.abs(1/d*100*500*.5),j=`ToolbarBouncing[${e}]`;a.Ue.getMotionByTag(j)||(a.Ue.runMotion(new a.Yf(new a.nj(u+8),new a.Hb(r,400,12))).tag=j);const h=new a.Yf(new a.Ib(new a.ne(t,u,c.x-i.x+20,c.y-i.y,100,1),1),new a.Fb(t));a.Ue.runMotion(h)}),[]);return mr(a.uf.ANIMATE_ICON,(e=>{b("icon-inventory",e.image,e.x,e.y)})),Object(an.jsxs)(an.Fragment,{children:[Object(an.jsx)(Jn,{type:Xn.FADE_IN,inProp:s,timeout:300,children:Object(an.jsx)(Ij,{useGuideTool:r,unseenAchievementCount:d,setMeExpanded:n})}),Object(an.jsxs)(hn,{alignItems:"center",justifyContent:"between",gap:2,className:"nitro-toolbar py-1 px-3",children:[Object(an.jsxs)(hn,{gap:2,alignItems:"center",children:[Object(an.jsxs)(hn,{alignItems:"center",gap:2,children:[Object(an.jsxs)(hn,{center:!0,pointer:!0,className:"navigation-item item-avatar "+(s?"active ":""),onClick:e=>n(!s),children:[Object(an.jsx)(kn,{figure:o,direction:2,position:"absolute"}),d>0&&Object(an.jsx)(Bn,{count:d})]}),t&&Object(an.jsx)(on,{pointer:!0,className:"navigation-item icon icon-habbo",onClick:e=>Oe()}),!t&&Object(an.jsx)(on,{pointer:!0,className:"navigation-item icon icon-house",onClick:e=>m("navigator/goto/home")}),Object(an.jsx)(on,{pointer:!0,className:"navigation-item icon icon-rooms",onClick:e=>m("navigator/toggle")}),Object(an.jsx)(on,{pointer:!0,className:"navigation-item icon icon-catalog",onClick:e=>m("catalog/toggle")}),Object(an.jsx)(on,{pointer:!0,className:"navigation-item icon icon-inventory",onClick:e=>m("inventory/toggle"),children:l>0&&Object(an.jsx)(Bn,{count:l})}),t&&Object(an.jsx)(on,{pointer:!0,className:"navigation-item icon icon-camera",onClick:e=>m("camera/toggle")}),h&&Object(an.jsx)(on,{pointer:!0,className:"navigation-item icon icon-modtools",onClick:e=>m("mod-tools/toggle")})]}),Object(an.jsx)(hn,{alignItems:"center",id:"toolbar-chat-input-container"})]}),Object(an.jsxs)(hn,{alignItems:"center",gap:2,children:[Object(an.jsxs)(hn,{gap:2,children:[Object(an.jsx)(on,{pointer:!0,className:"navigation-item icon icon-friendall",onClick:e=>m("friends/toggle"),children:u.length>0&&Object(an.jsx)(Bn,{count:u.length})}),(j===Vt.SHOW||j===Vt.UNREAD)&&Object(an.jsx)(on,{pointer:!0,className:`navigation-item icon icon-message ${j===Vt.UNREAD&&"is-unseen"}`,onClick:e=>Xt()})]}),Object(an.jsx)(on,{id:"toolbar-friend-bar-container",className:"d-none d-lg-block"})]})]})]})},Cj=e=>{const{badges:t=null,gap:s=1,justifyContent:n="between",...r}=e;return Object(an.jsx)(an.Fragment,{children:t&&t.length>0&&t.map(((e,t)=>Object(an.jsx)(Fn,{center:!0,children:Object(an.jsx)(Dn,{badgeCode:e},e)},e)))})},vj=e=>{const{relationships:t=null}=e,s=e=>{let{type:s}=e;const n=t&&t.relationshipStatusMap.hasKey(s)?t.relationshipStatusMap.getValue(s):null,r=a.dg.RELATIONSHIP_NAMES[s].toLocaleLowerCase();return Object(an.jsxs)(hn,{fullWidth:!0,gap:1,children:[Object(an.jsx)(hn,{center:!0,className:"user-relationship",children:Object(an.jsx)("i",{className:`nitro-friends-spritesheet icon-${r}`})}),Object(an.jsxs)(Fn,{grow:!0,gap:0,children:[Object(an.jsxs)(hn,{alignItems:"center",justifyContent:"between",className:"bg-white rounded px-2 py-1 user-relationship",children:[Object(an.jsxs)(ur,{small:!0,underline:!0,pointer:!0,onClick:e=>n&&n.randomFriendId>=1&&Xs(n.randomFriendId),children:[(!n||0===n.friendCount)&&We("extendedprofile.add.friends"),n&&n.friendCount>=1&&n.randomFriendName]}),n&&n.friendCount>=1&&Object(an.jsx)(hn,{center:!0,position:"relative",className:"avatar-image-container",children:Object(an.jsx)(kn,{figure:n.randomFriendFigure,headOnly:!0,direction:4})})]}),Object(an.jsxs)(ur,{small:!0,italics:!0,className:"user-relationship-count",children:[(!n||0===n.friendCount)&&We("extendedprofile.no.friends.in.this.category"),n&&n.friendCount>1&&We(`extendedprofile.relstatus.others.${r}`,["count"],[(n.friendCount-1).toString()]),"\xa0"]})]})]})};return Object(an.jsxs)(an.Fragment,{children:[Object(an.jsx)(s,{type:a.dg.HEART}),Object(an.jsx)(s,{type:a.dg.SMILE}),Object(an.jsx)(s,{type:a.dg.BOBBA})]})},Nj=e=>{const{relationships:t=null,friendsCount:s=null}=e;return Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsxs)(ur,{small:!0,children:[Object(an.jsx)("b",{children:We("extendedprofile.friends.count")})," ",s]}),Object(an.jsx)(ur,{bold:!0,small:!0,children:We("extendedprofile.relstatus")}),Object(an.jsx)(Fn,{children:Object(an.jsx)(vj,{relationships:t})})]})},Tj=e=>{const{itsMe:t=null,groups:s=null,onLeaveGroup:n=null,overflow:r="hidden",gap:i=2,...o}=e,[l,d]=Object(c.useState)(null),[u,j]=Object(c.useState)(null);return pr(a.nd,(e=>{const t=e.getParser();l&&l===t.id&&!t.flag&&j(t)})),Object(c.useEffect)((()=>{l&&Ee(new a.md(l,!1))}),[l]),Object(c.useEffect)((()=>{j(null),s.length>0&&d((e=>(e===s[0].groupId&&Ee(new a.md(s[0].groupId,!1)),s[0].groupId)))}),[s]),s&&s.length?Object(an.jsxs)(un,{overflow:r,gap:2,...o,children:[Object(an.jsx)(Fn,{alignItems:"center",size:2,overflow:"auto",children:Object(an.jsx)(jn,{overflow:null,columnCount:1,columnMinHeight:50,className:"user-groups-container",children:s.map(((e,s)=>Object(an.jsxs)(Vn,{overflow:"unset",itemActive:l===e.groupId,onClick:()=>d(e.groupId),className:"p-1",children:[t&&Object(an.jsx)("i",{className:"position-absolute end-0 top-0 z-index-1 icon icon-group-"+(e.favourite?"favorite":"not-favorite"),onClick:()=>(e=>{Ee(e.favourite?new a.Cd(e.groupId):new a.kd(e.groupId))})(e)}),Object(an.jsx)(Dn,{badgeCode:e.badgeCode,isGroup:!0})]},s)))})}),Object(an.jsx)(Fn,{size:10,overflow:"hidden",children:u&&Object(an.jsx)(Vo,{groupInformation:u,onClose:n})})]}):Object(an.jsx)(Fn,{center:!0,fullHeight:!0,children:Object(an.jsxs)(hn,{justifyContent:"center",gap:2,children:[Object(an.jsx)(on,{className:"no-group-spritesheet image-1"}),Object(an.jsx)(on,{className:"no-group-spritesheet image-2"}),Object(an.jsx)(on,{className:"no-group-spritesheet image-3"})]})})},Sj=e=>{const{userProfile:t=null}=e,[s,n]=Object(c.useState)(t.requestSent),r=t.id===F().userId,i=!s&&!r&&!t.isMyFriend&&!t.requestSent;return Object(c.useEffect)((()=>{n(t.requestSent)}),[t]),Object(an.jsxs)(hn,{gap:2,children:[Object(an.jsx)(Fn,{center:!0,className:"avatar-container",children:Object(an.jsx)(kn,{figure:t.figure,direction:2})}),Object(an.jsxs)(Fn,{children:[Object(an.jsxs)(Fn,{gap:0,children:[Object(an.jsx)(ur,{bold:!0,children:t.username}),Object(an.jsxs)(ur,{italics:!0,textBreak:!0,small:!0,children:[t.motto,"\xa0"]})]}),Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsxs)(ur,{small:!0,children:[Object(an.jsx)("b",{children:We("extendedprofile.created")})," ",t.registration]}),Object(an.jsxs)(ur,{small:!0,children:[Object(an.jsx)("b",{children:We("extendedprofile.last.login")})," ",a.Zb.format(t.secondsSinceLastVisit,".ago",2)]}),Object(an.jsxs)(ur,{small:!0,children:[Object(an.jsx)("b",{children:We("extendedprofile.achievementscore")})," ",t.achievementPoints]})]}),Object(an.jsxs)(hn,{gap:1,children:[t.isOnline&&Object(an.jsx)("i",{className:"icon icon-pf-online"}),!t.isOnline&&Object(an.jsx)("i",{className:"icon icon-pf-offline"}),Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[i&&Object(an.jsx)(ur,{small:!0,underline:!0,pointer:!0,onClick:()=>{n(!0),Ee(new a.mg(t.username))},children:We("extendedprofile.addasafriend")}),!i&&Object(an.jsxs)(an.Fragment,{children:[Object(an.jsx)("i",{className:"icon icon-pf-tick"}),r&&Object(an.jsx)(ur,{children:We("extendedprofile.me")}),t.isMyFriend&&Object(an.jsx)(ur,{children:We("extendedprofile.friend")}),(s||t.requestSent)&&Object(an.jsx)(ur,{children:We("extendedprofile.friendrequestsent")})]})]})]})]})]})},wj=e=>{const[t,s]=Object(c.useState)(null),[n,r]=Object(c.useState)([]),[i,o]=Object(c.useState)(null),l=Object(c.useCallback)((()=>{t&&t.id===F().userId&&Xs(t.id)}),[t]);return pr(a.Ri,(e=>{const s=e.getParser();t&&s.userId===t.id&&r(s.badges)})),pr(a.eg,(e=>{const s=e.getParser();t&&s.userId===t.id&&o(s)})),pr(a.Zi,(e=>{const t=e.getParser();let n=!1;s((e=>(e&&e.id&&(n=e.id===t.id),t))),n||(r([]),o(null)),Ee(new a.Qi(t.id)),Ee(new a.aj(t.id))})),mr(a.Fg.SELECTED,(e=>{if(!t)return;if(e.category!==a.Wg.UNIT)return;const s=he().userDataManager.getUserDataByIndex(e.objectId);s.type===a.ah.USER&&Xs(s.webID)})),t?Object(an.jsxs)(yn,{uniqueKey:"nitro-user-profile",theme:"primary-slim",className:"user-profile",children:[Object(an.jsx)(vn,{headerText:We("extendedprofile.caption"),onCloseClick:()=>{s(null),r([]),o(null)}}),Object(an.jsxs)(In,{overflow:"hidden",children:[Object(an.jsxs)(un,{fullHeight:!1,gap:2,children:[Object(an.jsxs)(Fn,{size:7,gap:1,className:"user-container pe-2",children:[Object(an.jsx)(Sj,{userProfile:t}),Object(an.jsx)(un,{columnCount:5,fullHeight:!0,className:"bg-muted rounded px-2 py-1",children:Object(an.jsx)(Cj,{fullWidth:!0,center:!0,badges:n})})]}),Object(an.jsx)(Fn,{size:5,children:i&&Object(an.jsx)(Nj,{relationships:i,friendsCount:t.friendsCount})})]}),Object(an.jsx)(hn,{alignItems:"center",className:"rooms-button-container px-2 py-1",children:Object(an.jsxs)(hn,{alignItems:"center",gap:1,onClick:e=>m(`navigator/search/hotel_view/owner:${t.username}`),children:[Object(an.jsx)("i",{className:"icon icon-rooms"}),Object(an.jsx)(ur,{bold:!0,underline:!0,pointer:!0,children:We("extendedprofile.rooms")})]})}),Object(an.jsx)(Tj,{fullWidth:!0,itsMe:t.id===F().userId,groups:t.groups,onLeaveGroup:l})]})]}):null},Rj=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)(null),[i,o]=Vr(),[d,u]=zr(),j=Object(c.useCallback)(((e,t)=>{let c=!0;const i=n.clone();switch(e){case"close_view":return s(!1),void(c=!1);case"oldchat":i.oldChat=t,Ee(new a.dj(i.oldChat));break;case"room_invites":i.roomInvites=t,Ee(new a.ej(i.roomInvites));break;case"camera_follow":i.cameraFollow=t,Ee(new a.bj(i.cameraFollow));break;case"system_volume":i.volumeSystem=t,i.volumeSystem=Math.max(0,i.volumeSystem),i.volumeSystem=Math.min(100,i.volumeSystem);break;case"furni_volume":i.volumeFurni=t,i.volumeFurni=Math.max(0,i.volumeFurni),i.volumeFurni=Math.min(100,i.volumeFurni);break;case"trax_volume":i.volumeTrax=t,i.volumeTrax=Math.max(0,i.volumeTrax),i.volumeTrax=Math.min(100,i.volumeTrax)}c&&r(i),ze(i)}),[n]),h=Object(c.useCallback)((e=>{if("volume"===e)Ee(new a.fj(Math.round(n.volumeSystem),Math.round(n.volumeFurni),Math.round(n.volumeTrax)))}),[n]);return pr(a.cj,(e=>{const t=e.getParser(),s=new a.pf;s.volumeSystem=t.volumeSystem,s.volumeFurni=t.volumeFurni,s.volumeTrax=t.volumeTrax,s.oldChat=t.oldChat,s.roomInvites=t.roomInvites,s.cameraFollow=t.cameraFollow,s.flags=t.flags,s.chatType=t.chatType,r(s),ze(s)})),Object(c.useEffect)((()=>{const e={linkReceived:e=>{const t=e.split("/");if(!(t.length<2))switch(t[1]){case"show":return void s(!0);case"hide":return void s(!1);case"toggle":return void s((e=>!e))}},eventUrlPrefix:"user-settings/"};return l(e),()=>E(e)}),[]),Object(c.useEffect)((()=>{n&&$e(n)}),[n]),t&&n?Object(an.jsxs)(yn,{uniqueKey:"user-settings",className:"user-settings-window",theme:"primary-slim",children:[Object(an.jsx)(vn,{headerText:We("widget.memenu.settings.title"),onCloseClick:e=>j("close_view")}),Object(an.jsxs)(In,{className:"text-black",children:[Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)("input",{className:"form-check-input",type:"checkbox",checked:n.oldChat,onChange:e=>j("oldchat",e.target.checked)}),Object(an.jsx)(ur,{children:We("memenu.settings.chat.prefer.old.chat")})]}),Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)("input",{className:"form-check-input",type:"checkbox",checked:n.roomInvites,onChange:e=>j("room_invites",e.target.checked)}),Object(an.jsx)(ur,{children:We("memenu.settings.other.ignore.room.invites")})]}),Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)("input",{className:"form-check-input",type:"checkbox",checked:n.cameraFollow,onChange:e=>j("camera_follow",e.target.checked)}),Object(an.jsx)(ur,{children:We("memenu.settings.other.disable.room.camera.follow")})]}),Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)("input",{className:"form-check-input",type:"checkbox",checked:i,onChange:e=>o(e.target.checked)}),Object(an.jsx)(ur,{children:We("memenu.settings.other.place.multiple.objects")})]}),Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)("input",{className:"form-check-input",type:"checkbox",checked:d,onChange:e=>u(e.target.checked)}),Object(an.jsx)(ur,{children:We("memenu.settings.other.skip.purchase.confirmation")})]})]}),Object(an.jsxs)(Fn,{children:[Object(an.jsx)(ur,{bold:!0,children:We("widget.memenu.settings.volume")}),Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{children:We("widget.memenu.settings.volume.ui")}),Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)(fn.a,{icon:0===n.volumeSystem?"volume-mute":n.volumeSystem>0?"volume-down":null,className:n.volumeSystem>=50?"text-muted":""}),Object(an.jsx)("input",{type:"range",className:"custom-range w-100",min:"0",max:"100",step:"1",id:"volumeSystem",value:n.volumeSystem,onChange:e=>j("system_volume",e.target.value),onMouseUp:()=>h("volume")}),Object(an.jsx)(fn.a,{icon:"volume-up",className:n.volumeSystem<50?"text-muted":""})]})]}),Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{children:We("widget.memenu.settings.volume.furni")}),Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)(fn.a,{icon:0===n.volumeFurni?"volume-mute":n.volumeFurni>0?"volume-down":null,className:n.volumeFurni>=50?"text-muted":""}),Object(an.jsx)("input",{type:"range",className:"custom-range w-100",min:"0",max:"100",step:"1",id:"volumeFurni",value:n.volumeFurni,onChange:e=>j("furni_volume",e.target.value),onMouseUp:()=>h("volume")}),Object(an.jsx)(fn.a,{icon:"volume-up",className:n.volumeFurni<50?"text-muted":""})]})]}),Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{children:We("widget.memenu.settings.volume.trax")}),Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)(fn.a,{icon:0===n.volumeTrax?"volume-mute":n.volumeTrax>0?"volume-down":null,className:n.volumeTrax>=50?"text-muted":""}),Object(an.jsx)("input",{type:"range",className:"custom-range w-100",min:"0",max:"100",step:"1",id:"volumeTrax",value:n.volumeTrax,onChange:e=>j("trax_volume",e.target.value),onMouseUp:()=>h("volume")}),Object(an.jsx)(fn.a,{icon:"volume-up",className:n.volumeTrax<50?"text-muted":""})]})]})]})]})]}):null},yj=e=>{const{trigger:t=null,furniIds:s=[]}=ri();return Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:We("wiredfurni.pickfurnis.caption",["count","limit"],[s.length.toString(),t.maximumItemSelectionCount.toString()])}),Object(an.jsx)(ur,{small:!0,children:We("wiredfurni.pickfurnis.desc")})]})},kj=e=>{const{wiredType:t="",requiresFurni:s=tn.STUFF_SELECTION_OPTION_NONE,save:n=null,validate:r=null,children:i=null,hasSpecialInput:a=!1}=e,[o,l]=Object(c.useState)(null),[d,u]=Object(c.useState)(null),[j,h]=Object(c.useState)(!1),{trigger:b=null,setTrigger:g=null,setIntParams:m=null,setStringParam:O=null,setFurniIds:p=null,setAllowsFurni:f=null,saveWired:x=null}=ri(),_=()=>g(null);return Object(c.useEffect)((()=>{j&&(x(),h(!1))}),[j,x]),Object(c.useEffect)((()=>{if(!b)return;const e=b.spriteId||-1,t=F().getFloorItemData(e);t?(l(t.name),u(t.description)):(l("NAME: "+e),u("NAME: "+e)),a&&(m(b.intData),O(b.stringData)),s>tn.STUFF_SELECTION_OPTION_NONE&&p((e=>(e&&e.length&&nn.clearSelectionShaderFromFurni(e),b.selectedItems&&b.selectedItems.length?(nn.applySelectionShaderToFurni(b.selectedItems),b.selectedItems):[])))}),[b,a,s,m,O,p]),Object(c.useEffect)((()=>{f(s)}),[s,f]),Object(an.jsxs)(yn,{uniqueKey:"nitro-wired",className:"nitro-wired",theme:"primary-slim",children:[Object(an.jsx)(vn,{headerText:We("wiredfurni.title"),onCloseClick:_}),Object(an.jsxs)(In,{children:[Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)("i",{className:`icon icon-wired-${t}`}),Object(an.jsx)(ur,{bold:!0,children:o})]}),Object(an.jsx)(ur,{small:!0,children:d})]}),!!i&&Object(an.jsx)("hr",{className:"m-0 bg-dark"}),i,s>tn.STUFF_SELECTION_OPTION_NONE&&Object(an.jsxs)(an.Fragment,{children:[Object(an.jsx)("hr",{className:"m-0 bg-dark"}),Object(an.jsx)(yj,{})]}),Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)(bn,{fullWidth:!0,variant:"success",onClick:()=>{r&&!r()||(n&&n(),h(!0))},children:We("wiredfurni.ready")}),Object(an.jsx)(bn,{fullWidth:!0,variant:"secondary",onClick:_,children:We("cancel")})]})]})]})},Aj=e=>{const{requiresFurni:t=tn.STUFF_SELECTION_OPTION_NONE,save:s=null,hasSpecialInput:n=!1,children:r=null}=e,{trigger:i=null,actionDelay:a=0,setActionDelay:o=null}=ri();return Object(c.useEffect)((()=>{o(i.delayInPulses)}),[i,o]),Object(an.jsxs)(kj,{wiredType:"action",requiresFurni:t,save:s,hasSpecialInput:n,children:[r,!!r&&Object(an.jsx)("hr",{className:"m-0 bg-dark"}),Object(an.jsxs)(Fn,{children:[Object(an.jsx)(ur,{bold:!0,children:We("wiredfurni.params.delay",["seconds"],[Qs(a)])}),Object(an.jsx)(Fi.a,{className:"nitro-slider",min:0,max:20,value:a,onChange:e=>o(e)})]})]})},Dj=e=>{const[t,s]=Object(c.useState)(""),[n,r]=Object(c.useState)(""),{trigger:i=null,setStringParam:a=null}=ri();return Object(c.useEffect)((()=>{const e=i.stringData.split(rn);e.length>0&&s(e[0]),e.length>1&&r(e[1].length>0?e[1]:"hd-180-1.ch-210-66.lg-270-82.sh-290-81")}),[i]),Object(an.jsxs)(Aj,{requiresFurni:tn.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>a(t+rn+n),children:[Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:We("wiredfurni.params.bot.name")}),Object(an.jsx)("input",{type:"text",className:"form-control form-control-sm",maxLength:32,value:t,onChange:e=>s(e.target.value)})]}),Object(an.jsxs)(hn,{center:!0,children:[Object(an.jsx)(kn,{figure:n,direction:4}),Object(an.jsx)(bn,{onClick:e=>r(F().figure),children:We("wiredfurni.params.capture.figure")})]})]})},Lj=e=>{const[t,s]=Object(c.useState)(""),[n,r]=Object(c.useState)(-1),{trigger:i=null,setStringParam:a=null,setIntParams:o=null}=ri();return Object(c.useEffect)((()=>{s(i.stringData),r(i.intData.length>0?i.intData[0]:0)}),[i]),Object(an.jsxs)(Aj,{requiresFurni:tn.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>{a(t),o([n])},children:[Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:We("wiredfurni.params.bot.name")}),Object(an.jsx)("input",{type:"text",className:"form-control form-control-sm",maxLength:32,value:t,onChange:e=>s(e.target.value)})]}),Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)("input",{className:"form-check-input",type:"radio",name:"followMode",id:"followMode1",checked:1===n,onChange:e=>r(1)}),Object(an.jsx)(ur,{children:We("wiredfurni.params.start.following")})]}),Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)("input",{className:"form-check-input",type:"radio",name:"followMode",id:"followMode2",checked:0===n,onChange:e=>r(0)}),Object(an.jsx)(ur,{children:We("wiredfurni.params.stop.following")})]})]})]})},Pj=[2,5,7,8,9,10,27],Uj=e=>{const[t,s]=Object(c.useState)(""),[n,r]=Object(c.useState)(-1),{trigger:i=null,setStringParam:a=null,setIntParams:o=null}=ri();return Object(c.useEffect)((()=>{s(i.stringData),r(i.intData.length>0?i.intData[0]:0)}),[i]),Object(an.jsxs)(Aj,{requiresFurni:tn.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>{a(t),o([n])},children:[Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:We("wiredfurni.params.bot.name")}),Object(an.jsx)("input",{type:"text",className:"form-control form-control-sm",maxLength:32,value:t,onChange:e=>s(e.target.value)})]}),Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:We("wiredfurni.params.handitem")}),Object(an.jsxs)("select",{className:"form-select form-select-sm",value:n,onChange:e=>r(parseInt(e.target.value)),children:[Object(an.jsx)("option",{value:"0",children:"------"}),Pj.map((e=>Object(an.jsx)("option",{value:e,children:We(`handitem${e}`)},e)))]})]})]})},Mj=e=>{const[t,s]=Object(c.useState)(""),{trigger:n=null,setStringParam:r=null}=ri();return Object(c.useEffect)((()=>{s(n.stringData)}),[n]),Object(an.jsx)(Aj,{requiresFurni:tn.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:!0,save:()=>r(t),children:Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:We("wiredfurni.params.bot.name")}),Object(an.jsx)("input",{type:"text",className:"form-control form-control-sm",maxLength:32,value:t,onChange:e=>s(e.target.value)})]})})},Fj=e=>{const[t,s]=Object(c.useState)(""),[n,r]=Object(c.useState)(""),[i,a]=Object(c.useState)(-1),{trigger:o=null,setStringParam:l=null,setIntParams:d=null}=ri();return Object(c.useEffect)((()=>{const e=o.stringData.split(rn);e.length>0&&s(e[0]),e.length>1&&r(e[1].length>0?e[1]:""),a(o.intData.length>0?o.intData[0]:0)}),[o]),Object(an.jsxs)(Aj,{requiresFurni:tn.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>{l(t+rn+n),d([i])},children:[Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:We("wiredfurni.params.bot.name")}),Object(an.jsx)("input",{type:"text",className:"form-control form-control-sm",maxLength:32,value:t,onChange:e=>s(e.target.value)})]}),Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:We("wiredfurni.params.message")}),Object(an.jsx)("input",{type:"text",className:"form-control form-control-sm",maxLength:p("wired.action.bot.talk.to.avatar.max.length",64),value:n,onChange:e=>r(e.target.value)})]}),Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)("input",{className:"form-check-input",type:"radio",name:"talkMode",id:"talkMode1",checked:0===i,onChange:e=>a(0)}),Object(an.jsx)(ur,{children:We("wiredfurni.params.talk")})]}),Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)("input",{className:"form-check-input",type:"radio",name:"talkMode",id:"talkMode2",checked:1===i,onChange:e=>a(1)}),Object(an.jsx)(ur,{children:We("wiredfurni.params.whisper")})]})]})]})},Bj=e=>{const[t,s]=Object(c.useState)(""),[n,r]=Object(c.useState)(""),[i,a]=Object(c.useState)(-1),{trigger:o=null,setStringParam:l=null,setIntParams:d=null}=ri();return Object(c.useEffect)((()=>{const e=o.stringData.split(rn);e.length>0&&s(e[0]),e.length>1&&r(e[1].length>0?e[1]:""),a(o.intData.length>0?o.intData[0]:0)}),[o]),Object(an.jsxs)(Aj,{requiresFurni:tn.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>{l(t+rn+n),d([i])},children:[Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:We("wiredfurni.params.bot.name")}),Object(an.jsx)("input",{type:"text",className:"form-control form-control-sm",maxLength:32,value:t,onChange:e=>s(e.target.value)})]}),Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:We("wiredfurni.params.message")}),Object(an.jsx)("input",{type:"text",className:"form-control form-control-sm",maxLength:p("wired.action.bot.talk.max.length",64),value:n,onChange:e=>r(e.target.value)})]}),Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)("input",{className:"form-check-input",type:"radio",name:"talkMode",id:"talkMode1",checked:0===i,onChange:e=>a(0)}),Object(an.jsx)(ur,{children:We("wiredfurni.params.talk")})]}),Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)("input",{className:"form-check-input",type:"radio",name:"talkMode",id:"talkMode2",checked:1===i,onChange:e=>a(1)}),Object(an.jsx)(ur,{children:We("wiredfurni.params.shout")})]})]})]})},Hj=e=>{const[t,s]=Object(c.useState)(""),{trigger:n=null,setStringParam:r=null}=ri();return Object(c.useEffect)((()=>{s(n.stringData)}),[n]),Object(an.jsx)(Aj,{requiresFurni:tn.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:!0,save:()=>r(t),children:Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:We("wiredfurni.params.bot.name")}),Object(an.jsx)("input",{type:"text",className:"form-control form-control-sm",maxLength:32,value:t,onChange:e=>s(e.target.value)})]})})},Gj=e=>Object(an.jsx)(Aj,{requiresFurni:tn.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT,hasSpecialInput:!1,save:null}),Wj=e=>Object(an.jsx)(Aj,{requiresFurni:tn.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT,hasSpecialInput:!1,save:null}),Vj=e=>{const[t,s]=Object(c.useState)(""),{trigger:n=null,setStringParam:r=null}=ri();return Object(c.useEffect)((()=>{s(n.stringData)}),[n]),Object(an.jsx)(Aj,{requiresFurni:tn.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>r(t),children:Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:We("wiredfurni.params.message")}),Object(an.jsx)("input",{type:"text",className:"form-control form-control-sm",value:t,onChange:e=>s(e.target.value),maxLength:p("wired.action.chat.max.length",100)})]})})},qj=e=>Object(an.jsx)(Aj,{requiresFurni:tn.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT,hasSpecialInput:!1,save:null}),zj=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)(1),[i,a]=Object(c.useState)(!1),[o,l]=Object(c.useState)(1),[d,u]=Object(c.useState)(1),[j,h]=Object(c.useState)([]),{trigger:b=null,setIntParams:g=null,setStringParam:m=null}=ri(),O=Object(c.useCallback)((()=>{h((e=>[...e,{isBadge:!1,itemCode:"",probability:null}]))}),[h]),p=Object(c.useCallback)((e=>{h((t=>{const s=Array.from(t);return s.splice(e,1),s}))}),[h]),f=Object(c.useCallback)(((e,t,s,n)=>{const r=Array.from(j),c=r[e];c&&(c.isBadge=t,c.itemCode=s,c.probability=n,h(r))}),[j,h]),x=Object(c.useCallback)((()=>{let e=[];for(const t of j){if(!t.itemCode)continue;const s=[t.isBadge?"0":"1",t.itemCode,t.probability.toString()];e.push(s.join(","))}e.length>0&&(m(e.join(";")),g([n,i?1:0,o,d]))}),[n,i,o,d,j,g,m]);return Object(c.useEffect)((()=>{const e=[];if(b.stringData.length>0&&b.stringData.includes(";")){const t=b.stringData.split(";");for(const s of t){const t=s.split(",");3===t.length&&e.push({isBadge:"0"===t[0],itemCode:t[1],probability:Number(t[2])})}}0===e.length&&e.push({isBadge:!1,itemCode:"",probability:null}),r(b.intData.length>0?b.intData[0]:0),a(b.intData.length>1&&1===b.intData[1]),l(b.intData.length>2?b.intData[2]:0),u(b.intData.length>3?b.intData[3]:0),s(b.intData.length>3&&b.intData[3]>0),h(e)}),[b]),Object(an.jsxs)(Aj,{requiresFurni:tn.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:x,children:[Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)("input",{className:"form-check-input",type:"checkbox",id:"limitEnabled",onChange:e=>s(e.target.checked)}),Object(an.jsx)(ur,{children:We("wiredfurni.params.prizelimit",["amount"],[t?o.toString():""])})]}),!t&&Object(an.jsx)(ur,{center:!0,small:!0,className:"bg-muted rounded p-1",children:"Reward limit not set. Make sure rewards are badges or non-tradeable items."}),t&&Object(an.jsx)(Fi.a,{className:"nitro-slider",min:1,max:1e3,value:o,onChange:e=>l(e)}),Object(an.jsx)("hr",{className:"m-0 bg-dark"}),Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:"How often can a user be rewarded?"}),Object(an.jsxs)(hn,{gap:1,children:[Object(an.jsxs)("select",{className:"form-select form-select-sm w-100",value:n,onChange:e=>r(Number(e.target.value)),children:[Object(an.jsx)("option",{value:"0",children:"Once"}),Object(an.jsxs)("option",{value:"3",children:["Once every ",d," minutes"]}),Object(an.jsxs)("option",{value:"2",children:["Once every ",d," hours"]}),Object(an.jsxs)("option",{value:"1",children:["Once every ",d," days"]})]}),n>0&&Object(an.jsx)("input",{type:"number",className:"form-control form-control-sm",value:d,onChange:e=>u(Number(e.target.value))})]})]}),Object(an.jsx)("hr",{className:"m-0 bg-dark"}),Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)("input",{className:"form-check-input",type:"checkbox",id:"uniqueRewards",checked:i,onChange:e=>a(e.target.checked)}),Object(an.jsx)(ur,{children:"Unique rewards"})]}),Object(an.jsx)(ur,{center:!0,small:!0,className:"bg-muted rounded p-1",children:"If checked each reward will be given once to each user. This will disable the probabilities option."}),Object(an.jsx)("hr",{className:"m-0 bg-dark"}),Object(an.jsxs)(hn,{justifyContent:"between",alignItems:"center",children:[Object(an.jsx)(ur,{bold:!0,children:"Rewards"}),Object(an.jsx)(bn,{variant:"success",onClick:O,children:Object(an.jsx)(fn.a,{icon:"plus"})})]}),Object(an.jsx)(Fn,{gap:1,children:j&&j.map(((e,t)=>Object(an.jsxs)(hn,{gap:1,children:[Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)("input",{className:"form-check-input",type:"checkbox",checked:e.isBadge,onChange:s=>f(t,s.target.checked,e.itemCode,e.probability)}),Object(an.jsx)(ur,{small:!0,children:"Badge?"})]}),Object(an.jsx)("input",{type:"text",className:"form-control form-control-sm",value:e.itemCode,onChange:s=>f(t,e.isBadge,s.target.value,e.probability),placeholder:"Item Code"}),Object(an.jsx)("input",{type:"number",className:"form-control form-control-sm",value:e.probability,onChange:s=>f(t,e.isBadge,e.itemCode,Number(s.target.value)),placeholder:"Probability"}),t>0&&Object(an.jsx)(bn,{variant:"danger",onClick:e=>p(t),children:Object(an.jsx)(fn.a,{icon:"trash"})})]},t)))})]})},Yj=e=>{const[t,s]=Object(c.useState)(1),[n,r]=Object(c.useState)(1),[i,a]=Object(c.useState)(1),{trigger:o=null,setIntParams:l=null}=ri();return Object(c.useEffect)((()=>{o.intData.length>=2?(s(o.intData[0]),r(o.intData[1]),a(o.intData[2])):(s(1),r(1),a(1))}),[o]),Object(an.jsxs)(Aj,{requiresFurni:tn.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>l([t,n,i]),children:[Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:We("wiredfurni.params.setpoints",["points"],[t.toString()])}),Object(an.jsx)(Fi.a,{className:"nitro-slider",min:1,max:100,value:t,onChange:e=>s(e)})]}),Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:We("wiredfurni.params.settimesingame",["times"],[n.toString()])}),Object(an.jsx)(Fi.a,{className:"nitro-slider",min:1,max:10,value:n,onChange:e=>r(e)})]}),Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:We("wiredfurni.params.team")}),[1,2,3,4].map((e=>Object(an.jsxs)(hn,{gap:1,children:[Object(an.jsx)("input",{className:"form-check-input",type:"radio",name:"selectedTeam",id:`selectedTeam${e}`,checked:i===e,onChange:t=>a(e)}),Object(an.jsx)(ur,{children:We("wiredfurni.params.team."+e)})]},e)))]})]})},$j=e=>{const[t,s]=Object(c.useState)(1),[n,r]=Object(c.useState)(1),{trigger:i=null,setIntParams:a=null}=ri();return Object(c.useEffect)((()=>{i.intData.length>=2?(s(i.intData[0]),r(i.intData[1])):(s(1),r(1))}),[i]),Object(an.jsxs)(Aj,{requiresFurni:tn.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>a([t,n]),children:[Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:We("wiredfurni.params.setpoints",["points"],[t.toString()])}),Object(an.jsx)(Fi.a,{className:"nitro-slider",min:1,max:100,value:t,onChange:e=>s(e)})]}),Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:We("wiredfurni.params.settimesingame",["times"],[n.toString()])}),Object(an.jsx)(Fi.a,{className:"nitro-slider",min:1,max:10,value:n,onChange:e=>r(e)})]})]})},Kj=e=>{const[t,s]=Object(c.useState)(-1),{trigger:n=null,setIntParams:r=null}=ri();return Object(c.useEffect)((()=>{s(n.intData.length>0?n.intData[0]:0)}),[n]),Object(an.jsx)(Aj,{requiresFurni:tn.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>r([t]),children:Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:We("wiredfurni.params.team")}),[1,2,3,4].map((e=>Object(an.jsxs)(hn,{gap:1,children:[Object(an.jsx)("input",{className:"form-check-input",type:"radio",name:"selectedTeam",id:`selectedTeam${e}`,checked:t===e,onChange:t=>s(e)}),Object(an.jsx)(ur,{children:We(`wiredfurni.params.team.${e}`)})]},e)))]})})},Xj=e=>{const[t,s]=Object(c.useState)(""),{trigger:n=null,setStringParam:r=null}=ri();return Object(c.useEffect)((()=>{s(n.stringData)}),[n]),Object(an.jsx)(Aj,{requiresFurni:tn.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>r(t),children:Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:We("wiredfurni.params.message")}),Object(an.jsx)("input",{type:"text",className:"form-control form-control-sm",value:t,onChange:e=>s(e.target.value),maxLength:p("wired.action.kick.from.room.max.length",100)})]})})},Qj=e=>Object(an.jsx)(Aj,{requiresFurni:tn.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!1,save:null}),Jj=[{value:0,icon:"ne"},{value:2,icon:"se"},{value:4,icon:"sw"},{value:6,icon:"nw"}],Zj=[0,1,2,3,4,5,6],eh=e=>{const[t,s]=Object(c.useState)(-1),[n,r]=Object(c.useState)(-1),{trigger:i=null,setIntParams:a=null}=ri();return Object(c.useEffect)((()=>{i.intData.length>=2?(s(i.intData[0]),r(i.intData[1])):(s(-1),r(-1))}),[i]),Object(an.jsxs)(Aj,{requiresFurni:tn.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT,hasSpecialInput:!0,save:()=>a([t,n]),children:[Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:We("wiredfurni.params.startdir")}),Object(an.jsx)(hn,{gap:1,children:Jj.map((e=>Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)("input",{className:"form-check-input",type:"radio",name:"movement",id:`movement${e.value}`,checked:t===e.value,onChange:t=>s(e.value)}),Object(an.jsx)(ur,{children:Object(an.jsx)("i",{className:`icon icon-${e.icon}`})})]},e.value)))})]}),Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:We("wiredfurni.params.turn")}),Zj.map((e=>Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)("input",{className:"form-check-input",type:"radio",name:"rotation",id:`rotation${e}`,checked:n===e,onChange:t=>r(e)}),Object(an.jsx)(ur,{children:We(`wiredfurni.params.turn.${e}`)})]},e)))]})]})},th=[{value:0,icon:"ne"},{value:2,icon:"se"},{value:4,icon:"sw"},{value:6,icon:"nw"}],sh=e=>{const[t,s]=Object(c.useState)(-1),[n,r]=Object(c.useState)(-1),{trigger:i=null,setIntParams:a=null}=ri();return Object(c.useEffect)((()=>{i.intData.length>=2?(s(i.intData[1]),r(i.intData[0])):(s(-1),r(-1))}),[i]),Object(an.jsxs)(Aj,{requiresFurni:tn.STUFF_SELECTION_OPTION_BY_ID_OR_BY_TYPE,hasSpecialInput:!0,save:()=>a([n,t]),children:[Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:We("wiredfurni.params.emptytiles",["tiles"],[t.toString()])}),Object(an.jsx)(Fi.a,{className:"nitro-slider",min:1,max:5,value:t,onChange:e=>s(e)})]}),Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:We("wiredfurni.params.startdir")}),Object(an.jsx)(hn,{gap:1,children:th.map((e=>Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)("input",{className:"form-check-input",type:"radio",name:"movement",id:`movement${e.value}`,checked:n===e.value,onChange:t=>r(e.value)}),Object(an.jsx)(ur,{children:Object(an.jsx)("i",{className:`icon icon-${e.icon}`})})]},e.value)))})]})]})},nh=[{value:4,icon:"ne"},{value:5,icon:"se"},{value:6,icon:"sw"},{value:7,icon:"nw"},{value:2,icon:"mv-2"},{value:3,icon:"mv-3"},{value:1,icon:"mv-1"}],rh=[0,1,2,3],ch=e=>{const[t,s]=Object(c.useState)(-1),[n,r]=Object(c.useState)(-1),{trigger:i=null,setIntParams:a=null}=ri();return Object(c.useEffect)((()=>{i.intData.length>=2?(s(i.intData[0]),r(i.intData[1])):(s(-1),r(-1))}),[i]),Object(an.jsxs)(Aj,{requiresFurni:tn.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT,hasSpecialInput:!0,save:()=>a([t,n]),children:[Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:We("wiredfurni.params.movefurni")}),Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)("input",{className:"form-check-input",type:"radio",name:"selectedTeam",id:"movement0",checked:0===t,onChange:e=>s(0)}),Object(an.jsx)(ur,{children:We("wiredfurni.params.movefurni.0")})]}),Object(an.jsxs)(hn,{gap:1,children:[nh.map((e=>Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)("input",{className:"form-check-input",type:"radio",name:"movement",id:`movement${e.value}`,checked:t===e.value,onChange:t=>s(e.value)}),Object(an.jsx)("i",{className:`icon icon-${e.icon}`})]},e.value))),Object(an.jsx)("div",{className:"col"})]})]}),Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:We("wiredfurni.params.rotatefurni")}),rh.map((e=>Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)("input",{className:"form-check-input",type:"radio",name:"rotation",id:`rotation${e}`,checked:n===e,onChange:t=>r(e)}),Object(an.jsxs)(ur,{children:[[1,2].includes(e)&&Object(an.jsx)("i",{className:`icon icon-rot-${e}`}),We(`wiredfurni.params.rotatefurni.${e}`)]})]},e)))]})]})},ih=e=>{const[t,s]=Object(c.useState)(-1),[n,r]=Object(c.useState)(""),{trigger:i=null,setIntParams:a=null,setStringParam:o=null}=ri();return Object(c.useEffect)((()=>{s(i.intData.length>0?i.intData[0]:0),r(i.stringData)}),[i]),Object(an.jsxs)(Aj,{requiresFurni:tn.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>{a([t]),o(n)},children:[Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:We("wiredfurni.params.length.minutes",["minutes"],[t.toString()])}),Object(an.jsx)(Fi.a,{className:"nitro-slider",min:1,max:10,value:t,onChange:e=>s(e)})]}),Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:We("wiredfurni.params.message")}),Object(an.jsx)("input",{type:"text",className:"form-control form-control-sm",value:n,onChange:e=>r(e.target.value),maxLength:p("wired.action.mute.user.max.length",100)})]})]})},ah=e=>Object(an.jsx)(Aj,{requiresFurni:tn.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!1,save:null}),oh=e=>{const[t,s]=Object(c.useState)(0),[n,r]=Object(c.useState)(0),[i,a]=Object(c.useState)(0),{trigger:o=null,setIntParams:l=null}=ri();return Object(c.useEffect)((()=>{s(o.getBoolean(0)?1:0),r(o.getBoolean(1)?1:0),a(o.getBoolean(2)?1:0)}),[o]),Object(an.jsx)(Aj,{requiresFurni:tn.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:!0,save:()=>l([t,n,i]),children:Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:We("wiredfurni.params.conditions")}),Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)("input",{className:"form-check-input",type:"checkbox",id:"stateFlag",checked:!!t,onChange:e=>s(e.target.checked?1:0)}),Object(an.jsx)(ur,{children:We("wiredfurni.params.condition.state")})]}),Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)("input",{className:"form-check-input",type:"checkbox",id:"directionFlag",checked:!!n,onChange:e=>r(e.target.checked?1:0)}),Object(an.jsx)(ur,{children:We("wiredfurni.params.condition.direction")})]}),Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)("input",{className:"form-check-input",type:"checkbox",id:"positionFlag",checked:!!i,onChange:e=>a(e.target.checked?1:0)}),Object(an.jsx)(ur,{children:We("wiredfurni.params.condition.position")})]})]})})},lh=e=>Object(an.jsx)(Aj,{requiresFurni:tn.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT,hasSpecialInput:!1,save:null}),dh=e=>Object(an.jsx)(Aj,{requiresFurni:tn.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT,hasSpecialInput:!1,save:null}),uh=e=>{const{requiresFurni:t=tn.STUFF_SELECTION_OPTION_NONE,save:s=null,hasSpecialInput:n=!1,children:r=null}=e;return Object(an.jsx)(kj,{wiredType:"condition",requiresFurni:t,hasSpecialInput:n,save:()=>s&&s(),children:r})},jh=[2,5,7,8,9,10,27],hh=e=>{const[t,s]=Object(c.useState)(-1),{trigger:n=null,setIntParams:r=null}=ri();return Object(c.useEffect)((()=>{s(n.intData.length>0?n.intData[0]:0)}),[n]),Object(an.jsx)(uh,{requiresFurni:tn.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>r([t]),children:Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:We("wiredfurni.params.handitem")}),Object(an.jsx)("select",{className:"form-select form-select-sm",value:t,onChange:e=>s(parseInt(e.target.value)),children:jh.map((e=>Object(an.jsx)("option",{value:e,children:We(`handitem${e}`)},e)))})]})})},bh=e=>Object(an.jsx)(uh,{requiresFurni:tn.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!1,save:null}),gh=e=>Object(an.jsx)(uh,{requiresFurni:tn.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:!1,save:null}),mh=[1,2,3,4],Oh=e=>{const[t,s]=Object(c.useState)(-1),{trigger:n=null,setIntParams:r=null}=ri();return Object(c.useEffect)((()=>{s(n.intData.length>0?n.intData[0]:0)}),[n]),Object(an.jsx)(uh,{requiresFurni:tn.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>r([t]),children:Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:We("wiredfurni.params.team")}),mh.map((e=>Object(an.jsxs)(hn,{gap:1,alignItems:"center",children:[Object(an.jsx)("input",{className:"form-check-input",type:"radio",name:"selectedTeam",id:`selectedTeam${e}`,checked:t===e,onChange:t=>s(e)}),Object(an.jsx)(ur,{children:We(`wiredfurni.params.team.${e}`)})]},e)))]})})},ph=e=>{const[t,s]=Object(c.useState)(""),{trigger:n=null,setStringParam:r=null}=ri();return Object(c.useEffect)((()=>{s(n.stringData)}),[n]),Object(an.jsx)(uh,{requiresFurni:tn.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>r(t),children:Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:We("wiredfurni.params.badgecode")}),Object(an.jsx)("input",{type:"text",className:"form-control form-control-sm",value:t,onChange:e=>s(e.target.value)})]})})},fh=e=>{const[t,s]=Object(c.useState)(-1),{trigger:n=null,setIntParams:r=null}=ri();return Object(c.useEffect)((()=>{s(n.intData.length>0?n.intData[0]:0)}),[n]),Object(an.jsx)(uh,{requiresFurni:tn.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>r([t]),children:Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:We("wiredfurni.params.effectid")}),Object(an.jsx)("input",{type:"number",className:"form-control form-control-sm",value:t,onChange:e=>s(parseInt(e.target.value))})]})})},xh=e=>{const[t,s]=Object(c.useState)(""),[n,r]=Object(c.useState)(""),{trigger:i=null,setIntParams:a=null}=ri();return Object(c.useEffect)((()=>{if(i.intData.length>=2){let e=new Date,t=new Date;i.intData[0]>0&&(e=new Date(1e3*i.intData[0])),i.intData[1]>0&&(t=new Date(1e3*i.intData[1])),s(en(e)),r(en(t))}}),[i]),Object(an.jsxs)(uh,{requiresFurni:tn.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>{let e=0,s=0;const r=new Date(t),c=new Date(n);r&&c&&(e=r.getTime()/1e3,s=c.getTime()/1e3),a([e,s])},children:[Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:We("wiredfurni.params.startdate")}),Object(an.jsx)("input",{type:"text",className:"form-control form-control-sm",value:t,onChange:e=>s(e.target.value)})]}),Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:We("wiredfurni.params.enddate")}),Object(an.jsx)("input",{type:"text",className:"form-control form-control-sm",value:n,onChange:e=>r(e.target.value)})]})]})},_h=e=>Object(an.jsx)(uh,{requiresFurni:tn.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:!1,save:null}),Ih=e=>{const[t,s]=Object(c.useState)(-1),{trigger:n=null,setIntParams:r=null}=ri();return Object(c.useEffect)((()=>{s(n.intData.length>0?n.intData[0]:0)}),[n]),Object(an.jsx)(uh,{requiresFurni:tn.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:!0,save:()=>r([t]),children:Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:We("wiredfurni.params.requireall")}),[0,1].map((e=>Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)("input",{className:"form-check-input",type:"radio",name:"requireAll",id:`requireAll${e}`,checked:t===e,onChange:t=>s(e)}),Object(an.jsx)(ur,{children:We("wiredfurni.params.requireall."+e)})]},e)))]})})},Eh=e=>{const[t,s]=Object(c.useState)(-1),{trigger:n=null,setIntParams:r=null}=ri();return Object(c.useEffect)((()=>{s(n.intData.length>0?n.intData[0]:0)}),[n]),Object(an.jsx)(uh,{requiresFurni:tn.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:!0,save:()=>r([t]),children:Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:We("wiredfurni.params.not_requireall")}),[0,1].map((e=>Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)("input",{className:"form-check-input",type:"radio",name:"requireAll",id:`requireAll${e}`,checked:t===e,onChange:t=>s(e)}),Object(an.jsx)(ur,{children:We(`wiredfurni.params.not_requireall.${e}`)})]},e)))]})})},Ch=e=>Object(an.jsx)(uh,{requiresFurni:tn.STUFF_SELECTION_OPTION_BY_ID_OR_BY_TYPE,hasSpecialInput:!1,save:null}),vh=e=>{const[t,s]=Object(c.useState)(0),[n,r]=Object(c.useState)(0),[i,a]=Object(c.useState)(0),{trigger:o=null,setIntParams:l=null}=ri();return Object(c.useEffect)((()=>{s(o.getBoolean(0)?1:0),r(o.getBoolean(1)?1:0),a(o.getBoolean(2)?1:0)}),[o]),Object(an.jsx)(uh,{requiresFurni:tn.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:!0,save:()=>l([t,n,i]),children:Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:We("wiredfurni.params.conditions")}),Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)("input",{className:"form-check-input",type:"checkbox",id:"stateFlag",checked:!!t,onChange:e=>s(e.target.checked?1:0)}),Object(an.jsx)(ur,{children:We("wiredfurni.params.condition.state")})]}),Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)("input",{className:"form-check-input",type:"checkbox",id:"directionFlag",checked:!!n,onChange:e=>r(e.target.checked?1:0)}),Object(an.jsx)(ur,{children:We("wiredfurni.params.condition.direction")})]}),Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)("input",{className:"form-check-input",type:"checkbox",id:"positionFlag",checked:!!i,onChange:e=>a(e.target.checked?1:0)}),Object(an.jsx)(ur,{children:We("wiredfurni.params.condition.position")})]})]})})},Nh=e=>{const[t,s]=Object(c.useState)(-1),{trigger:n=null,setIntParams:r=null}=ri();return Object(c.useEffect)((()=>{s(n.intData.length>0?n.intData[0]:0)}),[n]),Object(an.jsx)(uh,{requiresFurni:tn.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>r([t]),children:Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:We("wiredfurni.params.allowbefore",["seconds"],[Qs(t)])}),Object(an.jsx)(Fi.a,{className:"nitro-slider",min:1,max:1200,value:t,onChange:e=>s(e)})]})})},Th=e=>{const[t,s]=Object(c.useState)(-1),{trigger:n=null,setIntParams:r=null}=ri();return Object(c.useEffect)((()=>{s(n.intData.length>0?n.intData[0]:0)}),[n]),Object(an.jsx)(uh,{requiresFurni:tn.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>r([t]),children:Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:We("wiredfurni.params.allowafter",["seconds"],[Qs(t)])}),Object(an.jsx)(Fi.a,{className:"nitro-slider",min:1,max:1200,value:t,onChange:e=>s(e)})]})})},Sh=e=>{const[t,s]=Object(c.useState)(1),[n,r]=Object(c.useState)(1),{trigger:i=null,setIntParams:a=null}=ri();return Object(c.useEffect)((()=>{i.intData.length>=2?(s(i.intData[0]),r(i.intData[1])):(s(1),r(1))}),[i]),Object(an.jsxs)(uh,{requiresFurni:tn.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>a([t,n]),children:[Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:We("wiredfurni.params.usercountmin",["value"],[t.toString()])}),Object(an.jsx)(Fi.a,{className:"nitro-slider",min:1,max:50,value:t,onChange:e=>s(e)})]}),Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:We("wiredfurni.params.usercountmax",["value"],[n.toString()])}),Object(an.jsx)(Fi.a,{className:"nitro-slider",min:1,max:50,value:n,onChange:e=>r(e)})]})]})},wh=e=>{const{requiresFurni:t=tn.STUFF_SELECTION_OPTION_NONE,save:s=null,hasSpecialInput:n=!1,children:r=null}=e;return Object(an.jsx)(kj,{wiredType:"trigger",requiresFurni:t,hasSpecialInput:n,save:()=>s&&s(),children:r})},Rh=e=>{const[t,s]=Object(c.useState)(""),[n,r]=Object(c.useState)(0),{trigger:i=null,setStringParam:a=null}=ri();return Object(c.useEffect)((()=>{s(i.stringData),r(i.stringData?1:0)}),[i]),Object(an.jsx)(wh,{requiresFurni:tn.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>a(1===n?t:""),children:Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:We("wiredfurni.params.picktriggerer")}),Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)("input",{className:"form-check-input",type:"radio",name:"avatarMode",id:"avatarMode0",checked:0===n,onChange:e=>r(0)}),Object(an.jsx)(ur,{children:We("wiredfurni.params.anyavatar")})]}),Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)("input",{className:"form-check-input",type:"radio",name:"avatarMode",id:"avatarMode1",checked:1===n,onChange:e=>r(1)}),Object(an.jsx)(ur,{children:We("wiredfurni.params.certainavatar")})]}),1===n&&Object(an.jsx)("input",{type:"text",className:"form-control form-control-sm",value:t,onChange:e=>s(e.target.value)})]})})},yh=e=>{const[t,s]=Object(c.useState)(""),[n,r]=Object(c.useState)(-1),{trigger:i=null,setStringParam:a=null,setIntParams:o=null}=ri();return Object(c.useEffect)((()=>{s(i.stringData),r(i.intData.length>0?i.intData[0]:0)}),[i]),Object(an.jsxs)(wh,{requiresFurni:tn.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>{a(t),o([n])},children:[Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:We("wiredfurni.params.whatissaid")}),Object(an.jsx)("input",{type:"text",className:"form-control form-control-sm",value:t,onChange:e=>s(e.target.value)})]}),Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:We("wiredfurni.params.picktriggerer")}),Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)("input",{className:"form-check-input",type:"radio",name:"triggererAvatar",id:"triggererAvatar0",checked:0===n,onChange:e=>r(0)}),Object(an.jsx)(ur,{children:We("wiredfurni.params.anyavatar")})]}),Object(an.jsxs)(hn,{alignItems:"center",gap:1,children:[Object(an.jsx)("input",{className:"form-check-input",type:"radio",name:"triggererAvatar",id:"triggererAvatar1",checked:1===n,onChange:e=>r(1)}),Object(an.jsx)(ur,{children:F().userName})]})]})]})},kh=e=>Object(an.jsx)(wh,{requiresFurni:tn.STUFF_SELECTION_OPTION_BY_ID_OR_BY_TYPE,hasSpecialInput:!1,save:null}),Ah=e=>Object(an.jsx)(wh,{requiresFurni:tn.STUFF_SELECTION_OPTION_BY_ID_OR_BY_TYPE,hasSpecialInput:!1,save:null}),Dh=e=>{const[t,s]=Object(c.useState)(""),{trigger:n=null,setStringParam:r=null}=ri();return Object(c.useEffect)((()=>{s(n.stringData)}),[n]),Object(an.jsx)(wh,{requiresFurni:tn.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>r(t),children:Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:We("wiredfurni.params.bot.name")}),Object(an.jsx)("input",{type:"text",className:"form-control form-control-sm",maxLength:32,value:t,onChange:e=>s(e.target.value)})]})})},Lh=e=>{const[t,s]=Object(c.useState)(""),{trigger:n=null,setStringParam:r=null}=ri();return Object(c.useEffect)((()=>{s(n.stringData)}),[n]),Object(an.jsx)(wh,{requiresFurni:tn.STUFF_SELECTION_OPTION_BY_ID_OR_BY_TYPE,hasSpecialInput:!0,save:()=>r(t),children:Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:We("wiredfurni.params.bot.name")}),Object(an.jsx)("input",{type:"text",className:"form-control form-control-sm",maxLength:32,value:t,onChange:e=>s(e.target.value)})]})})},Ph=e=>Object(an.jsx)(wh,{requiresFurni:tn.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!1,save:null}),Uh=e=>{const[t,s]=Object(c.useState)(1),{trigger:n=null,setIntParams:r=null}=ri();return Object(c.useEffect)((()=>{s(n.intData.length>0?n.intData[0]:0)}),[n]),Object(an.jsx)(wh,{requiresFurni:tn.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>r([t]),children:Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:We("wiredfurni.params.settime",["seconds"],[Qs(t)])}),Object(an.jsx)(Fi.a,{className:"nitro-slider",min:1,max:1200,value:t,onChange:e=>s(e)})]})})},Mh=e=>{const[t,s]=Object(c.useState)(1),{trigger:n=null,setIntParams:r=null}=ri();return Object(c.useEffect)((()=>{s(n.intData.length>0?n.intData[0]:0)}),[n]),Object(an.jsx)(wh,{requiresFurni:tn.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>r([t]),children:Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:We("wiredfurni.params.setlongtime",["time"],[a.Zb.format(5*t).toString()])}),Object(an.jsx)(Fi.a,{className:"nitro-slider",min:1,max:120,value:t,onChange:e=>s(e)})]})})},Fh=e=>{const[t,s]=Object(c.useState)(1),{trigger:n=null,setIntParams:r=null}=ri();return Object(c.useEffect)((()=>{s(n.intData.length>0?n.intData[0]:0)}),[n]),Object(an.jsx)(wh,{requiresFurni:tn.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>r([t]),children:Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:We("wiredfurni.params.settime",["seconds"],[Qs(t)])}),Object(an.jsx)(Fi.a,{className:"nitro-slider",min:1,max:60,value:t,onChange:e=>s(e)})]})})},Bh=e=>Object(an.jsx)(wh,{requiresFurni:tn.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!1,save:null}),Hh=e=>Object(an.jsx)(wh,{requiresFurni:tn.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!1,save:null}),Gh=e=>{const[t,s]=Object(c.useState)(1),{trigger:n=null,setIntParams:r=null}=ri();return Object(c.useEffect)((()=>{s(n.intData.length>0?n.intData[0]:0)}),[n]),Object(an.jsx)(wh,{requiresFurni:tn.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>r([t]),children:Object(an.jsxs)(Fn,{gap:1,children:[Object(an.jsx)(ur,{bold:!0,children:We("wiredfurni.params.setscore",["points"],[t.toString()])}),Object(an.jsx)(Fi.a,{className:"nitro-slider",min:1,max:1e3,value:t,onChange:e=>s(e)})]})})},Wh=e=>Object(an.jsx)(wh,{requiresFurni:tn.STUFF_SELECTION_OPTION_BY_ID_OR_BY_TYPE,hasSpecialInput:!1,save:null}),Vh=e=>{const{trigger:t=null}=ri();return t?t instanceof a.pj?(e=>{switch(e){case Js.BOT_CHANGE_FIGURE:return Object(an.jsx)(Dj,{});case Js.BOT_FOLLOW_AVATAR:return Object(an.jsx)(Lj,{});case Js.BOT_GIVE_HAND_ITEM:return Object(an.jsx)(Uj,{});case Js.BOT_MOVE:return Object(an.jsx)(Mj,{});case Js.BOT_TALK:return Object(an.jsx)(Bj,{});case Js.BOT_TALK_DIRECT_TO_AVTR:return Object(an.jsx)(Fj,{});case Js.BOT_TELEPORT:return Object(an.jsx)(Hj,{});case Js.CALL_ANOTHER_STACK:return Object(an.jsx)(Gj,{});case Js.CHASE:return Object(an.jsx)(Wj,{});case Js.CHAT:return Object(an.jsx)(Vj,{});case Js.FLEE:return Object(an.jsx)(qj,{});case Js.GIVE_REWARD:return Object(an.jsx)(zj,{});case Js.GIVE_SCORE:return Object(an.jsx)($j,{});case Js.GIVE_SCORE_TO_PREDEFINED_TEAM:return Object(an.jsx)(Yj,{});case Js.JOIN_TEAM:return Object(an.jsx)(Kj,{});case Js.KICK_FROM_ROOM:return Object(an.jsx)(Xj,{});case Js.LEAVE_TEAM:return Object(an.jsx)(Qj,{});case Js.MOVE_FURNI:return Object(an.jsx)(ch,{});case Js.MOVE_AND_ROTATE_FURNI:return Object(an.jsx)(eh,{});case Js.MOVE_FURNI_TO:return Object(an.jsx)(sh,{});case Js.MUTE_USER:return Object(an.jsx)(ih,{});case Js.RESET:return Object(an.jsx)(ah,{});case Js.SET_FURNI_STATE:return Object(an.jsx)(oh,{});case Js.TELEPORT:return Object(an.jsx)(lh,{});case Js.TOGGLE_FURNI_STATE:return Object(an.jsx)(dh,{})}return null})(t.code):t instanceof a.Ci?(e=>{switch(e){case cn.AVATAR_ENTERS_ROOM:return Object(an.jsx)(Rh,{});case cn.AVATAR_SAYS_SOMETHING:return Object(an.jsx)(yh,{});case cn.AVATAR_WALKS_OFF_FURNI:return Object(an.jsx)(kh,{});case cn.AVATAR_WALKS_ON_FURNI:return Object(an.jsx)(Ah,{});case cn.BOT_REACHED_AVATAR:return Object(an.jsx)(Dh,{});case cn.BOT_REACHED_STUFF:return Object(an.jsx)(Lh,{});case cn.COLLISION:return Object(an.jsx)(Ph,{});case cn.EXECUTE_ONCE:return Object(an.jsx)(Uh,{});case cn.EXECUTE_PERIODICALLY:return Object(an.jsx)(Fh,{});case cn.EXECUTE_PERIODICALLY_LONG:return Object(an.jsx)(Mh,{});case cn.GAME_ENDS:return Object(an.jsx)(Bh,{});case cn.GAME_STARTS:return Object(an.jsx)(Hh,{});case cn.SCORE_ACHIEVED:return Object(an.jsx)(Gh,{});case cn.TOGGLE_FURNI:return Object(an.jsx)(Wh,{})}return null})(t.code):t instanceof a.ub?(e=>{switch(e){case Zs.ACTOR_HAS_HANDITEM:return Object(an.jsx)(hh,{});case Zs.ACTOR_IS_GROUP_MEMBER:case Zs.NOT_ACTOR_IN_GROUP:return Object(an.jsx)(bh,{});case Zs.ACTOR_IS_ON_FURNI:case Zs.NOT_ACTOR_ON_FURNI:return Object(an.jsx)(gh,{});case Zs.ACTOR_IS_IN_TEAM:case Zs.NOT_ACTOR_IN_TEAM:return Object(an.jsx)(Oh,{});case Zs.ACTOR_IS_WEARING_BADGE:case Zs.NOT_ACTOR_WEARS_BADGE:return Object(an.jsx)(ph,{});case Zs.ACTOR_IS_WEARING_EFFECT:case Zs.NOT_ACTOR_WEARING_EFFECT:return Object(an.jsx)(fh,{});case Zs.DATE_RANGE_ACTIVE:return Object(an.jsx)(xh,{});case Zs.FURNIS_HAVE_AVATARS:case Zs.FURNI_NOT_HAVE_HABBO:return Object(an.jsx)(_h,{});case Zs.HAS_STACKED_FURNIS:return Object(an.jsx)(Ih,{});case Zs.NOT_HAS_STACKED_FURNIS:return Object(an.jsx)(Eh,{});case Zs.STUFF_TYPE_MATCHES:case Zs.NOT_FURNI_IS_OF_TYPE:return Object(an.jsx)(Ch,{});case Zs.STATES_MATCH:case Zs.NOT_STATES_MATCH:return Object(an.jsx)(vh,{});case Zs.TIME_ELAPSED_LESS:return Object(an.jsx)(Nh,{});case Zs.TIME_ELAPSED_MORE:return Object(an.jsx)(Th,{});case Zs.USER_COUNT_IN:case Zs.NOT_USER_COUNT_IN:return Object(an.jsx)(Sh,{})}return null})(t.code):null:null},qh=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)(!0);return Or(a.mh.CREATED,(e=>r(!1))),Or(a.mh.ENDED,(e=>r(e.openLandingView))),Object(c.useEffect)((()=>{s(!0),O().connection.onReady()}),[]),Object(c.useEffect)((()=>{const e={linkReceived:e=>{const t=e.split("/");if(!(t.length<2))if("open"!==t[1]);else if(t.length>2)if("credits"===t[2]);else{const e=t[2];a.ce.openHabblet(e)}},eventUrlPrefix:"habblet/"};return l(e),()=>E(e)}),[]),Object(an.jsxs)(on,{fit:!0,children:[Object(an.jsx)(Jn,{type:Xn.FADE_IN,inProp:n,timeout:300,children:Object(an.jsx)(yl,{})}),Object(an.jsx)(Ej,{isInRoom:!n}),Object(an.jsx)(jd,{}),Object(an.jsx)(_j,{}),Object(an.jsx)(Za,{}),Object(an.jsx)(Vh,{}),Object(an.jsx)(Pi,{}),Object(an.jsx)(Ti,{}),Object(an.jsx)(yd,{}),Object(an.jsx)(Kl,{}),Object(an.jsx)(Qa,{}),Object(an.jsx)(Do,{}),Object(an.jsx)(Kd,{}),Object(an.jsx)(Rj,{}),Object(an.jsx)(wj,{}),Object(an.jsx)(Qo,{}),Object(an.jsx)(Vi,{}),Object(an.jsx)(El,{}),Object(an.jsx)(xo,{}),Object(an.jsx)(Ad,{}),Object(an.jsx)(cl,{}),Object(an.jsx)(ol,{}),Object(an.jsx)(Yi,{})]})};var zh=()=>{const e=[];self.onmessage=t=>{if(!t)return;const s=t.data;switch(s.type){case"CREATE_INTERVAL":{const t=s.timerId,n=s.time,r=s.response,c=setInterval((()=>postMessage(r)),n);return void e.push({id:t,interval:c})}case"REMOVE_INTERVAL":{const t=s.timerId,n=0;for(;n<e.length;){const s=e[n];if(s.id===t)return clearInterval(s.interval),void e.splice(n,1)}}}}};class Yh extends Worker{constructor(e){const t=e.toString(),s=new Blob([`(${t})()`]);super(URL.createObjectURL(s))}}a.vf.UI_VERSION="2.1.1";const $h=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)(!1),[i,l]=Object(c.useState)("Getting Ready"),[d,u]=Object(c.useState)(0),[j,h]=Object(c.useState)(!0);if(!o()){if(!NitroConfig)throw new Error("NitroConfig is not defined!");a.ef.bootstrap();const e=new Yh(zh);a.ef.instance.setWorker(e)}const b=Object(c.useCallback)((e=>{switch(e.type){case a.vb.LOADED:return o().localization.init(),void u((e=>e+20));case a.vb.FAILED:return r(!0),void l("Configuration Failed");case a.ef.WEBGL_UNAVAILABLE:return r(!0),void l("WebGL Required");case a.ef.WEBGL_CONTEXT_LOST:return r(!0),l("WebGL Context Lost - Reloading"),void setTimeout((()=>window.location.reload()),1500);case a.hf.CONNECTION_HANDSHAKING:return void u((e=>e+20));case a.hf.CONNECTION_HANDSHAKE_FAILED:return r(!0),void l("Handshake Failed");case a.hf.CONNECTION_AUTHENTICATED:return u((e=>e+20)),o().init(),void(a.pe.available&&a.pe.call("legacyTrack","authentication","authok",[]));case a.hf.CONNECTION_ERROR:return r(!0),void l("Connection Error");case a.hf.CONNECTION_CLOSED:return l("Connection Error"),void a.ce.send(-1,"client.init.handshake.fail");case a.Eg.ENGINE_INITIALIZED:return u((e=>e+20)),void setTimeout((()=>s(!0)),300);case a.lf.LOADED:{const e=p("preload.assets.urls"),t=[];if(e&&e.length)for(const s of e)t.push(o().core.configuration.interpolate(s));return void o().core.asset.downloadAssets(t,(e=>{e?(O().init(),u((e=>e+20))):(r(!0),l("Assets Failed"))}))}}}),[]);return gr(a.ef.WEBGL_UNAVAILABLE,b),gr(a.ef.WEBGL_CONTEXT_LOST,b),gr(a.hf.CONNECTION_HANDSHAKING,b),gr(a.hf.CONNECTION_HANDSHAKE_FAILED,b),gr(a.hf.CONNECTION_AUTHENTICATED,b),gr(a.hf.CONNECTION_ERROR,b),gr(a.hf.CONNECTION_CLOSED,b),mr(a.Eg.ENGINE_INITIALIZED,b),((e,t)=>{hr(e,o().localization.events,t)})(a.lf.LOADED,b),br(a.vb.LOADED,b),br(a.vb.FAILED,b),Object(c.useEffect)((()=>{a.oj.isWebGLAvailable()?o().core.configuration.init():$e(new a.jf(a.ef.WEBGL_UNAVAILABLE));const e=e=>h(!(window.devicePixelRatio%1));return window.addEventListener("resize",e),e(),()=>{window.removeEventListener("resize",e)}}),[]),Object(an.jsxs)(on,{fit:!0,overflow:"hidden",className:j&&"image-rendering-pixelated",children:[(!t||n)&&Object(an.jsx)(jr,{isError:n,message:i,percent:d}),Object(an.jsx)(Jn,{type:Xn.FADE_IN,inProp:t,children:Object(an.jsx)(qh,{})}),Object(an.jsx)(on,{id:"draggable-windows-container"})]})};s(133);n.b.add(r.a),Object(i.createRoot)(document.getElementById("root")).render(Object(an.jsx)($h,{}))}},[[134,2,1,3]]]);